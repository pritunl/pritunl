/*
 * LESS - Leaner CSS v1.4.2
 * http://lesscss.org
 *
 * Copyright (c) 2009-2013, Alexis Sellier
 * Licensed under the Apache 2.0 License.
 *
 * @licence
 */

//     Underscore.js 1.7.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*
Copyright 2014 Igor Vaynberg

Version: 3.5.1 Timestamp: Tue Jul 22 18:58:56 EDT 2014

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

http://www.apache.org/licenses/LICENSE-2.0
http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the Apache License
or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
either express or implied. See the Apache License and the GPL License for the specific language governing
permissions and limitations under the Apache License and the GPL License.
*/

if(function(e,t){function n(t){return e.less[t.split("/")[1]]}function f(){"development"===r.env?(r.optimization=0,r.watchTimer=setInterval(function(){r.watchMode&&g(function(e,t,n,i,s){e?k(e,i.href):t&&S(t.toCSS(r),i,s.lastModified)})},r.poll)):r.optimization=3}function m(){for(var e=document.getElementsByTagName("style"),t=0;t<e.length;t++)if(e[t].type.match(p)){var n=new r.tree.parseEnv(r);n.filename=document.location.href.replace(/#.*$/,""),new r.Parser(n).parse(e[t].innerHTML||"",function(n,i){if(n)return k(n,"inline");var s=i.toCSS(r),o=e[t];o.type="text/css",o.styleSheet?o.styleSheet.cssText=s:o.innerHTML=s})}}function g(e,t){for(var n=0;n<r.sheets.length;n++)w(r.sheets[n],e,t,r.sheets.length-(n+1))}function y(e,t){var i,s,o,u,n=b(e),r=b(t),a="";if(n.hostPart!==r.hostPart)return"";for(s=Math.max(r.directories.length,n.directories.length),i=0;s>i&&r.directories[i]===n.directories[i];i++);for(u=r.directories.slice(i),o=n.directories.slice(i),i=0;i<u.length-1;i++)a+="../";for(i=0;i<o.length-1;i++)a+=o[i]+"/";return a}function b(e,t){var o,u,n=/^((?:[a-z-]+:)?\/+?(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,r=e.match(n),i={},s=[];if(!r)throw new Error("Could not parse sheet href - '"+e+"'");if(!r[1]||r[2]){if(u=t.match(n),!u)throw new Error("Could not parse page url - '"+t+"'");r[1]=r[1]||u[1]||"",r[2]||(r[3]=u[3]+r[3])}if(r[3]){for(s=r[3].replace(/\\/g,"/").split("/"),o=0;o<s.length;o++)"."===s[o]&&(s.splice(o,1),o-=1);for(o=0;o<s.length;o++)".."===s[o]&&o>0&&(s.splice(o-1,2),o-=2)}return i.hostPart=r[1],i.directories=s,i.path=r[1]+s.join("/"),i.fileUrl=i.path+(r[4]||""),i.url=i.fileUrl+(r[5]||""),i}function w(t,n,i,s){var h,o=b(t.href,e.location.href),u=o.url,a=l&&l.getItem(u),f=l&&l.getItem(u+":timestamp"),c={css:a,timestamp:f},p={relativeUrls:r.relativeUrls,currentDirectory:o.path,filename:u};t instanceof r.tree.parseEnv?(h=new r.tree.parseEnv(t),p.entryPath=h.currentFileInfo.entryPath,p.rootpath=h.currentFileInfo.rootpath,p.rootFilename=h.currentFileInfo.rootFilename):(h=new r.tree.parseEnv(r),h.mime=t.type,p.entryPath=o.path,p.rootpath=r.rootpath||o.path,p.rootFilename=u),h.relativeUrls&&(r.rootpath?p.rootpath=b(r.rootpath+y(o.path,p.entryPath)).path:p.rootpath=o.path),x(u,t.type,function(e,a){if(v+=e.replace(/@import .+?;/gi,""),!i&&c&&a&&new Date(a).valueOf()===new Date(c.timestamp).valueOf())S(c.css,t),n(null,null,e,t,{local:!0,remaining:s},u);else try{h.contents[u]=e,h.paths=[o.path],h.currentFileInfo=p,new r.Parser(h).parse(e,function(r,i){if(r)return n(r,null,null,t);try{n(r,i,e,t,{local:!1,lastModified:a,remaining:s},u),h.currentFileInfo.rootFilename===u&&N(document.getElementById("less-error-message:"+E(u)))}catch(r){n(r,null,null,t)}})}catch(f){n(f,null,null,t)}},function(e,r){n({type:"File",message:"'"+r+"' wasn't found ("+e+")"},null,null,t)})}function E(e){return e.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function S(e,t,n){var r=t.href||"",i="less:"+(t.title||E(r)),s=document.getElementById(i),o=!1,u=document.createElement("style");if(u.setAttribute("type","text/css"),t.media&&u.setAttribute("media",t.media),u.id=i,u.styleSheet)try{u.styleSheet.cssText=e}catch(a){throw new Error("Couldn't reassign styleSheet.cssText.")}else u.appendChild(document.createTextNode(e)),o=null!==s&&s.childNodes.length>0&&u.childNodes.length>0&&s.firstChild.nodeValue===u.firstChild.nodeValue;var f=document.getElementsByTagName("head")[0];if(null==s||o===!1){var c=t&&t.nextSibling||null;(c||document.getElementsByTagName("head")[0]).parentNode.insertBefore(u,c)}if(s&&o===!1&&f.removeChild(s),n&&l){C("saving "+r+" to cache.");try{l.setItem(r,e),l.setItem(r+":timestamp",n)}catch(a){C("failed to save")}}}function x(e,t,n,i){function a(t,n,r){t.status>=200&&t.status<300?n(t.responseText,t.getResponseHeader("Last-Modified")):"function"==typeof r&&r(t.status,e)}var s=T(),u=o?r.fileAsync:r.async;"function"==typeof s.overrideMimeType&&s.overrideMimeType("text/css"),s.open("GET",e,u),s.setRequestHeader("Accept",t||"text/x-less, text/css; q=0.9, */*; q=0.5"),s.send(null),o&&!r.fileAsync?0===s.status||s.status>=200&&s.status<300?n(s.responseText):i(s.status,e):u?s.onreadystatechange=function(){4==s.readyState&&a(s,n,i)}:a(s,n,i)}function T(){if(e.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){return C("browser doesn't support AJAX."),null}}function N(e){return e&&e.parentNode.removeChild(e)}function C(e){"development"==r.env&&"undefined"!=typeof console&&console.log("less: "+e)}function k(e,n){var u,a,i="less-error-message:"+E(n||""),s='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',o=document.createElement("div"),f=[],l=e.filename||n,c=l.match(/([^\/]+(\?.*)?)$/)[1];o.id=i,o.className="less-error-message",a="<h3>"+(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+'</h3><p>in <a href="'+l+'">'+c+"</a> ";var h=function(e,n,r){e.extract[n]!=t&&f.push(s.replace(/\{line\}/,(parseInt(e.line)||0)+(n-1)).replace(/\{class\}/,r).replace(/\{content\}/,e.extract[n]))};e.extract?(h(e,0,""),h(e,1,"line"),h(e,2,""),a+="on line "+e.line+", column "+(e.column+1)+":</p><ul>"+f.join("")+"</ul>"):e.stack&&(a+="<br/>"+e.stack.split("\n").slice(1).join("<br/>")),o.innerHTML=a,S([".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),o.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"==r.env&&(u=setInterval(function(){document.body&&(document.getElementById(i)?document.body.replaceChild(o,document.getElementById(i)):document.body.insertBefore(o,document.body.firstChild),clearInterval(u))},10))}var r,i;"object"==typeof environment&&"[object Environment]"==={}.toString.call(environment)?(r="undefined"==typeof e?{}:e.less={},i=r.tree={},r.mode="rhino"):"undefined"==typeof e?(r=exports,i=n("./tree"),r.mode="node"):("undefined"==typeof e.less&&(e.less={}),r=e.less,i=e.less.tree={},r.mode="browser"),r.Parser=function(t){function m(){a=c[u],f=o,h=o}function g(){c[u]=a,o=f,h=o}function y(){o>h&&(c[u]=c[u].slice(o-h),h=o)}function b(e){var t=e.charCodeAt(0);return 32===t||10===t||9===t}function w(e){var t,r;if(e instanceof Function)return e.call(p.parsers);if("string"==typeof e)t=s.charAt(o)===e?e:null,r=1,y();else{if(y(),!(t=e.exec(c[u])))return null;r=t[0].length}return t?(E(r),"string"==typeof t?t:1===t.length?t[0]:t):void 0}function E(e){for(var t=o,n=u,r=o+c[u].length,i=o+=e;r>o&&b(s.charAt(o));)o++;return c[u]=c[u].slice(e+(o-i)),h=o,0===c[u].length&&u<c.length-1&&u++,t!==o||n!==u}function S(e,t){var n=w(e);return n?n:void x(t||("string"==typeof e?"expected '"+e+"' got '"+s.charAt(o)+"'":"unexpected token"))}function x(e,t){var n=new Error(e);throw n.index=o,n.type=t||"Syntax",n}function T(e){return"string"==typeof e?s.charAt(o)===e:e.test(c[u])?!0:!1}function N(e,t){return e.filename&&t.currentFileInfo.filename&&e.filename!==t.currentFileInfo.filename?p.imports.contents[e.filename]:s}function C(e,t){for(var n=e,r=-1;n>=0&&"\n"!==t.charAt(n);n--)r++;return{line:"number"==typeof e?(t.slice(0,e).match(/\n/g)||"").length:null,column:r}}function k(e,t,i){var s=i.currentFileInfo.filename;return"browser"!==r.mode&&"rhino"!==r.mode&&(s=n("path").resolve(s)),{lineNumber:C(e,t).line+1,fileName:s}}function L(e,t){var n=N(e,t),r=C(e.index,n),i=r.line,s=r.column,o=n.split("\n");this.type=e.type||"Syntax",this.message=e.message,this.filename=e.filename||t.currentFileInfo.filename,this.index=e.index,this.line="number"==typeof i?i+1:null,this.callLine=e.call&&C(e.call,n).line+1,this.callExtract=o[C(e.call,n).line],this.stack=e.stack,this.column=s,this.extract=[o[i-1],o[i],o[i+1]]}var s,o,u,a,f,l,c,h,p;t instanceof i.parseEnv||(t=new i.parseEnv(t));var v=this.imports={paths:t.paths||[],queue:[],files:t.files,contents:t.contents,mime:t.mime,error:null,push:function(e,n,i){var s=this;this.queue.push(e),r.Parser.importer(e,n,function(t,n,r){s.queue.splice(s.queue.indexOf(e),1);var o=r in s.files;s.files[r]=n,t&&!s.error&&(s.error=t),i(t,n,o)},t)}};return L.prototype=new Error,L.prototype.constructor=L,this.env=t=t||{},this.optimization="optimization"in this.env?this.env.optimization:1,p={imports:v,parse:function(e,a){var f,g,y,S=null;if(o=u=h=l=0,s=e.replace(/\r\n/g,"\n"),s=s.replace(/^\uFEFF/,""),c=function(e){for(var a,l,h,p,n=0,r=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,i=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,o=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,u=0,f=e[0],c=0;c<s.length;)if(r.lastIndex=c,(a=r.exec(s))&&a.index===c&&(c+=a[0].length,f.push(a[0])),h=s.charAt(c),i.lastIndex=o.lastIndex=c,(a=o.exec(s))&&a.index===c)c+=a[0].length,f.push(a[0]);else if(l||"/"!==h||(p=s.charAt(c+1),"/"!==p&&"*"!==p||!(a=i.exec(s))||a.index!==c)){switch(h){case"{":if(!l){u++,f.push(h);break}case"}":if(!l){u--,f.push(h),e[++n]=f=[];break}case"(":if(!l){l=!0,f.push(h);break}case")":if(l){l=!1,f.push(h);break}default:f.push(h)}c++}else c+=a[0].length,f.push(a[0]);return 0!=u&&(S=new L({index:c-1,type:"Parse",message:u>0?"missing closing `}`":"missing opening `{`",filename:t.currentFileInfo.filename},t)),e.map(function(e){return e.join("")})}([[]]),S)return a(new L(S,t));try{f=new i.Ruleset([],w(this.parsers.primary)),f.root=!0,f.firstRoot=!0}catch(x){return a(new L(x,t))}if(f.toCSS=function(e){return function(s,o){s=s||{};var a=new i.evalEnv(s);"object"==typeof o&&!Array.isArray(o)&&(o=Object.keys(o).map(function(e){var t=o[e];return t instanceof i.Value||(t instanceof i.Expression||(t=new i.Expression([t])),t=new i.Value([t])),new i.Rule("@"+e,t,!1,0)}),a.frames=[new i.Ruleset(null,o)]);try{var f=e.call(this,a);(new i.joinSelectorVisitor).run(f),(new i.processExtendsVisitor).run(f);var l=f.toCSS({compress:Boolean(s.compress),dumpLineNumbers:t.dumpLineNumbers,strictUnits:Boolean(s.strictUnits)})}catch(c){throw new L(c,t)}return s.yuicompress&&"node"===r.mode?n("ycssmin").cssmin(l,s.maxLineLen):s.compress?l.replace(/(\s)+/g,"$1"):l}}(f.eval),o<s.length-1){o=l,y=s.split("\n"),g=(s.slice(0,o).match(/\n/g)||"").length+1;for(var T=o,N=-1;T>=0&&"\n"!==s.charAt(T);T--)N++;S={type:"Parse",message:"Unrecognised input",index:o,filename:t.currentFileInfo.filename,line:g,column:N,extract:[y[g-2],y[g-1],y[g]]}}var C=function(e){e=S||e||p.imports.error,e?(e instanceof L||(e=new L(e,t)),a(e)):a(null,f)};t.processImports!==!1?new i.importVisitor(this.imports,C).run(f):C()},parsers:{primary:function(){for(var e,t=[];(e=w(this.extendRule)||w(this.mixin.definition)||w(this.rule)||w(this.ruleset)||w(this.mixin.call)||w(this.comment)||w(this.directive))||w(/^[\s\n]+/)||w(/^;+/);)e&&t.push(e);return t},comment:function(){var e;if("/"===s.charAt(o))return"/"===s.charAt(o+1)?new i.Comment(w(/^\/\/.*/),!0):(e=w(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new i.Comment(e):void 0},entities:{quoted:function(){var e,r,n=o,u=o;return"~"===s.charAt(n)&&(n++,r=!0),'"'===s.charAt(n)||"'"===s.charAt(n)?(r&&w("~"),(e=w(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/))?new i.Quoted(e[0],e[1]||e[2],r,u,t.currentFileInfo):void 0):void 0},keyword:function(){var e;return(e=w(/^[_A-Za-z-][_A-Za-z0-9-]*/))?i.colors.hasOwnProperty(e)?new i.Color(i.colors[e].slice(1)):new i.Keyword(e):void 0},call:function(){var e,n,r,s,a=o;if(e=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(c[u])){if(e=e[1],n=e.toLowerCase(),"url"===n)return null;if(o+=e.length,"alpha"===n&&(s=w(this.alpha),"undefined"!=typeof s))return s;if(w("("),r=w(this.entities.arguments),w(")"))return e?new i.Call(e,r,a,t.currentFileInfo):void 0}},arguments:function(){for(var t,e=[];(t=w(this.entities.assignment)||w(this.expression))&&(e.push(t),w(",")););return e},literal:function(){return w(this.entities.dimension)||w(this.entities.color)||w(this.entities.quoted)||w(this.entities.unicodeDescriptor)},assignment:function(){var e,t;return(e=w(/^\w+(?=\s?=)/i))&&w("=")&&(t=w(this.entity))?new i.Assignment(e,t):void 0},url:function(){var e;if("u"===s.charAt(o)&&w(/^url\(/))return e=w(this.entities.quoted)||w(this.entities.variable)||w(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",S(")"),new i.URL(null!=e.value||e instanceof i.Variable?e:new i.Anonymous(e),t.currentFileInfo)},variable:function(){var e,n=o;return"@"===s.charAt(o)&&(e=w(/^@@?[\w-]+/))?new i.Variable(e,n,t.currentFileInfo):void 0},variableCurly:function(){var n,r=o;return"@"===s.charAt(o)&&(n=w(/^@\{([\w-]+)\}/))?new i.Variable("@"+n[1],r,t.currentFileInfo):void 0},color:function(){var e;return"#"===s.charAt(o)&&(e=w(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))?new i.Color(e[1]):void 0},dimension:function(){var e,t=s.charCodeAt(o);if(!(t>57||43>t||47===t||44==t))return(e=w(/^([+-]?\d*\.?\d+)(%|[a-z]+)?/))?new i.Dimension(e[1],e[2]):void 0},unicodeDescriptor:function(){var e;return(e=w(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))?new i.UnicodeDescriptor(e[0]):void 0},javascript:function(){var e,n,t=o;return"~"===s.charAt(t)&&(t++,n=!0),"`"===s.charAt(t)?(n&&w("~"),(e=w(/^`([^`]*)`/))?new i.JavaScript(e[1],o,n):void 0):void 0}},variable:function(){var e;return"@"===s.charAt(o)&&(e=w(/^(@[\w-]+)\s*:/))?e[1]:void 0},extend:function(e){var t,n,s,r=o,u=[];if(w(e?/^&:extend\(/:/^:extend\(/)){do{for(s=null,t=[];!(s=w(/^(all)(?=\s*(\)|,))/))&&(n=w(this.element),n);)t.push(n);s=s&&s[1],u.push(new i.Extend(new i.Selector(t),s,r))}while(w(","));return S(/^\)/),e&&S(/^;/),u}},extendRule:function(){return this.extend(!0)},mixin:{call:function(){var n,r,u,e=[],l=o,c=s.charAt(o),h=!1;if("."===c||"#"===c){for(m();n=w(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/);)e.push(new i.Element(r,n,o)),r=w(">");return w("(")&&(u=this.mixin.args.call(this,!0).args,S(")")),u=u||[],w(this.important)&&(h=!0),e.length>0&&(w(";")||T("}"))?new i.mixin.Call(e,u,l,t.currentFileInfo,h):void g()}},args:function(e){for(var r,a,f,l,c,h,t=[],n=[],u=[],p={args:null,variadic:!1};;){if(e)h=w(this.expression);else{if(w(this.comment),"."===s.charAt(o)&&w(/^\.{3}/)){p.variadic=!0,w(";")&&!r&&(r=!0),(r?n:u).push({variadic:!0});break}h=w(this.entities.variable)||w(this.entities.literal)||w(this.entities.keyword)}if(!h)break;l=null,h.throwAwayComments&&h.throwAwayComments(),c=h;var d=null;if(e){if(1==h.value.length)var d=h.value[0]}else d=h;if(d&&d instanceof i.Variable)if(w(":"))t.length>0&&(r&&x("Cannot mix ; and , as delimiter types"),a=!0),c=S(this.expression),l=f=d.name;else{if(!e&&w(/^\.{3}/)){p.variadic=!0,w(";")&&!r&&(r=!0),(r?n:u).push({name:h.name,variadic:!0});break}e||(f=l=d.name,c=null)}c&&t.push(c),u.push({name:l,value:c}),w(",")||(w(";")||r)&&(a&&x("Cannot mix ; and , as delimiter types"),r=!0,t.length>1&&(c=new i.Value(t)),n.push({name:f,value:c}),f=null,t=[],a=!1)}return p.args=r?n:u,p},definition:function(){var e,n,r,f,t=[],c=!1;if(!("."!==s.charAt(o)&&"#"!==s.charAt(o)||T(/^[^{]*\}/))&&(m(),n=w(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/))){e=n[1];var h=this.mixin.args.call(this,!1);if(t=h.args,c=h.variadic,w(")")||(l=o,g()),w(this.comment),w(/^when/)&&(f=S(this.conditions,"expected condition")),r=w(this.block),r)return new i.mixin.Definition(e,t,r,f,c);g()}}},entity:function(){return w(this.entities.literal)||w(this.entities.variable)||w(this.entities.url)||w(this.entities.call)||w(this.entities.keyword)||w(this.entities.javascript)||w(this.comment)},end:function(){return w(";")||T("}")},alpha:function(){var e;if(w(/^\(opacity=/i))return(e=w(/^\d+/)||w(this.entities.variable))?(S(")"),new i.Alpha(e)):void 0},element:function(){var e,n,r;return n=w(this.combinator),e=w(/^(?:\d+\.\d+|\d+)%/)||w(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||w("*")||w("&")||w(this.attribute)||w(/^\([^()@]+\)/)||w(/^[\.#](?=@)/)||w(this.entities.variableCurly),e||w("(")&&(r=w(this.selector))&&w(")")&&(e=new i.Paren(r)),e?new i.Element(n,e,o):void 0},combinator:function(){var e=s.charAt(o);if(">"===e||"+"===e||"~"===e||"|"===e){for(o++;s.charAt(o).match(/\s/);)o++;return new i.Combinator(e)}return s.charAt(o-1).match(/\s/)?new i.Combinator(" "):new i.Combinator(null)},selector:function(){for(var t,r,u,n=[],a=[];((u=w(this.extend))||(t=w(this.element)))&&(u?a.push.apply(a,u):(a.length&&x("Extend can only be used at the end of selector"),r=s.charAt(o),n.push(t),t=null),"{"!==r&&"}"!==r&&";"!==r&&","!==r&&")"!==r););return n.length>0?new i.Selector(n,a):void(a.length&&x("Extend must be used to extend a selector, it cannot be used on its own"))},attribute:function(){var t,n,r;if(w("["))return(t=w(this.entities.variableCurly))||(t=S(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),(r=w(/^[|~*$^]?=/))&&(n=w(this.entities.quoted)||w(/^[\w-]+/)||w(this.entities.variableCurly)),S("]"),new i.Attribute(t,r,n)},block:function(){var e;return w("{")&&(e=w(this.primary))&&w("}")?e:void 0},ruleset:function(){var n,r,u,e=[];for(m(),t.dumpLineNumbers&&(u=k(o,s,t));(n=w(this.selector))&&(e.push(n),w(this.comment),w(","));)w(this.comment);if(e.length>0&&(r=w(this.block))){var a=new i.Ruleset(e,r,t.strictImports);return t.dumpLineNumbers&&(a.debugInfo=u),a}l=o,g()},rule:function(e){var n,r,a,u=s.charAt(o);if(m(),"."!==u&&"#"!==u&&"&"!==u&&(n=w(this.variable)||w(this.property))){if(r=e||!t.compress&&"@"!==n.charAt(0)?w(this.anonymousValue)||w(this.value):w(this.value)||w(this.anonymousValue),a=w(this.important),r&&w(this.end))return new i.Rule(n,r,a,f,t.currentFileInfo);if(l=o,g(),r&&!e)return this.rule(!0)}},anonymousValue:function(){var e;return(e=/^([^@+\/'"*`(;{}-]*);/.exec(c[u]))?(o+=e[0].length-1,new i.Anonymous(e[1])):void 0},"import":function(){var e,n,r=o;m();var s=w(/^@import?\s+/),u=(s?w(this.importOptions):null)||{};return s&&(e=w(this.entities.quoted)||w(this.entities.url))&&(n=w(this.mediaFeatures),w(";"))?(n=n&&new i.Value(n),new i.Import(e,n,u,r,t.currentFileInfo)):void g()},importOptions:function(){var e,n,r,t={};if(!w("("))return null;do if(e=w(this.importOption)){switch(n=e,r=!0,n){case"css":n="less",r=!1;break;case"once":n="multiple",r=!1}if(t[n]=r,!w(","))break}while(e);return S(")"),t},importOption:function(){var e=w(/^(less|css|multiple|once)/);return e?e[1]:void 0},mediaFeature:function(){var e,n,r=[];do if(e=w(this.entities.keyword))r.push(e);else if(w("(")){if(n=w(this.property),e=w(this.value),!w(")"))return null;if(n&&e)r.push(new i.Paren(new i.Rule(n,e,null,o,t.currentFileInfo,!0)));else{if(!e)return null;r.push(new i.Paren(e))}}while(e);return r.length>0?new i.Expression(r):void 0},mediaFeatures:function(){var e,t=[];do if(e=w(this.mediaFeature)){if(t.push(e),!w(","))break}else if((e=w(this.entities.variable))&&(t.push(e),!w(",")))break;while(e);return t.length>0?t:null},media:function(){var e,n,r,u;return t.dumpLineNumbers&&(u=k(o,s,t)),w(/^@media/)&&(e=w(this.mediaFeatures),n=w(this.block))?(r=new i.Media(n,e),t.dumpLineNumbers&&(r.debugInfo=u),r):void 0},directive:function(){var e,n,r,l,c,h,p;if("@"===s.charAt(o)){if(n=w(this["import"])||w(this.media))return n;if(m(),e=w(/^@[a-z-]+/)){switch(l=e,"-"==e.charAt(1)&&e.indexOf("-",2)>0&&(l="@"+e.slice(e.indexOf("-",2)+1)),l){case"@font-face":c=!0;break;case"@viewport":case"@top-left":case"@top-left-corner":case"@top-center":case"@top-right":case"@top-right-corner":case"@bottom-left":case"@bottom-left-corner":case"@bottom-center":case"@bottom-right":case"@bottom-right-corner":case"@left-top":case"@left-middle":case"@left-bottom":case"@right-top":case"@right-middle":case"@right-bottom":c=!0;break;case"@page":case"@document":case"@supports":case"@keyframes":c=!0,h=!0;break;case"@namespace":p=!0}if(h&&(e+=" "+(w(/^[^{]+/)||"").trim()),c){if(r=w(this.block))return new i.Directive(e,r)}else if((n=w(p?this.expression:this.entity))&&w(";")){var d=new i.Directive(e,n);return t.dumpLineNumbers&&(d.debugInfo=k(o,s,t)),d}g()}}},value:function(){for(var e,t=[];(e=w(this.expression))&&(t.push(e),w(",")););return t.length>0?new i.Value(t):void 0},important:function(){return"!"===s.charAt(o)?w(/^! *important/):void 0},sub:function(){var e,t;return w("(")&&(e=w(this.addition))?(t=new i.Expression([e]),S(")"),t.parens=!0,t):void 0},multiplication:function(){var e,t,n,r,u;if(e=w(this.operand)){for(u=b(s.charAt(o-1));!T(/^\/[*\/]/)&&(n=w("/")||w("*"))&&(t=w(this.operand));)e.parensInOp=!0,t.parensInOp=!0,r=new i.Operation(n,[r||e,t],u),u=b(s.charAt(o-1));return r||e}},addition:function(){var e,t,n,r,u;if(e=w(this.multiplication)){for(u=b(s.charAt(o-1));(n=w(/^[-+]\s+/)||!u&&(w("+")||w("-")))&&(t=w(this.multiplication));)e.parensInOp=!0,t.parensInOp=!0,r=new i.Operation(n,[r||e,t],u),u=b(s.charAt(o-1));return r||e}},conditions:function(){var e,t,r,n=o;if(e=w(this.condition)){for(;w(",")&&(t=w(this.condition));)r=new i.Condition("or",r||e,t,n);return r||e}},condition:function(){var e,t,n,r,s=o,u=!1;return w(/^not/)&&(u=!0),S("("),(e=w(this.addition)||w(this.entities.keyword)||w(this.entities.quoted))?((r=w(/^(?:>=|=<|[<=>])/))?(t=w(this.addition)||w(this.entities.keyword)||w(this.entities.quoted))?n=new i.Condition(r,e,t,s,u):x("expected expression"):n=new i.Condition("=",e,new i.Keyword("true"),s,u),S(")"),w(/^and/)?new i.Condition("and",n,w(this.condition)):n):void 0},operand:function(){var e,t=s.charAt(o+1);"-"===s.charAt(o)&&("@"===t||"("===t)&&(e=w("-"));var n=w(this.sub)||w(this.entities.dimension)||w(this.entities.color)||w(this.entities.variable)||w(this.entities.call);return e&&(n.parensInOp=!0,n=new i.Negative(n)),n},expression:function(){for(var e,t,n=[];e=w(this.addition)||w(this.entity);)n.push(e),!T(/^\/[\/*]/)&&(t=w("/"))&&n.push(new i.Anonymous(t));return n.length>0?new i.Expression(n):void 0},property:function(){var e;return(e=w(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/))?e[1]:void 0}}}},("browser"===r.mode||"rhino"===r.mode)&&(r.Parser.importer=function(e,t,n,r){!/^([a-z-]+:)?\//.test(e)&&t.currentDirectory&&(e=t.currentDirectory+e);var i=r.toSheet(e);i.processImports=!1,i.currentFileInfo=t,w(i,function(e,t,r,i,s,o){n.call(null,e,t,o)},!0)}),function(r){function u(e){return r.functions.hsla(e.h,e.s,e.l,e.a)}function a(e,t){return e instanceof r.Dimension&&e.unit.is("%")?parseFloat(e.value*t/100):f(e)}function f(e){if(e instanceof r.Dimension)return parseFloat(e.unit.is("%")?e.value/100:e.value);if("number"==typeof e)return e;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function l(e){return Math.min(1,Math.max(0,e))}r.functions={rgb:function(e,t,n){return this.rgba(e,t,n,1)},rgba:function(e,t,n,i){var s=[e,t,n].map(function(e){return a(e,256)});return i=f(i),new r.Color(s,i)},hsl:function(e,t,n){return this.hsla(e,t,n,1)},hsla:function(e,t,n,r){function o(e){return e=0>e?e+1:e>1?e-1:e,1>6*e?s+(i-s)*e*6:1>2*e?i:2>3*e?s+(i-s)*(2/3-e)*6:s}e=f(e)%360/360,t=l(f(t)),n=l(f(n)),r=l(f(r));var i=.5>=n?n*(t+1):n+t-n*t,s=2*n-i;return this.rgba(255*o(e+1/3),255*o(e),255*o(e-1/3),r)},hsv:function(e,t,n){return this.hsva(e,t,n,1)},hsva:function(e,t,n,r){e=f(e)%360/360*360,t=f(t),n=f(n),r=f(r);var i,s;i=Math.floor(e/60%6),s=e/60-i;var o=[n,n*(1-t),n*(1-s*t),n*(1-(1-s)*t)],u=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return this.rgba(255*o[u[i][0]],255*o[u[i][1]],255*o[u[i][2]],r)},hue:function(e){return new r.Dimension(Math.round(e.toHSL().h))},saturation:function(e){return new r.Dimension(Math.round(100*e.toHSL().s),"%")},lightness:function(e){return new r.Dimension(Math.round(100*e.toHSL().l),"%")},hsvhue:function(e){return new r.Dimension(Math.round(e.toHSV().h))},hsvsaturation:function(e){return new r.Dimension(Math.round(100*e.toHSV().s),"%")},hsvvalue:function(e){return new r.Dimension(Math.round(100*e.toHSV().v),"%")},red:function(e){return new r.Dimension(e.rgb[0])},green:function(e){return new r.Dimension(e.rgb[1])},blue:function(e){return new r.Dimension(e.rgb[2])},alpha:function(e){return new r.Dimension(e.toHSL().a)},luma:function(e){return new r.Dimension(Math.round(e.luma()*e.alpha*100),"%")},saturate:function(e,t){var n=e.toHSL();return n.s+=t.value/100,n.s=l(n.s),u(n)},desaturate:function(e,t){var n=e.toHSL();return n.s-=t.value/100,n.s=l(n.s),u(n)},lighten:function(e,t){var n=e.toHSL();return n.l+=t.value/100,n.l=l(n.l),u(n)},darken:function(e,t){var n=e.toHSL();return n.l-=t.value/100,n.l=l(n.l),u(n)},fadein:function(e,t){var n=e.toHSL();return n.a+=t.value/100,n.a=l(n.a),u(n)},fadeout:function(e,t){var n=e.toHSL();return n.a-=t.value/100,n.a=l(n.a),u(n)},fade:function(e,t){var n=e.toHSL();return n.a=t.value/100,n.a=l(n.a),u(n)},spin:function(e,t){var n=e.toHSL(),r=(n.h+t.value)%360;return n.h=0>r?360+r:r,u(n)},mix:function(e,t,n){n||(n=new r.Dimension(50));var i=n.value/100,s=2*i-1,o=e.toHSL().a-t.toHSL().a,u=((s*o==-1?s:(s+o)/(1+s*o))+1)/2,a=1-u,f=[e.rgb[0]*u+t.rgb[0]*a,e.rgb[1]*u+t.rgb[1]*a,e.rgb[2]*u+t.rgb[2]*a],l=e.alpha*i+t.alpha*(1-i);return new r.Color(f,l)},greyscale:function(e){return this.desaturate(e,new r.Dimension(100))},contrast:function(e,t,n,r){if(!e.rgb)return null;if("undefined"==typeof n&&(n=this.rgba(255,255,255,1)),"undefined"==typeof t&&(t=this.rgba(0,0,0,1)),t.luma()>n.luma()){var i=n;n=t,t=i}return r="undefined"==typeof r?.43:f(r),e.luma()*e.alpha<r?n:t},e:function(e){return new r.Anonymous(e instanceof r.JavaScript?e.evaluated:e)},escape:function(e){return new r.Anonymous(encodeURI(e.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),n=e.value,i=0;i<t.length;i++)n=n.replace(/%[sda]/i,function(e){var n=e.match(/s/i)?t[i].value:t[i].toCSS();return e.match(/[A-Z]$/)?encodeURIComponent(n):n});return n=n.replace(/%%/g,"%"),new r.Quoted('"'+n+'"',n)},unit:function(e,t){return new r.Dimension(e.value,t?t.toCSS():"")},convert:function(e,t){return e.convertTo(t.value)},round:function(e,t){var n="undefined"==typeof t?0:t.value;return this._math(function(e){return e.toFixed(n)},null,e)},pi:function(){return new r.Dimension(Math.PI)},mod:function(e,t){return new r.Dimension(e.value%t.value,e.unit)},pow:function(e,t){if("number"==typeof e&&"number"==typeof t)e=new r.Dimension(e),t=new r.Dimension(t);else if(!(e instanceof r.Dimension&&t instanceof r.Dimension))throw{type:"Argument",message:"arguments must be numbers"};return new r.Dimension(Math.pow(e.value,t.value),e.unit)},_math:function(e,t,n){if(n instanceof r.Dimension)return new r.Dimension(e(parseFloat(n.value)),null==t?n.unit:t);if("number"==typeof n)return e(n);throw{type:"Argument",message:"argument must be a number"}},argb:function(e){return new r.Anonymous(e.toARGB())},percentage:function(e){return new r.Dimension(100*e.value,"%")},color:function(e){if(e instanceof r.Quoted)return new r.Color(e.value.slice(1));throw{type:"Argument",message:"argument must be a string"}},iscolor:function(e){return this._isa(e,r.Color)},isnumber:function(e){return this._isa(e,r.Dimension)},isstring:function(e){return this._isa(e,r.Quoted)},iskeyword:function(e){return this._isa(e,r.Keyword)},isurl:function(e){return this._isa(e,r.URL)},ispixel:function(e){return this.isunit(e,"px")},ispercentage:function(e){return this.isunit(e,"%")},isem:function(e){return this.isunit(e,"em")},isunit:function(e,t){return e instanceof r.Dimension&&e.unit.is(t.value||t)?r.True:r.False},_isa:function(e,t){return e instanceof t?r.True:r.False},multiply:function(e,t){var n=e.rgb[0]*t.rgb[0]/255,r=e.rgb[1]*t.rgb[1]/255,i=e.rgb[2]*t.rgb[2]/255;return this.rgb(n,r,i)},screen:function(e,t){var n=255-(255-e.rgb[0])*(255-t.rgb[0])/255,r=255-(255-e.rgb[1])*(255-t.rgb[1])/255,i=255-(255-e.rgb[2])*(255-t.rgb[2])/255;return this.rgb(n,r,i)},overlay:function(e,t){var n=e.rgb[0]<128?2*e.rgb[0]*t.rgb[0]/255:255-2*(255-e.rgb[0])*(255-t.rgb[0])/255,r=e.rgb[1]<128?2*e.rgb[1]*t.rgb[1]/255:255-2*(255-e.rgb[1])*(255-t.rgb[1])/255,i=e.rgb[2]<128?2*e.rgb[2]*t.rgb[2]/255:255-2*(255-e.rgb[2])*(255-t.rgb[2])/255;return this.rgb(n,r,i)},softlight:function(e,t){var n=t.rgb[0]*e.rgb[0]/255,r=n+e.rgb[0]*(255-(255-e.rgb[0])*(255-t.rgb[0])/255-n)/255;n=t.rgb[1]*e.rgb[1]/255;var i=n+e.rgb[1]*(255-(255-e.rgb[1])*(255-t.rgb[1])/255-n)/255;n=t.rgb[2]*e.rgb[2]/255;var s=n+e.rgb[2]*(255-(255-e.rgb[2])*(255-t.rgb[2])/255-n)/255;return this.rgb(r,i,s)},hardlight:function(e,t){var n=t.rgb[0]<128?2*t.rgb[0]*e.rgb[0]/255:255-2*(255-t.rgb[0])*(255-e.rgb[0])/255,r=t.rgb[1]<128?2*t.rgb[1]*e.rgb[1]/255:255-2*(255-t.rgb[1])*(255-e.rgb[1])/255,i=t.rgb[2]<128?2*t.rgb[2]*e.rgb[2]/255:255-2*(255-t.rgb[2])*(255-e.rgb[2])/255;return this.rgb(n,r,i)},difference:function(e,t){var n=Math.abs(e.rgb[0]-t.rgb[0]),r=Math.abs(e.rgb[1]-t.rgb[1]),i=Math.abs(e.rgb[2]-t.rgb[2]);return this.rgb(n,r,i)},exclusion:function(e,t){var n=e.rgb[0]+t.rgb[0]*(255-e.rgb[0]-e.rgb[0])/255,r=e.rgb[1]+t.rgb[1]*(255-e.rgb[1]-e.rgb[1])/255,i=e.rgb[2]+t.rgb[2]*(255-e.rgb[2]-e.rgb[2])/255;return this.rgb(n,r,i)},average:function(e,t){var n=(e.rgb[0]+t.rgb[0])/2,r=(e.rgb[1]+t.rgb[1])/2,i=(e.rgb[2]+t.rgb[2])/2;return this.rgb(n,r,i)},negation:function(e,t){var n=255-Math.abs(255-t.rgb[0]-e.rgb[0]),r=255-Math.abs(255-t.rgb[1]-e.rgb[1]),i=255-Math.abs(255-t.rgb[2]-e.rgb[2]);return this.rgb(n,r,i)},tint:function(e,t){return this.mix(this.rgb(255,255,255),e,t)},shade:function(e,t){return this.mix(this.rgb(0,0,0),e,t)},extract:function(e,t){return t=t.value-1,e.value[t]},"data-uri":function(t,i){if("undefined"!=typeof e)return new r.URL(i||t,this.currentFileInfo).eval(this.env);var s=t.value,o=i&&i.value,u=n("fs"),a=n("path"),f=!1;if(arguments.length<2&&(o=s),this.env.isPathRelative(o)&&(o=this.currentFileInfo.relativeUrls?a.join(this.currentFileInfo.currentDirectory,o):a.join(this.currentFileInfo.entryPath,o)),arguments.length<2){var l;try{l=n("mime")}catch(c){l=r._mime}s=l.lookup(o);var h=l.charsets.lookup(s);f=["US-ASCII","UTF-8"].indexOf(h)<0,f&&(s+=";base64")}else f=/;base64$/.test(s);var p=u.readFileSync(o),d=32,v=parseInt(p.length/1024,10);if(v>=d){if(this.env.ieCompat!==!1)return this.env.silent||console.warn("Skipped data-uri embedding of %s because its size (%dKB) exceeds IE8-safe %dKB!",o,v,d),new r.URL(i||t,this.currentFileInfo).eval(this.env);this.env.silent||console.warn("WARNING: Embedding %s (%dKB) exceeds IE8's data-uri size limit of %dKB!",o,v,d)}p=f?p.toString("base64"):encodeURIComponent(p);var m="'data:"+s+","+p+"'";return new r.URL(new r.Anonymous(m))}},r._mime={_types:{".htm":"text/html",".html":"text/html",".gif":"image/gif",".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png"},lookup:function(e){var i=n("path").extname(e),s=r._mime._types[i];if(s===t)throw new Error('Optional dependency "mime" is required for '+i);return s},charsets:{lookup:function(e){return e&&/^text\//.test(e)?"UTF-8":""}}};for(var i=[{name:"ceil"},{name:"floor"},{name:"sqrt"},{name:"abs"},{name:"tan",unit:""},{name:"sin",unit:""},{name:"cos",unit:""},{name:"atan",unit:"rad"},{name:"asin",unit:"rad"},{name:"acos",unit:"rad"}],s=function(e,t){return function(n){return null!=t&&(n=n.unify()),this._math(Math[e],t,n)}},o=0;o<i.length;o++)r.functions[i[o].name]=s(i[o].name,i[o].unit);r.functionCall=function(e,t){this.env=e,this.currentFileInfo=t},r.functionCall.prototype=r.functions}(n("./tree")),function(e){e.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",
black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(n("./tree")),function(e){e.Alpha=function(e){this.value=e},e.Alpha.prototype={type:"Alpha",accept:function(e){this.value=e.visit(this.value)},eval:function(e){return this.value.eval&&(this.value=this.value.eval(e)),this},toCSS:function(){return"alpha(opacity="+(this.value.toCSS?this.value.toCSS():this.value)+")"}}}(n("../tree")),function(e){e.Anonymous=function(e){this.value=e.value||e},e.Anonymous.prototype={type:"Anonymous",toCSS:function(){return this.value},eval:function(){return this},compare:function(e){if(!e.toCSS)return-1;var t=this.toCSS(),n=e.toCSS();return t===n?0:n>t?-1:1}}}(n("../tree")),function(e){e.Assignment=function(e,t){this.key=e,this.value=t},e.Assignment.prototype={type:"Assignment",accept:function(e){this.value=e.visit(this.value)},toCSS:function(){return this.key+"="+(this.value.toCSS?this.value.toCSS():this.value)},eval:function(t){return this.value.eval?new e.Assignment(this.key,this.value.eval(t)):this}}}(n("../tree")),function(e){e.Call=function(e,t,n,r){this.name=e,this.args=t,this.index=n,this.currentFileInfo=r},e.Call.prototype={type:"Call",accept:function(e){this.args=e.visit(this.args)},eval:function(t){var i,s,n=this.args.map(function(e){return e.eval(t)}),r=this.name.toLowerCase();if(r in e.functions)try{if(s=new e.functionCall(t,this.currentFileInfo),i=s[r].apply(s,n),null!=i)return i}catch(o){throw{type:o.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(o.message?": "+o.message:""),index:this.index,filename:this.currentFileInfo.filename}}return new e.Anonymous(this.name+"("+n.map(function(e){return e.toCSS(t)}).join(", ")+")")},toCSS:function(e){return this.eval(e).toCSS()}}}(n("../tree")),function(e){e.Color=function(e,t){Array.isArray(e)?this.rgb=e:6==e.length?this.rgb=e.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=e.split("").map(function(e){return parseInt(e+e,16)}),this.alpha="number"==typeof t?t:1},e.Color.prototype={type:"Color",eval:function(){return this},luma:function(){return.2126*this.rgb[0]/255+.7152*this.rgb[1]/255+.0722*this.rgb[2]/255},toCSS:function(e,t){var n=e&&e.compress&&!t;if(this.alpha<1)return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(","+(n?"":" "))+")";var r=this.rgb.map(function(e){return e=Math.round(e),e=(e>255?255:0>e?0:e).toString(16),1===e.length?"0"+e:e}).join("");return n&&(r=r.split(""),r=r[0]==r[1]&&r[2]==r[3]&&r[4]==r[5]?r[0]+r[2]+r[4]:r.join("")),"#"+r},operate:function(t,n,r){var i=[];r instanceof e.Color||(r=r.toColor());for(var s=0;3>s;s++)i[s]=e.operate(t,n,this.rgb[s],r.rgb[s]);return new e.Color(i,this.alpha+r.alpha)},toHSL:function(){var o,u,e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255,r=this.alpha,i=Math.max(e,t,n),s=Math.min(e,t,n),a=(i+s)/2,f=i-s;if(i===s)o=u=0;else{switch(u=a>.5?f/(2-i-s):f/(i+s),i){case e:o=(t-n)/f+(n>t?6:0);break;case t:o=(n-e)/f+2;break;case n:o=(e-t)/f+4}o/=6}return{h:360*o,s:u,l:a,a:r}},toHSV:function(){var o,u,e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255,r=this.alpha,i=Math.max(e,t,n),s=Math.min(e,t,n),a=i,f=i-s;if(u=0===i?0:f/i,i===s)o=0;else{switch(i){case e:o=(t-n)/f+(n>t?6:0);break;case t:o=(n-e)/f+2;break;case n:o=(e-t)/f+4}o/=6}return{h:360*o,s:u,v:a,a:r}},toARGB:function(){var e=[Math.round(255*this.alpha)].concat(this.rgb);return"#"+e.map(function(e){return e=Math.round(e),e=(e>255?255:0>e?0:e).toString(16),1===e.length?"0"+e:e}).join("")},compare:function(e){return e.rgb&&e.rgb[0]===this.rgb[0]&&e.rgb[1]===this.rgb[1]&&e.rgb[2]===this.rgb[2]&&e.alpha===this.alpha?0:-1}}}(n("../tree")),function(e){e.Comment=function(e,t){this.value=e,this.silent=!!t},e.Comment.prototype={type:"Comment",toCSS:function(e){return e.compress?"":this.value},eval:function(){return this}}}(n("../tree")),function(e){e.Condition=function(e,t,n,r,i){this.op=e.trim(),this.lvalue=t,this.rvalue=n,this.index=r,this.negate=i},e.Condition.prototype={type:"Condition",accept:function(e){this.lvalue=e.visit(this.lvalue),this.rvalue=e.visit(this.rvalue)},eval:function(e){var i,t=this.lvalue.eval(e),n=this.rvalue.eval(e),r=this.index,i=function(e){switch(e){case"and":return t&&n;case"or":return t||n;default:if(t.compare)i=t.compare(n);else{if(!n.compare)throw{type:"Type",message:"Unable to perform comparison",index:r};i=n.compare(t)}switch(i){case-1:return"<"===e||"=<"===e;case 0:return"="===e||">="===e||"=<"===e;case 1:return">"===e||">="===e}}}(this.op);return this.negate?!i:i}}}(n("../tree")),function(e){e.Dimension=function(n,r){this.value=parseFloat(n),this.unit=r&&r instanceof e.Unit?r:new e.Unit(r?[r]:t)},e.Dimension.prototype={type:"Dimension",accept:function(e){this.unit=e.visit(this.unit)},eval:function(e){return this},toColor:function(){return new e.Color([this.value,this.value,this.value])},toCSS:function(e){if(e&&e.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var t=this.value,n=String(t);if(0!==t&&1e-6>t&&t>-1e-6&&(n=t.toFixed(20).replace(/0+$/,"")),e&&e.compress){if(0===t&&!this.unit.isAngle())return n;t>0&&1>t&&(n=n.substr(1))}return n+this.unit.toCSS(e)},operate:function(t,n,r){var i=e.operate(t,n,this.value,r.value),s=this.unit.clone();if("+"===n||"-"===n){if(0===s.numerator.length&&0===s.denominator.length)s.numerator=r.unit.numerator.slice(0),s.denominator=r.unit.denominator.slice(0);else if(0!=r.unit.numerator.length||0!=s.denominator.length){if(r=r.convertTo(this.unit.usedUnits()),t.strictUnits&&r.unit.toString()!==s.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+s.toString()+"' and '"+r.unit.toString()+"'.");i=e.operate(t,n,this.value,r.value)}}else"*"===n?(s.numerator=s.numerator.concat(r.unit.numerator).sort(),s.denominator=s.denominator.concat(r.unit.denominator).sort(),s.cancel()):"/"===n&&(s.numerator=s.numerator.concat(r.unit.denominator).sort(),s.denominator=s.denominator.concat(r.unit.numerator).sort(),s.cancel());return new e.Dimension(i,s)},compare:function(t){if(t instanceof e.Dimension){var n=this.unify(),r=t.unify(),i=n.value,s=r.value;return s>i?-1:i>s?1:r.unit.isEmpty()||0===n.unit.compare(r.unit)?0:-1}return-1},unify:function(){return this.convertTo({length:"m",duration:"s",angle:"rad"})},convertTo:function(t){var i,s,o,a,n=this.value,r=this.unit.clone(),f={};if("string"==typeof t){for(i in e.UnitConversions)e.UnitConversions[i].hasOwnProperty(t)&&(f={},f[i]=t);t=f}for(s in t)t.hasOwnProperty(s)&&(a=t[s],o=e.UnitConversions[s],r.map(function(e,t){return o.hasOwnProperty(e)?(t?n/=o[e]/o[a]:n*=o[e]/o[a],a):e}));return r.cancel(),new e.Dimension(n,r)}},e.UnitConversions={length:{m:1,cm:.01,mm:.001,"in":.0254,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}},e.Unit=function(e,t,n){this.numerator=e?e.slice(0).sort():[],this.denominator=t?t.slice(0).sort():[],this.backupUnit=n},e.Unit.prototype={type:"Unit",clone:function(){return new e.Unit(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)},toCSS:function(e){return this.numerator.length>=1?this.numerator[0]:this.denominator.length>=1?this.denominator[0]:e&&e.strictUnits||!this.backupUnit?"":this.backupUnit},toString:function(){var e,t=this.numerator.join("*");for(e=0;e<this.denominator.length;e++)t+="/"+this.denominator[e];return t},compare:function(e){return this.is(e.toString())?0:-1},is:function(e){return this.toString()===e},isAngle:function(){return e.UnitConversions.angle.hasOwnProperty(this.toCSS())},isEmpty:function(){return 0==this.numerator.length&&0==this.denominator.length},isSingular:function(){return this.numerator.length<=1&&0==this.denominator.length},map:function(e){var t;for(t=0;t<this.numerator.length;t++)this.numerator[t]=e(this.numerator[t],!1);for(t=0;t<this.denominator.length;t++)this.denominator[t]=e(this.denominator[t],!0)},usedUnits:function(){var t,n,r={};for(n in e.UnitConversions)e.UnitConversions.hasOwnProperty(n)&&(t=e.UnitConversions[n],this.map(function(e){return t.hasOwnProperty(e)&&!r[n]&&(r[n]=e),e}));return r},cancel:function(){var t,n,r,e={};for(n=0;n<this.numerator.length;n++)t=this.numerator[n],r||(r=t),e[t]=(e[t]||0)+1;for(n=0;n<this.denominator.length;n++)t=this.denominator[n],r||(r=t),e[t]=(e[t]||0)-1;this.numerator=[],this.denominator=[];for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(i>0)for(n=0;i>n;n++)this.numerator.push(t);else if(0>i)for(n=0;-i>n;n++)this.denominator.push(t)}0===this.numerator.length&&0===this.denominator.length&&r&&(this.backupUnit=r),this.numerator.sort(),this.denominator.sort()}}}(n("../tree")),function(e){e.Directive=function(t,n){this.name=t,Array.isArray(n)?(this.ruleset=new e.Ruleset([],n),this.ruleset.allowImports=!0):this.value=n},e.Directive.prototype={type:"Directive",accept:function(e){this.ruleset=e.visit(this.ruleset),this.value=e.visit(this.value)},toCSS:function(e){return this.ruleset?(this.ruleset.root=!0,this.name+(e.compress?"{":" {\n  ")+this.ruleset.toCSS(e).trim().replace(/\n/g,"\n  ")+(e.compress?"}":"\n}\n")):this.name+" "+this.value.toCSS()+";\n"},eval:function(t){var n=this;return this.ruleset&&(t.frames.unshift(this),n=new e.Directive(this.name),n.ruleset=this.ruleset.eval(t),t.frames.shift()),n},variable:function(t){return e.Ruleset.prototype.variable.call(this.ruleset,t)},find:function(){return e.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return e.Ruleset.prototype.rulesets.apply(this.ruleset)}}}(n("../tree")),function(e){e.Element=function(t,n,r){this.combinator=t instanceof e.Combinator?t:new e.Combinator(t),"string"==typeof n?this.value=n.trim():n?this.value=n:this.value="",this.index=r},e.Element.prototype={type:"Element",accept:function(e){this.combinator=e.visit(this.combinator),this.value=e.visit(this.value)},eval:function(t){return new e.Element(this.combinator,this.value.eval?this.value.eval(t):this.value,this.index)},toCSS:function(e){var t=this.value.toCSS?this.value.toCSS(e):this.value;return""==t&&"&"==this.combinator.value.charAt(0)?"":this.combinator.toCSS(e||{})+t}},e.Attribute=function(e,t,n){this.key=e,this.op=t,this.value=n},e.Attribute.prototype={type:"Attribute",accept:function(e){this.value=e.visit(this.value)},eval:function(t){return new e.Attribute(this.key.eval?this.key.eval(t):this.key,this.op,this.value&&this.value.eval?this.value.eval(t):this.value)},toCSS:function(e){var t=this.key.toCSS?this.key.toCSS(e):this.key;return this.op&&(t+=this.op,t+=this.value.toCSS?this.value.toCSS(e):this.value),"["+t+"]"}},e.Combinator=function(e){" "===e?this.value=" ":this.value=e?e.trim():""},e.Combinator.prototype={type:"Combinator",toCSS:function(e){return{"":""," ":" ",":":" :","+":e.compress?"+":" + ","~":e.compress?"~":" ~ ",">":e.compress?">":" > ","|":e.compress?"|":" | "}[this.value]}}}(n("../tree")),function(e){e.Expression=function(e){this.value=e},e.Expression.prototype={type:"Expression",accept:function(e){this.value=e.visit(this.value)},eval:function(t){var n,r=this.parens&&!this.parensInOp,i=!1;return r&&t.inParenthesis(),this.value.length>1?n=new e.Expression(this.value.map(function(e){return e.eval(t)})):1===this.value.length?(this.value[0].parens&&!this.value[0].parensInOp&&(i=!0),n=this.value[0].eval(t)):n=this,r&&t.outOfParenthesis(),this.parens&&this.parensInOp&&!t.isMathOn()&&!i&&(n=new e.Paren(n)),n},toCSS:function(e){return this.value.map(function(t){return t.toCSS?t.toCSS(e):""}).join(" ")},throwAwayComments:function(){this.value=this.value.filter(function(t){return!(t instanceof e.Comment)})}}}(n("../tree")),function(e){e.Extend=function(t,n,r){switch(this.selector=t,this.option=n,this.index=r,n){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}},e.Extend.prototype={type:"Extend",accept:function(e){this.selector=e.visit(this.selector)},eval:function(t){return new e.Extend(this.selector.eval(t),this.option,this.index)},clone:function(t){return new e.Extend(this.selector,this.option,this.index)},findSelfSelectors:function(e){var n,t=[];for(n=0;n<e.length;n++)t=t.concat(e[n].elements);this.selfSelectors=[{elements:t}]}}}(n("../tree")),function(e){e.Import=function(e,n,r,i,s){if(this.options=r,this.index=i,this.path=e,this.features=n,this.currentFileInfo=s,this.options.less!==t)this.css=!this.options.less;else{var u=this.getPath();u&&/css([\?;].*)?$/.test(u)&&(this.css=!0)}},e.Import.prototype={type:"Import",accept:function(e){this.features=e.visit(this.features),this.path=e.visit(this.path),this.root=e.visit(this.root)},toCSS:function(e){var t=this.features?" "+this.features.toCSS(e):"";return this.css?"@import "+this.path.toCSS()+t+";\n":""},getPath:function(){if(this.path instanceof e.Quoted){var n=this.path.value;return this.css!==t||/(\.[a-z]*$)|([\?;].*)$/.test(n)?n:n+".less"}return this.path instanceof e.URL?this.path.value.value:null},evalForImport:function(t){return new e.Import(this.path.eval(t),this.features,this.options,this.index,this.currentFileInfo)},evalPath:function(t){var n=this.path.eval(t),r=this.currentFileInfo&&this.currentFileInfo.rootpath;if(r&&!(n instanceof e.URL)){var i=n.value;i&&t.isPathRelative(i)&&(n.value=r+i)}return n},eval:function(t){var n,r=this.features&&this.features.eval(t);if(this.skip)return[];if(this.css){var i=new e.Import(this.evalPath(t),r,this.options,this.index);if(!i.css&&this.error)throw this.error;return i}return n=new e.Ruleset([],this.root.rules.slice(0)),n.evalImports(t),this.features?new e.Media(n.rules,this.features.value):n.rules}}}(n("../tree")),function(e){e.JavaScript=function(e,t,n){this.escaped=n,this.expression=e,this.index=t},e.JavaScript.prototype={type:"JavaScript",eval:function(t){var n,r=this,i={},s=this.expression.replace(/@\{([\w-]+)\}/g,function(n,i){return e.jsify(new e.Variable("@"+i,r.index).eval(t))});try{s=new Function("return ("+s+")")}catch(o){throw{message:"JavaScript evaluation error: `"+s+"`",index:this.index}}for(var u in t.frames[0].variables())i[u.slice(1)]={value:t.frames[0].variables()[u].value,toJS:function(){return this.value.eval(t).toCSS()}};try{n=s.call(i)}catch(o){throw{message:"JavaScript evaluation error: '"+o.name+": "+o.message+"'",index:this.index}}return"string"==typeof n?new e.Quoted('"'+n+'"',n,this.escaped,this.index):Array.isArray(n)?new e.Anonymous(n.join(", ")):new e.Anonymous(n)}}}(n("../tree")),function(e){e.Keyword=function(e){this.value=e},e.Keyword.prototype={type:"Keyword",eval:function(){return this},toCSS:function(){return this.value},compare:function(t){return t instanceof e.Keyword?t.value===this.value?0:1:-1}},e.True=new e.Keyword("true"),e.False=new e.Keyword("false")}(n("../tree")),function(e){e.Media=function(t,n){var r=this.emptySelectors();this.features=new e.Value(n),this.ruleset=new e.Ruleset(r,t),this.ruleset.allowImports=!0},e.Media.prototype={type:"Media",accept:function(e){this.features=e.visit(this.features),this.ruleset=e.visit(this.ruleset)},toCSS:function(e){var t=this.features.toCSS(e);return"@media "+t+(e.compress?"{":" {\n  ")+this.ruleset.toCSS(e).trim().replace(/\n/g,"\n  ")+(e.compress?"}":"\n}\n")},eval:function(t){t.mediaBlocks||(t.mediaBlocks=[],t.mediaPath=[]);var n=new e.Media([],[]);this.debugInfo&&(this.ruleset.debugInfo=this.debugInfo,n.debugInfo=this.debugInfo);var r=!1;t.strictMath||(r=!0,t.strictMath=!0);try{n.features=this.features.eval(t)}finally{r&&(t.strictMath=!1)}return t.mediaPath.push(n),t.mediaBlocks.push(n),t.frames.unshift(this.ruleset),n.ruleset=this.ruleset.eval(t),t.frames.shift(),t.mediaPath.pop(),0===t.mediaPath.length?n.evalTop(t):n.evalNested(t)},variable:function(t){return e.Ruleset.prototype.variable.call(this.ruleset,t)},find:function(){return e.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return e.Ruleset.prototype.rulesets.apply(this.ruleset)},emptySelectors:function(){var t=new e.Element("","&",0);return[new e.Selector([t])]},evalTop:function(t){var n=this;if(t.mediaBlocks.length>1){var r=this.emptySelectors();n=new e.Ruleset(r,t.mediaBlocks),n.multiMedia=!0}return delete t.mediaBlocks,delete t.mediaPath,n},evalNested:function(t){var n,r,i=t.mediaPath.concat([this]);for(n=0;n<i.length;n++)r=i[n].features instanceof e.Value?i[n].features.value:i[n].features,i[n]=Array.isArray(r)?r:[r];return this.features=new e.Value(this.permute(i).map(function(t){for(t=t.map(function(t){return t.toCSS?t:new e.Anonymous(t)}),n=t.length-1;n>0;n--)t.splice(n,0,new e.Anonymous("and"));return new e.Expression(t)})),new e.Ruleset([],[])},permute:function(e){if(0===e.length)return[];if(1===e.length)return e[0];for(var t=[],n=this.permute(e.slice(1)),r=0;r<n.length;r++)for(var i=0;i<e[0].length;i++)t.push([e[0][i]].concat(n[r]));return t},bubbleSelectors:function(t){this.ruleset=new e.Ruleset(t.slice(0),[this.ruleset])}}}(n("../tree")),function(e){e.mixin={},e.mixin.Call=function(t,n,r,i,s){this.selector=new e.Selector(t),this.arguments=n,this.index=r,this.currentFileInfo=i,this.important=s},e.mixin.Call.prototype={type:"MixinCall",accept:function(e){this.selector=e.visit(this.selector),this.arguments=e.visit(this.arguments)},eval:function(t){var n,r,i,u,a,f,l,c,s=[],o=!1;for(i=this.arguments&&this.arguments.map(function(e){return{name:e.name,value:e.value.eval(t)}}),u=0;u<t.frames.length;u++)if((n=t.frames[u].find(this.selector)).length>0){for(c=!0,a=0;a<n.length;a++){for(r=n[a],l=!1,f=0;f<t.frames.length;f++)if(!(r instanceof e.mixin.Definition)&&r===(t.frames[f].originalRuleset||t.frames[f])){l=!0;break}if(!l&&r.matchArgs(i,t)){if(!r.matchCondition||r.matchCondition(i,t))try{Array.prototype.push.apply(s,r.eval(t,i,this.important).rules)}catch(h){throw{message:h.message,index:this.index,filename:this.currentFileInfo.filename,stack:h.stack}}o=!0}}if(o)return s}throw c?{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+(i?i.map(function(e){var t="";return e.name&&(t+=e.name+":"),t+=e.value.toCSS?e.value.toCSS():"???"}).join(", "):"")+")`",index:this.index,filename:this.currentFileInfo.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.currentFileInfo.filename}}},e.mixin.Definition=function(t,n,r,i,s){this.name=t,this.selectors=[new e.Selector([new e.Element(null,t)])],this.params=n,this.condition=i,this.variadic=s,this.arity=n.length,this.rules=r,this._lookups={},this.required=n.reduce(function(e,t){return!t.name||t.name&&!t.value?e+1:e},0),this.parent=e.Ruleset.prototype,this.frames=[]},e.mixin.Definition.prototype={type:"MixinDefinition",accept:function(e){this.params=e.visit(this.params),this.rules=e.visit(this.rules),this.condition=e.visit(this.condition)},toCSS:function(){return""},variable:function(e){return this.parent.variable.call(this,e)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(t,n,r,i){var o,u,f,l,c,h,p,d,s=new e.Ruleset(null,[]),a=this.params.slice(0);if(n=new e.evalEnv(n,[s].concat(n.frames)),r)for(r=r.slice(0),f=0;f<r.length;f++)if(u=r[f],h=u&&u.name){for(p=!1,l=0;l<a.length;l++)if(!i[l]&&h===a[l].name){i[l]=u.value.eval(t),s.rules.unshift(new e.Rule(h,u.value.eval(t))),p=!0;break}if(p){r.splice(f,1),f--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+r[f].name+" not found"}}for(d=0,f=0;f<a.length;f++)if(!i[f]){if(u=r&&r[d],h=a[f].name)if(a[f].variadic&&r){for(o=[],l=d;l<r.length;l++)o.push(r[l].value.eval(t));s.rules.unshift(new e.Rule(h,new e.Expression(o).eval(t)))}else{if(c=u&&u.value)c=c.eval(t);else{if(!a[f].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+r.length+" for "+this.arity+")"};c=a[f].value.eval(n),s.resetCache()}s.rules.unshift(new e.Rule(h,c)),i[f]=c}if(a[f].variadic&&r)for(l=d;l<r.length;l++)i[l]=r[l].value.eval(t);d++}return s},eval:function(t,n,r){var a,l,i=[],s=this.frames.concat(t.frames),o=this.evalParams(t,new e.evalEnv(t,s),n,i);return o.rules.unshift(new e.Rule("@arguments",new e.Expression(i).eval(t))),a=r?this.parent.makeImportant.apply(this).rules:this.rules.slice(0),l=new e.Ruleset(null,a).eval(new e.evalEnv(t,[this,o].concat(s))),l.originalRuleset=this,l},matchCondition:function(t,n){return this.condition&&!this.condition.eval(new e.evalEnv(n,[this.evalParams(n,new e.evalEnv(n,this.frames.concat(n.frames)),t,[])].concat(n.frames)))?!1:!0},matchArgs:function(e,t){var r,n=e&&e.length||0;if(!this.variadic){if(n<this.required)return!1;if(n>this.params.length)return!1;if(this.required>0&&n>this.params.length)return!1}r=Math.min(n,this.arity);for(var s=0;r>s;s++)if(!this.params[s].name&&!this.params[s].variadic&&e[s].value.eval(t).toCSS()!=this.params[s].value.eval(t).toCSS())return!1;return!0}}}(n("../tree")),function(e){e.Negative=function(e){this.value=e},e.Negative.prototype={type:"Negative",accept:function(e){this.value=e.visit(this.value)},toCSS:function(e){return"-"+this.value.toCSS(e)},eval:function(t){return t.isMathOn()?new e.Operation("*",[new e.Dimension(-1),this.value]).eval(t):new e.Negative(this.value.eval(t))}}}(n("../tree")),function(e){e.Operation=function(e,t,n){this.op=e.trim(),this.operands=t,this.isSpaced=n},e.Operation.prototype={type:"Operation",accept:function(e){this.operands=e.visit(this.operands)},eval:function(t){var i,n=this.operands[0].eval(t),r=this.operands[1].eval(t);if(t.isMathOn()){if(n instanceof e.Dimension&&r instanceof e.Color){if("*"!==this.op&&"+"!==this.op)throw{type:"Operation",message:"Can't substract or divide a color from a number"};i=r,r=n,n=i}if(!n.operate)throw{type:"Operation",message:"Operation on an invalid type"};return n.operate(t,this.op,r)}return new e.Operation(this.op,[n,r],this.isSpaced)},toCSS:function(e){var t=this.isSpaced?" ":"";return this.operands[0].toCSS()+t+this.op+t+this.operands[1].toCSS()}},e.operate=function(e,t,n,r){switch(t){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r}}}(n("../tree")),function(e){e.Paren=function(e){this.value=e},e.Paren.prototype={type:"Paren",accept:function(e){this.value=e.visit(this.value)},toCSS:function(e){return"("+this.value.toCSS(e).trim()+")"},eval:function(t){return new e.Paren(this.value.eval(t))}}}(n("../tree")),function(e){e.Quoted=function(e,t,n,r,i){this.escaped=n,this.value=t||"",this.quote=e.charAt(0),this.index=r,this.currentFileInfo=i},e.Quoted.prototype={type:"Quoted",toCSS:function(){return this.escaped?this.value:this.quote+this.value+this.quote},eval:function(t){var n=this,r=this.value.replace(/`([^`]+)`/g,function(r,i){return new e.JavaScript(i,n.index,!0).eval(t).value}).replace(/@\{([\w-]+)\}/g,function(r,i){var s=new e.Variable("@"+i,n.index,n.currentFileInfo).eval(t,!0);return s instanceof e.Quoted?s.value:s.toCSS()});return new e.Quoted(this.quote+r+this.quote,r,this.escaped,this.index)},compare:function(e){if(!e.toCSS)return-1;var t=this.toCSS(),n=e.toCSS();return t===n?0:n>t?-1:1}}}(n("../tree")),function(e){e.Rule=function(t,n,r,i,s,o){this.name=t,this.value=n instanceof e.Value?n:new e.Value([n]),this.important=r?" "+r.trim():"",this.index=i,this.currentFileInfo=s,this.inline=o||!1,"@"===t.charAt(0)?this.variable=!0:this.variable=!1},e.Rule.prototype={type:"Rule",accept:function(e){this.value=e.visit(this.value)},toCSS:function(e){if(this.variable)return"";try{return this.name+(e.compress?":":": ")+this.value.toCSS(e)+this.important+(this.inline?"":";")}catch(t){throw t.index=this.index,t.filename=this.currentFileInfo.filename,t}},eval:function(t){var n=!1;"font"===this.name&&!t.strictMath&&(n=!0,t.strictMath=!0);try{return new e.Rule(this.name,this.value.eval(t),this.important,this.index,this.currentFileInfo,this.inline)}finally{n&&(t.strictMath=!1)}},makeImportant:function(){return new e.Rule(this.name,this.value,"!important",this.index,this.currentFileInfo,this.inline)}}}(n("../tree")),function(e){e.Ruleset=function(e,t,n){this.selectors=e,this.rules=t,this._lookups={},this.strictImports=n},e.Ruleset.prototype={type:"Ruleset",accept:function(e){this.selectors=e.visit(this.selectors),this.rules=e.visit(this.rules)},eval:function(t){var i,n=this.selectors&&this.selectors.map(function(e){return e.eval(t)}),r=new e.Ruleset(n,this.rules.slice(0),this.strictImports);r.originalRuleset=this,r.root=this.root,r.firstRoot=this.firstRoot,r.allowImports=this.allowImports,this.debugInfo&&(r.debugInfo=this.debugInfo),t.frames.unshift(r),t.selectors||(t.selectors=[]),t.selectors.unshift(this.selectors),(r.root||r.allowImports||!r.strictImports)&&r.evalImports(t);for(var s=0;s<r.rules.length;s++)r.rules[s]instanceof e.mixin.Definition&&(r.rules[s].frames=t.frames.slice(0));for(var o=t.mediaBlocks&&t.mediaBlocks.length||0,s=0;s<r.rules.length;s++)r.rules[s]instanceof e.mixin.Call&&(i=r.rules[s].eval(t).filter(function(t){return t instanceof e.Rule&&t.variable?!r.variable(t.name):!0}),r.rules.splice.apply(r.rules,[s,1].concat(i)),s+=i.length-1,r.resetCache());for(var u,s=0;s<r.rules.length;s++)u=r.rules[s],u instanceof e.mixin.Definition||(r.rules[s]=u.eval?u.eval(t):u);if(t.frames.shift(),t.selectors.shift(),t.mediaBlocks)for(var s=o;s<t.mediaBlocks.length;s++)t.mediaBlocks[s].bubbleSelectors(n);return r},evalImports:function(t){var n,r;for(n=0;n<this.rules.length;n++)this.rules[n]instanceof e.Import&&(r=this.rules[n].eval(t),"number"==typeof r.length?(this.rules.splice.apply(this.rules,[n,1].concat(r)),n+=r.length-1):this.rules.splice(n,1,r),this.resetCache())},makeImportant:function(){return new e.Ruleset(this.selectors,this.rules.map(function(e){return e.makeImportant?e.makeImportant():e}),this.strictImports)},matchArgs:function(e){return!e||0===e.length},resetCache:function(){this._rulesets=null,this._variables=null,this._lookups={}},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(t,n){return n instanceof e.Rule&&n.variable===!0&&(t[n.name]=n),t},{})},variable:function(e){return this.variables()[e]},rulesets:function(){return this.rules.filter(function(t){return t instanceof e.Ruleset||t instanceof e.mixin.Definition})},find:function(t,n){n=n||this;var s,r=[],o=t.toCSS();return o in this._lookups?this._lookups[o]:(this.rulesets().forEach(function(i){if(i!==n)for(var o=0;o<i.selectors.length;o++)if(s=t.match(i.selectors[o])){t.elements.length>i.selectors[o].elements.length?Array.prototype.push.apply(r,i.find(new e.Selector(t.elements.slice(1)),n)):r.push(i);break}}),this._lookups[o]=r)},toCSS:function(t){for(var o,u,a,n=[],r=[],i=[],s=[],f=0;f<this.rules.length;f++)if(a=this.rules[f],a.rules||a instanceof e.Media)s.push(a.toCSS(t));else if(a instanceof e.Directive){var l=a.toCSS(t);if("@charset"===a.name){if(t.charset){a.debugInfo&&(s.push(e.debugInfo(t,a)),s.push(new e.Comment("/* "+l.replace(/\n/g,"")+" */\n").toCSS(t)));continue}t.charset=!0}s.push(l)}else if(a instanceof e.Comment)a.silent||(this.root?s.push(a.toCSS(t)):r.push(a.toCSS(t)));else if(a.toCSS&&!a.variable){if(this.firstRoot&&a instanceof e.Rule)throw{message:"properties must be inside selector blocks, they cannot be in the root.",index:a.index,filename:a.currentFileInfo?a.currentFileInfo.filename:null};r.push(a.toCSS(t))}else a.value&&!a.variable&&r.push(a.value.toString());if(t.compress&&r.length&&(a=r[r.length-1],";"===a.charAt(a.length-1)&&(r[r.length-1]=a.substring(0,a.length-1))),s=s.join(""),this.root)n.push(r.join(t.compress?"":"\n"));else if(r.length>0){u=e.debugInfo(t,this),o=this.paths.map(function(e){return e.map(function(e){return e.toCSS(t)}).join("").trim()}).join(t.compress?",":",\n");for(var f=r.length-1;f>=0;f--)("/*"===r[f].slice(0,2)||-1===i.indexOf(r[f]))&&i.unshift(r[f]);r=i,n.push(u+o+(t.compress?"{":" {\n  ")+r.join(t.compress?"":"\n  ")+(t.compress?"}":"\n}\n"))}return n.push(s),n.join("")+(t.compress?"\n":"")},joinSelectors:function(e,t,n){for(var r=0;r<n.length;r++)this.joinSelector(e,t,n[r])},joinSelector:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;for(i=0;i<r.elements.length;i++)f=r.elements[i],"&"===f.value&&(u=!0);if(u){for(g=[],a=[[]],i=0;i<r.elements.length;i++)if(f=r.elements[i],"&"!==f.value)g.push(f);else{for(y=[],g.length>0&&this.mergeElementsOnToSelectors(g,a),s=0;s<a.length;s++)if(l=a[s],0==n.length)l.length>0&&(l[0].elements=l[0].elements.slice(0),l[0].elements.push(new e.Element(f.combinator,"",0))),y.push(l);else for(o=0;o<n.length;o++)c=n[o],h=[],p=[],v=!0,l.length>0?(h=l.slice(0),m=h.pop(),d=new e.Selector(m.elements.slice(0),r.extendList),v=!1):d=new e.Selector([],r.extendList),c.length>1&&(p=p.concat(c.slice(1))),c.length>0&&(v=!1,d.elements.push(new e.Element(f.combinator,c[0].elements[0].value,0)),d.elements=d.elements.concat(c[0].elements.slice(1))),v||h.push(d),h=h.concat(p),y.push(h);a=y,g=[]}for(g.length>0&&this.mergeElementsOnToSelectors(g,a),i=0;i<a.length;i++)a[i].length>0&&t.push(a[i])}else if(n.length>0)for(i=0;i<n.length;i++)t.push(n[i].concat(r));else t.push([r])},mergeElementsOnToSelectors:function(t,n){var r,i;if(0==n.length)return void n.push([new e.Selector(t)]);for(r=0;r<n.length;r++)i=n[r],i.length>0?i[i.length-1]=new e.Selector(i[i.length-1].elements.concat(t),i[i.length-1].extendList):i.push(new e.Selector(t));
}}}(n("../tree")),function(e){e.Selector=function(e,t){this.elements=e,this.extendList=t||[]},e.Selector.prototype={type:"Selector",accept:function(e){this.elements=e.visit(this.elements),this.extendList=e.visit(this.extendList)},match:function(e){var r,i,s,o,t=this.elements,n=t.length;if(r=e.elements.slice(e.elements.length&&"&"===e.elements[0].value?1:0),i=r.length,s=Math.min(n,i),0===i||i>n)return!1;for(o=0;s>o;o++)if(t[o].value!==r[o].value)return!1;return!0},eval:function(t){return new e.Selector(this.elements.map(function(e){return e.eval(t)}),this.extendList.map(function(e){return e.eval(t)}))},toCSS:function(e){return this._css?this._css:(""===this.elements[0].combinator.value?this._css=" ":this._css="",this._css+=this.elements.map(function(t){return"string"==typeof t?" "+t.trim():t.toCSS(e)}).join(""),this._css)}}}(n("../tree")),function(e){e.UnicodeDescriptor=function(e){this.value=e},e.UnicodeDescriptor.prototype={type:"UnicodeDescriptor",toCSS:function(e){return this.value},eval:function(){return this}}}(n("../tree")),function(e){e.URL=function(e,t){this.value=e,this.currentFileInfo=t},e.URL.prototype={type:"Url",accept:function(e){this.value=e.visit(this.value)},toCSS:function(){return"url("+this.value.toCSS()+")"},eval:function(t){var r,n=this.value.eval(t);return r=this.currentFileInfo&&this.currentFileInfo.rootpath,r&&"string"==typeof n.value&&t.isPathRelative(n.value)&&(n.quote||(r=r.replace(/[\(\)'"\s]/g,function(e){return"\\"+e})),n.value=r+n.value),new e.URL(n,null)}}}(n("../tree")),function(e){e.Value=function(e){this.value=e},e.Value.prototype={type:"Value",accept:function(e){this.value=e.visit(this.value)},eval:function(t){return 1===this.value.length?this.value[0].eval(t):new e.Value(this.value.map(function(e){return e.eval(t)}))},toCSS:function(e){return this.value.map(function(t){return t.toCSS(e)}).join(e.compress?",":", ")}}}(n("../tree")),function(e){e.Variable=function(e,t,n){this.name=e,this.index=t,this.currentFileInfo=n},e.Variable.prototype={type:"Variable",eval:function(t){var n,r,i=this.name;if(0==i.indexOf("@@")&&(i="@"+new e.Variable(i.slice(1)).eval(t).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+i,filename:this.currentFileInfo.file,index:this.index};if(this.evaluating=!0,n=e.find(t.frames,function(e){return(r=e.variable(i))?r.value.eval(t):void 0}))return this.evaluating=!1,n;throw{type:"Name",message:"variable "+i+" is undefined",filename:this.currentFileInfo.filename,index:this.index}}}}(n("../tree")),function(e){e.debugInfo=function(t,n){var r="";if(t.dumpLineNumbers&&!t.compress)switch(t.dumpLineNumbers){case"comments":r=e.debugInfo.asComment(n);break;case"mediaquery":r=e.debugInfo.asMediaQuery(n);break;case"all":r=e.debugInfo.asComment(n)+e.debugInfo.asMediaQuery(n)}return r},e.debugInfo.asComment=function(e){return"/* line "+e.debugInfo.lineNumber+", "+e.debugInfo.fileName+" */\n"},e.debugInfo.asMediaQuery=function(e){return"@media -sass-debug-info{filename{font-family:"+("file://"+e.debugInfo.fileName).replace(/([.:\/\\])/g,function(e){return"\\"==e&&(e="/"),"\\"+e})+"}line{font-family:\\00003"+e.debugInfo.lineNumber+"}}\n"},e.find=function(e,t){for(var r,n=0;n<e.length;n++)if(r=t.call(e,e[n]))return r;return null},e.jsify=function(e){return Array.isArray(e.value)&&e.value.length>1?"["+e.value.map(function(e){return e.toCSS(!1)}).join(", ")+"]":e.toCSS(!1)}}(n("./tree")),function(e){var t=["paths","optimization","files","contents","relativeUrls","strictImports","dumpLineNumbers","compress","processImports","syncImport","mime","currentFileInfo"];e.parseEnv=function(e){if(r(e,this,t),this.contents||(this.contents={}),this.files||(this.files={}),!this.currentFileInfo){var n=e&&e.filename||"input",i=n.replace(/[^\/\\]*$/,"");e&&(e.filename=null),this.currentFileInfo={filename:n,relativeUrls:this.relativeUrls,rootpath:e&&e.rootpath||"",currentDirectory:i,entryPath:i,rootFilename:n}}},e.parseEnv.prototype.toSheet=function(t){var n=new e.parseEnv(this);return n.href=t,n.type=this.mime,n};var n=["silent","verbose","compress","yuicompress","ieCompat","strictMath","strictUnits"];e.evalEnv=function(e,t){r(e,this,n),this.frames=t||[]},e.evalEnv.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},e.evalEnv.prototype.outOfParenthesis=function(){this.parensStack.pop()},e.evalEnv.prototype.isMathOn=function(){return this.strictMath?this.parensStack&&this.parensStack.length:!0},e.evalEnv.prototype.isPathRelative=function(e){return!/^(?:[a-z-]+:|\/)/.test(e)};var r=function(e,t,n){if(e)for(var r=0;r<n.length;r++)e.hasOwnProperty(n[r])&&(t[n[r]]=e[n[r]])}}(n("./tree")),function(e){e.visitor=function(e){this._implementation=e},e.visitor.prototype={visit:function(e){if(e instanceof Array)return this.visitArray(e);if(!e||!e.type)return e;var r,i,t="visit"+e.type,n=this._implementation[t];return n&&(r={visitDeeper:!0},i=n.call(this._implementation,e,r),this._implementation.isReplacing&&(e=i)),(!r||r.visitDeeper)&&e&&e.accept&&e.accept(this),t+="Out",this._implementation[t]&&this._implementation[t](e),e},visitArray:function(e){var t,n=[];for(t=0;t<e.length;t++){var r=this.visit(e[t]);r instanceof Array?n=n.concat(r):n.push(r)}return this._implementation.isReplacing?n:e}}}(n("./tree")),function(e){e.importVisitor=function(t,n,r){this._visitor=new e.visitor(this),this._importer=t,this._finish=n,this.env=r||new e.evalEnv,this.importCount=0},e.importVisitor.prototype={isReplacing:!0,run:function(e){var t;try{this._visitor.visit(e)}catch(n){t=n}this.isFinished=!0,0===this.importCount&&this._finish(t)},visitImport:function(t,n){var i,r=this;if(!t.css){try{i=t.evalForImport(this.env)}catch(s){s.filename||(s.index=t.index,s.filename=t.currentFileInfo.filename),t.css=!0,t.error=s}if(i&&!i.css){t=i,this.importCount++;var o=new e.evalEnv(this.env,this.env.frames.slice(0));this._importer.push(t.getPath(),t.currentFileInfo,function(n,i,s){n&&!n.filename&&(n.index=t.index,n.filename=t.currentFileInfo.filename),s&&!t.options.multiple&&(t.skip=s);var u=function(e){r.importCount--,0===r.importCount&&r.isFinished&&r._finish(e)};i?(t.root=i,new e.importVisitor(r._importer,u,o).run(i)):u()})}}return n.visitDeeper=!1,t},visitRule:function(e,t){return t.visitDeeper=!1,e},visitDirective:function(e,t){return this.env.frames.unshift(e),e},visitDirectiveOut:function(e){this.env.frames.shift()},visitMixinDefinition:function(e,t){return this.env.frames.unshift(e),e},visitMixinDefinitionOut:function(e){this.env.frames.shift()},visitRuleset:function(e,t){return this.env.frames.unshift(e),e},visitRulesetOut:function(e){this.env.frames.shift()},visitMedia:function(e,t){return this.env.frames.unshift(e.ruleset),e},visitMediaOut:function(e){this.env.frames.shift()}}}(n("./tree")),function(e){e.joinSelectorVisitor=function(){this.contexts=[[]],this._visitor=new e.visitor(this)},e.joinSelectorVisitor.prototype={run:function(e){return this._visitor.visit(e)},visitRule:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitRuleset:function(e,t){var n=this.contexts[this.contexts.length-1],r=[];this.contexts.push(r),e.root||(e.joinSelectors(r,n,e.selectors),e.paths=r)},visitRulesetOut:function(e){this.contexts.length=this.contexts.length-1},visitMedia:function(e,t){var n=this.contexts[this.contexts.length-1];e.ruleset.root=0===n.length||n[0].multiMedia}}}(n("./tree")),function(e){e.extendFinderVisitor=function(){this._visitor=new e.visitor(this),this.contexts=[],this.allExtendsStack=[[]]},e.extendFinderVisitor.prototype={run:function(e){return e=this._visitor.visit(e),e.allExtends=this.allExtendsStack[0],e},visitRule:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitRuleset:function(t,n){if(!t.root){var r,i,s,u,o=[];for(r=0;r<t.rules.length;r++)t.rules[r]instanceof e.Extend&&o.push(t.rules[r]);for(r=0;r<t.paths.length;r++){var a=t.paths[r],f=a[a.length-1];for(u=f.extendList.slice(0).concat(o).map(function(e){return e.clone()}),i=0;i<u.length;i++)this.foundExtends=!0,s=u[i],s.findSelfSelectors(a),s.ruleset=t,0===i&&(s.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(s)}this.contexts.push(t.selectors)}},visitRulesetOut:function(e){e.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(e,t){e.allExtends=[],this.allExtendsStack.push(e.allExtends)},visitMediaOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(e,t){e.allExtends=[],this.allExtendsStack.push(e.allExtends)},visitDirectiveOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1}},e.processExtendsVisitor=function(){this._visitor=new e.visitor(this)},e.processExtendsVisitor.prototype={run:function(t){var n=new e.extendFinderVisitor;return n.run(t),n.foundExtends?(t.allExtends=t.allExtends.concat(this.doExtendChaining(t.allExtends,t.allExtends)),this.allExtendsStack=[t.allExtends],this._visitor.visit(t)):t},doExtendChaining:function(t,n,r){var i,s,o,a,l,c,h,p,u=[],f=this;for(r=r||0,i=0;i<t.length;i++)for(s=0;s<n.length;s++)c=t[i],h=n[s],this.inInheritanceChain(h,c)||(l=[h.selfSelectors[0]],o=f.findMatch(c,l),o.length&&c.selfSelectors.forEach(function(t){a=f.extendSelector(o,l,t),p=new e.Extend(h.selector,h.option,0),p.selfSelectors=a,a[a.length-1].extendList=[p],u.push(p),p.ruleset=h.ruleset,p.parents=[h,c],h.firstExtendOnThisSelectorPath&&(p.firstExtendOnThisSelectorPath=!0,h.ruleset.paths.push(a))}));if(u.length){if(this.extendChainCount++,r>100){var d="{unable to calculate}",v="{unable to calculate}";try{d=u[0].selfSelectors[0].toCSS(),v=u[0].selector.toCSS()}catch(m){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+d+":extend("+v+")"}}return u.concat(f.doExtendChaining(u,n,r+1))}return u},inInheritanceChain:function(e,t){if(e===t)return!0;if(t.parents){if(this.inInheritanceChain(e,t.parents[0]))return!0;if(this.inInheritanceChain(e,t.parents[1]))return!0}return!1},visitRule:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitSelector:function(e,t){t.visitDeeper=!1},visitRuleset:function(e,t){if(!e.root){var n,r,i,a,s=this.allExtendsStack[this.allExtendsStack.length-1],o=[],u=this;for(i=0;i<s.length;i++)for(r=0;r<e.paths.length;r++)a=e.paths[r],a[a.length-1].extendList.length||(n=this.findMatch(s[i],a),n.length&&s[i].selfSelectors.forEach(function(e){o.push(u.extendSelector(n,a,e))}));e.paths=e.paths.concat(o)}},findMatch:function(e,t){var n,r,i,s,o,u,c,a=this,f=e.selector.elements,l=[],h=[];for(n=0;n<t.length;n++)for(r=t[n],i=0;i<r.elements.length;i++)for(s=r.elements[i],(e.allowBefore||0==n&&0==i)&&l.push({pathIndex:n,index:i,matched:0,initialCombinator:s.combinator}),u=0;u<l.length;u++)c=l[u],o=s.combinator.value,""==o&&0===i&&(o=" "),!a.isElementValuesEqual(f[c.matched].value,s.value)||c.matched>0&&f[c.matched].combinator.value!==o?c=null:c.matched++,c&&(c.finished=c.matched===f.length,c.finished&&!e.allowAfter&&(i+1<r.elements.length||n+1<t.length)&&(c=null)),c?c.finished&&(c.length=f.length,c.endPathIndex=n,c.endPathElementIndex=i+1,l.length=0,h.push(c)):(l.splice(u,1),u--);return h},isElementValuesEqual:function(t,n){return"string"==typeof t||"string"==typeof n?t===n:t instanceof e.Attribute?t.op!==n.op||t.key!==n.key?!1:t.value&&n.value?(t=t.value.value||t.value,n=n.value.value||n.value,t===n):t.value||n.value?!1:!0:!1},extendSelector:function(t,n,r){var u,a,f,l,i=0,s=0,o=[];for(u=0;u<t.length;u++)l=t[u],a=n[l.pathIndex],f=new e.Element(l.initialCombinator,r.elements[0].value,r.elements[0].index),l.pathIndex>i&&s>0&&(o[o.length-1].elements=o[o.length-1].elements.concat(n[i].elements.slice(s)),s=0,i++),o=o.concat(n.slice(i,l.pathIndex)),o.push(new e.Selector(a.elements.slice(s,l.index).concat([f]).concat(r.elements.slice(1)))),i=l.endPathIndex,s=l.endPathElementIndex,s>=a.elements.length&&(s=0,i++);return i<n.length&&s>0&&(o[o.length-1].elements=o[o.length-1].elements.concat(n[i].elements.slice(s)),s=0,i++),o=o.concat(n.slice(i,n.length))},visitRulesetOut:function(e){},visitMedia:function(e,t){var n=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,e.allExtends)),this.allExtendsStack.push(n)},visitMediaOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(e,t){var n=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,e.allExtends)),this.allExtendsStack.push(n)},visitDirectiveOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1}}}(n("./tree"));var o=/^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);if(r.env=r.env||("127.0.0.1"==location.hostname||"0.0.0.0"==location.hostname||"localhost"==location.hostname||location.port.length>0||o?"development":"production"),r.async=r.async||!1,r.fileAsync=r.fileAsync||!1,r.poll=r.poll||(o?1e3:1500),r.functions)for(var u in r.functions)r.tree.functions[u]=r.functions[u];var a=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash);a&&(r.dumpLineNumbers=a[1]),r.watch=function(){return r.watchMode||(r.env="development",f()),this.watchMode=!0},r.unwatch=function(){return clearInterval(r.watchTimer),this.watchMode=!1},/!watch/.test(location.hash)&&r.watch();var l=null;if("development"!=r.env)try{l="undefined"==typeof e.localStorage?null:e.localStorage}catch(c){}var h=document.getElementsByTagName("link"),p=/^text\/(x-)?less$/;r.sheets=[];for(var d=0;d<h.length;d++)("stylesheet/less"===h[d].rel||h[d].rel.match(/stylesheet/)&&h[d].type.match(p))&&r.sheets.push(h[d]);var v="";r.modifyVars=function(e){var t=v;for(var n in e)t+=("@"===n.slice(0,1)?"":"@")+n+": "+(";"===e[n].slice(-1)?e[n]:e[n]+";");new r.Parser(new r.tree.parseEnv(r)).parse(t,function(e,t){e?k(e,"session_cache"):S(t.toCSS(r),r.sheets[r.sheets.length-1])})},r.refresh=function(e){var t,n;t=n=new Date,g(function(e,i,s,o,u){return e?k(e,o.href):(u.local?C("loading "+o.href+" from cache."):(C("parsed "+o.href+" successfully."),S(i.toCSS(r),o,u.lastModified)),C("css for "+o.href+" generated in "+(new Date-n)+"ms"),0===u.remaining&&C("css generated in "+(new Date-t)+"ms"),n=new Date,void 0)},e),m()},r.refreshStyles=m,r.refresh("development"===r.env),"function"==typeof define&&define.amd&&define("less",[],function(){return r})}(window),function(){var n=this,t=n._,r=Array.prototype,e=Object.prototype,u=Function.prototype,i=r.push,a=r.slice,o=r.concat,l=e.toString,c=e.hasOwnProperty,f=Array.isArray,s=Object.keys,p=u.bind,h=function(n){return n instanceof h?n:this instanceof h?void(this._wrapped=n):new h(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports._=h):n._=h,h.VERSION="1.7.0";var g=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}};h.iteratee=function(n,t,r){return null==n?h.identity:h.isFunction(n)?g(n,t,r):h.isObject(n)?h.matches(n):h.property(n)},h.each=h.forEach=function(n,t,r){if(null==n)return n;t=g(t,r);var e,u=n.length;if(u===+u)for(e=0;u>e;e++)t(n[e],e,n);else{var i=h.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},h.map=h.collect=function(n,t,r){if(null==n)return[];t=h.iteratee(t,r);for(var e,u=n.length!==+n.length&&h.keys(n),i=(u||n).length,a=Array(i),o=0;i>o;o++)e=u?u[o]:o,a[o]=t(n[e],e,n);return a};var v="Reduce of empty array with no initial value";h.reduce=h.foldl=h.inject=function(n,t,r,e){null==n&&(n=[]),t=g(t,e,4);var u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length,o=0;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[o++]:o++]}for(;a>o;o++)u=i?i[o]:o,r=t(r,n[u],u,n);return r},h.reduceRight=h.foldr=function(n,t,r,e){null==n&&(n=[]),t=g(t,e,4);var u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[--a]:--a]}for(;a--;)u=i?i[a]:a,r=t(r,n[u],u,n);return r},h.find=h.detect=function(n,t,r){var e;return t=h.iteratee(t,r),h.some(n,function(n,r,u){return t(n,r,u)?(e=n,!0):void 0}),e},h.filter=h.select=function(n,t,r){var e=[];return null==n?e:(t=h.iteratee(t,r),h.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e)},h.reject=function(n,t,r){return h.filter(n,h.negate(h.iteratee(t)),r)},h.every=h.all=function(n,t,r){if(null==n)return!0;t=h.iteratee(t,r);var e,u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,!t(n[u],u,n))return!1;return!0},h.some=h.any=function(n,t,r){if(null==n)return!1;t=h.iteratee(t,r);var e,u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,t(n[u],u,n))return!0;return!1},h.contains=h.include=function(n,t){return null==n?!1:(n.length!==+n.length&&(n=h.values(n)),h.indexOf(n,t)>=0)},h.invoke=function(n,t){var r=a.call(arguments,2),e=h.isFunction(t);return h.map(n,function(n){return(e?t:n[t]).apply(n,r)})},h.pluck=function(n,t){return h.map(n,h.property(t))},h.where=function(n,t){return h.filter(n,h.matches(t))},h.findWhere=function(n,t){return h.find(n,h.matches(t))},h.max=function(n,t,r){var e,u,i=-1/0,a=-1/0;if(null==t&&null!=n){n=n.length===+n.length?n:h.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],e>i&&(i=e)}else t=h.iteratee(t,r),h.each(n,function(n,r,e){u=t(n,r,e),(u>a||u===-1/0&&i===-1/0)&&(i=n,a=u)});return i},h.min=function(n,t,r){var e,u,i=1/0,a=1/0;if(null==t&&null!=n){n=n.length===+n.length?n:h.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],i>e&&(i=e)}else t=h.iteratee(t,r),h.each(n,function(n,r,e){u=t(n,r,e),(a>u||1/0===u&&1/0===i)&&(i=n,a=u)});return i},h.shuffle=function(n){for(var t,r=n&&n.length===+n.length?n:h.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=h.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},h.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=h.values(n)),n[h.random(n.length-1)]):h.shuffle(n).slice(0,Math.max(0,t))},h.sortBy=function(n,t,r){return t=h.iteratee(t,r),h.pluck(h.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var m=function(n){return function(t,r,e){var u={};return r=h.iteratee(r,e),h.each(t,function(e,i){var a=r(e,i,t);n(u,e,a)}),u}};h.groupBy=m(function(n,t,r){h.has(n,r)?n[r].push(t):n[r]=[t]}),h.indexBy=m(function(n,t,r){n[r]=t}),h.countBy=m(function(n,t,r){h.has(n,r)?n[r]++:n[r]=1}),h.sortedIndex=function(n,t,r,e){r=h.iteratee(r,e,1);for(var u=r(t),i=0,a=n.length;a>i;){var o=i+a>>>1;r(n[o])<u?i=o+1:a=o}return i},h.toArray=function(n){return n?h.isArray(n)?a.call(n):n.length===+n.length?h.map(n,h.identity):h.values(n):[]},h.size=function(n){return null==n?0:n.length===+n.length?n.length:h.keys(n).length},h.partition=function(n,t,r){t=h.iteratee(t,r);var e=[],u=[];return h.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},h.first=h.head=h.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:a.call(n,0,t)},h.initial=function(n,t,r){return a.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},h.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:a.call(n,Math.max(n.length-t,0))},h.rest=h.tail=h.drop=function(n,t,r){return a.call(n,null==t||r?1:t)},h.compact=function(n){return h.filter(n,h.identity)};var y=function(n,t,r,e){if(t&&h.every(n,h.isArray))return o.apply(e,n);for(var u=0,a=n.length;a>u;u++){var l=n[u];h.isArray(l)||h.isArguments(l)?t?i.apply(e,l):y(l,t,r,e):r||e.push(l)}return e};h.flatten=function(n,t){return y(n,t,!1,[])},h.without=function(n){return h.difference(n,a.call(arguments,1))},h.uniq=h.unique=function(n,t,r,e){if(null==n)return[];h.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=h.iteratee(r,e));for(var u=[],i=[],a=0,o=n.length;o>a;a++){var l=n[a];if(t)a&&i===l||u.push(l),i=l;else if(r){var c=r(l,a,n);h.indexOf(i,c)<0&&(i.push(c),u.push(l))}else h.indexOf(u,l)<0&&u.push(l)}return u},h.union=function(){return h.uniq(y(arguments,!0,!0,[]))},h.intersection=function(n){if(null==n)return[];for(var t=[],r=arguments.length,e=0,u=n.length;u>e;e++){var i=n[e];if(!h.contains(t,i)){for(var a=1;r>a&&h.contains(arguments[a],i);a++);a===r&&t.push(i)}}return t},h.difference=function(n){var t=y(a.call(arguments,1),!0,!0,[]);return h.filter(n,function(n){return!h.contains(t,n)})},h.zip=function(n){if(null==n)return[];for(var t=h.max(arguments,"length").length,r=Array(t),e=0;t>e;e++)r[e]=h.pluck(arguments,e);return r},h.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},h.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=h.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}for(;u>e;e++)if(n[e]===t)return e;return-1},h.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=n.length;for("number"==typeof r&&(e=0>r?e+r+1:Math.min(e,r+1));--e>=0;)if(n[e]===t)return e;return-1},h.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var d=function(){};h.bind=function(n,t){var r,e;if(p&&n.bind===p)return p.apply(n,a.call(arguments,1));if(!h.isFunction(n))throw new TypeError("Bind must be called on a function");return r=a.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(a.call(arguments)));d.prototype=n.prototype;var u=new d;d.prototype=null;var i=n.apply(u,r.concat(a.call(arguments)));return h.isObject(i)?i:u}},h.partial=function(n){var t=a.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===h&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},h.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=h.bind(n[r],n);return n},h.memoize=function(n,t){var r=function(e){var u=r.cache,i=t?t.apply(this,arguments):e;return h.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},h.delay=function(n,t){var r=a.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},h.defer=function(n){return h.delay.apply(h,[n,1].concat(a.call(arguments,1)))},h.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var l=function(){o=r.leading===!1?0:h.now(),a=null,i=n.apply(e,u),a||(e=u=null)};return function(){var c=h.now();o||r.leading!==!1||(o=c);var f=t-(c-o);return e=this,u=arguments,0>=f||f>t?(clearTimeout(a),a=null,o=c,i=n.apply(e,u),a||(e=u=null)):a||r.trailing===!1||(a=setTimeout(l,f)),i}},h.debounce=function(n,t,r){var e,u,i,a,o,l=function(){var c=h.now()-a;t>c&&c>0?e=setTimeout(l,t-c):(e=null,r||(o=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,a=h.now();var c=r&&!e;return e||(e=setTimeout(l,t)),c&&(o=n.apply(i,u),i=u=null),o}},h.wrap=function(n,t){return h.partial(t,n)},h.negate=function(n){return function(){return!n.apply(this,arguments)}},h.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},h.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},h.before=function(n,t){var r;return function(){return--n>0?r=t.apply(this,arguments):t=null,r}},h.once=h.partial(h.before,2),h.keys=function(n){if(!h.isObject(n))return[];if(s)return s(n);var t=[];for(var r in n)h.has(n,r)&&t.push(r);return t},h.values=function(n){for(var t=h.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},h.pairs=function(n){for(var t=h.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},h.invert=function(n){for(var t={},r=h.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},h.functions=h.methods=function(n){var t=[];for(var r in n)h.isFunction(n[r])&&t.push(r);return t.sort()},h.extend=function(n){if(!h.isObject(n))return n;for(var t,r,e=1,u=arguments.length;u>e;e++){t=arguments[e];for(r in t)c.call(t,r)&&(n[r]=t[r])}return n},h.pick=function(n,t,r){var e,u={};if(null==n)return u;if(h.isFunction(t)){t=g(t,r);for(e in n){var i=n[e];t(i,e,n)&&(u[e]=i)}}else{var l=o.apply([],a.call(arguments,1));n=new Object(n);for(var c=0,f=l.length;f>c;c++)e=l[c],e in n&&(u[e]=n[e])}return u},h.omit=function(n,t,r){if(h.isFunction(t))t=h.negate(t);else{var e=h.map(o.apply([],a.call(arguments,1)),String);t=function(n,t){return!h.contains(e,t)}}return h.pick(n,t,r)},h.defaults=function(n){if(!h.isObject(n))return n;for(var t=1,r=arguments.length;r>t;t++){var e=arguments[t];for(var u in e)void 0===n[u]&&(n[u]=e[u])}return n},h.clone=function(n){return h.isObject(n)?h.isArray(n)?n.slice():h.extend({},n):n},h.tap=function(n,t){return t(n),n};var b=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof h&&(n=n._wrapped),t instanceof h&&(t=t._wrapped);var u=l.call(n);if(u!==l.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]===n)return e[i]===t;var a=n.constructor,o=t.constructor;if(a!==o&&"constructor"in n&&"constructor"in t&&!(h.isFunction(a)&&a instanceof a&&h.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c,f;if("[object Array]"===u){if(c=n.length,f=c===t.length)for(;c--&&(f=b(n[c],t[c],r,e)););}else{var s,p=h.keys(n);if(c=p.length,f=h.keys(t).length===c)for(;c--&&(s=p[c],f=h.has(t,s)&&b(n[s],t[s],r,e)););}return r.pop(),e.pop(),f};h.isEqual=function(n,t){return b(n,t,[],[])},h.isEmpty=function(n){if(null==n)return!0;if(h.isArray(n)||h.isString(n)||h.isArguments(n))return 0===n.length;for(var t in n)if(h.has(n,t))return!1;return!0},h.isElement=function(n){return!(!n||1!==n.nodeType)},h.isArray=f||function(n){return"[object Array]"===l.call(n)},h.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},h.each(["Arguments","Function","String","Number","Date","RegExp"],function(n){h["is"+n]=function(t){return l.call(t)==="[object "+n+"]"}}),h.isArguments(arguments)||(h.isArguments=function(n){return h.has(n,"callee")}),"function"!=typeof/./&&(h.isFunction=function(n){return"function"==typeof n||!1}),h.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},h.isNaN=function(n){return h.isNumber(n)&&n!==+n},h.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===l.call(n)},h.isNull=function(n){return null===n},h.isUndefined=function(n){return void 0===n},h.has=function(n,t){return null!=n&&c.call(n,t)},h.noConflict=function(){return n._=t,this},h.identity=function(n){return n},h.constant=function(n){return function(){return n}},h.noop=function(){},h.property=function(n){return function(t){return t[n]}},h.matches=function(n){var t=h.pairs(n),r=t.length;return function(n){if(null==n)return!r;n=new Object(n);for(var e=0;r>e;e++){var u=t[e],i=u[0];if(u[1]!==n[i]||!(i in n))return!1}return!0}},h.times=function(n,t,r){var e=Array(Math.max(0,n));t=g(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},h.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},h.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=h.invert(_),j=function(n){var t=function(t){return n[t]},r="(?:"+h.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};h.escape=j(_),h.unescape=j(w),h.result=function(n,t){if(null!=n){var r=n[t];return h.isFunction(r)?n[t]():r}};var x=0;h.uniqueId=function(n){var t=++x+"";return n?n+t:t},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,k={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g,F=function(n){return"\\"+k[n]};h.template=function(n,t,r){!t&&r&&(t=r),t=h.defaults({},t,h.templateSettings);var e=RegExp([(t.escape||A).source,(t.interpolate||A).source,(t.evaluate||A).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,a,o){return i+=n.slice(u,o).replace(O,F),u=o+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(t.variable||"obj","_",i)}catch(o){throw o.source=i,o}var l=function(n){return a.call(this,n,h)},c=t.variable||"obj";return l.source="function("+c+"){\n"+i+"}",l},h.chain=function(n){var t=h(n);return t._chain=!0,t};var E=function(n){return this._chain?h(n).chain():n};h.mixin=function(n){h.each(h.functions(n),function(t){var r=h[t]=n[t];h.prototype[t]=function(){var n=[this._wrapped];return i.apply(n,arguments),E.call(this,r.apply(h,n))}})},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=r[n];h.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],E.call(this,r)}}),h.each(["concat","join","slice"],function(n){var t=r[n];h.prototype[n]=function(){return E.call(this,t.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return h})}.call(this),!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}function D(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];
return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function Fb(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;e--;)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}var e={},f=a===oc;return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function uc(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Bc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}function Kc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g)for(;f>e&&(d=b.apply(a[e],c),d!==!1);e++);else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g)for(;f>e&&(d=b.call(a[e],e,a[e]),d!==!1);e++);else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});var t=function(a){function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){for(o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;l--;)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){for(var c=a.split("|"),e=a.length;e--;)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}function pb(){}function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=ub(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e&&!d.relative[a[e].type];e++);return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){for(m=0;o=a[m++];)if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){for(m=0;o=b[m++];)o(r,s,g,h);if(f){if(p>0)for(;q--;)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){for(;b=a[f++];)b===a[f]&&(e=d.push(f));for(;e--;)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else for(;b=a[d++];)c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[u]||(l[u]={}))[a]=[w,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);return pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=d.preFilter;h;){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)},h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){for(b||(b=g(a)),c=b.length;c--;)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}for(i=X.needsContext.test(a)?0:j.length;i--&&(k=j[i],!d.relative[l=k.type]);)if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a));
}}),n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){for(var c;(c=n.inArray(b,h,c))>-1;)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var i,j,k,b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}};if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;j--;)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){for(b=(b||"").match(E)||[""],j=b.length;j--;)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){for(l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=p[f++])&&!b.isPropagationStopped();)b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=n.event.handlers.call(this,a,j),b=0;(f=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,c=0;(g=f.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c))for(j=0;e=f[j++];)fb.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};!function(){function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f),a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}}))}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),void(null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;return a&&3!==f&&8!==f&&2!==f?typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)for(;c=f[e++];)d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){
var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?(f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]):void 0},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=n(this),f=a.match(E)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)):void 0}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=n.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[],n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,n.ajaxSettings),b):tc(n.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f)for(f={};b=ic.exec(e);)f[b[1].toLowerCase()]=b[2];b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Dc)Dc[a]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(a){var b;return k.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Ic=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Jc;a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position");)a=a.offsetParent;return a||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Mc),b&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n}),function(t,e){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(i,r,s){t.Backbone=e(t,s,i,r)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,r){var s=t.Backbone,n=[],o=(n.push,n.slice);n.splice;e.VERSION="1.1.2",e.$=r,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var u=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var s=this,n=i.once(function(){s.off(t,n),e.apply(this,arguments)});return n._callback=e,this.on(t,n,r)},off:function(t,e,r){var s,n,a,o,h,u,l,f;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),h=0,u=o.length;u>h;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||r)for(l=0,f=a.length;f>l;l++)n=a[l],(e&&e!==n.callback&&e!==n.callback._callback||r&&r!==n.context)&&s.push(n);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],r=this._events.all;return i&&f(i,e),r&&f(r,arguments),this},stopListening:function(t,e,r){var s=this._listeningTo;if(!s)return this;var n=!e&&!r;r||"object"!=typeof e||(r=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,r,this),(n||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},l=/\s+/,c=function(t,e,i,r){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(r));return!1}if(l.test(i)){for(var n=i.split(l),a=0,o=n.length;o>a;a++)t[e].apply(t,[n[a]].concat(r));return!1}return!0},f=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++r<s;)(i=t[r]).callback.call(i.ctx);return;case 1:for(;++r<s;)(i=t[r]).callback.call(i.ctx,n);return;case 2:for(;++r<s;)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:for(;++r<s;)(i=t[r]).callback.call(i.ctx,n,a,o);return;default:for(;++r<s;)(i=t[r]).callback.apply(i.ctx,e);return}},d={listenTo:"on",listenToOnce:"once"};i.each(d,function(t,e){u[e]=function(e,r,s){var n=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i.uniqueId("l"));return n[a]=e,s||"object"!=typeof r||(s=this),e[t](r,s,this),this}}),u.bind=u.on,u.unbind=u.off,i.extend(e,u);var p=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=i.defaults({},r,i.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var s,n,a,o,h,u,l,c;if(null==t)return this;if("object"==typeof t?(n=t,r=e):(n={})[t]=e,r||(r={}),!this._validate(n,r))return!1;a=r.unset,h=r.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in n&&(this.id=n[this.idAttribute]);for(s in n)e=n[s],i.isEqual(c[s],e)||o.push(s),i.isEqual(l[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete c[s]:c[s]=e;if(!h){o.length&&(this._pending=r);for(var f=0,d=o.length;d>f;f++)this.trigger("change:"+o[f],this,c[o[f]],r)}if(u)return this;if(!h)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,r=!1,s=this._changing?this._previousAttributes:this.attributes;for(var n in t)i.isEqual(s[n],e=t[n])||((r||(r={}))[n]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,r=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(r&&r(e,i,t),void e.trigger("sync",e,i,t)):!1},q(this,t),this.sync("read",this,t)},save:function(t,e,r){var s,n,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,r=e):(s={})[t]=e,r=i.extend({validate:!0},r),s&&!r.wait){if(!this.set(s,r))return!1}else if(!this._validate(s,r))return!1;s&&r.wait&&(this.attributes=i.extend({},o,s)),void 0===r.parse&&(r.parse=!0);var h=this,u=r.success;return r.success=function(t){h.attributes=o;var e=h.parse(t,r);return r.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!h.set(e,r)?!1:(u&&u(h,t,r),void h.trigger("sync",h,t,r))},q(this,r),n=this.isNew()?"create":r.patch?"patch":"update","patch"===n&&(r.attrs=s),a=this.sync(n,this,r),s&&r.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,r=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),r&&r(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;q(this,t);var n=this.sync("delete",this,t);return t.wait||s(),n},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||M();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,i.extend(e,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];i.each(v,function(t){p.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var g=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};i.extend(g.prototype,u,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,y))},remove:function(t,e){var r=!i.isArray(t);t=r?[t]:i.clone(t),e||(e={});var s,n,a,o;for(s=0,n=t.length;n>s;s++)o=t[s]=this.get(t[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return r?t[0]:t},set:function(t,e){e=i.defaults({},e,m),e.parse&&(t=this.parse(t,e));var r=!i.isArray(t);t=r?t?[t]:[]:i.clone(t);var s,n,a,o,h,u,l,c=e.at,f=this.model,d=this.comparator&&null==c&&e.sort!==!1,v=i.isString(this.comparator)?this.comparator:null,g=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!d&&b&&x?[]:!1;for(s=0,n=t.length;n>s;s++){if(h=t[s]||{},a=h instanceof p?o=h:h[f.prototype.idAttribute||"id"],u=this.get(a))x&&(_[u.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=u.parse(h,e)),u.set(h,e),d&&!l&&u.hasChanged(v)&&(l=!0)),t[s]=u;else if(b){if(o=t[s]=this._prepareModel(h,e),!o)continue;g.push(o),this._addReference(o,e)}o=u||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,n=this.length;n>s;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(g.length||E&&E.length)if(d&&(l=!0),this.length+=g.length,null!=c)for(s=0,n=g.length;n>s;s++)this.models.splice(c+s,0,g[s]);else{E&&(this.models.length=0);var k=E||g;for(s=0,n=k.length;n>s;s++)this.models.push(k[s])}if(l&&this.sort({silent:!0}),!e.silent){for(s=0,n=g.length;n>s;s++)(o=g[s]).trigger("add",o,this,e);(l||E&&E.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,s=this.models.length;s>r;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null!=t?this._byId[t]||this._byId[t.id]||this._byId[t.cid]:void 0},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,r=this;return t.success=function(i){var s=t.reset?"reset":"set";r[s](i,t),e&&e(r,i,t),r.trigger("sync",r,i,t)},q(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,s=e.success;return e.success=function(t,i){e.wait&&r.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t;e=e?i.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(_,function(t){g.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(t){g.prototype[t]=function(e,r){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,r)}});var w=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,E)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];i.extend(w.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(i.isFunction(r)||(r=this[t[e]]),r){var s=e.match(x),n=s[1],a=s[2];r=i.bind(r,this),n+=".delegateEvents"+this.cid,""===a?this.$el.on(n,r):this.$el.on(n,a,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var r=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),e.sync=function(t,r,s){var n=T[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:n,dataType:"json"};if(s.url||(a.url=i.result(r,"url")||M()),null!=s.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||r.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){a.type="POST",s.emulateJSON&&(a.data._method=n);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",n),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&k&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return r.trigger("request",r,h,s),h};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var $=e.Router=function(t){
t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,H=/(\(\?)?:\w+/g,A=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend($.prototype,u,{initialize:function(){},route:function(t,r,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(r)&&(s=r,r=""),s||(s=this[r]);var n=this;return e.history.route(t,function(i){var a=n._extractParameters(t,i);n.execute(s,a),n.trigger.apply(n,["route:"+r].concat(a)),n.trigger("route",r,a),e.history.trigger("route",n,r,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(I,"\\$&").replace(S,"(?:$1)?").replace(H,function(t,e){return e?t:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return i.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,P=/msie [\w.]+/,C=/\/$/,j=/#.*$/;N.started=!1,i.extend(N.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(C,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(R,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),s=document.documentMode,n=P.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(O,"/"),n&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(R,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!N.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(j,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new N;var U=function(t,e){var s,r=this;s=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(s,r,e);var n=function(){this.constructor=s};return n.prototype=r.prototype,s.prototype=new n,t&&i.extend(s.prototype,t),s.__super__=r.prototype,s};p.extend=g.extend=$.extend=w.extend=N.extend=U;var M=function(){throw new Error('A "url" property or function must be specified')},q=function(t,e){var i=e.error;e.error=function(r){i&&i(t,r,e),t.trigger("error",t,r,e)}};return e}),define("models/state",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var StateModel=Backbone.Model.extend({defaults:{super_user:null,csrf_token:null,theme:null,active:null,plan:null,version:null,sso:null},url:function(){return"/state"}});return StateModel}),define("models/subscription",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var SubscriptionModel=Backbone.Model.extend({defaults:{card:null,email:null,url_key:null,active:null,status:null,plan:null,quantity:null,amount:null,period_end:null,trial_end:null,cancel_at_period_end:null,balance:null,version:null,theme:null,super_user:null,sso:null},isNew:function(){var active=this.get("active");return null===active||void 0===active},url:function(){return"/subscription"},parse:function(response){return this.unset("cancel"),response},getStatusData:function(){var loadMsg,completeMsg,status=this.get("status");return"canceled"===status?(loadMsg="Reactivating subscription, please wait...",completeMsg="Subscription successfully reactivated.",["Inactive","error-text","checkout_reactivate",loadMsg,completeMsg]):this.get("cancel_at_period_end")?(loadMsg="Reactivating subscription, please wait...",completeMsg="Subscription successfully reactivated, you will not be charged until the end of the current subscription period.",["Canceled","error-text","checkout_renew",loadMsg,completeMsg]):"past_due"===status?(loadMsg="Reactivating subscription, please wait...",completeMsg="Subscription successfully reactivated.",["Past Due","warning-text","checkout_reactivate",loadMsg,completeMsg]):(status="trialing"===status?"Trial Period":"Active",loadMsg="Updating payment information, please wait...",completeMsg="Payment information successfully updated, you will not be charged until the end of the current subscription period.",[status,"success-text","checkout_update",loadMsg,completeMsg])}});return SubscriptionModel}),define("models/event",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var EventModel=Backbone.Model.extend({defaults:{id:null,type:null,resource_id:null,timestamp:null}});return EventModel}),define("collections/event",["jquery","underscore","backbone","models/event"],function($,_,Backbone,EventModel){"use strict";var EventCollection=Backbone.Collection.extend({model:EventModel,url:function(){var url="/event";return this.cursor&&(url+="/"+this.cursor),url},callFetch:function(uuid){return window.authenticated?void this.fetch({reset:!0,success:function(collection){if(uuid===this.currentLoop){var i,model;for(i=0;i<collection.models.length;i++){if(model=collection.models[i],this.cursor=model.get("id"),"demo"===this.cursor)return void this.disable();if(window.authenticated){if("reload"===model.get("type"))return void location.reload();this.trigger(model.get("type")),model.get("resource_id")&&this.trigger(model.get("type")+":"+model.get("resource_id"))}}this.callFetch(uuid)}}.bind(this),error:function(){uuid===this.currentLoop&&setTimeout(function(){this.callFetch(uuid)}.bind(this),1e3)}.bind(this)}):void setTimeout(function(){this.callFetch(uuid)}.bind(this),250)},start:function(){this.disabled||(this.currentLoop=(new Date).getTime(),this.callFetch(this.currentLoop))},stop:function(){this.currentLoop=null},disable:function(){this.currentLoop=null,this.disabled=!0}});return EventCollection}),define("models/settings",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var SettingsModel=Backbone.Model.extend({defaults:{username:null,password:null,auditing:null,"default":null,email_server:null,email_username:null,email_password:null,email_from:null,pin_mode:null,monitoring:null,influxdb_uri:null,sso:null,sso_match:null,sso_google_key:null,sso_google_email:null,sso_duo_host:null,sso_duo_token:null,sso_duo_secret:null,sso_duo_mode:null,sso_org:null,sso_saml_url:null,sso_saml_issuer_url:null,sso_saml_cert:null,sso_okta_token:null,sso_onelogin_id:null,sso_onelogin_secret:null,sso_radius_host:null,sso_radius_secret:null,sso_client_cache:null,sso_yubico_client:null,sso_yubico_secret:null,public_address:null,public_address6:null,routed_subnet6:null,reverse_proxy:null,theme:null,server_port:null,server_cert:null,server_key:null,acme_domain:null,cloud_provider:null,route53_region:null,route53_zone:null,us_east_1_access_key:null,us_east_1_secret_key:null,us_east_2_access_key:null,us_east_2_secret_key:null,us_west_1_access_key:null,us_west_1_secret_key:null,us_west_2_access_key:null,us_west_2_secret_key:null,us_gov_west_1_access_key:null,us_gov_west_1_secret_key:null,eu_west_1_access_key:null,eu_west_1_secret_key:null,eu_west_2_access_key:null,eu_west_2_secret_key:null,eu_central_1_access_key:null,eu_central_1_secret_key:null,ca_central_1_access_key:null,ca_central_1_secret_key:null,ap_northeast_1_access_key:null,ap_northeast_1_secret_key:null,ap_northeast_2_access_key:null,ap_northeast_2_secret_key:null,ap_southeast_1_access_key:null,ap_southeast_1_secret_key:null,ap_southeast_2_access_key:null,ap_southeast_2_secret_key:null,ap_south_1_access_key:null,ap_south_1_secret_key:null,sa_east_1_access_key:null,sa_east_1_secret_key:null},url:function(){return"/settings"},isNew:function(){return!1}});return SettingsModel}),define("models/user",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var UserModel=Backbone.Model.extend({defaults:{id:null,organization:null,organization_name:null,name:null,email:null,groups:null,gravatar:null,audit:null,type:null,auth_type:null,status:null,sso:null,otp_auth:null,otp_secret:null,servers:null,disabled:null,network_links:null,dns_mapping:null,bypass_secondary:null,client_to_client:null,dns_servers:null,dns_suffix:null,port_forwarding:null,pin:null},url:function(){var url="/user/"+this.get("organization");return this.get("id")&&(url+="/"+this.get("id")),url},destroyOtpSecret:function(options){this.save(null,_.extend({url:this.url()+"/otp_secret"},options))},portForwardingFormatted:function(){var portForwarding=this.get("port_forwarding");if(!portForwarding)return"";for(var item,port,ports=[],i=0;i<portForwarding.length;i++)item=portForwarding[i],port=item.port,item.dport&&(port+=":"+item.dport),item.protocol&&(port+="/"+item.protocol),ports.push(port);return ports.join(", ")},parse:function(response){return this.set({hidden:"client"!==response.type}),response}});return UserModel}),define("models/userAudit",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var UserAuditModel=Backbone.Model.extend({defaults:{id:null,user_id:null,org_id:null,timestamp:null,type:null,remote_addr:null,message:null},url:function(){return null}});return UserAuditModel}),define("collections/userAudit",["jquery","underscore","backbone","models/userAudit"],function($,_,Backbone,UserAuditModel){"use strict";var UserAuditCollection=Backbone.Collection.extend({model:UserAuditModel,initialize:function(options){this.user=options.user},url:function(){return"/user/"+this.user.get("organization")+"/"+this.user.get("id")+"/audit"}});return UserAuditCollection}),define("text",["module"],function(module){"use strict";var text,fs,Cc,Ci,xpcIsWindows,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation="undefined"!=typeof location&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||void 0),buildMap={},masterConfig=module.config&&module.config()||{};return text={version:"2.0.12",strip:function(content){if(content){content=content.replace(xmlRegExp,"");var matches=content.match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(i=0;3>i;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var modName,ext,temp,strip=!1,index=name.indexOf("."),isRelative=0===name.indexOf("./")||0===name.indexOf("../");return-1!==index&&(!isRelative||index>1)?(modName=name.substring(0,index),ext=name.substring(index+1,name.length)):modName=name,temp=ext||modName,index=temp.indexOf("!"),-1!==index&&(strip="strip"===temp.substring(index+1),temp=temp.substring(0,index),ext?ext=temp:modName=temp),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var uProtocol,uHostName,uPort,match=text.xdRegExp.exec(url);return match?(uProtocol=match[2],uHostName=match[3],uHostName=uHostName.split(":"),uPort=uHostName[1],uHostName=uHostName[0],!(uProtocol&&uProtocol!==protocol||uHostName&&uHostName.toLowerCase()!==hostname.toLowerCase()||(uPort||uHostName)&&uPort!==port)):!0},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(config&&config.isBuild&&!config.inlineText)return void onLoad();masterConfig.isBuild=config&&config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+(parsed.ext?"."+parsed.ext:""),url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;return 0===url.indexOf("empty:")?void onLoad():void(!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)}))},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),extPart=parsed.ext?"."+parsed.ext:"",nonStripName=parsed.moduleName+extPart,fileName=req.toUrl(parsed.moduleName+extPart)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}},"node"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(fs=require.nodeRequire("fs"),text.get=function(url,callback,errback){try{var file=fs.readFileSync(url,"utf8");0===file.indexOf("\ufeff")&&(file=file.substring(1)),callback(file)}catch(e){errback&&errback(e)}}):"xhr"===masterConfig.env||!masterConfig.env&&text.createXhr()?text.get=function(url,callback,errback,headers){var header,xhr=text.createXhr();if(xhr.open("GET",url,!0),headers)for(header in headers)headers.hasOwnProperty(header)&&xhr.setRequestHeader(header.toLowerCase(),headers[header]);masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status,err;4===xhr.readyState&&(status=xhr.status||0,status>399&&600>status?(err=new Error(url+" HTTP status: "+status),err.xhr=xhr,errback&&errback(err)):callback(xhr.responseText),masterConfig.onXhrComplete&&masterConfig.onXhrComplete(xhr,url))},xhr.send(null)}:"rhino"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?text.get=function(url,callback){var stringBuffer,line,encoding="utf-8",file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),encoding)),content="";try{for(stringBuffer=new java.lang.StringBuffer,line=input.readLine(),line&&line.length()&&65279===line.charAt(0)&&(line=line.substring(1)),null!==line&&stringBuffer.append(line);null!==(line=input.readLine());)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(stringBuffer.toString())}finally{input.close()}callback(content)}:("xpconnect"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(Cc=Components.classes,Ci=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),xpcIsWindows="@mozilla.org/windows-registry-key;1"in Cc,text.get=function(url,callback){var inStream,convertStream,fileObj,readData={};xpcIsWindows&&(url=url.replace(/\//g,"\\")),fileObj=new FileUtils.File(url);try{inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream),inStream.init(fileObj,1,0,!1),convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream),convertStream.init(inStream,"utf-8",inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),convertStream.close(),inStream.close(),callback(readData.value)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}}),text}),define("text!templates/alert.html",[],function(){return'<div class="alert alert-<%- type %> <%- (dismissable) ? \'alert-dismissable\' : \'\' %>">\n  <% if (dismissable) { %>\n    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n  <% } %>\n  <span>\n    <%= message %>\n  </span>\n</div>\n'}),define("views/alert",["jquery","underscore","backbone","text!templates/alert.html"],function($,_,Backbone,alertTemplate){"use strict";var AlertView=Backbone.View.extend({template:_.template(alertTemplate),events:{"click .close":"onClose"},initialize:function(options){this.type=options.type,this.message=options.message,this.dismissable=options.dismissable,this.animate=options.animate===!1?!1:!0,this.force=options.force,this.render()},render:function(){return this.force||window.authenticated?(this.$el.html(this.template({type:this.type,message:this.message,dismissable:this.dismissable})),this.animate&&(this.$el.hide(),this.$el.slideDown(window.slideTime)),this):(this.destroy(),this)},flash:function(complete){this.$(".alert").addClass("flash"),setTimeout(function(){this.$(".alert").removeClass("flash"),setTimeout(function(){this.$(".alert").addClass("flash"),setTimeout(function(){this.$(".alert").removeClass("flash"),complete&&complete()}.bind(this),150)}.bind(this),150)}.bind(this),150)},onClose:function(){this.close()},close:function(complete){this.$el.slideUp(window.slideTime,function(){this.destroy(),complete&&complete()}.bind(this))}});return AlertView}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.2.0",d.prototype.close=function(b){function c(){f.detach().trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(150):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.2.0",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),d[e](null==f[b]?this.options[b]:f[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b).on("keydown.bs.carousel",a.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.2.0",c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},c.prototype.keydown=function(a){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.to=function(b){var c=this,d=this.getItemIndex(this.$active=this.$element.find(".item.active"));return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=e[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:g});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,f&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(e)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:g});return a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one("bsTransitionEnd",function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger(m)),f&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(b=!b),e||d.data("bs.collapse",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};c.VERSION="3.2.0",c.DEFAULTS={toggle:!0},c.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var c=a.Event("show.bs.collapse");if(this.$element.trigger(c),!c.isDefaultPrevented()){var d=this.$parent&&this.$parent.find("> .panel > .in");if(d&&d.length){var e=d.data("bs.collapse");if(e&&e.transitioning)return;b.call(d,"hide"),e||d.data("bs.collapse",null)}var f=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[f](0),this.transitioning=1;var g=function(){this.$element.removeClass("collapsing").addClass("collapse in")[f](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return g.call(this);var h=a.camelCase(["scroll",f].join("-"));this.$element.one("bsTransitionEnd",a.proxy(g,this)).emulateTransitionEnd(350)[f](this.$element[0][h])}}},c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=b,a.fn.collapse.Constructor=c,a.fn.collapse.noConflict=function(){return a.fn.collapse=d,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(c){var d,e=a(this),f=e.attr("data-target")||c.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),g=a(f),h=g.data("bs.collapse"),i=h?"toggle":e.data(),j=e.attr("data-parent"),k=j&&a(j);h&&h.transitioning||(k&&k.find('[data-toggle="collapse"][data-parent="'+j+'"]').not(e).addClass("collapsed"),e[g.hasClass("in")?"addClass":"removeClass"]("collapsed")),b.call(g,i)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,
this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.2.0",c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.2.0",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.2.0",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.2.0",c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.closest("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},c.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),f.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault(),b.call(a(this),"show")})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.2.0",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=a(document).height(),d=this.$target.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=b-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){null!=this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:b-this.$element.height()-h}))}}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},d.offsetBottom&&(d.offset.bottom=d.offsetBottom),d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),define("bootstrap",["jquery"],function(){}),define("text!templates/modal.html",[],function(){return'<div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" aria-hidden="true">&times;</button>\n        <h4 class="modal-title title"><%- title %></h4>\n        <div class="modal-advanced-toggle no-select">Advanced</div>\n      </div>\n      <div class="modal-body"></div>\n      <div class="modal-footer">\n        <% if (cancelText !== null) { %>\n          <button type="button" class="btn btn-default cancel"><%- cancelText %></button>\n        <% } %>\n        <% if (okText !== null) { %>\n          <button type="button" class="btn btn-primary ok"><%- okText %></button>\n        <% } %>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("views/modal",["jquery","underscore","backbone","bootstrap","views/alert","text!templates/modal.html"],function($,_,Backbone,Bootstrap,AlertView,modalTemplate){"use strict";var ModalView=Backbone.View.extend({modalTemplate:_.template(modalTemplate),events:{"click .close, .cancel":"dismiss","click .ok":"onOk","click .modal-advanced-toggle":"onAdvancedToggle","hidden.bs.modal .modal":"onRemove","keyup input":"onInputChange","paste input":"onInputChange","input input":"onInputChange","propertychange input":"onInputChange","keypress .modal":"onKeypress","shown.bs.modal .modal":"onModalShown"},title:"",okText:"Ok",cancelText:"Cancel",errorMsg:"Unknown server error occurred.",enterOk:!0,safeClose:!1,hasAdvanced:!1,body:function(){return""},initialize:function(){this.render(),this.postRender()},deinitialize:function(){this.$(".modal").modal("hide"),$(".modal-backdrop").remove()},render:function(){return this.$el.html(this.modalTemplate({title:this.title,cancelText:this.cancelText,okText:this.okText})),this.hasAdvanced||this.$(".modal-advanced-toggle").hide(),this.$(".modal-body").append(this.body()),this.$(".modal").modal({backdrop:this.safeClose?"static":!0,keyboard:this.safeClose?!1:!0}),this.$('[data-toggle="tooltip"]').tooltip(),$("body").append(this.el),this.inputMatch&&this.$(".ok").attr("disabled","disabled"),this},postRender:function(){},setAlert:function(type,message,form,append){return this.alertView?void(this.alertView.type!==type||this.alertView.message!==message?(this.alertView.close(function(){this.setAlert(type,message,form)}.bind(this)),this.$(".form-group").removeClass("has-warning has-error"),this.alertView=null):this.alertView.flash()):(this.alertView=new AlertView({type:type,message:message}),this.addView(this.alertView),append?this.$(".modal-body").append(this.alertView.render().el):this.$(".modal-body").prepend(this.alertView.render().el),void(form&&("info"===type||"warning"===type?this.$(form).addClass("has-warning"):this.$(form).addClass("has-error"))))},clearAlert:function(){this.alertView&&(this.alertView.close(),this.alertView=null,this.$(".form-group").removeClass("has-warning has-error"))},setLoading:function(message,noButtonDisable,timeout){return this.loading?void 0:(this.loading=!0,noButtonDisable||this.$(".ok").attr("disabled","disabled"),void 0===timeout&&(timeout=575),this.loadingView?void(this.loadingView.message!==message&&(this.loadingView.close(function(){this.setLoading(message)}.bind(this)),this.loadingView=null)):void setTimeout(function(){this.loading&&(this.loading=!1,this.loadingView=new AlertView({type:"info",message:message}),this.addView(this.loadingView),this.$(".modal-body").append(this.loadingView.render().el))}.bind(this),timeout))},clearLoading:function(){this.loading=!1,this.loadingView&&(this.loadingView.close(),this.loadingView=null),this.$(".ok").removeAttr("disabled")},dismiss:function(){this.safeClose&&this.lockClose||(this.clearAlert(),this.clearLoading(),this.$(".modal").modal("hide"))},close:function(triggerApplied,msg){this.triggerApplied=triggerApplied,this.safeClose&&this.lockClose||(triggerApplied&&this.trigger("applied",msg),this.clearAlert(),this.$(".modal").modal("hide"))},onKeypress:function(evt){13===evt.keyCode&&this.enterOk&&!this.$(".ok").attr("disabled")&&this.onOk()},onModalShown:function(){this.$("[autofocus]").focus()},onAdvancedToggle:function(){"Advanced"===this.$(".modal-advanced-toggle").text()?(this.$(".modal-advanced-toggle").text("Simple"),this.$(".advanced").slideDown(window.slideTime)):(this.$(".modal-advanced-toggle").text("Advanced"),this.$(".advanced").slideUp(window.slideTime))},onOk:function(){this.close()},onRemove:function(){this.destroy()},onInputChange:function(evt){if(this.inputMatch){var matchText=this.inputMatchText;matchText&&matchText!==$(evt.target).val()?this.$(".ok").attr("disabled","disabled"):this.$(".ok").removeAttr("disabled")}}});return ModalView}),define("models/logs",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LogsModel=Backbone.Model.extend({defaults:{output:null},url:function(){return"/logs"}});return LogsModel}),function(){function s(r){var i=function(e,t){return n("",e,t)},s=e;r&&(e[r]||(e[r]={}),s=e[r]),s.define&&s.define.packaged||(t.original=s.define,s.define=t,s.define.packaged=!0),s.require&&s.require.packaged||(n.original=s.require,s.require=i,s.require.packaged=!0)}var ACE_NAMESPACE="ace",e=function(){return this}();if(ACE_NAMESPACE||"undefined"==typeof requirejs){var t=function(e,n,r){return"string"!=typeof e?void(t.original?t.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace())):(2==arguments.length&&(r=n),t.modules||(t.modules={},t.payloads={}),t.payloads[e]=r,t.modules[e]=null,void 0)},n=function(e,t,r){if("[object Array]"===Object.prototype.toString.call(t)){for(var s=[],o=0,u=t.length;u>o;++o){var a=i(e,t[o]);if(!a&&n.original)return n.original.apply(window,arguments);s.push(a)}r&&r.apply(null,s)}else{if("string"==typeof t){var f=i(e,t);return!f&&n.original?n.original.apply(window,arguments):(r&&r(),f)}if(n.original)return n.original.apply(window,arguments)}},r=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return r(e,n[0])+"!"+r(e,n[1])}if("."==t.charAt(0)){var i=e.split("/").slice(0,-1).join("/");for(t=i+"/"+t;-1!==t.indexOf(".")&&s!=t;){var s=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},i=function(e,i){i=r(e,i);var s=t.modules[i];if(!s){if(s=t.payloads[i],"function"==typeof s){var o={},u={id:i,uri:"",exports:o,packaged:!0},a=function(e,t){return n(i,e,t)},f=s(a,o,u);o=f||u.exports,t.modules[i]=o,delete t.payloads[i]}s=t.modules[i]=o||s}return s};s(ACE_NAMESPACE)}}(),ace.define("ace/lib/regexp",["require","exports","module"],function(e,t,n){"use strict";function o(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function u(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return-1}var r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},i=void 0===r.exec.call(/()??/,"")[1],s=function(){var e=/^/g;return r.test.call(e,""),!e.lastIndex}();s&&i||(RegExp.prototype.exec=function(e){var n,a,t=r.exec.apply(this,arguments);if("string"==typeof e&&t){if(!i&&t.length>1&&u(t,"")>-1&&(a=RegExp(this.source,r.replace.call(o(this),"g","")),r.replace.call(e.slice(t.index),a,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(t[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var f=1;f<t.length;f++)n=this._xregexp.captureNames[f-1],n&&(t[n]=t[f]);!s&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--}return t},s||(RegExp.prototype.test=function(e){var t=r.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function r(){}function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function H(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if("function"!=typeof n)throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=u.call(arguments,1),s=function(){if(this instanceof s){var e=n.apply(this,i.concat(u.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(u.call(arguments)))};return n.prototype&&(r.prototype=n.prototype,s.prototype=new r,r.prototype=null),s});var l,c,h,p,d,i=Function.prototype.call,s=Array.prototype,o=Object.prototype,u=s.slice,a=i.bind(o.toString),f=i.bind(o.hasOwnProperty);if((d=f(o,"__defineGetter__"))&&(l=i.bind(o.__defineGetter__),c=i.bind(o.__defineSetter__),h=i.bind(o.__lookupGetter__),p=i.bind(o.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var n,t=[];return t.splice.apply(t,e(20)),t.splice.apply(t,e(26)),n=t.length,t.splice(5,0,"XXX"),n+1==t.length,n+1==t.length?!0:void 0}()){var v=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?v.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(u.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):void 0==e?e=0:0>e&&(e=Math.max(n+e,0)),n>e+t||(t=n-e);var r=this.slice(e,e+t),i=u.call(arguments,2),s=i.length;if(e===n)s&&this.push.apply(this,i);else{var o=Math.min(t,n-e),a=e+o,f=a+s-o,l=n-a,c=n-o;if(a>f)for(var h=0;l>h;++h)this[f+h]=this[a+h];else if(f>a)for(h=l;h--;)this[f+h]=this[a+h];if(s&&e===c)this.length=c,this.push.apply(this,i);else for(this.length=c+s,h=0;s>h;++h)this[e+h]=i[h]}return r};Array.isArray||(Array.isArray=function(t){return"[object Array]"==a(t)});var m=Object("a"),g="a"!=m[0]||!(0 in m);if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=arguments[1],s=-1,o=r.length>>>0;if("[object Function]"!=a(t))throw new TypeError;for(;++s<o;)s in r&&t.call(i,r[s],s,n)}),Array.prototype.map||(Array.prototype.map=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=Array(i),o=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var u=0;i>u;u++)u in r&&(s[u]=t.call(o,r[u],u,n));return s}),Array.prototype.filter||(Array.prototype.filter=function(t){var o,n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=[],u=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var f=0;i>f;f++)f in r&&(o=r[f],t.call(u,o,f,n)&&s.push(o));return s}),Array.prototype.every||(Array.prototype.every=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var o=0;i>o;o++)if(o in r&&!t.call(s,r[o],o,n))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0,s=arguments[1];if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");for(var o=0;i>o;o++)if(o in r&&t.call(s,r[o],o,n))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0;if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,s=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}for(;i>s;s++)s in r&&(o=t.call(void 0,o,r[s],s,n));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=F(this),r=g&&"[object String]"==a(this)?this.split(""):n,i=r.length>>>0;if("[object Function]"!=a(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var s,o=i-1;if(arguments.length>=2)s=arguments[1];else for(;;){if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value");
}do o in this&&(s=t.call(void 0,s,r[o],o,n));while(o--);return s}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var n=g&&"[object String]"==a(this)?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=H(arguments[1])),i=i>=0?i:Math.max(0,r+i);r>i;i++)if(i in n&&n[i]===t)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var n=g&&"[object String]"==a(this)?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=r-1;for(arguments.length>1&&(i=Math.min(i,H(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&t===n[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:o)}),!Object.getOwnPropertyDescriptor){var y="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,n){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(y+t);if(f(t,n)){var r,i,s;if(r={enumerable:!0,configurable:!0},d){var u=t.__proto__;t.__proto__=o;var i=h(t,n),s=p(t,n);if(t.__proto__=u,i||s)return i&&(r.get=i),s&&(r.set=s),r}return r.value=t[n],r}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),!Object.create){var b;b=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(t,n){var r;if(null===t)r=b();else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return void 0!==n&&Object.defineProperties(r,n),r}}if(Object.defineProperty){var E=w({}),S="undefined"==typeof document||w(document.createElement("div"));if(!E||!S)var x=Object.defineProperty}if(!Object.defineProperty||x){var T="Property description must be an object: ",N="Object.defineProperty called on non-object: ",C="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,n,r){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(N+t);if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError(T+r);if(x)try{return x.call(Object,t,n,r)}catch(i){}if(f(r,"value"))if(d&&(h(t,n)||p(t,n))){var s=t.__proto__;t.__proto__=o,delete t[n],t[n]=r.value,t.__proto__=s}else t[n]=r.value;else{if(!d)throw new TypeError(C);f(r,"get")&&l(t,n,r.get),f(r,"set")&&c(t,n,r.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)f(n,r)&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(k){Object.freeze=function(t){return function(n){return"function"==typeof n?n:t(n)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var n="";f(t,n);)n+="?";t[n]=!0;var r=f(t,n);return delete t[n],r}),!Object.keys){var L=!0,A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],O=A.length;for(var M in{toString:null})L=!1;Object.keys=function I(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var I=[];for(var t in e)f(e,t)&&I.push(t);if(L)for(var n=0,r=O;r>n;n++){var i=A[n];f(e,i)&&I.push(i)}return I}}Date.now||(Date.now=function(){return(new Date).getTime()});var _="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff";if(!String.prototype.trim||_.trim()){_="["+_+"]";var D=new RegExp("^"+_+_+"*"),P=new RegExp(_+_+"*$");String.prototype.trim=function(){return String(this).replace(D,"").replace(P,"")}}var F=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,n){"use strict";e("./regexp"),e("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(e,t,n){"use strict";if("undefined"!=typeof document){var r="http://www.w3.org/1999/xhtml";t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||r,e):document.createElement(e)},t.hasCssClass=function(e,t){var n=(e.className||"").split(/\s+/g);return-1!==n.indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var r=n.indexOf(t);if(-1==r)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),r=!0;;){var i=n.indexOf(t);if(-1==i)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var r,n=0;if(t=t||document,t.createStyleSheet&&(r=t.styleSheets)){for(;n<r.length;)if(r[n++].owningElement.id===e)return!0}else if(r=t.getElementsByTagName("style"))for(;n<r.length;)if(r[n++].id===e)return!0;return!1},t.importCssString=function(n,i,s){if(s=s||document,i&&t.hasCssString(i,s))return null;var o;s.createStyleSheet?(o=s.createStyleSheet(),o.cssText=n,i&&(o.owningElement.id=i)):(o=s.createElementNS?s.createElementNS(r,"style"):s.createElement("style"),o.appendChild(s.createTextNode(n)),i&&(o.id=i),t.getDocumentHead(s).appendChild(o))},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var r=t.createElement("link");r.rel="stylesheet",r.href=e,t.getDocumentHead(n).appendChild(r)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},void 0!==window.pageYOffset?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}}),ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(e,t,n){"use strict";e("./fixoldbrowsers");var r=e("./oop"),i=function(){var t,n,e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(n in e.FUNCTION_KEYS)t=e.FUNCTION_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);for(n in e.PRINTABLE_KEYS)t=e.PRINTABLE_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e.enter=e["return"],e.escape=e.esc,e.del=e["delete"],e[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],n=Math.pow(2,t.length);n--;)e.KEY_MODS[n]=t.filter(function(t){return n&e.KEY_MODS[t]}).join("-")+"-"}(),e}();r.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";if(t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS},"object"==typeof navigator){var r=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),i=navigator.userAgent;t.isWin="win"==r,t.isMac="mac"==r,t.isLinux="linux"==r,t.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((i.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((i.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,t.isOldGecko=t.isGecko&&parseInt((i.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(i.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(i.split(" Chrome/")[1])||void 0,t.isAIR=i.indexOf("AdobeAIR")>=0,t.isIPad=i.indexOf("iPad")>=0,t.isTouchPad=i.indexOf("TouchPad")>=0,t.isChromeOS=i.indexOf(" CrOS ")>=0}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function o(e,t,n){var o=s(t);if(!i.isMac&&u){if((u[91]||u[92])&&(o|=8),u.altGr){if(3==(3&o))return;u.altGr=0}if(18===n||17===n){var f="location"in t?t.location:t.keyLocation;if(17===n&&1===f)a=t.timeStamp;else if(18===n&&3===o&&2===f){var l=-a;a=t.timeStamp,l+=a,3>l&&(u.altGr=!0)}}}if(n in r.MODIFIER_KEYS){switch(r.MODIFIER_KEYS[n]){case"Alt":o=2;break;case"Shift":o=4;break;case"Ctrl":o=1;break;default:o=8}n=-1}if(8&o&&(91===n||93===n)&&(n=-1),!o&&13===n){var f="location"in t?t.location:t.keyLocation;if(3===f&&(e(t,o,-n),t.defaultPrevented))return}if(i.isChromeOS&&8&o){if(e(t,o,n),t.defaultPrevented)return;o&=-9}return o||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS?e(t,o,n):!1}var r=e("./keys"),i=e("./useragent");t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var r=function(){n.call(e,window.event)};n._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):void(e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n))},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||i.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,n,r){function i(e){n&&n(e),r&&r(e),t.removeListener(document,"mousemove",n,!0),t.removeListener(document,"mouseup",i,!0),t.removeListener(document,"dragstart",i,!0)}return t.addListener(document,"mousemove",n,!0),t.addListener(document,"mouseup",i,!0),t.addListener(document,"dragstart",i,!0),i},t.addMouseWheelListener=function(e,n){"onmousewheel"in e?t.addListener(e,"mousewheel",function(e){var t=8;void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/t,e.wheelY=-e.wheelDeltaY/t):(e.wheelX=0,e.wheelY=-e.wheelDelta/t),n(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){var t=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0,e.wheelY=e.deltaY*t||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}n(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),n(e)})},t.addMultiMouseDownListener=function(e,n,r,s){var u,a,f,o=0,l={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){if(0!==t.getButton(e)?o=0:e.detail>1?(o++,o>4&&(o=1)):o=1,i.isIE){var c=Math.abs(e.clientX-u)>5||Math.abs(e.clientY-a)>5;(!f||c)&&(o=1),f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),1==o&&(u=e.clientX,a=e.clientY)}if(e._clicks=o,r[s]("mousedown",e),o>4)o=0;else if(o>1)return r[s](l[o],e)}),i.isOldIE&&t.addListener(e,"dblclick",function(e){o=2,f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),r[s]("mousedown",e),r[s](l[o],e)})};var s=!i.isMac||!i.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[s(e)]};var u=null,a=0;if(t.addCommandKeyListener=function(e,n){var r=t.addListener;if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var s=null;r(e,"keydown",function(e){s=e.keyCode}),r(e,"keypress",function(e){return o(n,e,s)})}else{var a=null;r(e,"keydown",function(e){u[e.keyCode]=!0;var t=o(n,e,e.keyCode);return a=e.defaultPrevented,t}),r(e,"keypress",function(e){a&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),a=null)}),r(e,"keyup",function(e){u[e.keyCode]=null}),u||(u=Object.create(null),r(window,"focus",function(e){u=Object.create(null)}))}},window.postMessage&&!i.isOldIE){var f=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+f;t.addListener(n,"message",function i(s){s.data==r&&(t.stopPropagation(s),t.removeListener(n,"message",i),e())}),n.postMessage(r,"*")}}t.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,r=e.length;r>n;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function(e){if("object"!=typeof e||!e)return e;var n=e.constructor;if(n===RegExp)return e;var r=n();for(var i in e)"object"==typeof e[i]?r[i]=t.deepCopy(e[i]):r[i]=e[i];return r},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){null==n&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),u=i.isChrome<18,a=i.isIE,f=function(e,t){function b(e){if(!h){if(k)t=0,r=e?0:n.value.length-1;else var t=e?2:1,r=2;try{n.setSelectionRange(t,r)}catch(i){}}}function w(){h||(n.value=f,i.isWebKit&&y.schedule())}function R(){clearTimeout(q),q=setTimeout(function(){p&&(n.style.cssText=p,p=""),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},i.isOldIE?200:0)}var n=s.createElement("textarea");n.className="ace_text-input",i.isTouchPad&&n.setAttribute("x-palm-disable-auto-cap",!0),n.wrap="off",n.autocorrect="off",n.autocapitalize="off",n.spellcheck=!1,n.style.opacity="0",i.isOldIE&&(n.style.top="-100px"),e.insertBefore(n,e.firstChild);var f="",l=!1,c=!1,h=!1,p="",d=!0;try{var v=document.activeElement===n}catch(m){}r.addListener(n,"blur",function(){t.onBlur(),v=!1}),r.addListener(n,"focus",function(){v=!0,t.onFocus(),b()}),this.focus=function(){n.focus()},this.blur=function(){n.blur()},this.isFocused=function(){return v};var g=o.delayedCall(function(){v&&b(d)}),y=o.delayedCall(function(){h||(n.value=f,v&&b())});i.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=d&&(d=!d,g.schedule())}),w(),v&&t.onFocus();var E=function(e){return 0===e.selectionStart&&e.selectionEnd===e.value.length};if(!n.setSelectionRange&&n.createTextRange&&(n.setSelectionRange=function(e,t){var n=this.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select()},E=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?t.text==e.value:!1}),i.isOldIE){var S=!1,x=function(e){if(!S){var t=n.value;if(!h&&t&&t!=f)return e&&t==f[0]?T.schedule():(A(t),S=!0,w(),S=!1,void 0)}},T=o.delayedCall(x);r.addListener(n,"propertychange",x);var N={13:1,27:1};r.addListener(n,"keyup",function(e){return h&&(!n.value||N[e.keyCode])&&setTimeout(F,0),(n.value.charCodeAt(0)||0)<129?T.call():void(h?j():B())}),r.addListener(n,"keydown",function(e){T.schedule(50)})}var C=function(e){l?l=!1:E(n)?(t.selectAll(),b()):k&&b(t.selection.isEmpty())},k=null;this.setInputHandler=function(e){k=e},this.getInputHandler=function(){return k};var L=!1,A=function(e){k&&(e=k(e),k=null),c?(b(),e&&t.onPaste(e),c=!1):e==f.charAt(0)?L?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==f?e=e.substr(2):e.charAt(0)==f.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==f.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),L&&(L=!1)},O=function(e){if(!h){var t=n.value;A(t),w()}},M=function(e,t){var n=e.clipboardData||window.clipboardData;if(n&&!u){var r=a?"Text":"text/plain";return t?n.setData(r,t)!==!1:n.getData(r)}},_=function(e,i){var s=t.getCopyText();return s?void(M(e,s)?(i?t.onCut():t.onCopy(),r.preventDefault(e)):(l=!0,n.value=s,n.select(),setTimeout(function(){l=!1,w(),b(),i?t.onCut():t.onCopy()}))):r.preventDefault(e)},D=function(e){_(e,!0)},P=function(e){_(e,!1)},H=function(e){var s=M(e);"string"==typeof s?(s&&t.onPaste(s),i.isIE&&setTimeout(b),r.preventDefault(e)):(n.value="",c=!0)};r.addCommandKeyListener(n,t.onCommandKey.bind(t)),r.addListener(n,"select",C),r.addListener(n,"input",O),r.addListener(n,"cut",D),r.addListener(n,"copy",P),r.addListener(n,"paste",H),(!("oncut"in n)||!("oncopy"in n)||!("onpaste"in n))&&r.addListener(e,"keydown",function(e){if((!i.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:P(e);break;case 86:H(e);break;case 88:D(e)}});var B=function(e){h||!t.onCompositionStart||t.$readOnly||(h={},t.onCompositionStart(),setTimeout(j,0),t.on("mousedown",F),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup())},j=function(){if(h&&t.onCompositionUpdate&&!t.$readOnly){var e=n.value.replace(/\x01/g,"");if(h.lastValue!==e&&(t.onCompositionUpdate(e),h.lastValue&&t.undo(),h.lastValue=e,h.lastValue)){var r=t.selection.getRange();t.insert(h.lastValue),t.session.markUndoGroup(),h.range=t.selection.getRange(),t.selection.setRange(r),t.selection.clearSelection()}}},F=function(e){if(t.onCompositionEnd&&!t.$readOnly){var r=h;h=!1;var i=setTimeout(function(){i=null;var e=n.value.replace(/\x01/g,"");h||(e==r.lastValue?w():!r.lastValue&&e&&(w(),A(e)))});k=function(n){return i&&clearTimeout(i),n=n.replace(/\x01/g,""),n==r.lastValue?"":(r.lastValue&&i&&t.undo(),n)},t.onCompositionEnd(),t.removeListener("mousedown",F),"compositionend"==e.type&&r.range&&t.selection.setRange(r.range)}},I=o.delayedCall(j,50);r.addListener(n,"compositionstart",B),i.isGecko?r.addListener(n,"text",function(){I.schedule()}):(r.addListener(n,"keyup",function(){I.schedule()}),r.addListener(n,"keydown",function(){I.schedule()})),r.addListener(n,"compositionend",F),this.getElement=function(){return n},this.setReadOnly=function(e){n.readOnly=e},this.onContextMenu=function(e){L=!0,b(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,o){if(o||!i.isOldIE){p||(p=n.style.cssText),n.style.cssText=(o?"z-index:100000;":"")+"height:"+n.style.height+";"+(i.isIE?"opacity:0.1;":"");var u=t.container.getBoundingClientRect(),a=s.computedStyle(t.container),f=u.top+(parseInt(a.borderTopWidth)||0),l=u.left+(parseInt(u.borderLeftWidth)||0),c=u.bottom-f-n.clientHeight-2,h=function(e){n.style.left=e.clientX-l-2+"px",n.style.top=Math.min(e.clientY-f-2,c)+"px"};h(e),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),i.isWin&&!i.isOldIE&&r.capture(t.container,h,R))}},this.onContextMenuClose=R;var q,U=function(e){t.textInput.onContextMenu(e),R()};r.addListener(t.renderer.scroller,"contextmenu",U),r.addListener(n,"contextmenu",U)};t.TextInput=f}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function u(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function a(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function f(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)var n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return 0>n?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var o=(e("../lib/dom"),e("../lib/event"),e("../lib/useragent"),0);(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var r=this.editor,i=e.getButton();if(0!==i){var s=r.getSelectionRange(),o=s.isEmpty();return o&&r.selection.moveToPosition(n),void r.textInput.onContextMenu(e.domEvent)}return this.mousedownEvent.time=Date.now(),!t||r.isFocused()||(r.focus(),!this.$focusTimout||this.$clickSelection||r.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select")},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(-1==r)e=this.$clickSelection.end;else if(1==r)e=this.$clickSelection.start;else{var i=f(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(-1==s&&0>=o)t=this.$clickSelection.end,(i.end.row!=r.row||i.end.column!=r.column)&&(r=i.start);else if(1==o&&s>=0)t=this.$clickSelection.start,(i.start.row!=r.row||i.start.column!=r.column)&&(r=i.end);else if(-1==s&&1==o)r=i.end,t=i.start;else{var u=f(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>o||t-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=e.domEvent.timeStamp,n=t-(this.$lastScrollTime||0),r=this.editor,i=r.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);return i||200>n?(this.$lastScrollTime=t,r.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(u.prototype),t.DefaultHandlers=u}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";function s(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var i=(e("./lib/oop"),e("./lib/dom"));(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){i.setInnerText(this.getElement(),e)},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(s.prototype),t.Tooltip=s}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";function u(e){function l(){var r=u.getDocumentPosition().row,s=n.$annotations[r];if(!s)return c();var o=t.session.getLength();if(r==o){var a=t.renderer.pixelToScreenCoordinates(0,u.y).row,l=u.$pos;if(a>t.session.documentToScreenRow(l.row,l.column))return c()}if(f!=s)if(f=s.text.join("<br/>"),i.setHtml(f),i.show(),t.on("mousewheel",c),e.$tooltipFollowsMouse)h(u);else{var p=n.$cells[t.session.documentToScreenRow(r,0)].element,d=p.getBoundingClientRect(),v=i.getElement().style;v.left=d.right+"px",v.top=d.bottom+"px"}}function c(){o&&(o=clearTimeout(o)),f&&(i.hide(),f=null,t.removeEventListener("mousewheel",c))}function h(e){i.setPosition(e.x,e.y)}var t=e.editor,n=t.renderer.$gutterLayer,i=new a(t.container);e.editor.setDefaultHandler("guttermousedown",function(r){if(t.isFocused()&&0==r.getButton()){var i=n.getRegion(r);if("foldWidgets"!=i){var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(2==r.domEvent.detail)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.setState("selectByLines"),e.captureMouse(r),r.preventDefault()}}});var o,u,f;e.editor.setDefaultHandler("guttermousemove",function(t){var n=t.domEvent.target||t.domEvent.srcElement;return r.hasCssClass(n,"ace_fold-widget")?c():(f&&e.$tooltipFollowsMouse&&h(t),u=t,void(o||(o=setTimeout(function(){o=null,u&&!e.isMousePressed?l():c()},50))))}),s.addListener(t.renderer.$gutter,"mouseout",function(e){u=null,f&&!o&&(o=setTimeout(function(){o=null,c()},50))}),t.on("changeSession",c)}function a(e){o.call(this,e)}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/event"),o=e("../tooltip").Tooltip;i.inherits(a,o),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),s=this.getHeight();e+=15,t+=15,e+i>n&&(e-=e+i-n),t+s>r&&(t-=20+s),o.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=u}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";
var r=e("../lib/event"),i=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function f(e){function T(e,n){var r=Date.now(),i=!n||e.row!=n.row,s=!n||e.column!=n.column;if(!S||i||s)t.$blockScrolling+=1,t.moveCursorToPosition(e),t.$blockScrolling-=1,S=r,x={x:p,y:d};else{var o=l(x.x,x.y,p,d);o>a?S=null:r-S>=u&&(t.renderer.scrollCursorIntoView(),S=null)}}function N(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,s=t.renderer.layerConfig.characterWidth,u=t.renderer.scroller.getBoundingClientRect(),a={x:{left:p-u.left,right:u.right-p},y:{top:d-u.top,bottom:u.bottom-d}},f=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};2>=f/s&&(c.column+=a.x.left<a.x.right?-3:2),1>=l/i&&(c.row+=a.y.top<a.y.bottom?-1:1);var h=e.row!=c.row,v=e.column!=c.column,m=!n||e.row!=n.row;h||v&&!m?E?r-E>=o&&t.renderer.scrollCursorIntoView(c):E=r:E=null}function C(){var e=g;g=t.renderer.screenToTextCoordinates(p,d),T(g,e),N(g,e)}function k(){m=t.selection.toOrientedRange(),h=t.session.addMarker(m,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),C(),v=setInterval(C,20),y=0,i.addListener(document,"mousemove",O)}function L(){clearInterval(v),t.session.removeMarker(h),h=null,t.$blockScrolling+=1,t.selection.fromOrientedRange(m),t.$blockScrolling-=1,t.isFocused()&&!w&&t.renderer.$cursorLayer.setBlinking(!t.getReadOnly()),m=null,g=null,y=0,E=null,S=null,i.removeListener(document,"mousemove",O)}function O(){null==A&&(A=setTimeout(function(){null!=A&&h&&L()},20))}function M(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return"text/plain"==e||"Text"==e})}function _(e){var t=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],r=s.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return r&&t.indexOf(i)>=0?o="copy":n.indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}var t=e.editor,n=r.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var f=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];f.forEach(function(t){e[t]=this[t]},this),t.addEventListener("mousedown",this.onMouseDown.bind(e));var h,p,d,v,m,g,b,w,E,S,x,c=t.container,y=0;this.onDragStart=function(e){if(this.cancelDrag||!c.draggable){var r=this;return setTimeout(function(){r.startSelect(),r.captureMouse(e)},0),e.preventDefault()}m=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",s.isOpera&&(t.container.appendChild(n),n.scrollTop=0),i.setDragImage&&i.setDragImage(n,0,0),s.isOpera&&t.container.removeChild(n),i.clearData(),i.setData("Text",t.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(e){if(c.draggable=!1,w=!1,this.setState(null),!t.getReadOnly()){var n=e.dataTransfer.dropEffect;!b&&"move"==n&&t.session.remove(t.getSelectionRange()),t.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){return!t.getReadOnly()&&M(e.dataTransfer)?(p=e.clientX,d=e.clientY,h||k(),y++,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)):void 0},this.onDragOver=function(e){return!t.getReadOnly()&&M(e.dataTransfer)?(p=e.clientX,d=e.clientY,h||(k(),y++),null!==A&&(A=null),e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)):void 0},this.onDragLeave=function(e){return y--,0>=y&&h?(L(),b=null,i.preventDefault(e)):void 0},this.onDrop=function(e){if(g){var n=e.dataTransfer;if(w)switch(b){case"move":m=m.contains(g.row,g.column)?{start:g,end:g}:t.moveText(m,g);break;case"copy":m=t.moveText(m,g,!0)}else{var r=n.getData("Text");m={start:g,end:t.session.insert(g,r)},t.focus(),b=null}return L(),i.preventDefault(e)}},i.addListener(c,"dragstart",this.onDragStart.bind(e)),i.addListener(c,"dragend",this.onDragEnd.bind(e)),i.addListener(c,"dragenter",this.onDragEnter.bind(e)),i.addListener(c,"dragover",this.onDragOver.bind(e)),i.addListener(c,"dragleave",this.onDragLeave.bind(e)),i.addListener(c,"drop",this.onDrop.bind(e));var A=null}function l(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=200,u=200,a=5;(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;e>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor,t=e.container;t.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var n=s.isWin?"default":"move";e.renderer.setCursorStyle(n),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;if(s.isIE&&"dragReady"==this.state){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&t.dragDrop()}if("dragWait"===this.state){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton(),i=e.domEvent.detail||1;if(1===i&&0===r&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in o&&(o.unselectable="on"),t.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var u=t.container;u.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(f.prototype),t.DragdropHandler=f}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement("script");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){(n||!i.readyState||"loaded"==i.readyState||"complete"==i.readyState)&&(i=i.onload=i.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(n.length||r){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var o=0;o<n.length&&(n[o](t,this),!t.propagationStopped);o++);return r&&!t.defaultPrevented?r(t,this):void 0}},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)}},r.once=function(e,t){var n=this;t&&this.addEventListener(e,function r(){n.removeEventListener(e,r),t.apply(null,arguments)})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);-1!=s&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var r=n._disabled_[e];if(n[e]==t){n[e];r&&this.setDefaultHandler(e,r.pop())}else if(r){var s=r.indexOf(t);-1!=s&&r.splice(s,1)}}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),-1==r.indexOf(t)&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}},r.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=r}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"],function(e,t,n){"no use strict";function f(r){if(a.packaged=r||e.packaged||n.packaged||u.define&&define.packaged,!u.document)return"";for(var i={},s="",o=document.currentScript||document._currentScript,f=o&&o.ownerDocument||document,c=f.getElementsByTagName("script"),h=0;h<c.length;h++){var p=c[h],d=p.src||p.getAttribute("src");if(d){for(var v=p.attributes,m=0,g=v.length;g>m;m++){var y=v[m];0===y.name.indexOf("data-ace-")&&(i[l(y.name.replace(/^data-ace-/,""))]=y.value)}var b=d.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(s=b[1])}}s&&(i.base=i.base||s,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var w in i)"undefined"!=typeof i[w]&&t.set(w,i[w])}function l(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./lib/net"),o=e("./lib/event_emitter").EventEmitter,u=function(){return this}(),a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return a[e]},t.set=function(e,t){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);a[e]=t},t.all=function(){return r.copyObject(a)},i.implement(t,o),t.moduleUrl=function(e,t){if(a.$moduleUrls[e])return a.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var r="snippets"==t?"/":"-",i=n[n.length-1];if("worker"==t&&"-"==r){var s=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");i=i.replace(s,"")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var o=a[t+"Path"];return null==o?o=a.basePath:"/"==r&&(t=r=""),o&&"/"!=o.slice(-1)&&(o+="/"),o+t+r+i+this.get("suffix")},t.setModuleUrl=function(e,t){return a.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=e(n)}catch(u){}if(i&&!t.$loading[n])return r&&r(i);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r),!(t.$loading[n].length>1)){var a=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach(function(t){t&&t(e)})})};return t.get("packaged")?void s.loadScript(t.moduleUrl(n,o),a):a()}},t.init=f;var c={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];return n?n.forwardTo?this[n.forwardTo]&&this[n.forwardTo].setOption(e,t):(n.handlesSet||(this["$"+e]=t),void(n&&n.set&&n.set.call(this,t))):void("undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+e+'"'))}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:void("undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+e+'"'))}},h={};t.defineOptions=function(e,t,n){return e.$options||(h[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];"string"==typeof r&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),i.implement(e,c),this},t.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},t.setDefaultValue=function(e,n,r){var i=h[e]||(h[e]={});i[n]&&(i.forwardTo?t.setDefaultValue(i.forwardTo,n,r):i[n].value=r)},t.setDefaultValues=function(e,n){Object.keys(n).forEach(function(r){t.setDefaultValue(e,r,n[r])})}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,f=e("../config"),l=function(e){var t=this;this.editor=e,new s(this),new o(this),new a(this);var n=function(t){!e.isFocused()&&e.textInput&&e.textInput.moveToMouse(t),e.focus()},u=e.renderer.getMouseEventTarget();r.addListener(u,"click",this.onMouseEvent.bind(this,"click")),r.addListener(u,"mousemove",this.onMouseMove.bind(this,"mousemove")),r.addMultiMouseDownListener(u,[400,300,250],this,"onMouseEvent"),e.renderer.scrollBarV&&(r.addMultiMouseDownListener(e.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent"),r.addMultiMouseDownListener(e.renderer.scrollBarH.inner,[400,300,250],this,"onMouseEvent"),i.isIE&&(r.addListener(e.renderer.scrollBarV.element,"mousedown",n),r.addListener(e.renderer.scrollBarH.element,"mousemove",n))),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"));var f=e.renderer.$gutter;r.addListener(f,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),r.addListener(f,"click",this.onMouseEvent.bind(this,"gutterclick")),r.addListener(f,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),r.addListener(f,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),r.addListener(u,"mousedown",n),r.addListener(f,"mousedown",function(t){return e.focus(),r.preventDefault(t)}),e.on("mousemove",function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var r=e.renderer.screenToTextCoordinates(n.x,n.y),i=e.session.selection.getRange(),s=e.renderer;!i.isEmpty()&&i.insideStart(r.row,r.column)?s.setCursorStyle("default"):s.setCursorStyle("")}})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var s=this,o=function(e){return e?i.isWebKit&&!e.which&&s.releaseMouse?s.releaseMouse():(s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new u(e,s.editor),s.$mouseMoved=!0,void 0):void 0},a=function(e){clearInterval(l),f(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",null==n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),s.isMousePressed=!1,s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e)},f=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(i.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){a(e)});s.$onCaptureMouseMove=o,s.releaseMouse=r.capture(this.editor.container,o,a);var l=setInterval(f,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&r.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(l.prototype),f.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){"use strict";function r(e){e.on("click",function(t){var n=t.getDocumentPosition(),r=e.session,i=r.getFoldAt(n.row,n.column,1);i&&(t.getAccelKey()?r.removeFold(i):r.expandFold(i),t.stop())}),e.on("gutterclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if("foldWidgets"==n){var r=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if("foldWidgets"==n){var r=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(r,!0),o=s.range||s.firstRange;if(o){r=o.start.row;var u=i.getFoldAt(r,i.getLine(r).length,1);u?i.removeFold(u):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}t.FoldHandler=r}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var r=e("../lib/keys"),i=e("../lib/event"),s=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"==typeof e&&!e.handleKeyboard&&(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),void 0==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1==t?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.$callKeyboardHandlers=function(e,t,n,r){for(var s,o=!1,u=this.$editor.commands,a=this.$handlers.length;a--&&(s=this.$handlers[a].handleKeyboard(this.$data,e,t,n,r),!(s&&s.command&&(o="null"==s.command?!0:u.exec(s.command,this.$editor,s.args,r),o&&r&&-1!=e&&1!=s.passEvent&&1!=s.command.passEvent&&i.stopEvent(r),o))););return o},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){var t=this.$callKeyboardHandlers(-1,e);t||this.$editor.commands.exec("insertstring",this.$editor,e)}}).call(s.prototype),t.KeyBinding=s}),ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var r=function(e,t){return e.row-t.row||e.column-t.column},i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),1==t?(t=this.compare(r.row,r.column),1==t?2:0==t?1:0):-1==t?-2:(t=this.compare(r.row,r.column),-1==t?-1:1==t?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return 0==this.compare(e,t)?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=r,i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+e);var t=this.getSelectionAnchor(),n=this.getSelectionLead(),r=this.isBackwards();(!r||0!==t.column)&&this.setSelectionAnchor(t.row,t.column+e),(r||0!==n.column)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if("undefined"==typeof t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var r,n="number"==typeof e?e:this.lead.row,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,t===!0?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-n,e.column).split(" ").length-1==n?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+n).split(" ").length-1==n?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column),s=i.match(/^\s*/);s[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=s[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var i,e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,t,1);return s?void this.moveCursorTo(s.end.row,s.end.column):((i=this.session.nonTokenRe.exec(r))&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t)),t>=n.length?(this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight(),void 0):((i=this.session.tokenRe.exec(r))&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,t)))},this.moveCursorLongWordLeft=function(){var n,e=this.lead.row,t=this.lead.column;if(n=this.session.getFoldAt(e,t,-1))return void this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getFoldStringAt(e,t,-1);null==r&&(r=this.doc.getLine(e).substring(0,t));var o,s=i.stringReverse(r);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(o=this.session.nonTokenRe.exec(s))&&(t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=t?(this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft(),void 0):((o=this.session.tokenRe.exec(s))&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,t))},this.$shortWordEndIndex=function(e){var t,r,n=0,i=/\s/,s=this.session.tokenRe;if(s.lastIndex=0,t=this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(r=e[n])&&i.test(r);)n++;if(1>n)for(s.lastIndex=0;(r=e[n])&&!s.test(r);)if(s.lastIndex=0,n++,i.test(r)){if(n>2){n--;break}for(;(r=e[n])&&i.test(r);)n++;if(n>2)break}}return s.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do e++,r=this.doc.getLine(e);while(s>e&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var n,e=this.lead.row,t=this.lead.column;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);
var r=this.session.getLine(e).substring(0,t);if(0===t){do e--,r=this.doc.getLine(e);while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var r=this.session.screenToDocumentPosition(n.row+e,n.column);0!==e&&0===t&&r.row===this.lead.row&&r.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[r.row]&&r.row++,this.moveCursorTo(r.row,r.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e.call(null,this);var n=this.getCursor();return o.fromPoints(t,n)}catch(r){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(void 0==e.start){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e.isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(u.prototype),t.Selection=u}),ace.define("ace/tokenizer",["require","exports","module"],function(e,t,n){"use strict";var r=1e3,i=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){for(var n=this.states[t],r=[],i=0,s=this.matchMappings[t]={defaultToken:"text"},o="g",u=[],a=0;a<n.length;a++){var f=n[a];if(f.defaultToken&&(s.defaultToken=f.defaultToken),f.caseInsensitive&&(o="gi"),null!=f.regex){f.regex instanceof RegExp&&(f.regex=f.regex.toString().slice(1,-1));var l=f.regex,c=new RegExp("(?:("+l+")|(.))").exec("a").length-2;if(Array.isArray(f.token))if(1==f.token.length||1==c)f.token=f.token[0];else{if(c-1!=f.token.length)throw new Error("number of classes and regexp groups in '"+f.token+"'\n'"+f.regex+"' doesn't match\n"+(c-1)+"!="+f.token.length);f.tokenArray=f.token,f.token=null,f.onMatch=this.$arrayTokens}else"function"==typeof f.token&&!f.onMatch&&(c>1?f.onMatch=this.$applyToken:f.onMatch=f.token);c>1&&(/\\\d/.test(f.regex)?l=f.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+i+1)}):(c=1,l=this.removeCapturingGroups(f.regex)),!f.splitRegex&&"string"!=typeof f.token&&u.push(f)),s[i]=a,i+=c,r.push(l),f.onMatch||(f.onMatch=null)}}r.length||(s[0]=0,r.push("$")),u.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",o)}};(function(){this.$setMaxTokenCount=function(e){r=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"==typeof n)return[{type:n,value:e}];for(var r=[],i=0,s=n.length;s>i;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],r=this.tokenArray,i=0,s=r.length;s>i;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){var t=e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e});return t},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,r=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,s,o,u,a){return r?r="]"!=u:u?r=!0:o?(n==i.stack&&(i.end=a+1,i.stack=-1),n--):s&&(n++,1!=s.length&&(i.stack=n,i.start=a)),e}),null!=i.end&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);t=n[0],"#tmp"===t&&(n.shift(),t=n.shift())}else var n=[];var i=t||"start",s=this.states[i];s||(i="start",s=this.states[i]);var o=this.matchMappings[i],u=this.regExps[i];u.lastIndex=0;for(var a,f=[],l=0,c={type:null,value:""};a=u.exec(e);){var h=o.defaultToken,p=null,d=a[0],v=u.lastIndex;if(v-d.length>l){var m=e.substring(l,v-d.length);c.type==h?c.value+=m:(c.type&&f.push(c),c={type:h,value:m})}for(var g=0;g<a.length-2;g++)if(void 0!==a[g+1]){p=s[o[g]],h=p.onMatch?p.onMatch(d,i,n):p.token,p.next&&(i="string"==typeof p.next?p.next:p.next(i,n),s=this.states[i],s||(window.console&&console.error&&console.error(i,"doesn't exist"),i="start",s=this.states[i]),o=this.matchMappings[i],l=v,u=this.regExps[i],u.lastIndex=v);break}if(d)if("string"==typeof h)p&&p.merge===!1||c.type!==h?(c.type&&f.push(c),c={type:h,value:d}):c.value+=d;else if(h){c.type&&f.push(c),c={type:null,value:""};for(var g=0;g<h.length;g++)f.push(h[g])}if(l==e.length)break;if(l=v,f.length>r){for(;l<e.length;)c.type&&f.push(c),c={value:e.substring(l,l+=2e3),type:"overflow"};i="start",n=[];break}}return c.type&&f.push(c),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:f,state:n.length?n:i}}}).call(i.prototype),t.Tokenizer=i}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var r=e[n],i=0;i<r.length;i++){var s=r[i];(s.next||s.onMatch)&&("string"!=typeof s.next?s.nextState&&0!==s.nextState.indexOf(t)&&(s.nextState=t+s.nextState):0!==s.next.indexOf(t)&&(s.next=t+s.next))}this.$rules[t+n]=r}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,s){var o="function"==typeof e?(new e).getRules():e;if(i)for(var u=0;u<i.length;u++)i[u]=t+i[u];else{i=[];for(var a in o)i.push(t+a)}if(this.addRules(o,t),n)for(var f=Array.prototype[s?"push":"unshift"],u=0;u<i.length;u++)f.apply(this.$rules[i[u]],r.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){function i(s){var o=r[s];o.processed=!0;for(var u=0;u<o.length;u++){var a=o[u];!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+".end",regex:a.end||a.start,next:"pop"}),a.token=a.token+".start",a.push=!0);var f=a.next||a.push;if(f&&Array.isArray(f)){var l=a.stateName;l||(l=a.token,"string"!=typeof l&&(l=l[0]||""),r[l]&&(l+=n++)),r[l]=f,a.next=l,i(l)}else"pop"==f&&(a.next=t);if(a.push&&(a.nextState=a.next||a.push,a.next=e,delete a.push),a.rules)for(var c in a.rules)r[c]?r[c].push&&r[c].push.apply(r[c],a.rules[c]):r[c]=a.rules[c];if(a.include||"string"==typeof a)var h=a.include||a,p=r[h];else Array.isArray(a)&&(p=a);if(p){var d=[u,1].concat(p);a.noEscape&&(d=d.filter(function(e){return!e.next})),o.splice.apply(o,d),u--,p=null}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||"text",a.caseInsensitive),delete a.defaultToken)}}var n=0,r=this.$rules;Object.keys(r).forEach(i,this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return Object.keys(e).forEach(function(t){var s=e[t];n&&(s=s.toLowerCase());for(var o=s.split(r||"|"),u=o.length;u--;)i[o[u]]=t}),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r}),ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";function r(e){var n=/\w{4}/g;for(var r in e)t.packages[r]=e[r].replace(n,"\\u$&")}t.packages={},r({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",
Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/token_iterator",["require","exports","module"],function(e,t,n){"use strict";var r=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var e;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)t-=1,n+=e[t].value.length;return n}}).call(r.prototype),t.TokenIterator=r}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var r=e("../tokenizer").Tokenizer,i=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour").Behaviour,o=e("../unicode"),u=e("../lib/lang"),a=e("../token_iterator").TokenIterator,f=e("../range").Range,l=function(){this.HighlightRules=i,this.$behaviour=new s};(function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules,this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){function w(e){for(var t=n;r>=t;t++)e(i.getLine(t),t)}var i=t.doc,s=!0,o=!0,a=1/0,f=t.getTabSize(),l=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var p=this.lineCommentStart.map(u.escapeRegExp).join("|"),c=this.lineCommentStart[0];else var p=u.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;p=new RegExp("^(\\s*)(?:"+p+") ?"),l=t.getUseSoftTabs();var m=function(e,t){var n=e.match(p);if(n){var r=n[1].length,s=n[0].length;!b(e,r,s)&&" "==n[0][s-1]&&s--,i.removeInLine(t,r,s)}},y=c+" ",v=function(e,t){(!s||/\S/.test(e))&&(b(e,a,a)?i.insertInLine({row:t,column:a},y):i.insertInLine({row:t,column:a},c))},g=function(e,t){return p.test(e)},b=function(e,t,n){for(var r=0;t--&&" "==e.charAt(t);)r++;if(r%f!=0)return!1;for(var r=0;" "==e.charAt(n++);)r++;return f>2?r%f!=f-1:r%f==0}}else{if(!this.blockComment)return!1;var c=this.blockComment.start,h=this.blockComment.end,p=new RegExp("^(\\s*)(?:"+u.escapeRegExp(c)+")"),d=new RegExp("(?:"+u.escapeRegExp(h)+")\\s*$"),v=function(e,t){g(e,t)||(!s||/\S/.test(e))&&(i.insertInLine({row:t,column:e.length},h),i.insertInLine({row:t,column:a},c))},m=function(e,t){var n;(n=e.match(d))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&i.removeInLine(t,n[1].length,n[0].length)},g=function(e,n){if(p.test(e))return!0;for(var r=t.getTokens(n),i=0;i<r.length;i++)if("comment"===r[i].type)return!0}}var E=1/0;w(function(e,t){var n=e.search(/\S/);-1!==n?(a>n&&(a=n),o&&!g(e,t)&&(o=!1)):E>e.length&&(E=e.length)}),a==1/0&&(a=E,s=!1,o=!1),l&&a%f!=0&&(a=Math.floor(a/f)*f),w(o?m:v)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var c,h,s=new a(t,r.row,r.column),o=s.getCurrentToken(),l=(t.selection,t.selection.toOrientedRange());if(o&&/comment/.test(o.type)){for(var p,d;o&&/comment/.test(o.type);){var v=o.value.indexOf(i.start);if(-1!=v){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;p=new f(m,g,m,g+i.start.length);break}o=s.stepBackward()}for(var s=new a(t,r.row,r.column),o=s.getCurrentToken();o&&/comment/.test(o.type);){var v=o.value.indexOf(i.end);if(-1!=v){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;d=new f(m,g,m,g+i.end.length);break}o=s.stepForward()}d&&t.remove(d),p&&(t.remove(p),c=p.start.row,h=-i.start.length)}else h=i.start.length,c=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);l.start.row==c&&(l.start.column+=h),l.end.row==c&&(l.end.column+=h),t.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)e[t]&&(this.$embeds.push(t),this.$modes[t]=new e[t]);for(var n=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],t=0;t<n.length;t++)(function(e){var r=n[t],i=e[r];e[n[t]]=function(){return this.$delegator(r,arguments,i)}})(this)},this.$delegator=function(e,t,n){var r=t[0];"string"!=typeof r&&(r=r[0]);for(var i=0;i<this.$embeds.length;i++)if(this.$modes[this.$embeds[i]]){var s=r.split(this.$embeds[i]);if(!s[0]&&s[1]){t[0]=s[1];var o=this.$modes[this.$embeds[i]];return o[e].apply(o,t)}}var u=n.apply(this,t);return n?u:void 0},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t)for(var i=t[r],s=0,o=i.length;o>s;s++)if("string"==typeof i[s].token)/keyword|support|storage/.test(i[s].token)&&n.push(i[s].regex);else if("object"==typeof i[s].token)for(var u=0,a=i[s].token.length;a>u;u++)if(/keyword|support|storage/.test(i[s].token[u])){var r=i[s].regex.match(/\(.+?\)/g)[u];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){var i=this.$keywordList||this.$createKeywordList();return i.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(l.prototype),t.Mode=l}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),"undefined"==typeof n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){var t=e.data,n=t.range;if((n.start.row!=n.end.row||n.start.row==this.row)&&!(n.start.row>this.row||n.start.row==this.row&&n.start.column>this.column)){var r=this.row,i=this.column,s=n.start,o=n.end;"insertText"===t.action?s.row===r&&s.column<=i?s.column===i&&this.$insertRight||(s.row===o.row?i+=o.column-s.column:(i-=s.column,r+=o.row-s.row)):s.row!==o.row&&s.row<r&&(r+=o.row-s.row):"insertLines"===t.action?(s.row!==r||0!==i||!this.$insertRight)&&s.row<=r&&(r+=o.row-s.row):"removeText"===t.action?s.row===r&&s.column<i?i=o.column>=i?s.column:Math.max(0,i-(o.column-s.column)):s.row!==o.row&&s.row<r?(o.row===r&&(i=Math.max(0,i-o.column)+s.column),r-=o.row-s.row):o.row===r&&(r-=o.row-s.row,i=Math.max(0,i-o.column)+s.column):"removeLines"==t.action&&s.row<=r&&(o.row<=r?r-=o.row-s.row:(r=s.row,i=0)),this.setPosition(r,i,!0)}},this.setPosition=function(e,t,n){var r;if(r=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=r.row||this.column!=r.column){var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):0>e?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),0>t&&(n.column=0),n}}).call(s.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,o=e("./anchor").Anchor,u=function(e){this.$lines=[],0===e.length?this.$lines=[""]:Array.isArray(e)?this._insertLines(0,e):this.insert({row:0,column:0},e)};(function(){r.implement(this,i),this.setValue=function(e){var t=this.getLength();this.remove(new s(0,0,t,this.getLine(t-1).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new o(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){if(e.start.row==e.end.row)return this.getLine(e.start.row).substring(e.start.column,e.end.column);var t=this.getLines(e.start.row,e.end.row);t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;return e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column)),t.join(this.getNewLineCharacter())},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):e.row<0&&(e.row=0),e},this.insert=function(e,t){if(!t||0===t.length)return e;e=this.$clipPosition(e),this.getLength()<=1&&this.$detectNewLine(t);var n=this.$split(t),r=n.splice(0,1)[0],i=0==n.length?null:n.splice(n.length-1,1)[0];return e=this.insertInLine(e,r),null!==i&&(e=this.insertNewLine(e),e=this._insertLines(e.row,n),e=this.insertInLine(e,i||"")),e},this.insertLines=function(e,t){return e>=this.getLength()?this.insert({row:e,column:0},"\n"+t.join("\n")):this._insertLines(Math.max(e,0),t)},this._insertLines=function(e,t){if(0==t.length)return{row:e,column:0};for(;t.length>61440;){var n=this._insertLines(e,t.slice(0,61440));t=t.slice(61440),e=n.row}var r=[e,0];r.push.apply(r,t),this.$lines.splice.apply(this.$lines,r);var i=new s(e,0,e+t.length,0),o={action:"insertLines",range:i,lines:t};return this._signal("change",{data:o}),i.end},this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"";this.$lines[e.row]=t.substring(0,e.column),this.$lines.splice(e.row+1,0,t.substring(e.column,t.length));var n={row:e.row+1,column:0},r={action:"insertText",range:s.fromPoints(e,n),text:this.getNewLineCharacter()};return this._signal("change",{data:r}),n},this.insertInLine=function(e,t){if(0==t.length)return e;var n=this.$lines[e.row]||"";this.$lines[e.row]=n.substring(0,e.column)+t+n.substring(e.column);var r={row:e.row,column:e.column+t.length},i={action:"insertText",range:s.fromPoints(e,r),text:t};return this._signal("change",{data:i}),r},this.remove=function(e){if(e instanceof s||(e=s.fromPoints(e.start,e.end)),e.start=this.$clipPosition(e.start),e.end=this.$clipPosition(e.end),e.isEmpty())return e.start;var t=e.start.row,n=e.end.row;if(e.isMultiLine()){var r=0==e.start.column?t:t+1,i=n-1;e.end.column>0&&this.removeInLine(n,0,e.end.column),i>=r&&this._removeLines(r,i),r!=t&&(this.removeInLine(t,e.start.column,this.getLine(t).length),this.removeNewLine(e.start.row))}else this.removeInLine(t,e.start.column,e.end.column);return e.start},this.removeInLine=function(e,t,n){if(t!=n){var r=new s(e,t,e,n),i=this.getLine(e),o=i.substring(t,n),u=i.substring(0,t)+i.substring(n,i.length);this.$lines.splice(e,1,u);var a={action:"removeText",range:r,text:o};return this._signal("change",{data:a}),r.start}},this.removeLines=function(e,t){return 0>e||t>=this.getLength()?this.remove(new s(e,0,t+1,0)):this._removeLines(e,t)},this._removeLines=function(e,t){var n=new s(e,0,t+1,0),r=this.$lines.splice(e,t-e+1),i={action:"removeLines",range:n,nl:this.getNewLineCharacter(),lines:r};return this._signal("change",{data:i}),r},this.removeNewLine=function(e){var t=this.getLine(e),n=this.getLine(e+1),r=new s(e,t.length,e+1,0),i=t+n;this.$lines.splice(e,2,i);var o={action:"removeText",range:r,text:this.getNewLineCharacter()};this._signal("change",{data:o})},this.replace=function(e,t){if(e instanceof s||(e=s.fromPoints(e.start,e.end)),0==t.length&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;if(this.remove(e),t)var n=this.insert(e.start,t);else n=e.start;return n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);"insertLines"==n.action?this.insertLines(r.start.row,n.lines):"insertText"==n.action?this.insert(r.start,n.text):"removeLines"==n.action?this._removeLines(r.start.row,r.end.row-1):"removeText"==n.action&&this.remove(r)}},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);"insertLines"==n.action?this._removeLines(r.start.row,r.end.row-1):"insertText"==n.action?this.remove(r):"removeLines"==n.action?this._insertLines(r.start.row,n.lines):"removeText"==n.action&&this.insert(r.start,n.text)}},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=t||0,s=n.length;s>i;i++)if(e-=n[i].length+r,0>e)return{row:i,column:e+n[i].length+r};return{row:s-1,column:n[s-1].length}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length),o=t||0;s>o;++o)i+=n[o].length+r;return i+e.column}}).call(u.prototype),t.Document=u}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,r=-1,i=n.doc;n.lines[t];)t++;var s=t,o=i.getLength(),u=0;for(n.running=!1;o>t;){n.$tokenizeRow(t),r=t;do t++;while(n.lines[t]);if(u++,u%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,r>=s&&n.fireUpdateEvent(s,r)}}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.range,n=t.start.row,r=t.end.row-n;if(0===r)this.lines[n]=null;else if("removeText"==e.action||"removeLines"==e.action)this.lines.splice(n,r+1,null),this.states.splice(n,r+1,null);else{var i=Array(r+1);i.unshift(n,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(n,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(s.prototype),t.BackgroundTokenizer=s}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),s=(e("./lib/oop"),e("./range").Range),o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,i){if(this.regExp)for(var o=i.firstRow,u=i.lastRow,a=o;u>=a;a++){var f=this.cache[a];null==f&&(f=r.getMatchOffsets(n.getLine(a),this.regExp),f.length>this.MAX_RANGES&&(f=f.slice(0,this.MAX_RANGES)),f=f.map(function(e){return new s(a,e.offset,a,e.offset+e.length)}),this.cache[a]=f.length?f:"");for(var l=f.length;l--;)t.drawSingleLineMarker(e,f[l].toScreenRange(n),this.clazz,i)}}}).call(o.prototype),t.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var s,o,u,r=0,i=this.folds,a=!0;null==t&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){if(s=i[f],o=s.range.compareStart(t,n),-1==o)return void e(null,t,n,r,a);if(u=e(null,s.start.row,s.start.column,r,a),u=!u&&e(s.placeholder,s.start.row,s.start.column,r),u||0===o)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){for(var n,r,i=0;i<this.folds.length;i++){if(n=this.folds[i],r=n.range.compareEnd(e,t),-1==r)return{fold:n,kind:"after"};if(0===r)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var i,s,r=this.getNextFoldTo(e,t);if(r)if(i=r.fold,"inside"==r.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){s=this.folds;var o=s.indexOf(i);for(0===o&&(this.start.column+=n),o;o<s.length;o++){if(i=s[o],i.start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var r=n.fold,s=this.folds,o=this.foldData,u=s.indexOf(r),a=s[u-1];this.end.row=a.end.row,this.end.column=a.end.column,s=s.splice(u,s.length-u);var f=new i(o,s);return o.splice(o.indexOf(this)+1,0,f),f},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var r=this.folds[n];if(e-=r.start.column-t,0>e)return{row:r.start.row,column:r.start.column+e};if(e-=r.placeholder.length,0>e)return r.start;t=r.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range,i=r.comparePoints,s=function(){this.ranges=[]};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){for(var r=this.ranges,s=n||0;s<r.length;s++){var o=r[s],u=i(e,o.end);if(!(u>0)){var a=i(e,o.start);return 0===u?t&&0!==a?-s-2:s:a>0||0===a&&!t?s:-s-1}}return-s-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);0>n&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return 0>r?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.call(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges.splice(t,1):void 0},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return i(e.start,t.start)});for(var r,n=t[0],s=1;s<t.length;s++){r=n,n=t[s];var o=i(r.end,n.start);0>o||(0!=o||r.isEmpty()||n.isEmpty())&&(i(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(s,1),e.push(n),n=r,s--)}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges[t]:void 0},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});0>r&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);0>i&&(i=-i-1);for(var s=[],o=r;i>o;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){var t=e.data.range;if("i"==e.data.action[0])var n=t.start,r=t.end;else var r=t.start,n=t.end;for(var i=n.row,s=r.row,o=s-i,u=-n.column+r.column,a=this.ranges,f=0,l=a.length;l>f;f++){var c=a[f];if(!(c.end.row<i)){if(c.start.row>i)break;if(c.start.row==i&&c.start.column>=n.column&&(c.start.column!=n.column||!this.$insertRight)&&(c.start.column+=u,c.start.row+=o),c.end.row==i&&c.end.column>=n.column){if(c.end.column==n.column&&this.$insertRight)continue;c.end.column==n.column&&u>0&&l-1>f&&c.end.column>c.start.column&&c.end.column==a[f+1].start.column&&(c.end.column-=u),c.end.column+=u,c.end.row+=o}}}if(0!=o&&l>f)for(;l>f;f++){var c=a[f];c.start.row+=o,c.end.row+=o}}}).call(s.prototype),t.RangeList=s}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";function u(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function a(e,t){u(e.start,t),u(e.end,t)}function f(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}function l(e,t){f(e.start,t),f(e.end,t)}var i=(e("../range").Range,e("../range_list").RangeList),s=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};s.inherits(o,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);a(e,this.start);for(var t=e.start.row,n=e.start.column,r=0,i=-1;r<this.subFolds.length&&(i=this.subFolds[r].range.compare(t,n),1==i);r++);var s=this.subFolds[r];if(0==i)return s.addSubFold(e);for(var t=e.range.end.row,n=e.range.end.column,o=r,i=-1;o<this.subFolds.length&&(i=this.subFolds[o].range.compare(t,n),1==i);o++);this.subFolds[o];if(0==i)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);this.subFolds.splice(r,o-r,e);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return l(e,this.start)}}.call(o.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";function u(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;for(var i=r.folds,s=0;s<i.length;s++){var o=i[s];if(o.range.contains(e,t)){if(1==n&&o.range.isEnd(e,t))continue;if(-1==n&&o.range.isStart(e,t))continue;return o}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(2!=o){if(-2==o)break;for(var u=r[s].folds,a=0;a<u.length;a++){var f=u[a];if(o=f.range.compareRange(e),-2==o)break;if(2!=o){if(42==o)break;i.push(f)}}}}return t.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){if(r=r||this.getFoldLine(e),!r)return null;for(var s,o,i={end:{column:0}},u=0;u<r.folds.length;u++){o=r.folds[u];var a=o.range.compareEnd(e,t);if(-1==a){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(0===a)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),-1==n?s.substring(0,t-i.end.column):1==n?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0),r;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0),r;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,r=t-e+1,i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){t>u&&(u>=e?r-=t-u:r=0);break}o>=e&&(r-=u>=e?o-u:o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var o,n=this.$foldData,r=!1;e instanceof s?o=e:(o=new s(t,e),o.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column;if(f>u||u==f&&l-2>=a){var c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);if(c&&!c.range.isStart(u,a)||h&&!h.range.isEnd(f,l))throw new Error("A fold can't intersect already existing fold"+o.range+c.range);var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),p.forEach(function(e){o.addSubFold(e)}));for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){if(v.addFold(o),r=!0,!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._emit("changeFold",{data:o,action:"add"}),o}throw new Error("The range has to be at least 2 characters width")},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;
if(1==s.length)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);s=o.folds,s.shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._emit("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;if(null==e?(n=new r(0,0,this.getLength(),0),t=!0):n="number"==typeof e?new r(e,0,e,this.getLine(e).length):"row"in e?r.fromPoints(e,e):e,i=this.getFoldsInRangeList(n),t)this.removeFolds(i);else for(var s=i;s.length;)this.expandFolds(s),s=this.getFoldsInRangeList(n);return i.length?i:void 0},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){null==r&&(r=e.start.row),null==i&&(i=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var s=this.doc,o="";return e.walk(function(e,t,n,u){if(!(r>t)){if(t==r){if(i>n)return;u=Math.max(i,u)}o+=null!=e?e:s.getLine(t).substring(u,n)}},t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return s=this.doc.getLine(e),s.substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)})},this.toggleFold=function(e){var r,i,t=this.selection,n=t.getRange();if(n.isEmpty()){var s=n.start;if(r=this.getFoldAt(s.row,s.column))return void this.expandFold(r);(i=this.findMatchingBracket(s))?1==n.comparePoint(i)?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(1==n.comparePoint(i)?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length)return void this.expandFolds(o);1==o.length&&(r=o[0])}if(r||(r=this.getFoldAt(n.start.row,n.start.column)),r&&r.range.toString()==n.toString())return void this.expandFold(r);var u="...";if(!n.isMultiLine()){if(u=this.getTextRange(n),u.length<4)return;u=u.trim().substring(0,2)+".."}this.addFold(u,n)},this.getCommentFoldRange=function(e,t,n){var i=new o(this,e,t),s=i.getCurrentToken();if(s&&/^comment|string/.test(s.type)){var u=new r,a=new RegExp(s.type.replace(/\..*/,"\\."));if(1!=n){do s=i.stepBackward();while(s&&a.test(s.type));i.stepForward()}if(u.start.row=i.getCurrentTokenRow(),u.start.column=i.getCurrentTokenColumn()+2,i=new o(this,e,t),-1!=n){do s=i.stepForward();while(s&&a.test(s.type));s=i.stepBackward()}else s=i.getCurrentToken();return u.end.row=i.getCurrentTokenRow(),u.end.column=i.getCurrentTokenColumn()+s.value.length-2,u}},this.foldAll=function(e,t,n){void 0==n&&(n=1e5);var r=this.foldWidgets;if(r){t=t||this.getLength(),e=e||0;for(var i=e;t>i;i++)if(null==r[i]&&(r[i]=this.getFoldWidget(i)),"start"==r[i]){var s=this.getFoldWidgetRange(i);if(s&&s.isMultiLine()&&s.end.row<=t&&s.start.row>=e){i=s.end.row;try{var o=this.addFold("...",s);o&&(o.collapseChildren=n)}catch(u){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){return this.$foldMode!=e?(this.$foldMode=e,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),void 0):void(this.foldWidgets=null)):void 0},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var i,r=e-1;r>=0;){var s=n[r];if(null==s&&(s=n[r]=this.getFoldWidget(r)),"start"==s){var o=this.getFoldWidgetRange(r);if(i||(i=o),o&&o.end.row>=e)break}r--}return{range:-1!==r&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},r=this.$toggleFoldWidget(e,n);if(!r){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),r=this.getLine(e),i="end"===n?-1:1,s=this.getFoldAt(e,-1===i?0:r.length,i);if(s)return void(t.children||t.all?this.removeFold(s):this.expandFold(s));var o=this.getFoldWidgetRange(e,!0);if(o&&!o.isMultiLine()&&(s=this.getFoldAt(o.start.row,o.start.column,1),s&&o.isEqual(s.range)))return void this.removeFold(s);if(t.siblings){var u=this.getParentFoldRangeData(e);if(u.range)var a=u.range.start.row+1,f=u.range.end.row;this.foldAll(a,f,t.all?1e4:0)}else t.children?(f=o?o.end.row:this.getLength(),this.foldAll(e+1,o.end.row,t.all?1e4:0)):o&&(t.all&&(o.collapseChildren=1e4),this.addFold("...",o));return o}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var r=this.getParentFoldRangeData(t,!0);if(n=r.range||r.firstRange){t=n.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.data,n=t.range,r=n.start.row,i=n.end.row-r;if(0===i)this.foldWidgets[r]=null;else if("removeText"==t.action||"removeLines"==t.action)this.foldWidgets.splice(r,i+1,null);else{var s=Array(i+1);s.unshift(r,1),this.foldWidgets.splice.apply(this.foldWidgets,s)}}}var r=e("../range").Range,i=e("./fold_line").FoldLine,s=e("./fold").Fold,o=e("../token_iterator").TokenIterator;t.Folding=u}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";function s(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var r,t=this.getLine(e.row),n=!0,s=t.charAt(e.column-1),o=s&&s.match(/([\(\[\{])|([\)\]\}])/);if(o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\(\[\{])|([\)\]\}])/),n=!1),!o)return null;if(o[1]){var u=this.$findClosingBracket(o[1],e);if(!u)return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u=this.$findOpeningBracket(o[2],e);if(!u)return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();if(u||(u=o.stepForward()),u){n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+"));for(var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;;){for(;a>=0;){var l=f.charAt(a);if(l==i){if(s-=1,0==s)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do u=o.stepBackward();while(u&&!n.test(u.type));if(null==u)break;f=u.value,a=f.length-1}return null}},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();if(u||(u=o.stepForward()),u){n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+"));for(var a=t.column-o.getCurrentTokenColumn();;){for(var f=u.value,l=f.length;l>a;){var c=f.charAt(a);if(c==i){if(s-=1,0==s)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do u=o.stepForward();while(u&&!n.test(u.type));if(null==u)break;a=0}return null}}}var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=s}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./config"),o=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,a=e("./mode/text").Mode,f=e("./range").Range,l=e("./document").Document,c=e("./background_tokenizer").BackgroundTokenizer,h=e("./search_highlight").SearchHighlight,p=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new l(e)),this.setDocument(e),this.selection=new u(this),s.resetOptions(this),this.setMode(t),s._signal("session",this)};(function(){function m(e){return 4352>e?!1:e>=4352&&4447>=e||e>=4515&&4519>=e||e>=4602&&4607>=e||e>=9001&&9002>=e||e>=11904&&11929>=e||e>=11931&&12019>=e||e>=12032&&12245>=e||e>=12272&&12283>=e||e>=12288&&12350>=e||e>=12353&&12438>=e||e>=12441&&12543>=e||e>=12549&&12589>=e||e>=12593&&12686>=e||e>=12688&&12730>=e||e>=12736&&12771>=e||e>=12784&&12830>=e||e>=12832&&12871>=e||e>=12880&&13054>=e||e>=13056&&19903>=e||e>=19968&&42124>=e||e>=42128&&42182>=e||e>=43360&&43388>=e||e>=44032&&55203>=e||e>=55216&&55238>=e||e>=55243&&55291>=e||e>=63744&&64255>=e||e>=65040&&65049>=e||e>=65072&&65106>=e||e>=65108&&65126>=e||e>=65128&&65131>=e||e>=65281&&65376>=e||e>=65504&&65510>=e}r.implement(this,o),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,r=e.length-1;r>=n;){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(s>t))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){var t=e.data;this.$modified=!0,this.$resetRowCache(t.range.start.row);var n=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&!t.ignore&&(this.$deltasDoc.push(t),n&&0!=n.length&&this.$deltasFold.push({action:"removeFolds",folds:n}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var r,n=this.bgTokenizer.getTokens(e),i=0;if(null==t)s=n.length-1,i=this.getLine(e).length;else for(var s=0;s<n.length&&(i+=n[s].value.length,!(i>=t));s++);return r=n[s],r?(r.index=s,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._signal("changeFrontMarker")):(this.$backMarkers[i]=s,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(t){var n=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete n[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new h(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var i=new f(e,0,t,1/0);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;if(t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe)),r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var i=/\s/;else var i=this.nonTokenRe;var s=t;if(s>0){do s--;while(s>=0&&n.charAt(s).match(i));s++}for(var o=t;o<n.length&&n.charAt(o).match(i);)o++;return new f(e,s,e,o)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),r=this.getLine(n.end.row);r.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new a),this.$modes[r]&&!n?(this.$onChangeMode(this.$modes[r]),void(t&&t())):(this.$modeId=r,s.loadModule(["mode",r],function(e){return this.$modeId!==r?t&&t():this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):void(e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e),t&&t()))}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0),void 0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(void 0!==n.addEventListener){var r=this.onReloadTokenizer.bind(this);n.addEventListener("update",r)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new c(n);var i=this;this.bgTokenizer.addEventListener("update",function(e){i._signal("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){"object"==typeof console&&(console.log("Could not load worker"),console.log(e)),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:1/0,u=t.length,a=0;u>a;a++){if(a>o){if(a=s.end.row+1,a>=u)break;s=this.$foldData[i++],o=s?s.start.row:1/0}null==n[a]&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,r=e.length-1;-1!=r;r--){var i=e[r];"doc"==i.group?(this.doc.revertDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!0,n)):i.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,r=0;r<e.length;r++){var i=e[r];"doc"==i.group&&(this.doc.applyDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,n){function r(e){var n="insertText"===e.action||"insertLines"===e.action;return t?!n:n}var s,o,i=e[0],u=!1;r(i)?(s=f.fromPoints(i.range.start,i.range.end),u=!0):(s=f.fromPoints(i.range.start,i.range.start),u=!1);for(var a=1;a<e.length;a++)i=e[a],r(i)?(o=i.range.start,-1==s.compare(o.row,o.column)&&s.setStart(i.range.start),o=i.range.end,1==s.compare(o.row,o.column)&&s.setEnd(i.range.end),u=!0):(o=i.range.start,-1==s.compare(o.row,o.column)&&(s=f.fromPoints(i.range.start,i.range.start)),u=!1);if(null!=n){0===f.comparePoints(n.start,s.start)&&(n.start.column+=s.end.column-s.start.column,n.end.column+=s.end.column-s.start.column);var l=n.compareRange(s);1==l?s.setStart(n.start):-1==l&&s.setEnd(n.end)}return s},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),s=f.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row,u=o?-e.end.column:e.start.column-e.end.column;u&&(s.start.row==e.end.row&&s.start.column>e.end.column&&(s.start.column+=u),s.end.row==e.end.row&&s.end.column>e.end.column&&(s.end.column+=u)),o&&s.start.row>=e.end.row&&(s.start.row+=o,s.end.row+=o)}if(s.end=this.insert(s.start,r),i.length){var a=e.start,l=s.start,o=l.row-a.row,u=l.column-a.column;this.addFolds(i.map(function(e){return e=e.clone(),e.start.row==a.row&&(e.start.column+=u),e.end.row==a.row&&(e.end.column+=u),e.start.row+=o,e.end.row+=o,e}))}return s},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;t>=r;r++)this.insert({row:r,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new f(0,0,0,0),r=this.getTabSize(),i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;r>o&&" "==s.charAt(o);++o);r>o&&"	"==s.charAt(o)?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),0>n){var r=this.getRowFoldStart(e+n);if(0>r)return 0;var i=r-e}else if(n>0){var r=this.getRowFoldEnd(t+n);if(r>this.doc.getLength()-1)return 0;var i=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var i=t-e+1}var s=new f(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(s).map(function(e){return e=e.clone(),e.start.row+=i,e.end.row+=i,e}),u=0==n?this.doc.getLines(e,t):this.doc.removeLines(e,t);return this.doc.insertLines(e+i,u),o.length&&this.addFolds(o),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return 0>t?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),0>e)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)&&(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var n,t=this.$useWrapMode,r=e.data.action,i=e.data.range.start.row,s=e.data.range.end.row,o=e.data.range.start,u=e.data.range.end,a=null;if(-1!=r.indexOf("Lines")?(s="insertLines"==r?i+e.data.lines.length:i,n=e.data.lines?e.data.lines.length:s-i):n=s-i,this.$updating=!0,0!=n)if(-1!=r.indexOf("remove")){this[t?"$wrapData":"$rowLengthCache"].splice(i,n);var f=this.$foldData;a=this.getFoldsInRange(e.data.range),this.removeFolds(a);var l=this.getFoldLine(u.row),c=0;if(l){l.addRemoveChars(u.row,u.column,o.column-u.column),l.shiftRow(-n);var h=this.getFoldLine(i);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=u.row&&l.shiftRow(-n)}s=i}else{var p=Array(n);p.unshift(i,0);var d=t?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,p);var f=this.$foldData,l=this.getFoldLine(i),c=0;if(l){var v=l.range.compareInside(o.row,o.column);0==v?(l=l.split(o.row,o.column),l&&(l.shiftRow(n),l.addRemoveChars(s,0,u.column-o.column))):-1==v&&(l.addRemoveChars(i,0,u.column-o.column),l.shiftRow(n)),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=i&&l.shiftRow(n)}}else{n=Math.abs(e.data.range.start.column-e.data.range.end.column),-1!=r.indexOf("remove")&&(a=this.getFoldsInRange(e.data.range),this.removeFolds(a),n=-n);var l=this.getFoldLine(i);l&&l.addRemoveChars(i,o.column,n)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(i,s):this.$updateRowLengthCache(i,s),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var a,f,r=this.doc.getAllLines(),i=this.getTabSize(),s=this.$wrapData,o=this.$wrapLimit,l=e;for(t=Math.min(t,r.length-1);t>=l;)f=this.getFoldLine(l,f),f?(a=[],f.walk(function(e,t,i,s){var o;if(null!=e){o=this.$getDisplayTokens(e,a.length),o[0]=n;for(var f=1;f<o.length;f++)o[f]=u}else o=this.$getDisplayTokens(r[t].substring(s,i),a.length);a=a.concat(o)}.bind(this),f.end.row,r[f.end.row].length+1),s[f.start.row]=this.$computeWrapSplits(a,o,i),l=f.end.row+1):(a=this.$getDisplayTokens(r[l]),s[l]=this.$computeWrapSplits(a,o,i),l++)};var e=1,t=2,n=3,u=4,l=9,p=10,d=11,v=12;this.$computeWrapSplits=function(e,r){function c(t){var n=e.slice(o,t),r=n.length;n.join("").replace(/12/g,function(){r-=1}).replace(/2/g,function(){r-=1}),a+=r,i.push(a),o=t}if(0==e.length)return[];for(var i=[],s=e.length,o=0,a=0,f=this.$wrapAsCode;s-o>r;){var h=o+r;if(e[h-1]>=p&&e[h]>=p)c(h);else if(e[h]!=n&&e[h]!=u){for(var d=Math.max(h-(f?10:r-(r>>2)),o-1);h>d&&e[h]<n;)h--;if(f){for(;h>d&&e[h]<n;)h--;for(;h>d&&e[h]==l;)h--}else for(;h>d&&e[h]<p;)h--;h>d?c(++h):(h=o+r,e[h]==t&&h--,c(h))}else{for(h;h!=o-1&&e[h]!=n;h--);if(h>o){c(h);continue}for(h=o+r;h<e.length&&e[h]==u;h++);if(h==e.length)break;c(h)}}return i},this.$getDisplayTokens=function(n,r){var s,i=[];r=r||0;for(var o=0;o<n.length;o++){var u=n.charCodeAt(o);if(9==u){s=this.getScreenTabSize(i.length+r),i.push(d);for(var a=1;s>a;a++)i.push(v)}else 32==u?i.push(p):u>39&&48>u||u>57&&64>u?i.push(l):u>=4352&&m(u)?i.push(e,t):i.push(e)}return i},this.$getStringScreenWidth=function(e,t,n){if(0==t)return[0,0];null==t&&(t=1/0),n=n||0;var r,i;for(i=0;i<e.length&&(r=e.charCodeAt(i),n+=9==r?this.getScreenTabSize(n):r>=4352&&m(r)?2:1,!(n>t));i++);return[n,i]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(0>e)return{row:0,column:0};var n,s,r=0,i=0,o=0,u=0,a=this.$screenRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var o=a[f],r=this.$docRowCache[f],c=e>a[l-1];else var c=!l;for(var h=this.getLength()-1,p=this.getNextFoldLine(r),d=p?p.start.row:1/0;e>=o&&(u=this.getRowLength(r),!(o+u>e||r>=h));)o+=u,r++,r>d&&(r=p.end.row+1,p=this.getNextFoldLine(r,p),d=p?p.start.row:1/0),c&&(this.$docRowCache.push(r),this.$screenRowCache.push(o));if(p&&p.start.row<=r)n=this.getFoldDisplayLine(p),r=p.start.row;else{if(e>=o+u||r>h)return{row:h,column:this.getLine(h).length};n=this.getLine(r),p=null}if(this.$useWrapMode){var v=this.$wrapData[r];if(v){var m=Math.floor(e-o);s=v[m],m>0&&v.length&&(i=v[m-1]||v[v.length-1],n=n.substring(i))}}return i+=this.$getStringScreenWidth(n,t)[1],this.$useWrapMode&&i>=s&&(i=s-1),p?p.idxToPosition(i):{row:r,column:i}},this.documentToScreenPosition=function(e,t){if("undefined"==typeof t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r=0,i=null,s=null;s=this.getFoldAt(e,t,1),s&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var u=a[f],r=this.$screenRowCache[f],c=e>a[l-1];else var c=!l;for(var h=this.getNextFoldLine(u),p=h?h.start.row:1/0;e>u;){if(u>=p){if(o=h.end.row+1,o>e)break;h=this.getNextFoldLine(o,h),p=h?h.start.row:1/0}else o=u+1;r+=this.getRowLength(u),u=o,c&&(this.$docRowCache.push(u),
this.$screenRowCache.push(r))}var d="";if(h&&u>=p?(d=this.getFoldDisplayLine(h,e,t),i=h.start.row):(d=this.getLine(e).substring(0,t),i=e),this.$useWrapMode){var v=this.$wrapData[i];if(v){for(var m=0;d.length>=v[m];)r++,m++;d=d.substring(v[m-1]||0,d.length)}}return{row:r,column:this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var i=this.$wrapData.length,s=0,r=0,t=this.$foldData[r++],o=t?t.start.row:1/0;i>s;){var u=this.$wrapData[s];e+=u?u.length+1:1,s++,s>o&&(s=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:1/0)}else{e=this.getLength();for(var n=this.$foldData,r=0;r<n.length;r++)t=n[r],e-=t.end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}).call(p.prototype),e("./edit_session/folding").Folding.call(p.prototype),e("./edit_session/bracket_match").BracketMatch.call(p.prototype),s.defineOptions(p.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e){if(e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1);this.$wrap=e}},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){e="auto"==e?"text"!=this.$mode.type:"text"!=e,e!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){isNaN(e)||this.$tabSize===e||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}}),t.EditSession=p}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$matchIterator(e,this.$options);if(!t)return!1;var n=null;return t.forEach(function(e,t,r){if(e.start)n=e;else{var i=e.offset+(r||0);n=new s(t,i,t,i+e.length)}return!0}),n},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],u=t.re;if(t.$isMultiLine){var l,a=u.length,f=i.length-a;e:for(var c=u.offset||0;f>=c;c++){for(var h=0;a>h;h++)if(-1==i[c+h].search(u[h]))continue e;var p=i[c],d=i[c+a-1],v=p.length-p.match(u[0])[0].length,m=d.match(u[a-1])[0].length;l&&l.end.row===c&&l.end.column>v||(o.push(l=new s(c,v,c+a-1,m)),a>2&&(c=c+a-2))}}else for(var g=0;g<i.length;g++)for(var y=r.getMatchOffsets(i[g],u),h=0;h<y.length;h++){var b=y[h];o.push(new s(g,b.offset,g,b.offset+b.length))}if(n){for(var w=n.start.column,E=n.start.column,g=0,h=o.length-1;h>g&&o[g].start.column<w&&o[g].start.row==n.start.row;)g++;for(;h>g&&o[h].end.column>E&&o[h].end.row==n.end.row;)h--;for(o=o.slice(g,h+1),g=0,h=o.length;h>g;g++)o[g].start.row+=n.start.row,o[g].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(r){var i=r.exec(e);if(!i||i[0].length!=e.length)return null;if(t=e.replace(r,t),n.preserveCase){t=t.split("");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join("")}return t}},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var o,i=this,u=t.backwards;if(t.$isMultiLine)var a=n.length,f=function(t,r,i){var u=t.search(n[0]);if(-1!=u){for(var f=1;a>f;f++)if(t=e.getLine(r+f),-1==t.search(n[f]))return;var l=t.match(n[a-1])[0].length,c=new s(r,u,r+a-1,l);return 1==n.offset?(c.start.row--,c.start.column=Number.MAX_VALUE):i&&(c.start.column+=i),o(c)?!0:void 0}};else if(u)var f=function(e,t,i){for(var s=r.getMatchOffsets(e,n),u=s.length-1;u>=0;u--)if(o(s[u],t,i))return!0};else var f=function(e,t,i){for(var s=r.getMatchOffsets(e,n),u=0;u<s.length;u++)if(o(s[u],t,i))return!0};return{forEach:function(n){o=n,i.$lineIterator(e,t).forEach(f)}}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n="\\b"+n+"\\b");var i=e.caseSensitive?"g":"gi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var s=new RegExp(n,i)}catch(o){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[],i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return""==n[0]?(r.shift(),r.offset=1):r.offset=0,r},this.$lineIterator=function(e,t){var n=1==t.backwards,r=0!=t.skipCurrent,i=t.range,s=t.start;s||(s=i?i[n?"end":"start"]:e.selection.getRange()),s.start&&(s=s[r!=n?"end":"start"]);var o=i?i.start.row:0,u=i?i.end.row:e.getLength()-1,a=n?function(n){var r=s.row,i=e.getLine(r).substring(0,s.column);if(!n(i,r)){for(r--;r>=o;r--)if(n(e.getLine(r),r))return;if(0!=t.wrap)for(r=u,o=s.row;r>=o;r--)if(n(e.getLine(r),r))return}}:function(n){var r=s.row,i=e.getLine(r).substr(s.column);if(!n(i,r,s.column)){for(r+=1;u>=r;r++)if(n(e.getLine(r),r))return;if(0!=t.wrap)for(r=o,u=s.row;u>=r;r++)if(n(e.getLine(r),r))return}};return{forEach:a}}}).call(o.prototype),t.Search=o}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function s(e,t){if(this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.__defineGetter__&&this.__defineSetter__&&"undefined"!=typeof console&&console.error){var n=!1,r=function(){n||(n=!0,console.error("commmandKeyBinding has too many m's. use commandKeyBinding"))};this.__defineGetter__("commmandKeyBinding",function(){return r(),this.commandKeyBinding}),this.__defineSetter__("commmandKeyBinding",function(e){return r(),this.commandKeyBinding=e})}else this.commmandKeyBinding=this.commandKeyBinding;this.addCommands(e)}var r=e("../lib/keys"),i=e("../lib/useragent");(function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e){var t="string"==typeof e?e:e.name;e=this.commands[t],delete this.commands[t];var n=this.commandKeyBinding;for(var r in n)for(var i in n[r])n[r][i]==e&&delete n[r][i]},this.bindKey=function(e,t){if(e){if("function"==typeof t)return void this.addCommand({exec:t,bindKey:e,name:t.name||e});var n=this.commandKeyBinding;e.split("|").forEach(function(e){var r=this.parseKeys(e,t),i=r.hashId;(n[i]||(n[i]={}))[r.key]=t},this)}},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(n){if("string"==typeof n)return this.bindKey(n,t);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=t),this.addCommand(n))}},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){var t=e.bindKey;if(t){var n="string"==typeof t?t:t[this.platform];this.bindKey(n,e)}},this.parseKeys=function(e){-1!=e.indexOf(" ")&&(e=e.split(/\s+/).pop());var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var s=0,o=t.length;o--;){var u=r.KEY_MODS[t[o]];if(null==u)return"undefined"!=typeof console&&console.error("invalid modifier "+t[o]+" in "+e),!1;s|=u}return{key:n,hashId:s}},this.findKeyCommand=function(t,n){var r=this.commandKeyBinding;return r[t]&&r[t][n]},this.handleKeyboard=function(e,t,n,r){return{command:this.findKeyCommand(t,n)}}}).call(s.prototype),t.HashHandler=s}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../keyboard/hash_handler").HashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var r={editor:t,command:e,args:n},i=this._emit("exec",r);return this._signal("afterExec",r),i===!1?!1:!0},this.toggleRecording=function(e){return this.$inReplay?void 0:(e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0))},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";function o(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),i=e("../config"),s=e("../range").Range;t.commands=[{name:"showSettingsMenu",bindKey:o("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:o("Alt-E","Ctrl-E"),exec:function(e){i.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:o("Alt-Shift-E","Ctrl-Shift-E"),exec:function(e){i.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:o("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:o("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:o("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:o("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:o("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:o("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:o("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:o("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:o("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:o("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:o("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttomatching",bindKey:o("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",readOnly:!0},{name:"passKeysToBrowser",bindKey:o("null","null"),exec:function(){},passEvent:!0,readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:o("Shift-Delete",null),exec:function(e){return e.selection.isEmpty()?void e.remove("left"):!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:o("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:o("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:o(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),o=e.session.doc.getLine(n.row).length,u=e.session.doc.getTextRange(e.selection.getRange()),a=u.replace(/\n\s*/," ").length,f=e.session.doc.getLine(n.row),l=n.row+1;l<=i.row+1;l++){var c=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(l)));0!==c.length&&(c=" "+c),f+=c}i.row+1<e.session.doc.getLength()-1&&(f+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new s(n.row,0,i.row+2,0),f),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(o=e.session.doc.getLine(n.row).length>o?o+1:o,e.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,r=e.selection.rangeList.ranges,i=[];r.length<1&&(r=[e.selection.getRange()]);for(var o=0;o<r.length;o++)o==r.length-1&&(r[o].end.row!==t||r[o].end.column!==n)&&i.push(new s(r[o].end.row,r[o].end.column,t,n)),0===o?(0!==r[o].start.row||0!==r[o].start.column)&&i.push(new s(0,0,r[o].start.row,r[o].start.column)):i.push(new s(r[o-1].end.row,r[o-1].end.column,r[o].start.row,r[o].start.column));e.exitMultiSelectMode(),e.clearSelection();for(var o=0;o<i.length;o++)e.selection.addRange(i[o],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/lang"),o=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,f=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,h=e("./search").Search,p=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,g=e("./config"),y=e("./token_iterator").TokenIterator,b=function(e,t){var n=e.getContainerElement();this.container=n,this.renderer=e,this.commands=new v(o.isMac?"mac":"win",m),this.textInput=new u(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new l(this),this.$mouseHandler=new a(this),new f(this),this.$blockScrolling=0,this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||new c("")),g.resetOptions(this),g._signal("editor",this)};(function(){r.implement(this,d),this.$initOperationListeners=function(){function e(e){return e[e.length-1]}this.selections=[],this.commands.on("exec",function(t){this.startOperation(t);var n=t.command;if("fileJump"==n.aceCommandGroup){var r=this.prevOp;r&&"fileJump"==r.command.aceCommandGroup||(this.lastFileJumpPos=e(this.selections))}else this.lastFileJumpPos=null}.bind(this),!0),this.commands.on("afterExec",function(e){var t=e.command;"fileJump"==t.aceCommandGroup&&this.lastFileJumpPos&&!this.curOp.selectionChanged&&this.selection.fromJSON(this.lastFileJumpPos),this.endOperation(e)}.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop};var t=this.curOp.command;t&&t.scrollIntoView&&this.$blockScrolling++,this.selections.push(this.selection.toJSON())},this.endOperation=function(){if(this.curOp){var e=this.curOp.command;if(e&&e.scrollIntoView){switch(this.$blockScrolling--,e.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var t=this.selection.getRange(),n=this.renderer.layerConfig;(t.start.row>=n.lastRow||t.end.row<=n.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==e.scrollIntoView&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var i=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e){if(e)if("string"==typeof e){this.$keybindingId=e;var t=this;g.loadModule(["keybinding",e],function(n){t.$keybindingId==e&&t.keyBinding.setKeyboardHandler(n&&n.handler)})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e);else this.keyBinding.setKeyboardHandler(null)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){var t=this.session;if(t){this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.removeEventListener("changeCursor",this.$onCursorChange),n.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),
this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this})}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=t.findMatchingBracket(e.getCursorPosition());if(n)var r=new p(n.row,n.column,n.row,n.column+1);else if(t.$mode.getMatching)var r=t.$mode.getMatching(e.session);r&&(t.$bracketHighlight=t.addMarker(r,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=e.getCursorPosition(),r=new y(e.session,n.row,n.column),i=r.getCurrentToken();if(!i||-1===i.type.indexOf("tag-name"))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var s=i.value,o=0,u=r.stepBackward();if("<"==u.value){do u=i,i=r.stepForward(),i&&i.value===s&&-1!==i.type.indexOf("tag-name")&&("<"===u.value?o++:"</"===u.value&&o--);while(i&&o>=0)}else{do i=u,u=r.stepBackward(),i&&i.value===s&&-1!==i.type.indexOf("tag-name")&&("<"===u.value?o++:"</"===u.value&&o--);while(u&&0>=o);r.stepForward()}if(!i)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var a=r.getCurrentTokenRow(),f=r.getCurrentTokenColumn(),l=new p(a,f,a,f+i.value.length);t.$tagHighlight&&0!==l.compareRange(t.$backMarkers[t.$tagHighlight].range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),l&&!t.$tagHighlight&&(t.$tagHighlight=t.addMarker(l,"ace_bracket","text"))}},50)}},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus"))},this.onBlur=function(){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur"))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var r,t=e.data,n=t.range;r=n.start.row==n.end.row&&"insertLines"!=t.action&&"removeLines"!=t.action?n.end.row:1/0,this.renderer.updateLines(n.start.row,r,this.session.$useWrapMode),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),this.renderer.$maxLines&&1===this.session.getLength()&&!(this.renderer.$minLines>1)&&(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,1/0);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column-1,r=t.end.column+1,i=e.getLine(t.start.row),s=i.length,o=i.substring(Math.max(n,0),Math.min(r,s));if(!(n>=0&&/^[\w\d]/.test(o)||s>=r&&/[\w\d]$/.test(o))&&(o=i.substring(t.start.column,t.end.column),/^[\w\d]+$/.test(o))){var u=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o});return u}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText();return this._signal("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e){if(!this.$readOnly){var t={text:e};this._signal("paste",t),this.insert(t.text,!0)}},this.execCommand=function(e,t){this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var s=r.transformAction(n.getState(i.row),"insertion",this,n,e);s&&(e!==s.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=s.text)}if("	"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var o=new p.fromPoints(i,i);o.end.column+=e.length,this.session.remove(o)}}else{var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}if("\n"==e||"\r\n"==e){var u=n.getLine(i.row);if(i.column>u.search(/\S|$/)){var a=u.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var f=i.column,l=n.getState(i.row),u=n.getLine(i.row),c=r.checkOutdent(l,u,e);n.insert(i,e);if(s&&s.selection&&(2==s.selection.length?this.selection.setSelectionRange(new p(i.row,f+s.selection[0],i.row,f+s.selection[1])):this.selection.setSelectionRange(new p(i.row+s.selection[0],s.selection[1],i.row+s.selection[2],s.selection[3]))),n.getDocument().isNewLine(e)){var d=r.getNextLineIndent(l,u.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},d)}c&&r.autoOutdent(l,n,i.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);if(0===t.end.column){var s=n.getTextRange(t);if("\n"==s[s.length-1]){var o=n.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var r,i,n=this.session.getLine(e.row);t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,r)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();return void e.indentRows(n.first,n.last,"	")}if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){var n=this.$getSelectedRows();return void e.indentRows(n.first,n.last,"	")}}var i=e.getLine(t.start.row),o=t.start,u=e.getTabSize(),a=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var f=u-a%u,l=s.stringRepeat(" ",f);else{for(var f=a%u;" "==i[t.start.column]&&f;)t.start.column--,f--;this.selection.setSelectionRange(t),l="	"}return this.insert(l)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,n=[];for(i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});for(var r=new p(0,0,0,0),i=e.first;i<=e.last;i++){var s=t.getLine(i);r.start.row=i,r.end.row=i,r.end.column=s.length,t.replace(r,n[i-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var r=this.session.getLine(e);n.lastIndex<t;){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t){var s={value:i[0],start:i.index,end:i.index+i[0].length};return s}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new p(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var s=this.getNumberAt(t,n);if(s){var o=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end,u=s.start+s.value.length-o,a=parseFloat(s.value);a*=Math.pow(10,u),e*=o!==s.end&&o>n?Math.pow(10,s.end-n-1):Math.pow(10,s.end-n),a+=e,a/=Math.pow(10,u);var f=a.toFixed(u),l=new p(t,s.start,t,s.end);this.session.replace(l,f),this.moveCursorTo(t,Math.max(s.start+1,n+f.length-s.value.length))}}},this.removeLines=function(){var t,e=this.$getSelectedRows();t=0===e.first||e.last+1<this.session.getLength()?new p(e.first,0,e.last+1,0):new p(e.first-1,this.session.getLine(e.first-1).length,e.last,this.session.getLine(e.last).length),this.session.remove(t),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var s=r?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})},this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t),0})},this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})},this.$moveLines=function(e){var t=this.selection;if(!t.inMultiSelectMode||this.inVirtualSelectionMode){var n=t.toOrientedRange(),r=this.$getSelectedRows(n),i=e.call(this,r.first,r.last);n.moveBy(i,0),t.fromOrientedRange(n)}else{var s=t.rangeList.ranges;t.rangeList.detach(this.session);for(var o=s.length;o--;){for(var u=o,r=s[o].collapseRows(),a=r.end.row,f=r.start.row;o--&&(r=s[o].collapseRows(),f-r.end.row<=1);)f=r.end.row;o++;for(var i=e.call(this,f,a);u>=o;)s[u].moveBy(i,0),u--}t.fromOrientedRange(t.ranges[0]),t.rangeList.attach(this.session)}},this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows();return{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);this.$blockScrolling++,t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):t===!1&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection()),this.$blockScrolling--;var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),r=new y(this.session,n.row,n.column),i=r.getCurrentToken(),s=i||r.stepForward();if(s){var o,l,u=!1,a={},f=n.column-s.start,c={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(s.value.match(/[{}()\[\]]/g)){for(;f<s.value.length&&!u;f++)if(c[s.value[f]])switch(l=c[s.value[f]]+"."+s.type.replace("rparen","lparen"),isNaN(a[l])&&(a[l]=0),s.value[f]){case"(":case"[":case"{":a[l]++;break;case")":case"]":case"}":a[l]--,-1===a[l]&&(o="bracket",u=!0)}}else s&&-1!==s.type.indexOf("tag-name")&&(isNaN(a[s.value])&&(a[s.value]=0),"<"===i.value?a[s.value]++:"</"===i.value&&a[s.value]--,-1===a[s.value]&&(o="tag",u=!0));u||(i=s,s=r.stepForward(),f=0)}while(s&&!u);if(o){var h,d;if("bracket"===o)h=this.session.getBracketRange(n),h||(h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1),d=h.start,(t||d.row===n.row&&Math.abs(d.column-n.column)<2)&&(h=this.session.getBracketRange(d)));else if("tag"===o){if(!s||-1===s.type.indexOf("tag-name"))return;var v=s.value;if(h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2),0===h.compare(n.row,n.column)){u=!1;do s=i,i=r.stepBackward(),i&&(-1!==i.type.indexOf("tag-close")&&h.setEnd(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1),s.value===v&&-1!==s.type.indexOf("tag-name")&&("<"===i.value?a[v]++:"</"===i.value&&a[v]--,0===a[v]&&(u=!0)));while(i&&!u)}s&&s.type.indexOf("tag-name")&&(d=h.start,d.row==n.row&&Math.abs(d.column-n.column)<2&&(d=h.end))}d=h&&h.cursor||d,d&&(e?h&&t?this.selection.setRange(h):h&&h.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),null!==n&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;this.$blockScrolling+=1;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),this.$blockScrolling-=1,r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),null!==t?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&r.mixin(t,e);var i=this.selection.getRange();null==t.needle&&(e=this.session.getTextRange(i)||this.$search.$options.needle,e||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var s=this.$search.find(this.session);return t.preventScroll?s:s?(this.revealRange(s,n),s):(t.backwards?i.start=i.end:i.end=i.start,void this.selection.setRange(i))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var s=this.on("changeSelection",function(){r=!0}),o=this.renderer.on("beforeRender",function(){r&&(t=n.renderer.container.getBoundingClientRect())}),u=this.renderer.on("afterRender",function(){if(r&&t&&n.isFocused()){var e=n.renderer,s=e.$cursorLayer.$pixelPos,o=e.layerConfig,u=s.top-o.offset;r=s.top>=0&&u+t.top<0?!0:s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight?!1:null,null!=r&&(i.style.top=u+"px",i.style.left=s.left+"px",i.style.height=o.lineHeight+"px",i.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",s),this.renderer.removeEventListener("afterRender",u),this.renderer.removeEventListener("beforeRender",o))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,i.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))}}).call(b.prototype),g.defineOptions(b.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"}),t.Editor=b}),ace.define("ace/undomanager",["require","exports","module"],function(e,t,n){"use strict";var r=function(){this.reset()};(function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],e.merge&&this.hasUndo()&&(this.dirtyCounter--,t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),n=null;return t&&(n=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),n},this.redo=function(e){var t=this.$redoStack.pop(),n=null;return t&&(n=this.$doc.redoChanges(t,e),this.$undoStack.push(t),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter}}).call(r.prototype),t.UndoManager=r}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){i.implement(this,o),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var o=n.text;o=o?s.escapeHTML(o):n.html||"",-1===i.text.indexOf(o)&&i.text.push(o);var u=n.type;"error"==u?i.className=" ace_error":"warning"==u&&" ace_error"!=i.className?i.className=" ace_warning":"info"==u&&!i.className&&(i.className=" ace_info");
}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.data,n=t.range,r=n.start.row,i=n.end.row-r;if(0!==i)if("removeText"==t.action||"removeLines"==t.action)this.$annotations.splice(r,i+1,null);else{var s=new Array(i+1);s.unshift(r,1),this.$annotations.splice.apply(this.$annotations,s)}}},this.update=function(e){for(var t=this.session,n=e.firstRow,i=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1),s=t.getNextFoldLine(n),o=s?s.start.row:1/0,u=this.$showFoldWidgets&&t.foldWidgets,a=t.$breakpoints,f=t.$decorations,l=t.$firstLineNumber,c=0,h=t.gutterRenderer||this.$renderer,p=null,d=-1,v=n;;){if(v>o&&(v=s.end.row+1,s=t.getNextFoldLine(v,s),o=s?s.start.row:1/0),v>i){for(;this.$cells.length>d+1;)p=this.$cells.pop(),this.element.removeChild(p.element);break}p=this.$cells[++d],p||(p={element:null,textNode:null,foldWidget:null},p.element=r.createElement("div"),p.textNode=document.createTextNode(""),p.element.appendChild(p.textNode),this.element.appendChild(p.element),this.$cells[d]=p);var m="ace_gutter-cell ";a[v]&&(m+=a[v]),f[v]&&(m+=f[v]),this.$annotations[v]&&(m+=this.$annotations[v].className),p.element.className!=m&&(p.element.className=m);var g=t.getRowLength(v)*e.lineHeight+"px";if(g!=p.element.style.height&&(p.element.style.height=g),u){var y=u[v];null==y&&(y=u[v]=t.getFoldWidget(v))}if(y){p.foldWidget||(p.foldWidget=r.createElement("span"),p.element.appendChild(p.foldWidget));var m="ace_fold-widget ace_"+y;m+="start"==y&&v==o&&v<s.end.row?" ace_closed":" ace_open",p.foldWidget.className!=m&&(p.foldWidget.className=m);var g=e.lineHeight+"px";p.foldWidget.style.height!=g&&(p.foldWidget.style.height=g)}else p.foldWidget&&(p.element.removeChild(p.foldWidget),p.foldWidget=null);var b=c=h?h.getText(t,v):v+l;b!=p.textNode.data&&(p.textNode.data=b),v++}this.element.style.height=e.minHeight+"px",(this.$fixedWidth||t.$useWrapMode)&&(c=t.getLength()+l);var w=h?h.getWidth(t,c,e):c.toString().length*e.characterWidth,E=this.$padding||this.$computePadding();w+=E.left+E.right,w!==this.gutterWidth&&!isNaN(w)&&(this.gutterWidth=w,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",w))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(u.prototype),t.Gutter=u}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../range").Range,i=e("../lib/dom"),s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(e){this.config=e;var t=[];for(var n in this.markers){var r=this.markers[n];if(r.range){var i=r.range.clipRows(e.firstRow,e.lastRow);if(!i.isEmpty())if(i=i.toScreenRange(this.session),r.renderer){var s=this.$getTop(i.start.row,e),o=this.$padding+i.start.column*e.characterWidth;r.renderer(t,i,o,s,e)}else"fullLine"==r.type?this.drawFullLineMarker(t,i,r.clazz,e):"screenLine"==r.type?this.drawScreenLineMarker(t,i,r.clazz,e):i.isMultiLine()?"text"==r.type?this.drawTextMarker(t,i,r.clazz,e):this.drawMultiLineMarker(t,i,r.clazz,e):this.drawSingleLineMarker(t,i,r.clazz+" ace_start",e)}else r.update(t,this,this.session,e)}this.element.innerHTML=t.join("")}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,i,s){var o=t.start.row,u=new r(o,t.start.column,o,this.session.getScreenLastRowColumn(o));for(this.drawSingleLineMarker(e,u,n+" ace_start",i,1,s),o=t.end.row,u=new r(o,0,o,t.end.column),this.drawSingleLineMarker(e,u,n,i,0,s),o=t.start.row+1;o<t.end.row;o++)u.start.row=o,u.end.row=o,u.end.column=this.session.getScreenLastRowColumn(o),this.drawSingleLineMarker(e,u,n,i,1,s)},this.drawMultiLineMarker=function(e,t,n,r,i){var s=this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=s+t.start.column*r.characterWidth;i=i||"",e.push("<div class='",n," ace_start' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",a,"px;",i,"'></div>"),u=this.$getTop(t.end.row,r);var f=t.end.column*r.characterWidth;e.push("<div class='",n,"' style='","height:",o,"px;","width:",f,"px;","top:",u,"px;","left:",s,"px;",i,"'></div>"),o=(t.end.row-t.start.row-1)*r.lineHeight,0>o||(u=this.$getTop(t.start.row+1,r),e.push("<div class='",n,"' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",s,"px;",i,"'></div>"))},this.drawSingleLineMarker=function(e,t,n,r,i,s){var o=r.lineHeight,u=(t.end.column+(i||0)-t.start.column)*r.characterWidth,a=this.$getTop(t.start.row,r),f=this.$padding+t.start.column*r.characterWidth;e.push("<div class='",n,"' style='","height:",o,"px;","width:",u,"px;","top:",a,"px;","left:",f,"px;",s||"","'></div>")},this.drawFullLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-s),e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")},this.drawScreenLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")}}).call(s.prototype),t.Marker=s}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),u=(e("../lib/useragent"),e("../lib/event_emitter").EventEmitter),a=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){r.implement(this,u),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="→",this.SPACE_CHAR="·",this.$padding=0,this.$updateEolChar=function(){var e="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;return this.EOL_CHAR!=e?(this.EOL_CHAR=e,!0):void 0},this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;e+1>n;n++)this.showInvisibles?t.push("<span class='ace_invisible ace_invisible_tab'>"+this.TAB_CHAR+s.stringRepeat(" ",n-1)+"</span>"):t.push(s.stringRepeat(" ",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r="ace_indent-guide",i="",o="";if(this.showInvisibles){r+=" ace_invisible",i=" ace_invisible_space",o=" ace_invisible_tab";var u=s.stringRepeat(this.SPACE_CHAR,this.tabSize),a=this.TAB_CHAR+s.stringRepeat(" ",this.tabSize-1)}else var u=s.stringRepeat(" ",this.tabSize),a=u;this.$tabStrings[" "]="<span class='"+r+i+"'>"+u+"</span>",this.$tabStrings["	"]="<span class='"+r+o+"'>"+a+"</span>"}},this.updateLines=function(e,t,n){(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)&&this.scrollLines(e),this.config=e;for(var r=Math.max(t,e.firstRow),i=Math.min(n,e.lastRow),s=this.element.childNodes,o=0,u=e.firstRow;r>u;u++){var a=this.session.getFoldLine(u);if(a){if(a.containsRow(r)){r=a.start.row;break}u=a.end.row}o++}for(var u=r,a=this.session.getNextFoldLine(u),f=a?a.start.row:1/0;u>f&&(u=a.end.row+1,a=this.session.getNextFoldLine(u,a),f=a?a.start.row:1/0),!(u>i);){var l=s[o++];if(l){var c=[];this.$renderLine(c,u,!this.$useLineGroups(),u==f?a:!1),l.style.height=e.lineHeight*this.session.getRowLength(u)+"px",l.innerHTML=c.join("")}u++}},this.scrollLines=function(e){var t=this.config;if(this.config=e,!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var r=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);r>0;r--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var r=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);r>0;r--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var i=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)}if(e.lastRow>t.lastRow){var i=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(i)}},this.$renderLinesFragment=function(e,t,n){for(var r=this.element.ownerDocument.createDocumentFragment(),s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:1/0;s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:1/0),!(s>n);){var a=i.createElement("div"),f=[];if(this.$renderLine(f,s,!1,s==u?o:!1),a.innerHTML=f.join(""),this.$useLineGroups())a.className="ace_line_group",r.appendChild(a),a.style.height=e.lineHeight*this.session.getRowLength(s)+"px";else for(;a.firstChild;)r.appendChild(a.firstChild);s++}return r},this.update=function(e){this.config=e;for(var t=[],n=e.firstRow,r=e.lastRow,i=n,s=this.session.getNextFoldLine(i),o=s?s.start.row:1/0;i>o&&(i=s.end.row+1,s=this.session.getNextFoldLine(i,s),o=s?s.start.row:1/0),!(i>r);)this.$useLineGroups()&&t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(i),"px'>"),this.$renderLine(t,i,!1,i==o?s:!1),this.$useLineGroups()&&t.push("</div>"),i++;this.element.innerHTML=t.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){var i=this,o=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,u=function(e,n,r,o,u){if(n)return i.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+s.stringRepeat(i.SPACE_CHAR,e.length)+"</span>":s.stringRepeat(" ",e.length);if("&"==e)return"&#38;";if("<"==e)return"&#60;";if("	"==e){var a=i.session.getScreenTabSize(t+o);return t+=a-1,i.$tabStrings[a]}if("　"==e){var f=i.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",l=i.showInvisibles?i.SPACE_CHAR:"";return t+=1,"<span class='"+f+"' style='width:"+2*i.config.characterWidth+"px'>"+l+"</span>"}return r?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+i.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+2*i.config.characterWidth+"px'>"+e+"</span>")},a=r.replace(o,u);if(this.$textToken[n.type])e.push(a);else{var f="ace_"+n.type.replace(/\./g," ace_"),l="";"fold"==n.type&&(l=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",f,"'",l,">",a,"</span>")}return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);return 0>=r||r>=n?t:" "==t[0]?(r-=r%this.tabSize,e.push(s.stringRepeat(this.$tabStrings[" "],r/this.tabSize)),t.substr(r)):"	"==t[0]?(e.push(s.stringRepeat(this.$tabStrings["	"],r)),t.substr(r)):t},this.$renderWrappedLine=function(e,t,n,r){for(var i=0,s=0,o=n[0],u=0,a=0;a<t.length;a++){var f=t[a],l=f.value;if(0==a&&this.displayIndentGuides){if(i=l.length,l=this.renderIndentGuide(e,l,o),!l)continue;i-=l.length}if(i+l.length<o)u=this.$renderToken(e,u,f,l),i+=l.length;else{for(;i+l.length>=o;)u=this.$renderToken(e,u,f,l.substring(0,o-i)),l=l.substring(o-i),i=o,r||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),s++,u=0,o=n[s]||Number.MAX_VALUE;0!=l.length&&(i+=l.length,u=this.$renderToken(e,u,f,l))}}},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(n=this.$renderToken(e,n,r,i));for(var s=1;s<t.length;s++)r=t[s],i=r.value,n=this.$renderToken(e,n,r,i)},this.$renderLine=function(e,t,n,r){if(!r&&0!=r&&(r=this.session.getFoldLine(t)),r)var i=this.$getFoldLineTokens(t,r);else var i=this.session.getTokens(t);if(n||e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>"),i.length){var s=this.session.getRowSplitData(t);s&&s.length?this.$renderWrappedLine(e,i,s,n):this.$renderSimpleLine(e,i)}this.showInvisibles&&(r&&(t=r.end.row),e.push("<span class='ace_invisible ace_invisible_eol'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function i(e,t,n){for(var i=0,s=0;s+e[i].value.length<t;)if(s+=e[i].value.length,i++,i==e.length)return;if(s!=t){var o=e[i].value.substring(t-s);o.length>n-t&&(o=o.substring(0,n-t)),r.push({type:e[i].type,value:o}),s=t+o.length,i+=1}for(;n>s&&i<e.length;){var o=e[i].value;o.length+s>n?r.push({type:e[i].type,value:o.substring(0,n-s)}):r.push(e[i]),s+=o.length,i+=1}}var n=this.session,r=[],s=n.getTokens(e);return t.walk(function(e,t,o,u,a){null!=e?r.push({type:"fold",value:e}):(a&&(s=n.getTokens(t)),s.length&&i(s,u,o))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),t.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i,r=e("../lib/dom"),s=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),void 0===i&&(i="opacity"in this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateVisibility.bind(this)};(function(){this.$updateVisibility=function(e){for(var t=this.cursors,n=t.length;n--;)t[n].style.visibility=e?"":"hidden"},this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)t[n].style.opacity=e?"":"0"},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&!i&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.$updateCursors=(e?this.$updateOpacity:this.$updateVisibility).bind(this),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=this.$padding+n.column*this.config.characterWidth,i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,r=0;(void 0===t||0===t.length)&&(t=[{cursor:null}]);for(var n=0,i=t.length;i>n;n++){var s=this.getPixelPosition(t[n].cursor,!0);if(!((s.top>e.height+e.offset||s.top<0)&&n>1)){var o=(this.cursors[r++]||this.addCursor()).style;o.left=s.left+"px",o.top=s.top+"px",o.width=e.characterWidth+"px",o.height=e.lineHeight+"px"}}for(;this.cursors.length>r;)this.removeCursor();var u=this.session.getOverwrite();this.$setOverwrite(u),this.$pixelPos=s,this.restartTimer()},this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(s.prototype),t.Cursor=s}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,u=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)};(function(){r.implement(this,o),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e}}).call(u.prototype);var a=function(e,t){u.call(this,e),this.scrollTop=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};r.inherits(a,u),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=e)}}.call(a.prototype);var f=function(e,t){u.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(f,u),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(f.prototype),t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=f,t.VScrollBar=a,t.HScrollBar=f}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){if(this.changes=this.changes|e,!this.pending&&this.changes){this.pending=!0;var t=this;r.nextFrame(function(){t.pending=!1;for(var e;e=t.changes;)t.changes=0,t.onRender(e)},this.window)}}}).call(i.prototype),t.RenderLoop=i}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,a=0,f=t.FontMetrics=function(e,t){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),a||this.$testFractionalRect(),this.$measureNode.innerHTML=s.stringRepeat("X",a),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){r.implement(this,u),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var e=i.createElement("div");this.$setMeasureNodeStyles(e.style),e.style.width="0.2px",document.documentElement.appendChild(e);var t=e.getBoundingClientRect().width;a=t>0&&1>t?50:100,e.parentNode.removeChild(e)},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="-100px",e.visibility="hidden",e.position="fixed",e.whiteSpace="pre",o.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&this.$pollSizeChangesTimer},this.$measureSizes=function(){if(50===a){var e=null;try{e=this.$measureNode.getBoundingClientRect()}catch(t){e={width:0,height:0}}var n={height:e.height,width:e.width/a}}else var n={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/a};return 0===n.width||0===n.height?null:n},this.$measureCharWidth=function(e){this.$main.innerHTML=s.stringRepeat(e,a);var t=this.$main.getBoundingClientRect();return t.width/a},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(f.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./config"),o=e("./lib/useragent"),u=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,f=e("./layer/text").Text,l=e("./layer/cursor").Cursor,c=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,p=e("./renderloop").RenderLoop,d=e("./layer/font_metrics").FontMetrics,v=e("./lib/event_emitter").EventEmitter,m='.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}';
i.importCssString(m,"ace_editor");var g=function(e,t){var n=this;this.container=e||i.createElement("div"),this.$keepTextAreaAtCursor=!o.isOldIE,i.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var r=this.$textLayer=new f(this.content);this.canvas=r.element,this.$markerFront=new a(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new d(this.container,500),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new p(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,v),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var s=this.$updateCachedSize(e,t,n,r);return this.$size.scrollerHeight&&(n||r)?(e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(s|this.$changes,!0):this.$loop.schedule(s|this.$changes),this.resizing&&(this.resizing=0),void 0):this.resizing=0}},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var i=0,s=this.$size,o={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};return r&&(e||s.height!=r)&&(s.height=r,i|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",i|=this.CHANGE_SCROLL),n&&(e||s.width!=n)&&(i|=this.CHANGE_SIZE,s.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",s.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(i|=this.CHANGE_FULL)),s.$dirty=!n||!r,i&&this._signal("resize",o),i},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos,t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,e=this.$cursorLayer.getPixelPosition(n,!0),t*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=t+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var e=this.layerConfig,t=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;t-=e.offset;var r=this.lineHeight;if(!(0>t||t>e.height-r)){var i=this.characterWidth;if(this.$composition){var s=this.textarea.value.replace(/^\x01+/,"");i*=this.session.$getStringScreenWidth(s)[0]+2,r+=2}n-=this.scrollLeft,n>this.$size.scrollerWidth-i&&(n=this.$size.scrollerWidth-i),n+=this.gutterWidth,this.textarea.style.height=r+"px",this.textarea.style.width=i+"px",this.textarea.style.left=Math.min(n,this.$size.scrollerWidth-i)+"px",this.textarea.style.top=Math.min(t,this.$size.height-r)+"px"}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=0|e,i.bottom=0|t,i.right=0|r,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t)return void(this.$changes|=e);if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-n.offset+"px",this.content.style.marginTop=-n.offset+"px",this.content.style.width=n.width+2*this.$padding+"px",this.content.style.height=n.minHeight+"px"}return e&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this._signal("afterRender"),void 0):e&this.CHANGE_SCROLL?(e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),this._signal("afterRender"),void 0):(e&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender"),void 0)},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0),r=e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var i=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,i,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){this.$maxLines&&this.lineHeight>1&&this.$autosize();var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength(),i=r*this.lineHeight,s=this.scrollTop%this.lineHeight,o=t.scrollerHeight+this.lineHeight,u=this.$getLongestLine(),a=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-u-2*this.$padding<0),f=this.$horizScroll!==a;f&&(this.$horizScroll=a,this.scrollBarH.setVisible(a)),!this.$maxLines&&this.$scrollPastEnd&&(i+=(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd);var l=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i<0),c=this.$vScroll!==l;c&&(this.$vScroll=l,this.scrollBarV.setVisible(l)),this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,i-t.scrollerHeight+this.scrollMargin.bottom))),this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,u+2*this.$padding-t.scrollerWidth+this.scrollMargin.right)));var v,m,h=Math.ceil(o/this.lineHeight)-1,p=Math.max(0,Math.round((this.scrollTop-s)/this.lineHeight)),d=p+h,g=this.lineHeight;p=e.screenToDocumentRow(p,0);var y=e.getFoldLine(p);y&&(p=y.start.row),v=e.documentToScreenRow(p,0),m=e.getRowLength(p)*g,d=Math.min(e.screenToDocumentRow(d,0),e.getLength()-1),o=t.scrollerHeight+e.getRowLength(d)*g+m,s=this.scrollTop-v*g;var b=0;return this.layerConfig.width!=u&&(b=this.CHANGE_H_SCROLL),(f||c)&&(b=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),c&&(u=this.$getLongestLine())),this.layerConfig={width:u,padding:this.$padding,firstRow:p,firstRowScreen:v,lastRow:d,lineHeight:g,characterWidth:this.characterWidth,minHeight:o,maxHeight:i,offset:s,gutterOffset:Math.max(0,Math.ceil((s+t.height-t.scrollerHeight)/g)),height:this.$size.scrollerHeight},b},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1||t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var r=this.$cursorLayer.getPixelPosition(e),i=r.left,s=r.top,o=n&&n.top||0,u=n&&n.bottom||0,a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>s?(t&&(s-=t*this.$size.scrollerHeight),0===s&&(s=-this.scrollMargin.top),this.session.setScrollTop(s)):a+this.$size.scrollerHeight-u<s+this.lineHeight&&(t&&(s+=t*this.$size.scrollerHeight),this.session.setScrollTop(s+this.lineHeight-this.$size.scrollerHeight));var f=this.scrollLeft;f>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):f+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):f<=this.$padding&&i-f<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;r>n;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var r=this;if(e!=n){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(e=i[0],e==n))return}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):null!=n?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return 0>t&&this.session.getScrollTop()>=1-this.scrollMargin.top?!0:t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom?!0:0>e&&this.session.getScrollLeft()>=1-this.scrollMargin.left?!0:e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right?!0:void 0},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth,i=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),s=Math.round(r);return{row:i,column:s,side:r-s>0?1:-1}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth),i=(t+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(i,Math.max(r,0))},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+Math.round(r.column*this.characterWidth),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(e){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(i.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(e,t){function o(r){if(n.$themeId!=e)return t&&t();if(r.cssClass){i.importCssString(r.cssText,r.cssClass,n.container.ownerDocument),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var s="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}}var n=this;if(this.$themeId=e,n._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)o(e);else{var r=e||this.$options.theme.initialValue;s.loadModule(["theme",r],o)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,t!==!1)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){this.scroller.style.cursor!=e&&(this.scroller.style.cursor=e)},this.setMouseCursor=function(e){this.scroller.style.cursor=e},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(g.prototype),s.defineOptions(g.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=e?"":"none",void(this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight())):(this.$gutterLineHighlight=i.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",this.$gutter.appendChild(this.$gutterLineHighlight),void 0)},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),t.VirtualRenderer=g}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,o=e("../config"),u=function(t,n,r,i){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),o.get("packaged")||!e.toUrl)i=i||o.moduleUrl(n,"worker");else{var s=this.$normalizePath;i=i||s(e.toUrl("ace/worker/worker.js",null,"_"));var u={};t.forEach(function(t){u[t]=s(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(i)}catch(a){if(!(a instanceof window.DOMException))throw a;var f=this.$workerBlob(i),l=window.URL||window.webkitURL,c=l.createObjectURL(f);this.$worker=new Worker(c),l.revokeObjectURL(c)}this.$worker.postMessage({init:!0,tlns:u,module:n,classname:r}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,s),this.onMessage=function(e){var t=e.data;switch(t.type){case"log":window.console&&console.log&&console.log.apply(console,t.data);break;case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id])}},this.$normalizePath=function(e){return i.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue?this.deltaQueue.push(e.data):(this.deltaQueue=[e.data],setTimeout(this.$sendDeltaQueue,0))},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>20&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))},this.$workerBlob=function(e){var t="importScripts('"+i.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,s=new r;return s.append(t),s.getBlob("application/javascript")}}}).call(u.prototype);var a=function(e,t,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var r=null,i=!1,u=Object.create(s),a=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){a.messageBuffer.push(e),r&&(i?setTimeout(f):f())},this.setEmitSync=function(e){i=e};var f=function(){var e=a.messageBuffer.shift();e.command?r[e.command].apply(r,e.args):e.event&&u._signal(e.event,e.data)};u.postMessage=function(e){a.onMessage({data:e})},u.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},u.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],function(e){for(r=new e[n](u);a.messageBuffer.length;)f()})};a.prototype=u.prototype,t.UIWorkerClient=a,t.WorkerClient=u}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session,i=this.$pos;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(i.row,i.column),this.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){n.removeMarker(e.markerId),e.markerId=n.addMarker(new r(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1),n.on("change",function(i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new r(i.value.row,i.value.column,i.value.row,i.value.column+t.length),t.othersClass,null,!1)})})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){var t=e.data,n=t.range;if(n.start.row===n.end.row&&n.start.row===this.pos.row&&!this.$updating){this.$updating=!0;var i="insertText"===t.action?n.end.column-n.start.column:n.start.column-n.end.column;
if(n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1){var s=n.start.column-this.pos.column;if(this.length+=i,!this.session.$fromUndo){if("insertText"===t.action)for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.insert(a,t.text)}else if("removeText"===t.action)for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.remove(new r(a.row,a.column,a.row,a.column-i))}n.start.column===this.pos.column&&"insertText"===t.action?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-i);for(var e=0;e<this.others.length;e++){var t=this.others[e],r={row:t.row,column:t.column-i};t.row===n.start.row&&n.start.column<t.column&&(r.column+=i),t.setPosition(r.row,r.column)}}.bind(this),0):n.start.column===this.pos.column&&"removeText"===t.action&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];t.row===n.start.row&&n.start.column<t.column&&t.setPosition(t.row,t.column-i)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var o=0;o<this.others.length;o++)this.others[o]._emit("change",{value:this.others[o]})}this.$updating=!1}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1===this.$undoStackDepth)throw Error("Canceling placeholders only supported with undo manager attached to session.");for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;t>n;n++)e.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}).call(o.prototype),t.PlaceHolder=o}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){function s(e,t){return e.row==t.row&&e.column==t.column}function o(e){var t=e.domEvent,n=t.altKey,o=t.shiftKey,u=t.ctrlKey,a=e.getAccelKey(),f=e.getButton();if(u&&i.isMac&&(f=t.button),e.editor.inMultiSelectMode&&2==f)return void e.editor.textInput.onContextMenu(e.domEvent);if(!u&&!n&&!a)return void(0===f&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode());if(0===f){var S,l=e.editor,c=l.selection,h=l.inMultiSelectMode,p=e.getDocumentPosition(),d=c.getCursor(),v=e.inSelection()||c.isEmpty()&&s(p,d),m=e.x,g=e.y,y=function(e){m=e.clientX,g=e.clientY},b=l.session,w=l.renderer.pixelToScreenCoordinates(m,g),E=w;if(l.$mouseHandler.$enableJumpToDef)u&&n||a&&n?S="add":n&&(S="block");else if(a&&!n){if(S="add",!h&&o)return}else n&&(S="block");if(S&&i.isMac&&t.ctrlKey&&l.$mouseHandler.cancelContextMenu(),"add"==S){if(!h&&v)return;if(!h){var x=c.toOrientedRange();l.addSelectionMarker(x)}var T=c.rangeList.rangeAtPoint(p);l.$blockScrolling++,l.inVirtualSelectionMode=!0,o&&(T=null,x=c.ranges[0],l.removeSelectionMarker(x)),l.once("mouseup",function(){var e=c.toOrientedRange();T&&e.isEmpty()&&s(T.cursor,e.cursor)?c.substractPoint(e.cursor):(o?c.substractPoint(x.cursor):x&&(l.removeSelectionMarker(x),c.addRange(x)),c.addRange(e)),l.$blockScrolling--,l.inVirtualSelectionMode=!1})}else if("block"==S){e.stop(),l.inVirtualSelectionMode=!0;var N,C=[],k=function(){var e=l.renderer.pixelToScreenCoordinates(m,g),t=b.screenToDocumentPosition(e.row,e.column);s(E,e)&&s(t,c.lead)||(E=e,l.selection.moveToPosition(t),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(C),C=c.rectangularRangeBlock(E,w),l.$mouseHandler.$clickSelection&&1==C.length&&C[0].isEmpty()&&(C[0]=l.$mouseHandler.$clickSelection.clone()),C.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers())};h&&!a?c.toSingleRange():!h&&a&&(N=c.toOrientedRange(),l.addSelectionMarker(N)),o?w=b.documentToScreenPosition(c.lead):c.moveToPosition(p),E={row:-1,column:-1};var L=function(e){clearInterval(O),l.removeSelectionMarkers(C),C.length||(C=[c.toOrientedRange()]),l.$blockScrolling++,N&&(l.removeSelectionMarker(N),c.toSingleRange(N));for(var t=0;t<C.length;t++)c.addRange(C[t]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null,l.$blockScrolling--},A=k;r.capture(l.container,y,L);var O=setInterval(function(){A()},20);return e.preventDefault()}}}var r=e("../lib/event"),i=e("../lib/useragent");t.onMouseDown=o}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}},{name:"findAll",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},readonly:!0}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function h(e,t,n){return c.$options.wrap=!0,c.$options.needle=t,c.$options.backwards=-1==n,c.find(e)}function v(e,t){return e.row==t.row&&e.column==t.column}function m(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",o),e.commands.addCommands(f.defaultCommands),g(e))}function g(e){function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}var t=e.textInput.getElement(),n=!1;u.addListener(t,"keydown",function(t){18!=t.keyCode||t.ctrlKey||t.shiftKey||t.metaKey?n&&r():n||(e.renderer.setMouseCursor("crosshair"),n=!0)}),u.addListener(t,"keyup",r),u.addListener(t,"blur",r)}var r=e("./range_list").RangeList,i=e("./range").Range,s=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),a=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var l=e("./search").Search,c=new l,p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);return t?(this.$onRemoveRange(t),t[0]):void 0},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange(),r=this.isBackwards(),s=n.start.row,o=n.end.row;if(s==o){if(r)var u=n.end,a=n.start;else var u=n.start,a=n.end;return this.addRange(i.fromPoints(a,a)),void this.addRange(i.fromPoints(u,u))}var f=[],l=this.getLineRange(s,!0);l.start.column=n.start.column,f.push(l);for(var c=s+1;o>c;c++)f.push(this.getLineRange(c,!0));l=this.getLineRange(o,!0),l.end.column=n.end.column,f.push(l),f.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.selectionLead),s=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(r,s);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column;else var o=t.column,u=e.column;var a=e.row<t.row;if(a)var f=e.row,l=t.row;else var f=t.row,l=e.row;0>o&&(o=0),0>f&&(f=0),f==l&&(n=!0);for(var c=f;l>=c;c++){var h=i.fromPoints(this.session.screenToDocumentPosition(c,o),this.session.screenToDocumentPosition(c,u));if(h.isEmpty()){if(p&&v(h.end,p))break;var p=h.end}h.cursor=s?h.start:h.end,r.push(h)}if(a&&r.reverse(),!n){for(var d=r.length-1;r[d].isEmpty()&&d>0;)d--;if(d>0)for(var m=0;r[m].isEmpty();)m++;for(var g=d;g>=m;g--)r[g].isEmpty()&&r.splice(g,1)}return r}}.call(s.prototype);var d=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var r=e[n];if(r.marker){this.session.removeMarker(r.marker);var i=t.indexOf(r);-1!=i&&t.splice(i,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?r=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?r=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});else{var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return r}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var l,r=n&&n.keepOrder,i=1==n||n&&n.$byLines,o=this.session,u=this.selection,a=u.rangeList,f=(r?u:a).ranges;if(!f.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var c=u._eventRegistry;u._eventRegistry={};var h=new s(o);this.inVirtualSelectionMode=!0;for(var p=f.length;p--;){if(i)for(;p>0&&f[p].start.row==f[p-1].end.row;)p--;h.fromOrientedRange(f[p]),h.index=p,this.selection=o.selection=h;var d=e.exec?e.exec(this,t||{}):e(this,t||{});!l&&void 0!==d&&(l=d),h.toOrientedRange(f[p])}h.detach(),this.selection=o.selection=u,this.inVirtualSelectionMode=!1,u._eventRegistry=c,u.mergeOverlappingRanges();var v=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),v&&v.from==v.to&&this.renderer.animateScrolling(v.from),l}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();e=n.join(i),e.length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var r=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;v(r,t)||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.onPaste=function(e){if(!this.$readOnly){var t={text:e};if(this._signal("paste",t),e=t.text,!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(e);var n=e.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges;if(n.length>r.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,e);for(var i=r.length;i--;){var s=r[i];s.isEmpty()||this.session.remove(s),this.session.insert(s.start,n[i])}}},this.findAll=function(e,t,n){if(t=t||{},t.needle=e||t.needle,void 0==t.needle){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(r)}this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;this.$blockScrolling+=1;var s=this.multiSelect;n||s.toSingleRange(i[0]);for(var o=i.length;o--;)s.addRange(i[o],!0);return r&&s.rangeList.rangeAtPoint(r.start)&&s.addRange(r,!0),this.$blockScrolling-=1,i.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(n.isEmpty())var a=o;else var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);if(r){var f=i.fromPoints(o,a);f.cursor=f.start}else{var f=i.fromPoints(a,o);f.cursor=f.end}if(f.desiredColumn=s.column,this.selection.inMultiSelectMode){if(t)var l=n.cursor}else this.selection.addRange(n);this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,r=n.ranges,i=r.length;i--;){var s=r[i];if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();for(var u=[],i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}0>e?u.unshift(u.pop()):u.push(u.shift());for(var i=r.length;i--;){var s=r[i],o=s.clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}},this.selectMore=function(e,t,n){var r=this.session,i=r.multiSelect,s=i.toOrientedRange();if(!s.isEmpty()||(s=r.getWordRange(s.start.row,s.start.column),s.cursor=-1==e?s.start:s.end,this.multiSelect.addRange(s),!n)){var o=r.getTextRange(s),u=h(r,o,e);u&&(u.cursor=-1==e?u.start:u.end,this.$blockScrolling+=1,this.session.unfold(u),this.multiSelect.addRange(u),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(s.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,r=-1,s=n.filter(function(e){return e.cursor.row==r?!0:void(r=e.cursor.row)});if(n.length&&s.length!=n.length-1){s.forEach(function(e){t.substractPoint(e.cursor)});var d=0,v=1/0,m=n.map(function(t){var n=t.cursor,r=e.getLine(n.row),i=r.substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>d&&(d=n.column),v>i&&(v=i),i});n.forEach(function(t,n){var r=t.cursor,s=d-r.column,o=m[n]-v;s>o?e.insert(r,a.stringRepeat(" ",s-o)):e.remove(new i(r.row,r.column,r.row,r.column-s+o)),t.start.column=t.end.column=d,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var o=this.selection.getRange(),u=o.start.row,f=o.end.row,l=u==f;if(l){var h,c=this.session.getLength();do h=this.session.getLine(f);while(/[=:]/.test(h)&&++f<c);do h=this.session.getLine(u);while(/[=:]/.test(h)&&--u>0);0>u&&(u=0),f>=c&&(f=c-1)}var p=this.session.doc.removeLines(u,f);p=this.$reAlignText(p,l),this.session.doc.insert({row:u,column:0},p.join("\n")+"\n"),l||(o.start.column=0,o.end.column=p[p.length-1].length),this.selection.setRange(o)}},this.$reAlignText=function(e,t){function u(e){return a.stringRepeat(" ",e)}function f(e){return e[2]?u(i)+e[2]+u(s-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function l(e){return e[2]?u(i+s-e[2].length)+e[2]+u(o," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function c(e){return e[2]?u(i)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var i,s,o,n=!0,r=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==i?(i=t[1].length,s=t[2].length,o=t[3].length,t):(i+s+o!=t[1].length+t[2].length+t[3].length&&(r=!1),i!=t[1].length&&(n=!1),i>t[1].length&&(i=t[1].length),s<t[2].length&&(s=t[2].length),o>t[3].length&&(o=t[3].length),t):[e]}).map(t?f:n?r?l:f:c)}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=m,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){m(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",o)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",o))},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\S/,s=e.getLine(t),o=s.search(i);if(-1!=o){for(var u=n||s.length,a=e.getLength(),f=t,l=t;++t<a;){var c=e.getLine(t).search(i);if(-1!=c){if(o>=c)break;l=t}}if(l>f){var h=e.getLine(l).length;return new r(f,u,l,h)}}},this.openingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i+1},u=e.$findClosingBracket(t,o,s);if(u){var a=e.foldWidgets[u.row];return null==a&&(a=e.getFoldWidget(u.row)),"start"==a&&u.row>o.row&&(u.row--,u.column=e.getLine(u.row).length),r.fromPoints(o,u)}},this.closingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i},u=e.$findOpeningBracket(t,o);if(u)return u.column++,o.column--,r.fromPoints(u,o)}}).call(i.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function o(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.detach=this.detach.bind(this),this.session.on("change",this.updateOnChange)}var i=(e("./lib/oop"),e("./lib/dom"));e("./range").Range;(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets?this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&(e+=t.rowCount)}),e},this.attach=function(e){e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,this.editor.on("changeSession",this.detach),e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets))},this.detach=function(e){if(!e||e.session!=this.session){var t=this.editor;if(t){t.off("changeSession",this.detach),this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})}}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.data,r=n.range,i=r.start.row,s=r.end.row-i;if(0!==s)if("removeText"==n.action||"removeLines"==n.action){var o=t.splice(i+1,s);o.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var u=new Array(s);u.unshift(i,0),t.splice.apply(t,u),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach(function(e,n){e&&(t=!1,e.row=n)}),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength())),this.session.lineWidgets[e.row]=e;var t=this.editor.renderer;return e.html&&!e.el&&(e.el=i.createElement("div"),e.el.innerHTML=e.html),e.el&&(i.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight||(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}this.session.lineWidgets&&(this.session.lineWidgets[e.row]=void 0),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(n&&n.length){for(var i=1/0,s=0;s<n.length;s++){var o=n[s];o._inDocument||(o._inDocument=!0,t.container.appendChild(o.el)),o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var u=o.h/r.lineHeight;o.coverLine&&(u-=this.session.getRowLineCount(o.row),0>u&&(u=0)),o.rowCount!=u&&(o.rowCount=u,o.row<i&&(i=o.row))}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(r){for(var i=Math.min(this.firstRow,n.firstRow),s=Math.max(this.lastRow,n.lastRow,r.length);i>0&&!r[i];)i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var o=i;s>=o;o++){var u=r[o];if(u&&u.el){u._inDocument||(u._inDocument=!0,t.container.appendChild(u.el));var a=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;u.coverLine||(a+=n.lineHeight*this.session.getRowLineCount(u.row)),u.el.style.top=a-n.offset+"px";var f=u.coverGutter?0:t.gutterWidth;u.fixedWidth||(f-=t.scrollLeft),u.el.style.left=f+"px",u.fixedWidth?u.el.style.right=t.scrollBar.getWidth()+"px":u.el.style.right=""}}}}}).call(o.prototype),t.LineWidgets=o}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function o(e,t,n){for(var r=0,i=e.length-1;i>=r;){var s=r+i>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(0>o))return s;i=s-1}}return-(r+1)}function u(e,t,n){var r=e.getAnnotations().sort(s.comparePoints);if(r.length){var i=o(r,{row:t,column:-1},s.comparePoints);0>i&&(i=-i-1),i>=r.length-1?i=n>0?0:r.length-1:0===i&&0>n&&(i=r.length-1);var u=r[i];if(u&&n){if(u.row===t){do u=r[i+=n];while(u&&u.row===t);if(!u)return r.slice()}var a=[];t=u.row;do a[0>n?"unshift":"push"](u),u=r[i+=n];while(u&&u.row==t);return a.length&&a}}}var r=e("../line_widgets").LineWidgets,i=e("../lib/dom"),s=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),o=s.row,a=n.lineWidgets&&n.lineWidgets[o];a?a.destroy():o-=t;var l,f=u(n,o,t);if(f){var c=f[0];s.column=(c.pos&&"number"!=typeof c.column?c.pos.sc:c.column)||0,s.row=c.row,l=e.renderer.$gutterLayer.$annotations[s.row]}else{if(a)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var h={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div")},p=h.el.appendChild(i.createElement("div")),d=h.el.appendChild(i.createElement("div"));d.className="error_widget_arrow "+l.className;var v=e.renderer.$cursorLayer.getPixelPosition(s).left;d.style.left=v+e.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",p.className="error_widget "+l.className,p.innerHTML=l.text.join("<br>"),p.appendChild(i.createElement("div"));var m=function(e,t,n){return 0!==t||"esc"!==n&&"return"!==n?void 0:(h.destroy(),{command:"null"
})};h.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(h),e.off("changeSelection",h.destroy),e.off("changeSession",h.destroy),e.off("mouseup",h.destroy),e.off("change",h.destroy))},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",h.destroy),e.on("changeSession",h.destroy),e.on("mouseup",h.destroy),e.on("change",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/dom"),i=e("./lib/event"),s=e("./editor").Editor,o=e("./edit_session").EditSession,u=e("./undomanager").UndoManager,a=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.edit=function(e){if("string"==typeof e){var n=e;if(e=document.getElementById(n),!e)throw new Error("ace.edit can't find div #"+n)}if(e&&e.env&&e.env.editor instanceof s)return e.env.editor;var o="";if(e&&/input|textarea/i.test(e.tagName)){var u=e;o=u.value,e=r.createElement("pre"),u.parentNode.replaceChild(e,u)}else o=r.getInnerText(e),e.innerHTML="";var f=t.createEditSession(o),l=new s(new a(e));l.setSession(f);var c={document:f,editor:l,onResize:l.resize.bind(l,null)};return u&&(c.textarea=u),i.addListener(window,"resize",c.onResize),l.on("destroy",function(){i.removeListener(window,"resize",c.onResize),c.editor.container.env=null}),l.container.env=l.env=c,l},t.createEditSession=function(e,t){var n=new o(e,t);return n.setUndoManager(new u),n},t.EditSession=o,t.UndoManager=u}),function(){ace.require(["ace/ace"],function(a){a&&a.config.init(!0),window.ace||(window.ace=a);for(var key in a)a.hasOwnProperty(key)&&(window.ace[key]=a[key])})}(),define("ace",function(global){return function(){var ret;return ret||global.ace}}(this)),ace.define("ace/mode/log_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(require,exports,module){"use strict";var oop=require("../lib/oop"),TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,LogHighlightRules=function(){var ws="(\\s+)",weekday="((?:Tues|Thur|Thurs|Sun|Mon|Tue|Wed|Thu|Fri|Sat))",month="((?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec))",day="((?:(?:[0-2]?\\d{1})|(?:[3][01]{1})))(?![\\d])",timestamp="((?:(?:[0-1][0-9])|(?:[2][0-3])|(?:[0-9])):(?:[0-5][0-9])(?::[0-5][0-9])?)",year="((?:(?:[1]{1}\\d{1}\\d{1}\\d{1})|(?:[2]{1}\\d{3})))(?![\\d])";this.$rules={start:[{token:"comment.bold",regex:"^(\\[)(.*?)(\\])"},{token:"keyword.bold",regex:ws+weekday+ws+month+ws+day+ws+timestamp+ws+year+ws},{token:"variable.bold",regex:"((?:WARNING)(.*?))$"},{token:"invalid.illegal.bold",regex:"((?:ERROR|TLS Error|TLS_ERROR|VERIFY ERROR|OSError)(.*?))$"}]}};oop.inherits(LogHighlightRules,TextHighlightRules),exports.LogHighlightRules=LogHighlightRules}),ace.define("ace/mode/log",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/text_highlight_rules","ace/mode/log_highlight_rules"],function(require,exports,module){"use strict";var oop=require("../lib/oop"),TextMode=require("./text").Mode,TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,LogHighlightRules=require("./log_highlight_rules").LogHighlightRules,Mode=function(suppressHighlighting){suppressHighlighting?this.HighlightRules=TextHighlightRules:this.HighlightRules=LogHighlightRules};oop.inherits(Mode,TextMode),function(){this.$id="ace/mode/log"}.call(Mode.prototype),exports.Mode=Mode}),define("aceModeLog",["ace"],function(){}),ace.define("ace/mode/sh_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,s=t.reservedKeywords="!|{|}|case|do|done|elif|else|esac|fi|for|if|in|then|until|while|&|;|export|local|read|typeset|unset|elif|select|set",o=t.languageConstructs="[|]|alias|bg|bind|break|builtin|cd|command|compgen|complete|continue|dirs|disown|echo|enable|eval|exec|exit|fc|fg|getopts|hash|help|history|jobs|kill|let|logout|popd|printf|pushd|pwd|return|set|shift|shopt|source|suspend|test|times|trap|type|ulimit|umask|unalias|wait",u=function(){var e=this.createKeywordMapper({keyword:s,"support.function.builtin":o,"invalid.deprecated":"debugger"},"identifier"),t="(?:(?:[1-9]\\d*)|(?:0))",n="(?:\\.\\d+)",r="(?:\\d+)",i="(?:(?:"+r+"?"+n+")|(?:"+r+"\\.))",u="(?:(?:"+i+"|"+r+"))",a="(?:"+u+"|"+i+")",f="(?:&"+r+")",l="[a-zA-Z_][a-zA-Z0-9_]*",c="(?:(?:\\$"+l+")|(?:"+l+"=))",h="(?:\\$(?:SHLVL|\\$|\\!|\\?))",p="(?:"+l+"\\s*\\(\\))";this.$rules={start:[{token:"constant",regex:/\\./},{token:["text","comment"],regex:/(^|\s)(#.*)$/},{token:"string",regex:'"',push:[{token:"constant.language.escape",regex:/\\(?:[$abeEfnrtv\\'"]|x[a-fA-F\d]{1,2}|u[a-fA-F\d]{4}([a-fA-F\d]{4})?|c.|\d{1,3})/},{token:"constant",regex:/\$\w+/},{token:"string",regex:'"',next:"pop"},{defaultToken:"string"}]},{regex:"<<<",token:"keyword.operator"},{stateName:"heredoc",regex:"(<<)(\\s*)(['\"`]?)([\\w\\-]+)(['\"`]?)",onMatch:function(e,t,n){var r="-"==e[2]?"indentedHeredoc":"heredoc",i=e.split(this.splitRegex);return n.push(r,i[4]),[{type:"constant",value:i[1]},{type:"text",value:i[2]},{type:"string",value:i[3]},{type:"support.class",value:i[4]},{type:"string",value:i[5]}]},rules:{heredoc:[{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^	+"},{onMatch:function(e,t,n){return e===n[1]?(n.shift(),n.shift(),this.next=n[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(e,t){return"heredoc"===t[0]||"indentedHeredoc"===t[0]?t[0]:e}},{token:"variable.language",regex:h},{token:"variable",regex:c},{token:"support.function",regex:p},{token:"support.function",regex:f},{token:"string",start:"'",end:"'"},{token:"constant.numeric",regex:a},{token:"constant.numeric",regex:t+"\\b"},{token:e,regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|~|<|>|<=|=>|=|!="},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"}]},this.normalizeRules()};r.inherits(u,i),t.ShHighlightRules=u}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var r=e("../../lib/oop"),i=e("../../range").Range,s=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,s),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.getFoldWidgetRange=function(e,t,n,r){var i=e.getLine(n),s=i.match(this.foldingStartMarker);if(s){var o=s.index;if(s[1])return this.openingBracketBlock(e,s[1],n,o);var u=e.getCommentFoldRange(n,o+s[0].length,1);return u&&!u.isMultiLine()&&(r?u=this.getSectionRange(e,n):"all"!=t&&(u=null)),u}if("markbegin"!==t){var s=i.match(this.foldingStopMarker);if(s){var o=s.index+s[0].length;return s[1]?this.closingBracketBlock(e,s[1],n,o):e.getCommentFoldRange(n,o,-1)}}},this.getSectionRange=function(e,t){var n=e.getLine(t),r=n.search(/\S/),s=t,o=n.length;t+=1;for(var u=t,a=e.getLength();++t<a;){n=e.getLine(t);var f=n.search(/\S/);if(-1!==f){if(r>f)break;var l=this.getFoldWidgetRange(e,"all",t);if(l){if(l.start.row<=s)break;if(l.isMultiLine())t=l.end.row;else if(r==f)break}u=t}}return new i(s,o,u,e.getLine(u).length)}}.call(o.prototype)}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var f,r=e("../../lib/oop"),i=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,o=e("../../lib/lang"),u=["text","paren.rparen","punctuation.operator"],a=["text","paren.rparen","punctuation.operator","comment"],l={},c=function(e){var t=-1;return e.multiSelect&&(t=e.selection.id,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount})),l[t]?f=l[t]:void(f=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""})},h=function(){this.add("braces","insertion",function(e,t,n,r,i){var s=n.getCursorPosition(),u=r.doc.getLine(s.row);if("{"==i){c(n);var a=n.getSelectionRange(),l=r.doc.getTextRange(a);if(""!==l&&"{"!==l&&n.getWrapBehavioursEnabled())return{text:"{"+l+"}",selection:!1};if(h.isSaneInsertion(n,r))return/[\]\}\)]/.test(u[s.column])||n.inMultiSelectMode?(h.recordAutoInsert(n,r,"}"),{text:"{}",selection:[1,1]}):(h.recordMaybeInsert(n,r,"{"),{text:"{",selection:[1,1]})}else if("}"==i){c(n);var p=u.substring(s.column,s.column+1);if("}"==p){var d=r.$findOpeningBracket("}",{column:s.column+1,row:s.row});if(null!==d&&h.isAutoInsertedClosing(s,u,i))return h.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==i||"\r\n"==i){c(n);var v="";h.isMaybeInsertedClosing(s,u)&&(v=o.stringRepeat("}",f.maybeInsertedBrackets),h.clearMaybeInsertedClosing());var p=u.substring(s.column,s.column+1);if("}"===p){var m=r.findMatchingBracket({row:s.row,column:s.column+1},"}");if(!m)return null;var g=this.$getIndent(r.getLine(m.row))}else{if(!v)return void h.clearMaybeInsertedClosing();var g=this.$getIndent(u)}var y=g+r.getTabString();return{text:"\n"+y+"\n"+g+v,selection:[1,y.length,1,y.length]}}h.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&"{"==s){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.end.column,i.end.column+1);if("}"==u)return i.end.column++,i;f.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,n,r,i){if("("==i){c(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(""!==o&&n.getWrapBehavioursEnabled())return{text:"("+o+")",selection:!1};if(h.isSaneInsertion(n,r))return h.recordAutoInsert(n,r,")"),{text:"()",selection:[1,1]}}else if(")"==i){c(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(")"==f){var l=r.$findOpeningBracket(")",{column:u.column+1,row:u.row});if(null!==l&&h.isAutoInsertedClosing(u,a,i))return h.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&"("==s){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(")"==u)return i.end.column++,i}}),this.add("brackets","insertion",function(e,t,n,r,i){if("["==i){c(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(""!==o&&n.getWrapBehavioursEnabled())return{text:"["+o+"]",selection:!1};if(h.isSaneInsertion(n,r))return h.recordAutoInsert(n,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==i){c(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if("]"==f){var l=r.$findOpeningBracket("]",{column:u.column+1,row:u.row});if(null!==l&&h.isAutoInsertedClosing(u,a,i))return h.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&"["==s){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if("]"==u)return i.end.column++,i}}),this.add("string_dquotes","insertion",function(e,t,n,r,i){if('"'==i||"'"==i){c(n);var s=i,o=n.getSelectionRange(),u=r.doc.getTextRange(o);if(""!==u&&"'"!==u&&'"'!=u&&n.getWrapBehavioursEnabled())return{text:s+u+s,selection:!1};var a=n.getCursorPosition(),f=r.doc.getLine(a.row),l=f.substring(a.column-1,a.column);if("\\"==l)return null;for(var v,p=r.getTokens(o.start.row),d=0,m=-1,g=0;g<p.length&&(v=p[g],"string"==v.type?m=-1:0>m&&(m=v.value.indexOf(s)),!(v.value.length+d>o.start.column));g++)d+=p[g].value.length;if(!v||0>m&&"comment"!==v.type&&("string"!==v.type||o.start.column!==v.value.length+d-1&&v.value.lastIndexOf(s)===v.value.length-1)){if(!h.isSaneInsertion(n,r))return;return{text:s+s,selection:[1,1]}}if(v&&"string"===v.type){var y=f.substring(a.column,a.column+1);if(y==s)return{text:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&('"'==s||"'"==s)){c(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u==s)return i.end.column++,i}})};h.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new s(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",u)){var i=new s(t,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",u))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",a)},h.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},h.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,i,f.autoInsertedLineEnd[0])||(f.autoInsertedBrackets=0),f.autoInsertedRow=r.row,f.autoInsertedLineEnd=n+i.substr(r.column),f.autoInsertedBrackets++},h.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,i)||(f.maybeInsertedBrackets=0),f.maybeInsertedRow=r.row,f.maybeInsertedLineStart=i.substr(0,r.column)+n,f.maybeInsertedLineEnd=i.substr(r.column),f.maybeInsertedBrackets++},h.isAutoInsertedClosing=function(e,t,n){return f.autoInsertedBrackets>0&&e.row===f.autoInsertedRow&&n===f.autoInsertedLineEnd[0]&&t.substr(e.column)===f.autoInsertedLineEnd},h.isMaybeInsertedClosing=function(e,t){return f.maybeInsertedBrackets>0&&e.row===f.maybeInsertedRow&&t.substr(e.column)===f.maybeInsertedLineEnd&&t.substr(0,e.column)==f.maybeInsertedLineStart},h.popAutoInsertedClosing=function(){f.autoInsertedLineEnd=f.autoInsertedLineEnd.substr(1),f.autoInsertedBrackets--},h.clearMaybeInsertedClosing=function(){f&&(f.maybeInsertedBrackets=0,f.maybeInsertedRow=-1)},r.inherits(h,i),t.CstyleBehaviour=h}),ace.define("ace/mode/sh",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sh_highlight_rules","ace/range","ace/mode/folding/cstyle","ace/mode/behaviour/cstyle"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text").Mode,s=e("./sh_highlight_rules").ShHighlightRules,o=e("../range").Range,u=e("./folding/cstyle").FoldMode,a=e("./behaviour/cstyle").CstyleBehaviour,f=function(){this.HighlightRules=s,this.foldingRules=new u,this.$behaviour=new a};r.inherits(f,i),function(){this.lineCommentStart="#",this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e),s=i.tokens;if(s.length&&"comment"==s[s.length-1].type)return r;if("start"==e){var o=t.match(/^.*[\{\(\[\:]\s*$/);o&&(r+=n)}return r};var e={pass:1,"return":1,raise:1,"break":1,"continue":1};this.checkOutdent=function(t,n,r){if("\r\n"!==r&&"\r"!==r&&"\n"!==r)return!1;var i=this.getTokenizer().getLineTokens(n.trim(),t).tokens;if(!i)return!1;do var s=i.pop();while(s&&("comment"==s.type||"text"==s.type&&s.value.match(/^\s+$/)));return s?"keyword"==s.type&&e[s.value]:!1},this.autoOutdent=function(e,t,n){n+=1;var r=this.$getIndent(t.getLine(n)),i=t.getTabString();r.slice(-i.length)==i&&t.remove(new o(n,r.length-i.length,n,r.length))},this.$id="ace/mode/sh"}.call(f.prototype),t.Mode=f}),define("aceModeSh",["ace"],function(){}),define("aceModeText",["ace"],function(){}),ace.define("ace/theme/pritunl",["require","exports","module","ace/lib/dom"],function(require,exports,module){exports.isDark=!1,exports.cssClass="ace-pritunl",exports.cssText='.ace-pritunl .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-pritunl .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-pritunl {background-color: #FFFFFF;color: black;}.ace-pritunl .ace_cursor {color: black;}.ace-pritunl .ace_invisible {color: rgb(191, 191, 191);}.ace-pritunl .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-pritunl .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-pritunl .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-pritunl .ace_invalid {/* MODIFIED */color: rgb(197, 0, 0);}.ace-pritunl .ace_fold {}.ace-pritunl .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-pritunl .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-pritunl .ace_support.ace_type,.ace-pritunl .ace_support.ace_class.ace-pritunl .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-pritunl .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-pritunl .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-pritunl .ace_comment {/* MODIFIED */color: #0059a6;}.ace-pritunl .ace_comment.ace_doc {color: #236e24;}.ace-pritunl .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-pritunl .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-pritunl .ace_variable {/* MODIFIED */color: rgb(202, 152, 4);}.ace-pritunl .ace_xml-pe {color: rgb(104, 104, 91);}.ace-pritunl .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-pritunl .ace_heading {color: rgb(12, 7, 255);}.ace-pritunl .ace_list {color:rgb(185, 6, 144);}.ace-pritunl .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-pritunl .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-pritunl .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-pritunl .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-pritunl .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-pritunl .ace_gutter-active-line {background-color : #dcdcdc;}.ace-pritunl .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-pritunl .ace_storage,.ace-pritunl .ace_keyword,.ace-pritunl .ace_meta.ace_tag {/* MODIFIED */color: rgb(34, 107, 46);}.ace-pritunl .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-pritunl .ace_string {color: #1A1AA6;}.ace-pritunl .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-pritunl .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}.dark .ace-pritunl .ace_gutter {background: #25282c;color: #C5C8C6}.dark .ace-pritunl .ace_print-margin {width: 1px;background: #25282c}.dark .ace-pritunl {background-color: #1D1F21;color: #C5C8C6}.dark .ace-pritunl .ace_cursor {color: #AEAFAD}.dark .ace-pritunl .ace_marker-layer .ace_selection {background: #373B41}.dark .ace-pritunl.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #1D1F21;border-radius: 2px}.dark .ace-pritunl .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.dark .ace-pritunl .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #4B4E55}.dark .ace-pritunl .ace_marker-layer .ace_active-line {background: #282A2E}.dark .ace-pritunl .ace_gutter-active-line {background-color: #282A2E}.dark .ace-pritunl .ace_marker-layer .ace_selected-word {border: 1px solid #373B41}.dark .ace-pritunl .ace_invisible {color: #4B4E55}.dark .ace-pritunl .ace_keyword,.dark .ace-pritunl .ace_meta,.dark .ace-pritunl .ace_storage,.dark .ace-pritunl .ace_storage.ace_type,.dark .ace-pritunl .ace_support.ace_type {/* MODIFIED */color: rgb(34, 107, 46);}.dark .ace-pritunl .ace_keyword.ace_operator {color: #8ABEB7}.dark .ace-pritunl .ace_constant.ace_character,.dark .ace-pritunl .ace_constant.ace_language,.dark .ace-pritunl .ace_constant.ace_numeric,.dark .ace-pritunl .ace_keyword.ace_other.ace_unit,.dark .ace-pritunl .ace_support.ace_constant,.dark .ace-pritunl .ace_variable.ace_parameter {color: #DE935F}.dark .ace-pritunl .ace_constant.ace_other {color: #CED1CF}.dark .ace-pritunl .ace_invalid {/* MODIFIED */color: rgb(197, 0, 0);}.dark .ace-pritunl .ace_invalid.ace_deprecated {color: #CED2CF;background-color: #B798BF}.dark .ace-pritunl .ace_fold {background-color: #81A2BE;border-color: #C5C8C6}.dark .ace-pritunl .ace_entity.ace_name.ace_function,.dark .ace-pritunl .ace_support.ace_function,.dark .ace-pritunl .ace_variable {color: #81A2BE}.dark .ace-pritunl .ace_support.ace_class,.dark .ace-pritunl .ace_support.ace_type {color: #F0C674}.dark .ace-pritunl .ace_heading,.dark .ace-pritunl .ace_markup.ace_heading,.dark .ace-pritunl .ace_string {color: #B5BD68}.dark .ace-pritunl .ace_entity.ace_name.ace_tag,.dark .ace-pritunl .ace_entity.ace_other.ace_attribute-name,.dark .ace-pritunl .ace_meta.ace_tag,.dark .ace-pritunl .ace_string.ace_regexp,.dark .ace-pritunl .ace_variable {/* MODIFIED */color: rgb(202, 152, 4);}.dark .ace-pritunl .ace_comment {/* MODIFIED */color: #0059a6;}.dark .ace-pritunl .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) right repeat-y}';var dom=require("../lib/dom");dom.importCssString(exports.cssText,exports.cssClass)}),define("aceThemePritunl",["ace"],function(){}),define("views/text",["jquery","underscore","backbone","ace","aceModeLog","aceModeSh","aceModeText","aceThemePritunl"],function($,_,Backbone,Ace,AceModeLog,AceModeSh,AceModeText,AceThemePritunl){"use strict";var TextView=Backbone.View.extend({className:"text-viewer",initialize:function(){this.lastLine=null},render:function(){return this.editor=Ace.edit(this.el),this.editor.setTheme("ace/theme/pritunl"),this.editor.setFontSize(10),this.editor.setReadOnly(!0),this.editor.setShowPrintMargin(!1),this.editor.setHighlightActiveLine(!1),this.editor.setHighlightGutterLine(!1),this.editor.setShowFoldWidgets(!1),this.editor.getSession().setMode("ace/mode/log"),this.update(),this},update:function(){},scrollBottom:function(count){if(void 0===count)count=0;else if(count>=10)return;count+=1;var $scollbar=this.$(".ace_scrollbar");$scollbar.scrollTop($scollbar[0].scrollHeight),setTimeout(function(){this.scrollBottom(count)}.bind(this),25)},setData:function(data){var i,lines,foundLastLine,doc=this.editor.getSession().getDocument();if(this.lastLine){for(lines=[],i=data.length-1;i>=0;i--){if(data[i]===this.lastLine){foundLastLine=!0;break}lines.push(data[i])}foundLastLine?lines&&doc.insertLines(doc.getLength()-1,lines.reverse()):this.lastLine=null}if(!this.lastLine){for(lines="",i=0;i<data.length;i++)lines+=data[i]+"\n";this.editor.setValue(lines,1),this.scrollBottom()}lines&&(this.lastLine=data[data.length-1])}});return TextView}),define("views/logs",["jquery","underscore","backbone","models/logs","views/text","views/alert"],function($,_,Backbone,LogsModel,TextView,AlertView){"use strict";var LogsView=TextView.extend({errorMsg:"Failed to load system logs, server error occurred.",initialize:function(){this.scroll=!0,this.model=new LogsModel,this.listenTo(window.events,"system_log_updated",this.update)},update:function(){this.model.fetch({error:function(){var alertView=new AlertView({type:"danger",message:this.errorMsg,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.setData("")}.bind(this),success:function(){this.setData(this.model.get("output")),this.scroll&&(this.scroll=!1,setTimeout(function(){this.scrollBottom(),setTimeout(function(){this.scrollBottom()}.bind(this),275)}.bind(this),275))}.bind(this)})}});return LogsView}),define("views/modalLogs",["jquery","underscore","backbone","views/modal","views/alert","views/logs"],function($,_,Backbone,ModalView,AlertView,LogsView){"use strict";var ModalLogsView=ModalView.extend({className:"logs-modal",title:"System Logs",okText:"Close",cancelText:null,initialize:function(){this.logsView=new LogsView,this.addView(this.logsView),ModalLogsView.__super__.initialize.call(this)},postRender:function(){this.$(".modal-body").append(this.logsView.render().el)}});return ModalLogsView}),define("models/org",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var OrgModel=Backbone.Model.extend({defaults:{id:null,name:null,user_count:null},url:function(){var url="/organization";return this.get("id")&&(url+="/"+this.get("id")),url}});return OrgModel}),define("collections/org",["jquery","underscore","backbone","models/org"],function($,_,Backbone,OrgModel){"use strict";var OrgCollection=Backbone.Collection.extend({model:OrgModel,initialize:function(){this.page=window.org_page||0},url:function(){return"/organization"},parse:function(response){return void 0!==response.page?(this.setPage(response.page),this.setPageTotal(response.page_total),response.organizations):response},setPage:function(page){this.page=page,window.org_page=page},getPage:function(){return this.page},nextPage:function(){this.page+=1},prevPage:function(){this.page-=1},setPageTotal:function(total){this.pageTotal=total},getPageTotal:function(){return this.pageTotal},isLastPage:function(){return this.page===this.pageTotal}});return OrgCollection}),define("models/zones",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var ZonesModel=Backbone.Model.extend({defaults:{"us-east-1":[],"us-east-2":[],"us-west-1":[],"us-west-2":[],"us-gov-west-1":[],"eu-west-1":[],"eu-central-1":[],"ap-northeast-1":[],"ap-northeast-2":[],"ap-southeast-1":[],"ap-southeast-2":[],"ap-south-1":[],"sa-east-1":[]},url:"/settings/zones"});return ZonesModel}),define("text!templates/modalSettings.html",[],function(){return'<div class="layout-horizontal">\n  <div class="settings-left layout-flex left">\n    <div class="username form-group">\n      <label>Username</label>\n      <input type="text" class="form-control" placeholder="Enter username" value="<%- username %>" spellcheck="false" autofocus>\n    </div>\n    <div class="auditing form-group">\n      <label>Auditing Mode</label>\n      <select class="form-control" data-toggle="tooltip" title="Auditing mode. Enable to log user actions such as login attempts and profile downloads" data-toggle="tooltip" title="Log administrator and user actions">\n        <option value="none" <%= !auditing ? \'selected\' : \'\' %>>Disabled</option>\n        <option value="all" <%= auditing === \'all\' ? \'selected\' : \'\' %>>All</option>\n      </select>\n    </div>\n    <div class="pin-mode form-group">\n      <label>Pin Mode</label>\n      <select class="form-control" data-toggle="tooltip" title="Pin mode">\n        <option value="optional" <%= pin_mode === \'optional\' ? \'selected\' : \'\' %>>Optional</option>\n        <option value="required" <%= pin_mode === \'required\' ? \'selected\' : \'\' %>>Required</option>\n        <option value="disabled" <%= pin_mode === \'disabled\' ? \'selected\' : \'\' %>>Disabled</option>\n      </select>\n    </div>\n    <div class="public-address form-group">\n      <label>Public Address</label>\n      <input type="text" class="form-control" placeholder="Enter public address" data-toggle="tooltip" title="Public IP address or domain name of the host" value="<%- public_address %>">\n    </div>\n    <div class="theme form-group">\n      <label>Theme</label>\n      <select class="form-control" data-toggle="tooltip" title="Pritunl color theme">\n        <option value="light" <%= theme === \'light\' ? \'selected\' : \'\' %>>Light</option>\n        <option value="dark" <%= theme === \'dark\' ? \'selected\' : \'\' %>>Dark</option>\n      </select>\n    </div>\n    <div class="server-port form-group">\n      <label>Web Console Port</label>\n      <input type="text" class="form-control" placeholder="Enter web console port" value="<%- server_port %>">\n    </div>\n    <div class="reverse-proxy form-group">\n      <label>Allow Reverse Proxy</label>\n      <select class="form-control" data-toggle="tooltip" title="Allow reading client IP address from reverse proxy header. Enable when using services such as CloudFlare or when using a load balancer">\n        <option value="false" <%= !reverse_proxy ? \'selected\' : \'\' %>>Disabled</option>\n        <option value="true" <%= reverse_proxy ? \'selected\' : \'\' %>>Enabled</option>\n      </select>\n    </div>\n    <div class="sso-mode form-group">\n      <label>Single Sign-On</label>\n      <select class="form-control" data-toggle="tooltip" title="Single Sign-On Mode">\n        <option value="" <%= sso ? \'\' : \'selected\' %>>Disabled</option>\n        <option value="saml_okta" <%= sso === \'saml_okta\' ? \'selected\' : \'\' %>>Okta</option>\n        <option value="saml_okta_duo" <%= sso === \'saml_okta_duo\' ? \'selected\' : \'\' %>>Okta + Duo Security</option>\n        <option value="saml_okta_yubico" <%= sso === \'saml_okta_yubico\' ? \'selected\' : \'\' %>>Okta + Yubico</option>\n        <option value="saml_onelogin" <%= sso === \'saml_onelogin\' ? \'selected\' : \'\' %>>OneLogin</option>\n        <option value="saml_onelogin_duo" <%= sso === \'saml_onelogin_duo\' ? \'selected\' : \'\' %>>OneLogin + Duo Security</option>\n        <option value="saml_onelogin_yubico" <%= sso === \'saml_onelogin_yubico\' ? \'selected\' : \'\' %>>OneLogin + Yubico</option>\n        <option value="slack" <%= sso === \'slack\' ? \'selected\' : \'\' %>>Slack</option>\n        <option value="slack_duo" <%= sso === \'slack_duo\' ? \'selected\' : \'\' %>>Slack + Duo Security</option>\n        <option value="slack_yubico" <%= sso === \'slack_yubico\' ? \'selected\' : \'\' %>>Slack + Yubico</option>\n        <option value="google" <%= sso === \'google\' ? \'selected\' : \'\' %>>Google Apps</option>\n        <option value="google_duo" <%= sso === \'google_duo\' ? \'selected\' : \'\' %>>Google Apps + Duo Security</option>\n        <option value="google_yubico" <%= sso === \'google_yubico\' ? \'selected\' : \'\' %>>Google Apps + Yubico</option>\n        <option value="saml" <%= sso === \'saml\' ? \'selected\' : \'\' %>>SAML</option>\n        <option value="saml_duo" <%= sso === \'saml_duo\' ? \'selected\' : \'\' %>>SAML + Duo Security</option>\n        <option value="saml_yubico" <%= sso === \'saml_yubico\' ? \'selected\' : \'\' %>>SAML + Yubico</option>\n        <option value="duo" <%= sso === \'duo\' ? \'selected\' : \'\' %>>Duo Security</option>\n        <option value="radius" <%= sso === \'radius\' ? \'selected\' : \'\' %>>Radius</option>\n        <option value="radius_duo" <%= sso === \'radius_duo\' ? \'selected\' : \'\' %>>Radius + Duo Security</option>\n      </select>\n    </div>\n    <div class="sso-org form-group" <%= sso ? \'\' : \'style="display: none;"\' %>>\n      <label>Single Sign-On Organization</label>\n      <select class="form-control">\n        <% _.each(orgs, function(org) { %>\n        <option value="<%- org.id %>" <%= (sso_org === org.id) ? \'selected\' : \'\' %>><%- org.name %></option>\n        <% }); %>\n      </select>\n    </div>\n    <div class="sso-onelogin-id form-group" <%= !sso || sso.indexOf(\'onelogin\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>OneLogin API Client ID</label>\n      <input type="text" class="form-control" placeholder="Enter OneLogin API client ID" value="<%- sso_onelogin_id || \'\' %>" data-toggle="tooltip" title="OneLogin API client ID">\n    </div>\n    <div class="sso-saml-cert form-group" <%= !sso || sso.indexOf(\'saml\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>SAML Certificate</label><br>\n      <textarea class="form-control" rows="4" spellcheck="false" data-toggle="tooltip" title="The SAML X.509 Certificate" placeholder="Enter saml certificate"><%- sso_saml_cert %></textarea>\n    </div>\n    <div class="sso-google-key form-group" <%= !sso || sso.indexOf(\'google\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Google JSON Private Key</label><br>\n      <textarea class="form-control" rows="4" spellcheck="false" data-toggle="tooltip" title="Optional, private key for service account in JSON format. This will allow a case sensetive match for any of the user groups to an existing organization. The group names will be matched to the first matching organization name in sorted order. If empty organization wont be matched to user groups. Also requires Google Admin Email." placeholder="Enter Google JSON private key"><%- sso_google_key %></textarea>\n    </div>\n    <div class="sso-token form-group" <%= !sso || sso.indexOf(\'duo\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Duo Integration Key</label>\n      <input type="text" class="form-control" placeholder="Enter integration key" value="<%- sso_duo_token || \'\' %>">\n    </div>\n    <div class="sso-secret form-group" <%= !sso || sso.indexOf(\'duo\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Duo Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" value="<%- sso_duo_secret || \'\' %>">\n    </div>\n    <div class="sso-yubico-client form-group">\n      <label>Yubico Client ID</label>\n      <input type="text" class="form-control" placeholder="Enter client ID" value="<%- sso_yubico_client || \'\' %>">\n    </div>\n    <div class="sso-client-cache toggle-form form-group" data-toggle="tooltip" title="Enable a two day single sign-on authentication cache using a token stored on the client. This will allow clients to reconnect without two-factor authentication. Works with Duo push, Okta push, Duo passcodes and YubiKeys. Only supported by Pritunl client" <%= sso ? \'\' : \'style="display: none;"\' %>>\n      <label>Enable Authentication Cache</label>\n      <div class="selector <%= sso_client_cache ? \'selected\' : \'\' %> no-select">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n  </div>\n  <div class="settings-right right">\n    <div class="pass form-group">\n      <label>New Password</label>\n      <input type="password" class="form-control" placeholder="Enter password">\n    </div>\n    <div class="public-address6 form-group">\n      <label>Public IPv6 Address</label>\n      <input type="text" class="form-control" placeholder="Enter public address" data-toggle="tooltip" title="Public IPv6 address or domain name of the host" value="<%- public_address6 %>">\n    </div>\n    <div class="routed-subnet6 form-group">\n      <label>Routed IPv6 Subnet</label>\n      <input type="text" class="form-control" placeholder="Enter routed subnet" data-toggle="tooltip" title="IPv6 subnet that is routed to the host, must be at least /64" value="<%- routed_subnet6 %>">\n    </div>\n    <div class="monitoring form-group">\n      <label>Monitoring Mode</label>\n      <select class="form-control" data-toggle="tooltip" title="Enable to send performance and usage metrics to InfluxDB ">\n        <option value="none" <%= !monitoring ? \'selected\' : \'\' %>>Disabled</option>\n        <option value="influxdb" <%= monitoring === \'influxdb\' ? \'selected\' : \'\' %>>InfluxDB</option>\n      </select>\n    </div>\n    <div class="influxdb-uri-box">\n      <div class="influxdb-uri form-group" <%= monitoring === \'influxdb\' ? \'\' : \'style="display: none;"\' %>>\n        <label>InfluxDB URI</label>\n        <input type="text" class="form-control" placeholder="Enter InfluxDB URI" value="<%- influxdb_uri || \'\' %>">\n      </div>\n    </div>\n    <div class="theme form-group">\n      <label>Theme</label>\n      <select class="form-control" data-toggle="tooltip" title="Pritunl color theme">\n        <option value="light" <%= theme === \'light\' ? \'selected\' : \'\' %>>Light</option>\n        <option value="dark" <%= theme === \'dark\' ? \'selected\' : \'\' %>>Dark</option>\n      </select>\n    </div>\n    <div class="acme-domain form-group">\n      <label>Lets Encrypt Domain</label>\n      <input type="text" class="form-control" spellcheck="false" placeholder="Enter web console domain" value="<%- acme_domain %>" data-toggle="tooltip" title="Enter the domain name that is registered to this server to automatically configure a signed SSL certificate from Lets Encrypt. Port 80 must stay publicly accessible on the server to verify and renew the domain certificate">\n    </div>\n    <div class="cloud-provider form-group">\n      <label>Cloud Provider</label>\n      <select class="form-control" data-toggle="tooltip" title="Cloud provider for integration">\n        <option value="none" <%= cloud_provider === \'none\' ? \'selected\' : \'\' %>>None</option>\n        <option value="aws" <%= cloud_provider === \'aws\' ? \'selected\' : \'\' %>>AWS</option>\n      </select>\n    </div>\n    <div class="sso-saml-url form-group" <%= !sso || sso.indexOf(\'saml\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>SAML Sign-On URL</label>\n      <input type="text" class="form-control" placeholder="Enter SAML sign-on url" value="<%- sso_saml_url || \'\' %>" data-toggle="tooltip" title="The SAML identity provider single sign-on url. Also known as SAML 2.0 Endpoint">\n    </div>\n    <div class="sso-saml-issuer-url form-group" <%= !sso || sso.indexOf(\'saml\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>SAML Issuer URL</label>\n      <input type="text" class="form-control" placeholder="Enter SAML issuer url" value="<%- sso_saml_issuer_url || \'\' %>" data-toggle="tooltip" title="The SAML identity provider issuer url">\n    </div>\n    <div class="sso-onelogin-secret form-group" <%= !sso || sso.indexOf(\'onelogin\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>OneLogin API Client Secret</label>\n      <input type="text" class="form-control" placeholder="Enter OneLogin API client secret" value="<%- sso_onelogin_secret || \'\' %>" data-toggle="tooltip" title="OneLogin API client secret">\n    </div>\n    <div class="sso-okta-token form-group" <%= !sso || sso.indexOf(\'okta\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Okta API Token</label>\n      <input type="text" class="form-control" placeholder="Enter Okta API token" value="<%- sso_okta_token || \'\' %>" data-toggle="tooltip" title="Okta API token">\n    </div>\n    <div class="sso-match-google form-group" <%= !sso || sso.indexOf(\'google\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Google Apps Domain</label>\n      <input type="text" class="form-control" spellcheck="false" placeholder="Enter Google Apps domain" value="<%- sso_match || \'\' %>" data-toggle="tooltip" title="Google apps domain to match against users email address. Multiple domains can be entrered sperated by a comma. (example: pritunl.com)">\n    </div>\n    <div class="sso-google-email form-group" <%= !sso || sso.indexOf(\'google\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Google Admin Email</label>\n      <input type="text" class="form-control" spellcheck="false" placeholder="Enter Google admin email" value="<%- sso_google_email || \'\' %>" data-toggle="tooltip" title="Optional, the email address of an administrator user in the Google G Suite to delegate API access to. This user will be used to get the groups of Google users. Only needed when providing the Google private key.">\n    </div>\n    <div class="sso-match-slack form-group" <%= !sso || sso.indexOf(\'slack\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Slack Team</label>\n      <input type="text" class="form-control" spellcheck="false" placeholder="Enter slack team" value="<%- sso_match || \'\' %>" data-toggle="tooltip" title="Slack team domain to match against users team. (example: pritunl.slack.com)">\n    </div>\n    <div class="sso-radius-host form-group" <%= !sso || sso.indexOf(\'radius\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Radius Host</label>\n      <input type="email" class="form-control" placeholder="Enter radius host and port" value="<%- sso_radius_host || \'\' %>" data-toggle="tooltip" title="Radius host such as localhost:1645. If no port is specified default port 1645 will be used">\n    </div>\n    <div class="sso-radius-secret form-group" <%= !sso || sso.indexOf(\'radius\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Radius Secret</label>\n      <input type="password" class="form-control" placeholder="Enter Radius secret" value="<%- sso_radius_secret || \'\' %>" data-toggle="tooltip" title="Radius shared secret">\n    </div>\n    <div class="sso-host form-group" <%= !sso || sso.indexOf(\'duo\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Duo API Hostname</label>\n      <input type="text" class="form-control" placeholder="Enter api hostname" value="<%- sso_duo_host || \'\' %>">\n    </div>\n    <div class="sso-duo-mode form-group" <%= !sso || sso.indexOf(\'duo\') === -1 ? \'style="display: none;"\' : \'\' %>>\n      <label>Duo Mode</label>\n      <select class="form-control" data-toggle="tooltip" title="Duo authentication mode">\n        <option value="push" <%= sso_duo_mode === \'push\' ? \'selected\' : \'\' %>>Push</option>\n        <option value="phone" <%= sso_duo_mode === \'phone\' ? \'selected\' : \'\' %>>Phone Callback</option>\n        <option value="push_phone" <%= sso_duo_mode === \'push_phone\' ? \'selected\' : \'\' %>>Push + Phone Callback</option>\n        <option value="passcode" <%= sso_duo_mode === \'passcode\' ? \'selected\' : \'\' %>>Passcode</option>\n      </select>\n    </div>\n    <div class="sso-okta-push toggle-form form-group" data-toggle="tooltip" title="Enable Okta Push for connection authentication when it is available" <%= (sso === \'saml_okta\' || sso === \'saml_okta_yubico\') ? \'\' : \'style="display: none;"\' %>>\n      <label>Enable Okta Push</label>\n      <div class="selector <%= sso_okta_push ? \'selected\' : \'\' %> no-select">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n    <div class="sso-yubico-secret form-group">\n      <label>Yubico Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" value="<%- sso_yubico_secret || \'\' %>">\n    </div>\n    <div class="client-reconnect toggle-form form-group" data-toggle="tooltip" title="Enable auto reconnecting on Pritunl client" <%= sso ? \'\' : \'style="display: none;"\' %>>\n      <label>Enable Client Reconnect</label>\n      <div class="selector <%= client_reconnect ? \'selected\' : \'\' %> no-select">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="aws-settings layout-horizontal" <%= cloud_provider === \'aws\' ? \'\' : \'style="display: none;"\' %>>\n  <div class="settings-left layout-flex left">\n    <div class="route53-region form-group">\n      <label>Auto Route 53 Region</label>\n      <select class="form-control" data-toggle="tooltip" title="Select Route 53 region. This will automatically create and update DNS records for each host in the selected region">\n        <option value="" <%= !route53_region ? \'selected\' : \'\' %>>Disabled</option>\n        <option value="us-east-1" <%= route53_region === \'us-east-1\' ? \'selected\' : \'\' %>>US East (N. Virginia)</option>\n        <option value="us-east-2" <%= route53_region === \'us-east-2\' ? \'selected\' : \'\' %>>US East (Ohio)</option>\n        <option value="us-west-1" <%= route53_region === \'us-west-1\' ? \'selected\' : \'\' %>>US West (N. California)</option>\n        <option value="us-west-2" <%= route53_region === \'us-west-2\' ? \'selected\' : \'\' %>>US West (Oregon)</option>\n        <option value="us-gov-west-1" <%= route53_region === \'us-gov-west-1\' ? \'selected\' : \'\' %>>US GovCloud (West)</option>\n        <option value="eu-west-1" <%= route53_region === \'eu-west-1\' ? \'selected\' : \'\' %>>EU (Ireland)</option>\n        <option value="eu-west-2" <%= route53_region === \'eu-west-2\' ? \'selected\' : \'\' %>>EU (London)</option>\n        <option value="eu-central-1" <%= route53_region === \'eu-central-1\' ? \'selected\' : \'\' %>>EU (Frankfurt)</option>\n        <option value="ca-central-1" <%= route53_region === \'ca-central-1\' ? \'selected\' : \'\' %>>Canada (Central)</option>\n        <option value="ap-northeast-1" <%= route53_region === \'ap-northeast-1\' ? \'selected\' : \'\' %>>Asia Pacific (Tokyo)</option>\n        <option value="ap-northeast-2" <%= route53_region === \'ap-northeast-2\' ? \'selected\' : \'\' %>>Asia Pacific (Seoul)</option>\n        <option value="ap-southeast-1" <%= route53_region === \'ap-southeast-1\' ? \'selected\' : \'\' %>>Asia Pacific (Singapore)</option>\n        <option value="ap-southeast-2" <%= route53_region === \'ap-southeast-2\' ? \'selected\' : \'\' %>>Asia Pacific (Sydney)</option>\n        <option value="ap-south-1" <%= route53_region === \'ap-south-1\' ? \'selected\' : \'\' %>>Asia Pacific (Mumbai)</option>\n        <option value="sa-east-1" <%= route53_region === \'sa-east-1\' ? \'selected\' : \'\' %>>South America (Sao Paulo)</option>\n      </select>\n    </div>\n    <div class="us-east-1-access-key form-group">\n      <label>US East (N. Virginia) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- us_east_1_access_key || \'\' %>">\n    </div>\n    <div class="us-east-2-access-key form-group">\n      <label>US East (Ohio) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- us_east_2_access_key || \'\' %>">\n    </div>\n    <div class="us-west-1-access-key form-group">\n      <label>US West (N. California) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- us_west_1_access_key || \'\' %>">\n    </div>\n    <div class="us-west-2-access-key form-group">\n      <label>US West (Oregon) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- us_west_2_access_key || \'\' %>">\n    </div>\n    <div class="us-gov-west-1-access-key form-group">\n      <label>US GovCloud (West) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- us_gov_west_1_access_key || \'\' %>">\n    </div>\n    <div class="eu-west-1-access-key form-group">\n      <label>EU (Ireland) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- eu_west_1_access_key || \'\' %>">\n    </div>\n    <div class="eu-west-2-access-key form-group">\n      <label>EU (London) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- eu_west_2_access_key || \'\' %>">\n    </div>\n    <div class="eu-central-1-access-key form-group">\n      <label>EU (Frankfurt) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- eu_central_1_access_key || \'\' %>">\n    </div>\n    <div class="ca-central-1-access-key form-group">\n      <label>Canada (Central) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- ca_central_1_access_key || \'\' %>">\n    </div>\n    <div class="ap-northeast-1-access-key form-group">\n      <label>Asia Pacific (Tokyo) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- ap_northeast_1_access_key || \'\' %>">\n    </div>\n    <div class="ap-northeast-2-access-key form-group">\n      <label>Asia Pacific (Seoul) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- ap_northeast_2_access_key || \'\' %>">\n    </div>\n    <div class="ap-southeast-1-access-key form-group">\n      <label>Asia Pacific (Singapore) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- ap_southeast_1_access_key || \'\' %>">\n    </div>\n    <div class="ap-southeast-2-access-key form-group">\n      <label>Asia Pacific (Sydney) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- ap_southeast_2_access_key || \'\' %>">\n    </div>\n    <div class="ap-south-1-access-key form-group">\n      <label>Asia Pacific (Mumbai) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- ap_south_1_access_key || \'\' %>">\n    </div>\n    <div class="sa-east-1-access-key form-group">\n      <label>South America (Sao Paulo) Access Key</label>\n      <input type="text" class="form-control" placeholder="Enter access key" data-toggle="tooltip" title="Enter access key or \'role\' to use the instance IAM role" value="<%- sa_east_1_access_key || \'\' %>">\n    </div>\n  </div>\n  <div class="settings-right right">\n    <div class="route53-zone form-group">\n      <label>Auto Route 53 Zone</label>\n      <select class="form-control" data-toggle="tooltip" title="Select Route 53 zone. This will automatically create and update DNS records for each host in the selected zone. The name of the host will be used for the subdomain in the zone. The AWS keys below must be saved before a list of available zones will be shown.">\n        <option value="none" <%= !route53_zone ? \'selected\' : \'\' %>>Disabled</option>\n      </select>\n    </div>\n    <div class="us-east-1-secret-key form-group">\n      <label>US East (N. Virginia) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- us_east_1_secret_key || \'\' %>">\n    </div>\n    <div class="us-east-2-secret-key form-group">\n      <label>US East (Ohio) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- us_east_2_secret_key || \'\' %>">\n    </div>\n    <div class="us-west-1-secret-key form-group">\n      <label>US West (N. California) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- us_west_1_secret_key || \'\' %>">\n    </div>\n    <div class="us-west-2-secret-key form-group">\n      <label>US West (Oregon) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- us_west_2_secret_key || \'\' %>">\n    </div>\n    <div class="us-gov-west-1-secret-key form-group">\n      <label>US GovCloud (West) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- us_gov_west_1_secret_key || \'\' %>">\n    </div>\n    <div class="eu-west-1-secret-key form-group">\n      <label>EU (Ireland) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- eu_west_1_secret_key || \'\' %>">\n    </div>\n    <div class="eu-west-2-secret-key form-group">\n      <label>EU (London) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- eu_west_2_secret_key || \'\' %>">\n    </div>\n    <div class="eu-central-1-secret-key form-group">\n      <label>EU (Frankfurt) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- eu_central_1_secret_key || \'\' %>">\n    </div>\n    <div class="ca-central-1-secret-key form-group">\n      <label>Canada (Central) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- ca_central_1_secret_key || \'\' %>">\n    </div>\n    <div class="ap-northeast-1-secret-key form-group">\n      <label>Asia Pacific (Tokyo) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- ap_northeast_1_secret_key || \'\' %>">\n    </div>\n    <div class="ap-northeast-2-secret-key form-group">\n      <label>Asia Pacific (Seoul) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- ap_northeast_2_secret_key || \'\' %>">\n    </div>\n    <div class="ap-southeast-1-secret-key form-group">\n      <label>Asia Pacific (Singapore) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- ap_southeast_1_secret_key || \'\' %>">\n    </div>\n    <div class="ap-southeast-2-secret-key form-group">\n      <label>Asia Pacific (Sydney) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- ap_southeast_2_secret_key || \'\' %>">\n    </div>\n    <div class="ap-south-1-secret-key form-group">\n      <label>Asia Pacific (Mumbai) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- ap_south_1_secret_key || \'\' %>">\n    </div>\n    <div class="sa-east-1-secret-key form-group">\n      <label>South America (Sao Paulo) Secret Key</label>\n      <input type="text" class="form-control" placeholder="Enter secret key" data-toggle="tooltip" title="Enter secret key or \'role\' to use the instance IAM role" value="<%- sa_east_1_secret_key || \'\' %>">\n    </div>\n  </div>\n</div>\n<div class="layout-horizontal">\n  <div class="settings-left layout-flex left advanced">\n    <div class="email-from form-group">\n      <label>SMTP From Address</label>\n      <input type="email" class="form-control" placeholder="Enter SMTP from address" value="<%- email_from || \'\' %>" data-toggle="tooltip" title="SMTP name and from email address (example: Pritunl <contact@pritunl.com>)">\n    </div>\n    <div class="email-username form-group">\n      <label>SMTP Username</label>\n      <input type="text" class="form-control" placeholder="Enter SMTP username" value="<%- email_username || \'\' %>">\n    </div>\n    <div class="server-cert form-group">\n      <label>Server SSL Certificate</label><br>\n      <textarea class="form-control" rows="4" spellcheck="false"><%- server_cert %></textarea>\n    </div>\n  </div>\n  <div class="settings-right right advanced">\n    <div class="email-server form-group">\n      <label>SMTP Server</label>\n      <input type="text" class="form-control" placeholder="Enter SMTP server" value="<%- email_server || \'\' %>">\n    </div>\n    <div class="email-password form-group">\n      <label>SMTP Password</label>\n      <input type="password" class="form-control" placeholder="Enter SMTP password" value="<%- email_password ? \'********************\' : \'\' %>">\n    </div>\n    <div class="server-key form-group">\n      <label>Server SSL Key</label><br>\n      <textarea class="form-control" rows="4" spellcheck="false"><%- server_key %></textarea>\n    </div>\n  </div>\n</div>\n';
}),define("views/modalSettings",["jquery","underscore","backbone","collections/org","models/zones","views/modal","text!templates/modalSettings.html"],function($,_,Backbone,OrgCollection,ZonesModel,ModalView,modalSettingsTemplate){"use strict";var ModalSettingsView=ModalView.extend({className:"settings-modal",template:_.template(modalSettingsTemplate),title:"Settings",okText:"Save",enterOk:!1,hasAdvanced:!0,events:function(){return _.extend({"click .sso-mode select":"onSsoMode","change .sso-mode select":"onSsoMode","change .pass input":"onPassChange","keyup .pass input":"onPassEvent","paste .pass input":"onPassEvent","input .pass input":"onPassEvent","change .route53-region select":"updateZones","click .sso-client-cache":"onSsoClientCacheSelect","click .sso-okta-push":"onSsoOktaPushSelect","click .client-reconnect":"onClientReconnect","propertychange .pass input":"onPassEvent","change .cloud-provider select":"onCloudProviderChange","change .monitoring select":"onMonitoringChange","change .theme select":"onThemeChange"},ModalSettingsView.__super__.events)},initialize:function(options){this.orgs=new OrgCollection,this.zones=new ZonesModel,this.initial=options.initial,this.curServerPort=this.model.get("server_port"),this.curAcmeDomain=this.model.get("acme_domain")||null,this.initial&&(this.title="Initial Setup",this.cancelText="Setup Later"),ModalSettingsView.__super__.initialize.call(this)},body:function(){return this.template(_.extend({orgs:this.orgs.toJSON()},this.model.toJSON()))},postRender:function(){this.setLoading("Loading..."),this.orgs.fetch({success:function(){this.clearLoading();for(var i=0;i<this.orgs.length;i++){var org=this.orgs.models[i],selected=this.model.get("sso_org")===org.get("id");this.$(".sso-org select").append("<option "+(selected?"selected ":"")+'value="'+org.get("id")+'">'+org.get("name")+"</option>")}}.bind(this),error:function(){this.clearLoading(),this.setAlert("danger","Failed to load organizations, server error occurred.")}.bind(this)}),this.zones.fetch({success:function(){this.clearLoading(),this.updateZones()}.bind(this),error:function(){this.clearLoading(),this.setAlert("danger","Failed to load Route 53 zones, server error occurred.")}.bind(this)})},updateZones:function(){var zone,zones,region=this.$(".route53-region select").val();if(!region)return void this.$(".route53-zone select").html('<option selected value="">Disabled</option>');if(zones=this.zones.get(region)||[],!zones.length)return void this.$(".route53-zone select").html('<option selected value="">No zones available</option>');this.$(".route53-zone select").empty();for(var curZone=this.model.get("route53_zone")||zones[0],i=0;i<zones.length;i++)zone=zones[i],this.$(".route53-zone select").append("<option "+(zone===curZone?"selected":"")+' value="'+zone+'">'+zone+"</option>")},getSsoMode:function(){return this.$(".sso-mode select").val()},setSsoMode:function(mode){return mode?(this.$(".sso-org").slideDown(window.slideTime),void("saml"===mode?(this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-saml-url").slideDown(window.slideTime),this.$(".sso-saml-issuer-url").slideDown(window.slideTime),this.$(".sso-saml-cert").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"saml_duo"===mode?(this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-token").slideDown(window.slideTime),this.$(".sso-secret").slideDown(window.slideTime),this.$(".sso-host").slideDown(window.slideTime),this.$(".sso-duo-mode").slideDown(window.slideTime),this.$(".sso-saml-url").slideDown(window.slideTime),this.$(".sso-saml-issuer-url").slideDown(window.slideTime),this.$(".sso-saml-cert").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"saml_yubico"===mode?(this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-saml-url").slideDown(window.slideTime),this.$(".sso-saml-issuer-url").slideDown(window.slideTime),this.$(".sso-saml-cert").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"saml_okta"===mode?(this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-saml-url").slideDown(window.slideTime),this.$(".sso-saml-issuer-url").slideDown(window.slideTime),this.$(".sso-saml-cert").slideDown(window.slideTime),this.$(".sso-okta-token").slideDown(window.slideTime),this.$(".sso-okta-push").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"saml_okta_duo"===mode?(this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-token").slideDown(window.slideTime),this.$(".sso-secret").slideDown(window.slideTime),this.$(".sso-host").slideDown(window.slideTime),this.$(".sso-duo-mode").slideDown(window.slideTime),this.$(".sso-saml-url").slideDown(window.slideTime),this.$(".sso-saml-issuer-url").slideDown(window.slideTime),this.$(".sso-saml-cert").slideDown(window.slideTime),this.$(".sso-okta-token").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"saml_okta_yubico"===mode?(this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-saml-url").slideDown(window.slideTime),this.$(".sso-saml-issuer-url").slideDown(window.slideTime),this.$(".sso-saml-cert").slideDown(window.slideTime),this.$(".sso-okta-token").slideDown(window.slideTime),this.$(".sso-okta-push").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"saml_onelogin"===mode?(this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-saml-url").slideDown(window.slideTime),this.$(".sso-saml-issuer-url").slideDown(window.slideTime),this.$(".sso-saml-cert").slideDown(window.slideTime),this.$(".sso-onelogin-id").slideDown(window.slideTime),this.$(".sso-onelogin-secret").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"saml_onelogin_duo"===mode?(this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-token").slideDown(window.slideTime),this.$(".sso-secret").slideDown(window.slideTime),this.$(".sso-host").slideDown(window.slideTime),this.$(".sso-duo-mode").slideDown(window.slideTime),this.$(".sso-saml-url").slideDown(window.slideTime),this.$(".sso-saml-issuer-url").slideDown(window.slideTime),this.$(".sso-saml-cert").slideDown(window.slideTime),this.$(".sso-onelogin-id").slideDown(window.slideTime),this.$(".sso-onelogin-secret").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"saml_onelogin_yubico"===mode?(this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-saml-url").slideDown(window.slideTime),this.$(".sso-saml-issuer-url").slideDown(window.slideTime),this.$(".sso-saml-cert").slideDown(window.slideTime),this.$(".sso-onelogin-id").slideDown(window.slideTime),this.$(".sso-onelogin-secret").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"slack"===mode?(this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-match-slack").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"google"===mode?(this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideDown(window.slideTime),this.$(".sso-google-key").slideDown(window.slideTime),this.$(".sso-google-email").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"slack_duo"===mode?(this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-match-slack").slideDown(window.slideTime),this.$(".sso-token").slideDown(window.slideTime),this.$(".sso-secret").slideDown(window.slideTime),this.$(".sso-host").slideDown(window.slideTime),this.$(".sso-duo-mode").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"google_duo"===mode?(this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideDown(window.slideTime),this.$(".sso-google-key").slideDown(window.slideTime),this.$(".sso-google-email").slideDown(window.slideTime),this.$(".sso-token").slideDown(window.slideTime),this.$(".sso-secret").slideDown(window.slideTime),this.$(".sso-host").slideDown(window.slideTime),this.$(".sso-duo-mode").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"slack_yubico"===mode?(this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-match-slack").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"google_yubico"===mode?(this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideDown(window.slideTime),this.$(".sso-google-key").slideDown(window.slideTime),this.$(".sso-google-email").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"duo"===mode?(this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),this.$(".sso-token").slideDown(window.slideTime),this.$(".sso-secret").slideDown(window.slideTime),this.$(".sso-host").slideDown(window.slideTime),this.$(".sso-duo-mode").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"radius"===mode?(this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-radius-host").slideDown(window.slideTime),this.$(".sso-radius-secret").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)):"radius_duo"===mode&&(this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-radius-host").slideDown(window.slideTime),this.$(".sso-radius-secret").slideDown(window.slideTime),this.$(".sso-token").slideDown(window.slideTime),this.$(".sso-secret").slideDown(window.slideTime),this.$(".sso-host").slideDown(window.slideTime),this.$(".sso-duo-mode").slideDown(window.slideTime),this.$(".sso-client-cache").slideDown(window.slideTime)))):(this.$(".sso-match-slack").slideUp(window.slideTime),this.$(".sso-match-google").slideUp(window.slideTime),this.$(".sso-google-key").slideUp(window.slideTime),this.$(".sso-google-email").slideUp(window.slideTime),this.$(".sso-token").slideUp(window.slideTime),this.$(".sso-secret").slideUp(window.slideTime),this.$(".sso-host").slideUp(window.slideTime),this.$(".sso-duo-mode").slideUp(window.slideTime),this.$(".sso-org").slideUp(window.slideTime),this.$(".sso-saml-url").slideUp(window.slideTime),this.$(".sso-saml-issuer-url").slideUp(window.slideTime),this.$(".sso-saml-cert").slideUp(window.slideTime),this.$(".sso-okta-token").slideUp(window.slideTime),this.$(".sso-okta-push").slideUp(window.slideTime),this.$(".sso-onelogin-id").slideUp(window.slideTime),this.$(".sso-onelogin-secret").slideUp(window.slideTime),this.$(".sso-radius-host").slideUp(window.slideTime),this.$(".sso-radius-secret").slideUp(window.slideTime),void this.$(".sso-client-cache").slideUp(window.slideTime))},getSsoClientCacheSelect:function(){return this.$(".sso-client-cache .selector").hasClass("selected")},setSsoClientCacheSelect:function(state){state?(this.$(".sso-client-cache .selector").addClass("selected"),this.$(".sso-client-cache .selector-inner").show()):(this.$(".sso-client-cache .selector").removeClass("selected"),this.$(".sso-client-cache .selector-inner").hide())},onSsoClientCacheSelect:function(){this.setSsoClientCacheSelect(!this.getSsoClientCacheSelect())},getSsoOktaPushSelect:function(){return this.$(".sso-okta-push .selector").hasClass("selected")},setSsoOktaPushSelect:function(state){state?(this.$(".sso-okta-push .selector").addClass("selected"),this.$(".sso-okta-push .selector-inner").show()):(this.$(".sso-okta-push .selector").removeClass("selected"),this.$(".sso-okta-push .selector-inner").hide())},onSsoOktaPushSelect:function(){this.setSsoOktaPushSelect(!this.getSsoOktaPushSelect())},getClientReconnect:function(){return this.$(".client-reconnect .selector").hasClass("selected")},setClientReconnect:function(state){state?(this.$(".client-reconnect .selector").addClass("selected"),this.$(".client-reconnect .selector-inner").show()):(this.$(".client-reconnect .selector").removeClass("selected"),this.$(".client-reconnect .selector-inner").hide())},onClientReconnect:function(){this.setClientReconnect(!this.getClientReconnect())},onSsoMode:function(){this.setSsoMode(this.getSsoMode())},onCloudProviderChange:function(){"aws"===this.$(".cloud-provider select").val()?this.$(".aws-settings").slideDown(window.slideTime):this.$(".aws-settings").slideUp(window.slideTime)},onMonitoringChange:function(){"influxdb"===this.$(".monitoring select").val()?this.$(".influxdb-uri").slideDown(window.slideTime):this.$(".influxdb-uri").slideUp(window.slideTime)},onThemeChange:function(){"dark"===this.$(".theme:visible select").val()?$("body").addClass("dark"):$("body").removeClass("dark")},onPassChange:function(){var pass=this.$(".pass input").val();!pass||!(pass.length<8)&&pass.match(/[0-9]/)&&(pass.match(/[^a-zA-Z0-9]/)||pass.match(/[a-z]/)&&pass.match(/[A-Z]/))?this.clearAlert():this.setAlert("warning","Weak password.",".pass")},onPassEvent:function(){var changeId=(new Date).getTime();this.changeId=changeId,setTimeout(function(){this.changeId===changeId&&this.onPassChange()}.bind(this),500)},onOk:function(){var username=this.$(".username input").val(),password=this.$(".pass input").val(),verifyPassword=this.$(".verify-pass input").val(),auditing=this.$(".auditing select").val(),serverPort=this.$(".server-port input").val(),acmeDomain=this.$(".acme-domain input").val()||null,monitoring=this.$(".monitoring select").val(),influxdbUriKey=this.$(".influxdb-uri input").val(),publicAddress=this.$(".public-address input").val(),publicAddress6=this.$(".public-address6 input").val(),routedSubnet6=this.$(".routed-subnet6 input").val(),reverseProxy=this.$(".reverse-proxy select").val(),theme=this.$(".theme:visible select").val(),emailFrom=this.$(".email-from input").val(),emailServer=this.$(".email-server input").val(),emailUsername=this.$(".email-username input").val(),emailPassword=this.$(".email-password input").val(),pinMode=this.$(".pin-mode select").val(),serverCert=this.$(".server-cert textarea").val(),serverKey=this.$(".server-key textarea").val(),cloudProvider=this.$(".cloud-provider select").val(),ssoYubicoClient=this.$(".sso-yubico-client input").val(),ssoYubicoSecret=this.$(".sso-yubico-secret input").val(),clientReconnect=this.getClientReconnect(),usEast1AccessKey=this.$(".us-east-1-access-key input").val(),usEast1SecretKey=this.$(".us-east-1-secret-key input").val(),usEast2AccessKey=this.$(".us-east-2-access-key input").val(),usEast2SecretKey=this.$(".us-east-2-secret-key input").val(),usWest1AccessKey=this.$(".us-west-1-access-key input").val(),usWest1SecretKey=this.$(".us-west-1-secret-key input").val(),usWest2AccessKey=this.$(".us-west-2-access-key input").val(),usWest2SecretKey=this.$(".us-west-2-secret-key input").val(),usGovWest1AccessKey=this.$(".us-gov-west-1-access-key input").val(),usGovWest1SecretKey=this.$(".us-gov-west-1-secret-key input").val(),euWest1AccessKey=this.$(".eu-west-1-access-key input").val(),euWest1SecretKey=this.$(".eu-west-1-secret-key input").val(),euWest2AccessKey=this.$(".eu-west-2-access-key input").val(),euWest2SecretKey=this.$(".eu-west-2-secret-key input").val(),euCentral1AccessKey=this.$(".eu-central-1-access-key input").val(),euCentral1SecretKey=this.$(".eu-central-1-secret-key input").val(),caCentral1AccessKey=this.$(".ca-central-1-access-key input").val(),caCentral1SecretKey=this.$(".ca-central-1-secret-key input").val(),apNortheast1AccessKey=this.$(".ap-northeast-1-access-key input").val(),apNortheast1SecretKey=this.$(".ap-northeast-1-secret-key input").val(),apNortheast2AccessKey=this.$(".ap-northeast-2-access-key input").val(),apNortheast2SecretKey=this.$(".ap-northeast-2-secret-key input").val(),apSoutheast1AccessKey=this.$(".ap-southeast-1-access-key input").val(),apSoutheast1SecretKey=this.$(".ap-southeast-1-secret-key input").val(),apSoutheast2AccessKey=this.$(".ap-southeast-2-access-key input").val(),apSoutheast2SecretKey=this.$(".ap-southeast-2-secret-key input").val(),apSouth1AccessKey=this.$(".ap-south-1-access-key input").val(),apSouth1SecretKey=this.$(".ap-south-1-secret-key input").val(),saEast1AccessKey=this.$(".sa-east-1-access-key input").val(),saEast1SecretKey=this.$(".sa-east-1-secret-key input").val(),route53Region=this.$(".route53-region select").val(),route53Zone=this.$(".route53-zone select").val();route53Region&&route53Zone||(route53Region=null,route53Zone=null),serverPort&&(serverPort=parseInt(serverPort,10)),reverseProxy="true"===reverseProxy?!0:!1;var i,sso=this.getSsoMode(),ssoMatch=null,ssoOrg=null,ssoGoogleKey=null,ssoGoogleEmail=null,ssoSamlUrl=null,ssoSamlIssuerUrl=null,ssoSamlCert=null,ssoOktaToken=null,ssoOktaPush=null,ssoOneLoginId=null,ssoOneLoginSecret=null,ssoRadiusHost=null,ssoRadiusSecret=null,ssoDuoToken=null,ssoDuoSecret=null,ssoDuoHost=null,ssoDuoMode=null,ssoClientCache=this.getSsoClientCacheSelect();if(this.$(".verify-pass input").is(":visible")&&password&&password!==verifyPassword)return void this.setAlert("danger","Passwords do not match.",".verify-pass");if("all"!==auditing&&(auditing=null),"none"===monitoring&&(monitoring=null),"influxdb"!==monitoring&&(influxdbUriKey=null),sso){if(-1!==sso.indexOf("duo")&&(ssoDuoToken=this.$(".sso-token input").val(),ssoDuoSecret=this.$(".sso-secret input").val(),ssoDuoHost=this.$(".sso-host input").val(),ssoDuoMode=this.$(".sso-duo-mode select").val()),-1!==sso.indexOf("saml")&&(ssoSamlUrl=this.$(".sso-saml-url input").val(),ssoSamlIssuerUrl=this.$(".sso-saml-issuer-url input").val(),ssoSamlCert=this.$(".sso-saml-cert textarea").val()),-1!==sso.indexOf("okta")&&(ssoOktaToken=this.$(".sso-okta-token input").val(),ssoOktaPush=this.getSsoOktaPushSelect()),-1!==sso.indexOf("onelogin")&&(ssoOneLoginId=this.$(".sso-onelogin-id input").val(),ssoOneLoginSecret=this.$(".sso-onelogin-secret input").val()),-1!==sso.indexOf("google")){for(ssoMatch=this.$(".sso-match-google input").val().split(","),i=0;i<ssoMatch.length;i++)ssoMatch[i]=ssoMatch[i].replace(/^\s\s*/,"").replace(/\s\s*$/,"");ssoGoogleKey=this.$(".sso-google-key textarea").val(),ssoGoogleEmail=this.$(".sso-google-email input").val()}if(-1!==sso.indexOf("slack"))for(ssoMatch=this.$(".sso-match-slack input").val().split(","),ssoMatch.length&&(ssoMatch=[ssoMatch[0]]),i=0;i<ssoMatch.length;i++)ssoMatch[i]=ssoMatch[i].replace(/^\s\s*/,"").replace(/\s\s*$/,"");-1!==sso.indexOf("radius")&&(ssoRadiusHost=this.$(".sso-radius-host input").val(),ssoRadiusSecret=this.$(".sso-radius-secret input").val()),ssoOrg=this.$(".sso-org select").val()}var modelAttr={username:username,auditing:auditing,monitoring:monitoring,influxdb_uri:influxdbUriKey,email_from:emailFrom,email_server:emailServer,email_username:emailUsername,pin_mode:pinMode,sso:sso,sso_match:ssoMatch,sso_duo_token:ssoDuoToken,sso_duo_secret:ssoDuoSecret,sso_duo_host:ssoDuoHost,sso_duo_mode:ssoDuoMode,sso_yubico_client:ssoYubicoClient,sso_yubico_secret:ssoYubicoSecret,sso_org:ssoOrg,sso_google_key:ssoGoogleKey,sso_google_email:ssoGoogleEmail,sso_saml_url:ssoSamlUrl,sso_saml_issuer_url:ssoSamlIssuerUrl,sso_saml_cert:ssoSamlCert,sso_okta_token:ssoOktaToken,sso_okta_push:ssoOktaPush,sso_onelogin_id:ssoOneLoginId,sso_onelogin_secret:ssoOneLoginSecret,sso_radius_host:ssoRadiusHost,sso_radius_secret:ssoRadiusSecret,sso_client_cache:ssoClientCache,client_reconnect:clientReconnect,public_address:publicAddress,public_address6:publicAddress6,routed_subnet6:routedSubnet6,reverse_proxy:reverseProxy,theme:theme,server_port:serverPort,server_cert:serverCert,server_key:serverKey,acme_domain:acmeDomain,cloud_provider:cloudProvider,route53_region:route53Region,route53_zone:route53Zone,us_east_1_access_key:usEast1AccessKey,us_east_1_secret_key:usEast1SecretKey,us_east_2_access_key:usEast2AccessKey,us_east_2_secret_key:usEast2SecretKey,us_west_1_access_key:usWest1AccessKey,us_west_1_secret_key:usWest1SecretKey,us_west_2_access_key:usWest2AccessKey,us_west_2_secret_key:usWest2SecretKey,us_gov_west_1_access_key:usGovWest1AccessKey,us_gov_west_1_secret_key:usGovWest1SecretKey,eu_west_1_access_key:euWest1AccessKey,eu_west_1_secret_key:euWest1SecretKey,eu_west_2_access_key:euWest2AccessKey,eu_west_2_secret_key:euWest2SecretKey,eu_central_1_access_key:euCentral1AccessKey,eu_central_1_secret_key:euCentral1SecretKey,ca_central_1_access_key:caCentral1AccessKey,ca_central_1_secret_key:caCentral1SecretKey,ap_northeast_1_access_key:apNortheast1AccessKey,ap_northeast_1_secret_key:apNortheast1SecretKey,ap_northeast_2_access_key:apNortheast2AccessKey,ap_northeast_2_secret_key:apNortheast2SecretKey,ap_southeast_1_access_key:apSoutheast1AccessKey,ap_southeast_1_secret_key:apSoutheast1SecretKey,ap_southeast_2_access_key:apSoutheast2AccessKey,ap_southeast_2_secret_key:apSoutheast2SecretKey,ap_south_1_access_key:apSouth1AccessKey,ap_south_1_secret_key:apSouth1SecretKey,sa_east_1_access_key:saEast1AccessKey,sa_east_1_secret_key:saEast1SecretKey};return username?(password&&(modelAttr.password=password),"********************"!==emailPassword&&(modelAttr.email_password=emailPassword),this.setLoading("Saving settings..."),this.model.clear(),void this.model.save(modelAttr,{success:function(){window.sso=sso,this.close(!0),serverPort!==this.curServerPort?setTimeout(function(){window.location=window.location.protocol+"//"+window.location.hostname+("443"!==serverPort&&serverPort?":"+serverPort:"")+window.location.pathname;
},1e4):acmeDomain!==this.curAcmeDomain&&setTimeout(function(){window.location.reload()},1e4)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger","Failed to save settings, server error occurred.")}.bind(this)})):void this.setAlert("danger","Username can not be empty.",".username")},onClickInput:function(evt){this.$(evt.target).select()},onRemove:function(){ModalSettingsView.__super__.onRemove.call(this),this.triggerApplied||(window.subActive&&"dark"===window.theme?$("body").addClass("dark"):$("body").removeClass("dark"))}});return ModalSettingsView});var QRCode;!function(){function a(a){this.mode=c.MODE_8BIT_BYTE,this.data=a,this.parsedData=[];for(var b=[],d=0,e=this.data.length;e>d;d++){var f=this.data.charCodeAt(d);f>65536?(b[0]=240|(1835008&f)>>>18,b[1]=128|(258048&f)>>>12,b[2]=128|(4032&f)>>>6,b[3]=128|63&f):f>2048?(b[0]=224|(61440&f)>>>12,b[1]=128|(4032&f)>>>6,b[2]=128|63&f):f>128?(b[0]=192|(1984&f)>>>6,b[1]=128|63&f):b[0]=f,this.parsedData=this.parsedData.concat(b)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function b(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(a,b){if(void 0==a.length)throw new Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=new Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function j(a,b){this.totalCount=a,this.dataCount=b}function k(){this.buffer=[],this.length=0}function m(){return"undefined"!=typeof CanvasRenderingContext2D}function n(){var a=!1,b=navigator.userAgent;return/android/i.test(b)&&(a=!0,aMat=b.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(a=parseFloat(aMat[1]))),a}function r(a,b){for(var c=1,e=s(a),f=0,g=l.length;g>=f;f++){var h=0;switch(b){case d.L:h=l[f][0];break;case d.M:h=l[f][1];break;case d.Q:h=l[f][2];break;case d.H:h=l[f][3]}if(h>=e)break;c++}if(c>l.length)throw new Error("Too long data");return c}function s(a){var b=encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return b.length+(b.length!=a?3:0)}a.prototype={getLength:function(){return this.parsedData.length},write:function(a){for(var b=0,c=this.parsedData.length;c>b;b++)a.put(this.parsedData[b],8)}},b.prototype={addData:function(b){var c=new a(b);this.dataList.push(c),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw new Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[d][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,c),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=b.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=f.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){var d=a.createEmptyMovieClip(b,c),e=1;this.make();for(var f=0;f<this.modules.length;f++)for(var g=f*e,h=0;h<this.modules[f].length;h++){var i=h*e,j=this.modules[f][h];j&&(d.beginFill(0,100),d.moveTo(i,g),d.lineTo(i+e,g),d.lineTo(i+e,g+e),d.lineTo(i,g+e),d.endFill())}return d},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(var b=8;b<this.moduleCount-8;b++)null==this.modules[6][b]&&(this.modules[6][b]=0==b%2)},setupPositionAdjustPattern:function(){for(var a=f.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var g=-2;2>=g;g++)for(var h=-2;2>=h;h++)this.modules[d+g][e+h]=-2==g||2==g||-2==h||2==h||0==g&&0==h?!0:!1}},setupTypeNumber:function(a){for(var b=f.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},setupTypeInfo:function(a,b){for(var c=this.errorCorrectLevel<<3|b,d=f.getBCHTypeInfo(c),e=0;15>e;e++){var g=!a&&1==(1&d>>e);6>e?this.modules[e][8]=g:8>e?this.modules[e+1][8]=g:this.modules[this.moduleCount-15+e][8]=g}for(var e=0;15>e;e++){var g=!a&&1==(1&d>>e);8>e?this.modules[8][this.moduleCount-e-1]=g:9>e?this.modules[8][15-e-1+1]=g:this.modules[8][15-e-1]=g}this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,g=0,h=this.moduleCount-1;h>0;h-=2)for(6==h&&h--;;){for(var i=0;2>i;i++)if(null==this.modules[d][h-i]){var j=!1;g<a.length&&(j=1==(1&a[g]>>>e));var k=f.getMask(b,d,h-i);k&&(j=!j),this.modules[d][h-i]=j,e--,-1==e&&(g++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},b.PAD0=236,b.PAD1=17,b.createData=function(a,c,d){for(var e=j.getRSBlocks(a,c),g=new k,h=0;h<d.length;h++){var i=d[h];g.put(i.mode,4),g.put(i.getLength(),f.getLengthInBits(i.mode,a)),i.write(g)}for(var l=0,h=0;h<e.length;h++)l+=e[h].dataCount;if(g.getLengthInBits()>8*l)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*l+")");for(g.getLengthInBits()+4<=8*l&&g.put(0,4);0!=g.getLengthInBits()%8;)g.putBit(!1);for(;!(g.getLengthInBits()>=8*l)&&(g.put(b.PAD0,8),!(g.getLengthInBits()>=8*l));)g.put(b.PAD1,8);return b.createBytes(g,e)},b.createBytes=function(a,b){for(var c=0,d=0,e=0,g=new Array(b.length),h=new Array(b.length),j=0;j<b.length;j++){var k=b[j].dataCount,l=b[j].totalCount-k;d=Math.max(d,k),e=Math.max(e,l),g[j]=new Array(k);for(var m=0;m<g[j].length;m++)g[j][m]=255&a.buffer[m+c];c+=k;var n=f.getErrorCorrectPolynomial(l),o=new i(g[j],n.getLength()-1),p=o.mod(n);h[j]=new Array(n.getLength()-1);for(var m=0;m<h[j].length;m++){var q=m+p.getLength()-h[j].length;h[j][m]=q>=0?p.get(q):0}}for(var r=0,m=0;m<b.length;m++)r+=b[m].totalCount;for(var s=new Array(r),t=0,m=0;d>m;m++)for(var j=0;j<b.length;j++)m<g[j].length&&(s[t++]=g[j][m]);for(var m=0;e>m;m++)for(var j=0;j<b.length;j++)m<h[j].length&&(s[t++]=h[j][m]);return s};for(var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},e={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;f.getBCHDigit(b)-f.getBCHDigit(f.G15)>=0;)b^=f.G15<<f.getBCHDigit(b)-f.getBCHDigit(f.G15);return(a<<10|b)^f.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;f.getBCHDigit(b)-f.getBCHDigit(f.G18)>=0;)b^=f.G18<<f.getBCHDigit(b)-f.getBCHDigit(f.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return f.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case e.PATTERN000:return 0==(b+c)%2;case e.PATTERN001:return 0==b%2;case e.PATTERN010:return 0==c%3;case e.PATTERN011:return 0==(b+c)%3;case e.PATTERN100:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case e.PATTERN101:return 0==b*c%2+b*c%3;case e.PATTERN110:return 0==(b*c%2+b*c%3)%2;case e.PATTERN111:return 0==(b*c%3+(b+c)%2)%2;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new i([1],0),c=0;a>c;c++)b=b.multiply(new i([1,g.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(27>b)switch(a){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else{if(!(41>b))throw new Error("type:"+b);switch(a){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||(0!=h||0!=i)&&g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(var d=0;b-1>d;d++)for(var e=0;b-1>e;e++){var j=0;a.isDark(d,e)&&j++,a.isDark(d+1,e)&&j++,a.isDark(d,e+1)&&j++,a.isDark(d+1,e+1)&&j++,(0==j||4==j)&&(c+=3)}for(var d=0;b>d;d++)for(var e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;b>e;e++)for(var d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;b>e;e++)for(var d=0;b>d;d++)a.isDark(d,e)&&k++;var l=Math.abs(100*k/b/b-50)/5;return c+=10*l}},g={glog:function(a){if(1>a)throw new Error("glog("+a+")");return g.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return g.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},h=0;8>h;h++)g.EXP_TABLE[h]=1<<h;for(var h=8;256>h;h++)g.EXP_TABLE[h]=g.EXP_TABLE[h-4]^g.EXP_TABLE[h-5]^g.EXP_TABLE[h-6]^g.EXP_TABLE[h-8];for(var h=0;255>h;h++)g.LOG_TABLE[g.EXP_TABLE[h]]=h;i.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=new Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=g.gexp(g.glog(this.get(c))+g.glog(a.get(d)));return new i(b,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var b=g.glog(this.get(0))-g.glog(a.get(0)),c=new Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(var d=0;d<a.getLength();d++)c[d]^=g.gexp(g.glog(a.get(d))+b);return new i(c,0).mod(a)}},j.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],j.getRSBlocks=function(a,b){var c=j.getRsBlockTable(a,b);if(void 0==c)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=[],f=0;d>f;f++)for(var g=c[3*f+0],h=c[3*f+1],i=c[3*f+2],k=0;g>k;k++)e.push(new j(h,i));return e},j.getRsBlockTable=function(a,b){switch(b){case d.L:return j.RS_BLOCK_TABLE[4*(a-1)+0];case d.M:return j.RS_BLOCK_TABLE[4*(a-1)+1];case d.Q:return j.RS_BLOCK_TABLE[4*(a-1)+2];case d.H:return j.RS_BLOCK_TABLE[4*(a-1)+3];default:return}},k.prototype={get:function(a){var b=Math.floor(a/8);return 1==(1&this.buffer[b]>>>7-a%8)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(1&a>>>b-c-1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}};var l=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],o=function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){function g(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}var b=this._htOption,c=this._el,d=a.getModuleCount();Math.floor(b.width/d),Math.floor(b.height/d),this.clear();var h=g("svg",{viewBox:"0 0 "+String(d)+" "+String(d),width:"100%",height:"100%",fill:b.colorLight});h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),c.appendChild(h),h.appendChild(g("rect",{fill:b.colorDark,width:"1",height:"1",id:"template"}));for(var i=0;d>i;i++)for(var j=0;d>j;j++)if(a.isDark(i,j)){var k=g("use",{x:String(i),y:String(j)});k.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),h.appendChild(k)}},a.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},a}(),p="svg"===document.documentElement.tagName.toLowerCase(),q=p?o:m()?function(){function a(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function d(a,b){var c=this;if(c._fFail=b,c._fSuccess=a,null===c._bSupportDataURI){var d=document.createElement("img"),e=function(){c._bSupportDataURI=!1,c._fFail&&_fFail.call(c)},f=function(){c._bSupportDataURI=!0,c._fSuccess&&c._fSuccess.call(c)};return d.onabort=e,d.onerror=e,d.onload=f,void(d.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}c._bSupportDataURI===!0&&c._fSuccess?c._fSuccess.call(c):c._bSupportDataURI===!1&&c._fFail&&c._fFail.call(c)}if(this._android&&this._android<=2.1){var b=1/window.devicePixelRatio,c=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(a,d,e,f,g,h,i,j){if("nodeName"in a&&/img/i.test(a.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*b;else"undefined"==typeof j&&(arguments[1]*=b,arguments[2]*=b,arguments[3]*=b,arguments[4]*=b);c.apply(this,arguments)}}var e=function(a,b){this._bIsPainted=!1,this._android=n(),this._htOption=b,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=b.width,this._elCanvas.height=b.height,a.appendChild(this._elCanvas),this._el=a,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return e.prototype.draw=function(a){var b=this._elImage,c=this._oContext,d=this._htOption,e=a.getModuleCount(),f=d.width/e,g=d.height/e,h=Math.round(f),i=Math.round(g);b.style.display="none",this.clear();for(var j=0;e>j;j++)for(var k=0;e>k;k++){var l=a.isDark(j,k),m=k*f,n=j*g;c.strokeStyle=l?d.colorDark:d.colorLight,c.lineWidth=1,c.fillStyle=l?d.colorDark:d.colorLight,c.fillRect(m,n,f,g),c.strokeRect(Math.floor(m)+.5,Math.floor(n)+.5,h,i),c.strokeRect(Math.ceil(m)-.5,Math.ceil(n)-.5,h,i)}this._bIsPainted=!0},e.prototype.makeImage=function(){this._bIsPainted&&d.call(this,a)},e.prototype.isPainted=function(){return this._bIsPainted},e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},e.prototype.round=function(a){return a?Math.floor(1e3*a)/1e3:a},e}():function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){for(var b=this._htOption,c=this._el,d=a.getModuleCount(),e=Math.floor(b.width/d),f=Math.floor(b.height/d),g=['<table style="border:0;border-collapse:collapse;">'],h=0;d>h;h++){g.push("<tr>");for(var i=0;d>i;i++)g.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+e+"px;height:"+f+"px;background-color:"+(a.isDark(h,i)?b.colorDark:b.colorLight)+';"></td>');g.push("</tr>")}g.push("</table>"),c.innerHTML=g.join("");var j=c.childNodes[0],k=(b.width-j.offsetWidth)/2,l=(b.height-j.offsetHeight)/2;k>0&&l>0&&(j.style.margin=l+"px "+k+"px")},a.prototype.clear=function(){this._el.innerHTML=""},a}();QRCode=function(a,b){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:d.H},"string"==typeof b&&(b={text:b}),b)for(var c in b)this._htOption[c]=b[c];"string"==typeof a&&(a=document.getElementById(a)),this._android=n(),this._el=a,this._oQRCode=null,this._oDrawing=new q(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(a){this._oQRCode=new b(r(a,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(a),this._oQRCode.make(),this._el.title=a,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=d}(),define("qrcode",function(global){return function(){var ret;return ret||global.QRCode}}(this)),define("text!templates/modalSubscribe.html",[],function(){return'<div class="layout-horizontal">\n  <div class="subscribe-info layout-flex">\n    <ul class="subscribe-list premium-subscribe-list">\n      <li class="subscribe-title">\n        <h2>Premium</h2>\n        <div class="label label-success no-select">7 Day Trial</div>\n      </li>\n      <li data-toggle="tooltip" title="Run a single Pritunl instance">Single server</li>\n      <li data-toggle="tooltip" title="No limit on the number of users created or users connected">Unlimited users</li>\n      <li data-toggle="tooltip" title="No limit on the number of devices that each user has connected">Unlimited devices</li>\n      <li data-toggle="tooltip" title="Forward ports to vpn clients">Port forwarding</li>\n      <li data-toggle="tooltip" title="Create a gateway link to route traffic for a local network to a vpn client. Allowing the vpn clients to access the remote network that is available to the linked vpn client">Gateway links</li>\n      <li data-toggle="tooltip" title="Connect multiple gateway links to a Pritunl server and when a link goes down another available link will automatically be used">Failover gateway links</li>\n      <li data-toggle="tooltip" title="When clients connect with a Pritunl client, vpn setting changes such as port/protocol will be updated to allow the client to connect without needing to download a new configuration">Configuration sync</li>\n      <li data-toggle="tooltip" title="Easily connect Chromebook users with ChromeOS compatible vpn profiles">Chromebook support</li>\n      <li data-toggle="tooltip" title="Per-user option to bypass secondary authentication such as two-factor authentication. For server users that can\'t provide a two-factor code">Bypass secondary auth</li>\n      <li data-toggle="tooltip" title="Email users a link to download vpn profiles using a configured SMTP server">Email user keys</li>\n      <li data-toggle="tooltip" title="Change the interface to light or dark theme">Additional themes</li>\n    </ul>\n    <ul class="subscribe-list enterprise-plus-subscribe-list">\n      <li class="subscribe-title">\n        <h2>Enterprise+</h2>\n        <div class="label label-success no-select">7 Day Trial</div>\n      </li>\n      <li data-toggle="tooltip" title="All of the features included with a Premium subscription">All Premium features</li>\n      <li data-toggle="tooltip" title="All of the features included with a Enterprise subscription">All Enterprise features</li>\n      <li data-toggle="tooltip" title="No limit on the number of Pritunl link clients in a single Pritunl cluster">Unlimited links</li>\n      <li data-toggle="tooltip" title="Site-to-site links with IPsec using pritunl-link client. Link client does not require database connection">IPsec site-to-site links</li>\n      <li data-toggle="tooltip" title="Simple VPC peering and hybrid cloud with Pritunl link client">VPC peering</li>\n      <li data-toggle="tooltip" title="Link failover with automated routing table management and automated port forwarding for Unifi links">Automated link failover</li>\n    </ul>\n  </div>\n  <div class="subscribe-info layout-flex">\n    <ul class="subscribe-list enterprise-subscribe-list">\n      <li class="subscribe-title">\n        <h2>Enterprise</h2>\n        <div class="label label-success no-select">7 Day Trial</div>\n      </li>\n      <li data-toggle="tooltip" title="All of the features included with a Premium subscription">All Premium features</li>\n      <li data-toggle="tooltip" title="No limit on the number of Pritunl instances in a single Pritunl cluster">Unlimited servers</li>\n      <li data-toggle="tooltip" title="Single sign-on with SAML, Google Apps, Slack, Duo Security and Radius">Single sign-on</li>\n      <li data-toggle="tooltip" title="When a Pritunl instance fails the vpn servers running on the instance will automatically failover to another available Pritunl instance">Automatic failover</li>\n      <li data-toggle="tooltip" title="Replicate a vpn server accross multiple Pritunl instances to easily scale horizontally to handle more user connections">Replicated servers</li>\n      <li data-toggle="tooltip" title="Automatic VXLan management for replication across availability zones without layer 2 connectivity while still maintaining client-to-client communication">VXLan support</li>\n      <li data-toggle="tooltip" title="Integrate with AWS VPC to allow Pritunl to dynamically control the VPC routing table">AWS VPC integration</li>\n      <li data-toggle="tooltip" title="Easily create a site-to-site link between two Pritunl instances without any complicated configuration">Site-to-site VPN</li>\n      <li data-toggle="tooltip" title="Enable or disable NAT for server routes">Server route NAT control</li>\n      <li data-toggle="tooltip" title="Map connected vpn clients to dns domains such as user0.org0.vpn using a custom dns server that runs along with the Pritunl server">DNS mapping</li>\n      <li data-toggle="tooltip" title="Forward dns queries to a dns server on a remote network such as a consul server on an AWS VPC">DNS forwarding</li>\n      <li data-toggle="tooltip" title="Monitor server and user metrics with InfluxDB">Monitoring</li>\n      <li data-toggle="tooltip" title="Optional advanced auditing of user and administrator related events for improved security and intrusion detection">Advanced auditing</li>\n      <li data-toggle="tooltip" title="Create tap servers that bridge the vpn clients to the servers local network interface. Allowing vpn clients to get an ip address on the servers local network">Bridged VPN mode</li>\n      <li data-toggle="tooltip" title="Allow multiple administrators to manage the Pritunl server">Multiple administrators</li>\n      <li data-toggle="tooltip" title="Control over requiring users to set a pin before they are able to connect to a vpn server">User pin policy</li>\n      <li data-toggle="tooltip" title="Integrate Pritunl with other systems using plugins written in Python">Plugin system</li>\n      <li data-toggle="tooltip" title="Site-to-site links with IPsec using pritunl-link client. Link client does not require database connection">IPsec site-to-site links</li>\n      <li data-toggle="tooltip" title="Simple VPC peering and hybrid cloud with Pritunl link client">VPC peering</li>\n      <li data-toggle="tooltip" title="Link failover with automated routing table management and automated port forwarding for Unifi links">Automated link failover</li>\n      <li data-toggle="tooltip" title="Manage Pritunl cluster using RESTful API with support for multiple API keys">API access</li>\n      <li data-toggle="tooltip" title="Contact support for long term subscriptions">Long term subscriptions</li>\n    </ul>\n  </div>\n</div>\n<div class="subscribe-activate-form form-group">\n  <label>Enter License Key</label><br>\n  <textarea class="form-control" rows="7" cols="35" spellcheck="false"></textarea>\n</div>\n<div class="subscribe-buttons">\n  <button type="button" class="subscribe-premium btn btn-info btn-lg">Get Premium</button>\n  <button type="button" class="subscribe-enterprise btn btn-info btn-lg">Get Enterprise</button>\n  <button type="button" class="subscribe-enterprise-plus btn btn-info btn-lg">Get Enterprise+</button>\n  <button type="button" class="subscribe-activate btn btn-success btn-lg">Activate Subscription</button>\n  <button type="button" class="subscribe-cancel btn btn-danger btn-lg">Cancel</button>\n  <button type="button" class="subscribe-submit btn btn-success btn-lg">Submit</button>\n</div>\n'}),define("views/modalSubscribe",["jquery","underscore","backbone","qrcode","models/subscription","views/modal","views/alert","text!templates/modalSubscribe.html"],function($,_,Backbone,QRCode,SubscriptionModel,ModalView,AlertView,modalSubscribeTemplate){"use strict";var ModalSubscribeView=ModalView.extend({className:"subscribe-modal",template:_.template(modalSubscribeTemplate),title:"Upgrade Subscription",cancelText:null,okText:"Close",enterOk:!1,safeClose:!0,initialize:function(){ModalSubscribeView.__super__.initialize.call(this)},events:function(){return _.extend({"click .subscribe-premium":"onPremium","click .subscribe-enterprise":"onEnterprise","click .subscribe-enterprise-plus":"onEnterprisePlus","click .subscribe-activate":"onActivate","click .subscribe-submit":"onSubmit","click .subscribe-cancel":"onCancel"},ModalSubscribeView.__super__.events)},body:function(){return this.template()},postRender:function(){setTimeout(this.setupCheckout.bind(this),200),this.$("li").tooltip()},lock:function(){this.lockClose=!0,this.$(".ok").attr("disabled","disabled"),this.$(".subscribe-premium").attr("disabled","disabled"),this.$(".subscribe-enterprise").attr("disabled","disabled"),this.$(".subscribe-enterprise-plus").attr("disabled","disabled"),this.$(".subscribe-activate").attr("disabled","disabled")},unlock:function(noCheckout){this.lockClose=!1,this.$(".ok").removeAttr("disabled"),noCheckout||(this.$(".subscribe-premium").removeAttr("disabled"),this.$(".subscribe-enterprise").removeAttr("disabled"),this.$(".subscribe-enterprise-plus").removeAttr("disabled")),this.$(".subscribe-activate").removeAttr("disabled")},setupCheckout:function(){this.checkout=void 0,$.ajax({type:"GET",url:"https://app.pritunl.com/checkout",success:function(options){this.plans=options.plans,delete options.plans,this.plans.premium&&this.plans.premium.amount&&this.$(".subscribe-premium").text("Get Premium $"+this.plans.premium.amount/100+"/month"),this.plans.enterprise&&this.plans.enterprise.amount&&this.$(".subscribe-enterprise").text("Get Enterprise $"+this.plans.enterprise.amount/100+"/month"),this.plans.enterprise_plus&&this.plans.enterprise_plus.amount&&this.$(".subscribe-enterprise-plus").text("Get Enterprise+ $"+this.plans.enterprise_plus.amount/100+"/month"),this.configCheckout(options)}.bind(this),error:function(){this.setAlert("danger","Failed to load checkout data, please try again later."),this.checkout=!1}.bind(this)})},configCheckout:function(options){$.getCachedScript("https://checkout.stripe.com/checkout.js",{success:function(){var ordered=!1;this.checkout=window.StripeCheckout.configure(_.extend({closed:function(){setTimeout(function(){ordered||this.unlock()}.bind(this),250)}.bind(this),token:function(token){return window.demo?(this.unlock(!0),void this.onSubmit()):(ordered=!0,this.lock(),this.setLoading("Order processing, please wait...",!0,0),void $.ajax({type:"POST",url:"https://app.pritunl.com/subscription",contentType:"application/json",dataType:"json",data:JSON.stringify({plan:this.plan,card:token.id,email:token.email}),success:function(response){this.setAlert("success",response.msg),this.clearLoading(),this.unlock(!0)}.bind(this),error:function(response){response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger","Server error occurred, please try again later."),this.clearLoading(),this.unlock()}.bind(this)}))}.bind(this)},options))}.bind(this),error:function(){this.setAlert("danger","Failed to load upgrade checkout, please try again later."),this.checkout=!1}.bind(this)})},openCheckout:function(plan){void 0===this.checkout?setTimeout(function(){this.openCheckout(plan)}.bind(this),10):this.checkout===!1?this.unlock():this.checkout.open(this.plans[plan]);
},_onCheckout:function(plan){this.lock(),this.clearAlert(),this.plan=plan,this.checkout===!1&&this.setupCheckout(),this.openCheckout(plan)},onPremium:function(){this._onCheckout("premium")},onEnterprise:function(){this._onCheckout("enterprise")},onEnterprisePlus:function(){this._onCheckout("enterprise_plus")},onActivate:function(){this.activateActive=!0,this.$(".subscribe-info").slideUp(window.slideTime),this.$(".subscribe-activate-form").slideDown(window.slideTime),this.$(".subscribe-premium").hide(),this.$(".subscribe-enterprise").hide(),this.$(".subscribe-enterprise-plus").hide(),this.$(".subscribe-cancel").show(),this.$(".subscribe-activate").hide(),this.$(".subscribe-submit").show()},onSubmit:function(){if(!this.$(".subscribe-activate-form textarea").val())return void this.setAlert("danger","License can not be empty.",".subscribe-activate-form textarea");this.$(".subscribe-submit").attr("disabled","disabled");var model=new SubscriptionModel;model.save({license:this.$(".subscribe-activate-form textarea").val()},{success:function(){this.close(!0)}.bind(this),error:function(model,response){response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger","Server error occurred, please try again later."),this.$(".subscribe-submit").removeAttr("disabled")}.bind(this)})},onCancel:function(){this.$(".subscribe-activate-form").slideUp(window.slideTime),this.$(".subscribe-info").slideDown(window.slideTime),this.$(".subscribe-cancel").hide(),this.$(".subscribe-premium").show(),this.$(".subscribe-enterprise").show(),this.$(".subscribe-enterprise-plus").show(),this.$(".subscribe-submit").hide(),this.$(".subscribe-activate").show(),this.activateActive=!1}});return ModalSubscribeView}),define("text!templates/modalEnterprise.html",[],function(){return'<div class="enterprise-info form-group">\n  <ul class="enterprise-list">\n    <li class="status">\n      <span class="enterprise-label">Status:</span>\n      <span class="enterprise-item"></span>\n    </li>\n    <li class="plan">\n      <span class="enterprise-label">Plan:</span>\n      <span class="enterprise-item premium-plan">Premium</span>\n      <span class="enterprise-item enterprise-plan">Enterprise</span>\n      <span class="enterprise-item enterprise-plus-plan">Enterprise+</span>\n    </li>\n    <li class="quantity">\n      <span class="enterprise-label">Quantity:</span>\n      <span class="enterprise-item"></span>\n    </li>\n    <li class="amount">\n      <span class="enterprise-label">Amount:</span>\n      <span class="enterprise-item"></span>\n    </li>\n    <li class="renew">\n      <span class="enterprise-label">Renew:</span>\n      <span class="enterprise-item"></span>\n    </li>\n    <li class="trial-end">\n      <span class="enterprise-label">Trial Ends:</span>\n      <span class="enterprise-item"></span>\n    </li>\n    <li class="credit">\n      <span class="enterprise-label">Credit:</span>\n      <span class="enterprise-item"></span>\n    </li>\n  </ul>\n</div>\n<div class="enterprise-buttons">\n  <button type="button" class="enterprise-update btn btn-primary btn-lg">Update Payment Info</button>\n  <button type="button" class="enterprise-change enterprise-plus-switch btn btn-info btn-lg">Switch to Enterprise</button>\n  <button type="button" class="enterprise-change enterprise-switch btn btn-success btn-lg">Upgrade to Enterprise+</button>\n  <button type="button" class="enterprise-change premium-switch btn btn-info btn-lg">Switch to Enterprise</button>\n  <a type="button" class="enterprise-support btn btn-primary btn-lg" href="mailto:contact@pritunl.com">Contact Support</a>\n  <a type="button" class="enterprise-support-link btn btn-primary btn-lg" href="https://app.pritunl.com/support/<%= url_key %>" target="_blank">Live Slack Support</a>\n  <button type="button" class="enterprise-cancel btn btn-danger btn-lg first">Cancel Subscription</button>\n  <button type="button" class="enterprise-reactivate btn btn-success btn-lg first">Reactivate Subscription</button>\n  <button type="button" class="enterprise-remove btn btn-warning btn-lg">Remove License</button><br>\n</div>\n'}),define("views/modalEnterprise",["jquery","underscore","backbone","qrcode","views/modal","text!templates/modalEnterprise.html"],function($,_,Backbone,QRCode,ModalView,modalEnterpriseTemplate){"use strict";var ModalEnterpriseView=ModalView.extend({className:"enterprise-modal",template:_.template(modalEnterpriseTemplate),title:"Subscription Information",cancelText:null,okText:"Close",safeClose:!0,events:function(){return _.extend({"click .enterprise-update, .enterprise-reactivate":"onUpdate","click .enterprise-change":"onChange","click .enterprise-remove":"onRemoveLicense","click .enterprise-cancel":"onCancelLicense"},ModalEnterpriseView.__super__.events)},body:function(){return this.template(this.model.toJSON())},postRender:function(){this.update(),setTimeout(this.setupCheckout.bind(this),200)},update:function(){var statusData=this.model.getStatusData();this.checkoutPath=statusData[2],this.checkoutLoading=statusData[3],this.checkoutCompleted=statusData[4];var colors=["default-text","error-text","warning-text","success-text"];colors.splice(colors.indexOf(statusData[1]),1),this.$(".status .enterprise-item").text(statusData[0]),this.$(".status .enterprise-item").removeClass(colors.join(" ")),this.$(".status .enterprise-item").addClass(statusData[1]),"Inactive"===statusData[0]||"Canceled"===statusData[0]?(this.$(".enterprise-cancel").hide(),this.$(".enterprise-reactivate").show(),this.$(".enterprise-update").attr("disabled","disabled"),this.$(".renew .enterprise-label").text("Plan Ends:")):(this.$(".enterprise-reactivate").hide(),this.$(".enterprise-cancel").show(),this.$(".enterprise-update").removeAttr("disabled"),this.$(".renew .enterprise-label").text("Renew:")),this.model.get("quantity")&&this.$(".quantity .enterprise-item").text(this.model.get("quantity")),this.model.get("amount")?(this.$(".amount .enterprise-item").text("$"+(this.model.get("amount")/100).toFixed(2)),this.$(".amount").show()):this.$(".amount").hide(),this.model.get("period_end")&&"Inactive"!==statusData[0]?(this.$(".renew .enterprise-item").text(window.formatTime(this.model.get("period_end"),"date")),this.$(".renew").show()):this.$(".renew").hide(),this.model.get("trial_end")?this.$(".trial-end .enterprise-item").text(window.formatTime(this.model.get("trial_end"),"date")):this.$(".trial-end").hide(),this.model.get("balance")&&this.model.get("balance")<0?(this.$(".credit .enterprise-item").text("$"+(-1*this.model.get("balance")/100).toFixed(2)),this.$(".credit").show()):this.$(".credit").hide(),this.model.get("url_key")&&this.$(".enterprise-support-link").attr("href","https://app.pritunl.com/support/"+this.model.get("url_key"))},lock:function(){this.lockClose=!0,this.$(".ok").attr("disabled","disabled"),this.$(".enterprise-support-link").attr("disabled","disabled"),this.$(".enterprise-buttons button").attr("disabled","disabled")},unlock:function(){var notSel="";this.lockClose=!1,this.$(".ok").removeAttr("disabled");var statusData=this.model.getStatusData();("Inactive"===statusData[0]||"Canceled"===statusData[0])&&(notSel=":not(.enterprise-update)"),this.$(".enterprise-support-link").removeAttr("disabled"),this.$(".enterprise-buttons button"+notSel).removeAttr("disabled")},openCheckout:function(optionsPath){$.ajax({type:"GET",url:"https://app.pritunl.com/"+optionsPath,success:function(options){var plan,changed="checkout_change"===optionsPath;options.plans&&(options.plans[window.subPlan].plan&&(plan=options.plans[window.subPlan].plan,delete options.plans[window.subPlan].plan),_.extend(options,options.plans[window.subPlan]),delete options.plans),this.configCheckout(options,plan,changed)}.bind(this),error:function(){this.setAlert("danger","Failed to load checkout data, please try again later.")}.bind(this)})},configCheckout:function(options,plan,changed){$.getCachedScript("https://checkout.stripe.com/checkout.js",{success:function(){var ordered=!1,checkout=window.StripeCheckout.configure(_.extend({closed:function(){setTimeout(function(){ordered||this.unlock()}.bind(this),250)}.bind(this),token:function(token){ordered=!0,this.lock(),this.setLoading(this.checkoutLoading,!0,100),this.model.save({card:token.id,email:token.email,plan:plan},{success:function(){changed?this.setAlert("success","Subscription plan successfully changed. The payment or credit for the current month will be prorated into the payment for the next month."):this.setAlert("success",this.checkoutCompleted),this.clearLoading(),this.unlock(),this.update()}.bind(this),error:function(model,response){response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg),this.clearLoading(),this.unlock()}.bind(this)})}.bind(this)},options));checkout.open()}.bind(this),error:function(){this.setAlert("danger","Failed to load checkout, please try again later.")}.bind(this)})},setupCheckout:function(){$.getCachedScript("https://checkout.stripe.com/checkout.js")},_onCheckout:function(optionsPath){this.lock(),this.clearAlert(),this.openCheckout(optionsPath)},onChange:function(){this._onCheckout("checkout_change")},onUpdate:function(){this._onCheckout(this.checkoutPath)},onRemoveLicense:function(){return"Remove License"===this.$(".enterprise-remove").text()?(this.$(".enterprise-remove").text("Are you sure?"),void setTimeout(function(){this.$(".enterprise-remove").text("Remove License")},5e3)):(this.lock(),this.$(".enterprise-remove").text("Remove License"),void this.model.destroy({success:function(){this.unlock(),this.close(!0)}.bind(this),error:function(model,response){this.unlock(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)}))},onCancelLicense:function(){return"Cancel Subscription"===this.$(".enterprise-cancel").text()?(this.$(".enterprise-cancel").text("Are you sure?"),void setTimeout(function(){this.$(".enterprise-cancel").text("Cancel Subscription")},5e3)):(this.lock(),void this.model.save({cancel:!0},{success:function(){this.unlock(),this.setAlert("info","Subscription successfully canceled, subscription will stay active until the end of the current period."),this.update()}.bind(this),error:function(model,response){this.unlock(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)}))}});return ModalEnterpriseView}),define("text!templates/header.html",[],function(){return'<div class="navbar navbar-inverse no-select" role="navigation">\n  <div class="container">\n    <div class="navbar-header">\n      <a class="navbar-brand brand" href="#">pritunl</a>\n    </div>\n    <ul class="nav navbar-nav">\n      <li class="dashboard"><a href="#/dashboard">Dashboard</a></li>\n      <li class="admins"><a href="#/admins">Administrators</a></li>\n      <li class="users"><a href="#/users">Users</a></li>\n      <li class="servers"><a href="#/servers">Servers</a></li>\n      <li class="hosts"><a href="#/hosts">Hosts</a></li>\n      <li class="links"><a href="#/links">Links</a></li>\n    </ul>\n    <ul class="nav navbar-nav navbar-right">\n      <li class="enterprise-upgrade"><a><span class="label label-default">Upgrade to Enterprise!</span></a></li>\n      <li class="enterprise-plus-upgrade"><a><span class="label label-success">Upgrade to Enterprise+</span></a></li>\n      <li class="enterprise-settings"><a>Subscription</a></li>\n      <li class="logs"><a>Logs</a></li>\n      <li class="change-password"><a>Settings</a></li>\n      <li class="logout"><a href="#/logout">Logout</a></li>\n    </ul>\n  </div>\n</div>\n'}),define("views/header",["jquery","underscore","backbone","models/settings","models/subscription","models/user","collections/userAudit","views/alert","views/modalLogs","views/modalSettings","views/modalSubscribe","views/modalEnterprise","text!templates/header.html"],function($,_,Backbone,SettingsModel,SubscriptionModel,UserModel,UserAuditCollection,AlertView,ModalLogsView,ModalSettingsView,ModalSubscribeView,ModalEnterpriseView,headerTemplate){"use strict";var HeaderView=Backbone.View.extend({tagName:"header",template:_.template(headerTemplate),events:{"click .enterprise-upgrade a":"onEnterprise","click .enterprise-plus-upgrade a":"onEnterprise","click .enterprise-settings a":"onEnterprise","click .logs a":"openLogs","click .change-password a":"openSettings"},initialize:function(){this.model=new SettingsModel,this.listenTo(window.events,"settings_updated",this.update),this.update(),HeaderView.__super__.initialize.call(this)},render:function(){return this.$el.html(this.template()),this},update:function(){this.model.fetch({success:function(model){"all"===model.get("auditing")?this.$(".audit-admin a").css("display","block"):this.$(".audit-admin a").hide()}.bind(this),error:function(){var alertView=new AlertView({type:"danger",message:"Failed to load settings data, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)})},onEnterprise:function(){if(!this.onEnterpriseLock){this.onEnterpriseLock=!0;var model=new SubscriptionModel;model.fetch({success:function(model){model.get("plan")?this.enterpriseSettings(model):this.enterpriseUpgrade(),this.onEnterpriseLock=!1}.bind(this),error:function(){var alertView=new AlertView({type:"danger",message:"Failed to load subscription information, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.onEnterpriseLock=!1}.bind(this)})}},enterpriseUpgrade:function(){var modal=new ModalSubscribeView;this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"License activated.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},enterpriseSettings:function(model){var modal=new ModalEnterpriseView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"danger",message:"License removed.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},openLogs:function(){var modal=new ModalLogsView;this.addView(modal)},openSettings:function(){var model=new SettingsModel;model.fetch({success:function(){var modal=new ModalSettingsView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully saved settings.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)}.bind(this),error:function(){var alertView=new AlertView({type:"danger",message:"Failed to load settings data, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)})}});return HeaderView}),define("models/authSession",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var AuthSessionModel=Backbone.Model.extend({defaults:{authenticated:null,username:null,password:null,"default":null},url:function(){return"/auth/session"}});return AuthSessionModel}),define("views/loginBackdrop",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LoginBackdropView=Backbone.View.extend({className:"login-backdrop"});return LoginBackdropView}),define("text!templates/login.html",[],function(){return'<div class="login-box">\n  <h2 class="login-header navbar-inverse">pritunl</h2>\n  <h2 class="login-header navbar-inverse premium-header">pritunl premium</h2>\n  <h2 class="login-header navbar-inverse enterprise-header">pritunl enterprise</h2>\n  <form class="login-form">\n    <input id="username" type="text" name="username" class="username form-control" placeholder="Username" autocapitalize="off" autofocus>\n    <input id="password" type="password" name="password" class="password form-control" placeholder="Password">\n    <input class="login-button btn btn-lg btn-primary btn-block" type="submit" value="Sign in">\n    <a class="btn btn-lg btn-primary sso-login sso-login-google" type="button" href="/sso/request"><img alt="google" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABPCAYAAAB8kULjAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wkQEjEXKJnE3wAADTNJREFUeNrlnHt41NWZxz/nzEwmIWRIiBJYaV1vuD6tj2sSgq5lIgStJjN4DUr1Uezj7rZ1d7uopReo1ordPk+r9maLXReC2xJuXpNALYSQAZFLaK0+ypZVF6VoAgHCTMhlZn6/s3+cE6Sa28z8JuTyPs/8NfM7v3O+85738j3vewRDIJFrC+m0XAAowFcbcgH5wN8ClwAXA+cDk80nF8gEMgAJ2MBJ4DhwBDgEvAfsB94E3geOhQOlcf0GiMbifCb0x7SvTaRz8JayQsCFAibUhrzAZ4ArgRlAIXAekAOMS3IuHUDYAPg6sBN4DXg/EvR3KQW2gilb9owsAFvKZmilEePx1WwoAK4GKoCrgKlGs9IhUaAZeBXYADTsu2L2oXPy4wgUk7Y0DW8AP5pTjFQCX21IABcCtwA3AZcCWQytdAP7gBeA54D/CQf8FgIKNu8ZXgAeCl6Hu+MoBZv30NnVeREwH7jd2DbJmRUF/B+wDngW2BcO+lWHV3FeXdOZB/Dw7BIUNr66bRMNaPcZxyAYfrIfeBp4tr3C32qjKEhxW6e0yJay6T0e9Urgm8A1gJfhLTGgHvgREAoH/fFUtnRSAB6ZU4StJL7aUB7wT8C/GOcwkqQZ+AXwq3DAfwwbChoSB1Imo3WWLfHVhi4wE/j+CAQPE28+DDztqw1dglLp18CWWUVELTjrle1XmC1w1TC1dYlKCLg7KyvrQKIPugcN3uzp5NQ2CiHE9cCPjaMYDRIFmoBjyTw8KAAPz5lOTk1IADcCT5gUbLSA9yvg0XCFP5yWLfzhnCLyarYLk0n8fBSBFzPgPRwJlrZN2rw7qUEGdCLjLA/ATODxUQbeMuB74RTAG1ADTZx3CbASmD5KwIubYHpJpMLfNilFoqFPG9g8uwRfbeNZwNIzAJ5l7JNldonHfJwA7xngoUiwNGXw+gTwsP9Kcuq2uIGvAcEhMOSHgHeBtw01dRhoN995DBExCU1/XQpMA6YkEkWYP6MKWBIO+I8V1DtDKPQ6ATurG+Bak2F40gCaAg4AW4FNwF7gL0B3uNxv9WqZhSDn5a1SCDEO+CxQYuY4ywTFA4G3Evh2OOg/6hR4vdpAY/emAKsBfxqAexuoBp4H3glX+GN6FmYqLkXB7/f0EocWoYRAKIkQCiXAVxPyApcBdwKVfQBpGRZmUTgws7Wg3llO8FMAdnZ2SmAx8FCCW2TAWBz4b2DZiWDFu0K1AwolBZM3Je4FW2YXm+kLfHWNbkNoPAhcx8eErWXe+Y1wub81mVw3oS189O7PAXweuMdB8BSwHXgUaAgHSuMCKKjfndKgPTSU+gO0VvjjllDbJtRuewv4CrAQmAj8Flh0IljaWlCUAw3O2yLxCe3LMPHefQ7luDGziIfby2d+gJCcvWU36ZAjZTOwscmpaXQLIW42kcOP2itmHp548jiuXe+m5b2nQIpu9hL/h+MlwHohxDmkziR3m8zlByeCVx8HxeTN6QHvdPloThHxSbnkP1PjjsydFT/h9TKtLpS2950CsKOjw21Ign9FHyMqIYQ7SU2Mmpz5sXCgtN3T0c3E1/40ZEFkS1kxtrDxWHHOangjre8SAPGN2URLj1yMPsk6/zQQlBAiI0EQLROsLgoHZ4YLNjcxmkUCCH3ofa2Jr3okA3AppbpMBD9YqQe+Hw76Rz14pwDsnt2cA5T34nndQIYBMTaI8T4AHmkLzvwwpjyMBXEv/gKgjx8L+/iNCxinlOoGYkKIrD62dBz4JbAzw3aRv2XHmABQLn0yE+AL6FqV/jQ1C1BKqXbjZD4pu4CVJwKldv6WXYwVkZ2fO5aFrlVxDeL32YBXKRU2YcrpIcvy57+c1Ty5fjdjSaRhOS5L4JkMIFspFUEX9wC8AWwoaylirInb2L+CBJ/zAHkGxC4hxItAy+Qtex2b2BcfaSPuTjYMHVoAL0WXmCUqLnQd33tKqY0nAlcrJyf24iKvMH/uBHqK/oaXCKDZja6iSiXmeB94Z4rzOa4H+CGa71PDVAFXuUn9oGgnmj1Oxz88HvAN4x18kURT48lKFHhT7shPl4YohrdMlcBZKQxwAjiQOaeTMSpnyxS3SDuaaR6rMk6SWj1fJ9A2hgHMlKRG3SfK1Iw2ETJFACzGuEijRUmrMKOjPjBZsSW6USUVALPHMIBhiS6jSFayDRkxVuWIRBdbJysTgKntW91jFcBDEt20l3QcBPydGrsa+L5EV0VFU8hXi10l4XT1hgxnBxUH/izR7aKRFAYqAs4pWj0vXZN0+uNU6NUOvOlGtz99RP9nIn0uUCnlA670uGPvOQxeDHgM+E8HSQWBruS60QkHAuwTHR0dmWaSdyaahRhGOlcptUEIcUdp3d0nm+atd2Sl/iXH8WRmOLqJa++X2cBLQJkDw70A3OX27JrYFZtx7DV0o+Cg3KkBLo5mpD1CCD9wlR0Tv3dqsaGleY6q85wfdoIuyix0IoAGdgohTkrPrC7QXd6tg0ndlFInjB3J5WMmOw+4d9uNVTkl1TcNO2t/7dIINV/HDdxs5pqqtAHbb/qJUD0VWPuBgTj5qG3bRwGPUiq3Fw9ZDgSi2QUUrqocVgCaEthLgbkODfk68PbGb3l1aUdW44Ungd/1RSwopU4qpSJCiAlKqXFCiL6ykgdeLXv8AuEaPtHHnB+E2fCAKwP4R/SdDamKBWxEk8kawPaMjwBeAd75NHaqzRAOuYC3D/B6pBD4ZiiwIqewet4ZB2/W0pPYygu6j3meQ3HlX4CNgZ/Y6hSAOWUK9Onay6eFDHGl1HFAKqUmMrjKBQHcBfxbKLg8Y/rq284ogC4Jdffb56FrvvMdGrYO2F//bc2hnKpCde/Is9CV+QeBqNG8cUopnxhA7T4hXmCREOKrW4PLPcXVt54R8Moea6dmocxH9zNf4dCwzcBvAk/YsV5TpY6ODrdS6lHgn9FHiqmcFx8HHgGWldYs6HbHPey8c1XagStf2kW3tKhdKH0GvPtwrmB+GfD1rKysU6nvX9VBu3bkxYHfmJAm1QK/PHRl/ncbg1Vnx9xRilan1zsXrbmF1qnfpe5+V4/mfdVB8A4C/xV83I72m6xHIhEppfyGWbxT/WkvAUsraypfP6zGgxA03b7GMeBK1lZiK3DHvWy+Ydk0l8v1EHCbg+BZwH8IIb6XmZlp9Qtg8ZpbaQysnAysQpdVOCX/CzwFrCmtuasZJAhomrcuad84fW0lyhaAojFY5QNuABYqpT7rcrnG49wNIq8BtwefsD/YvDh7YLpo+nPz2XrdM2XoLp8pDoIYQxdi/hZd0H6wtOYe1eP4BbDn9nV9PjxjbSW2DUroR5QlCN1YlYu+WupuE65kAzGlVMTlcmWR+o1Jx4Avly1rf2nHwrM/9WWvKh4Lt4NuBPwF+mYLp+668qCrYa9AdxRtbAyuqDeU2nF/zYJocT920rKgcW6VRBO556N7+eai27zGn/4eIUSuZVkRKWVUCOFLMgaMocuWN2ZHchIjLIvX3EJj4Nk8A+KX0mj720wM+gbwFrpQ/TD6uruYcXSZxilNBi4C/h596cUU+m8IUkqpsJTSFkJMIPHmoZeAe8ufjLc2fCdBAAGKqytpnFt1IbDCaM7QpK4avKhhPYTZKVlG8xIWpVS7ECIupRyfgGNpAhYEnrDfql+c3W/m0H9osPY2QhXLi4HlJiEfqdINtEspcwZhkvYD917/lNi29cHMfn84oEq7u7u5quHOJuAB40lHqngBn2VZbfx1gfwn5QBwP7Dd3TFwa8ygDOv06kq6ur3srHz6GmMTp41gIOPGQ3t7MQkHgH8HXg48aav67wxcMzAoo7pn/joyvFEu3l6+CX2Pwp9GMIBuIcQEy7Lipl2jhzzZB3xNCPFy+U8HB96gNfDjVOlW4lKwo7zqcnRf8awRDKRSSkWklEoI8Sbw4HVPRXdldLvZtHjw1SoJx0Ylhm1uuKHqPOBbwB2M3PqYTqXUSinljyuetN6VSlK/JLGlJJVEXba+EnccQsGqccACYBFw7ggD7yD6Brqq4M8jEVc8l01LMhMeJCWGtnh1JVsDK6QQosR4rqAJeoe11qFJ0Z8Br5bWLLCb+kkf0wogQGH1PKRQNAarJqCvHvkKcDln/vLZ3hiVN4CnlFLrrq69J6yEYu9tqZ1jO3b6U7y6EhXPIHTTr881VNJ8E3i7hglwq4D1X3zljgNd3Rk0zV/ryOCOHp8Vr7sZLBeuzE62XLPmXPQd0regmxlzhhi4iAm3XgCen1Wz4IANWJbkj3c4x0Wm5fyxuHoeCIVUkoa5y/PRFQE3GPbk3GRz2kFIh3EO29GXb+8urV1wtOd61L0p2LohBfBU3Lj6VoR5xdbACrcQYgpQbOiny/m4mTA7ia1uGdLhmEkxXwd2AH8AmktrFkR1sAd7569L2xqH7AS8uLry1Nvebq3jyD1H8oBzDIjTgAuAvzGU1UTjzb1mjrbZkkeBD9FnsweBP6O5xJbK577UdjjDcARCMNVn8+L169O+rv8HpBV28XTXnVsAAAAASUVORK5CYII="> Sign in with Google</a>\n    <a class="btn btn-lg btn-primary sso-login sso-login-duo" type="button" href="/login#duo"><img alt="duo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAAjCAYAAAB1nT9JAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3wkQEjgP6jfnwAAAA/1JREFUaN7d23uIVVUUx/HPGicNosgeZphgYBFl+cdY1B8aYQ+j/snEDOlhIL0gKlKD6J9KsUAKih5GSFRiWJKIikpilvmEpJQsk0pU/MNSfIT5mNUf9wzIYOg4M/fuccHhnnvvYa/f2d+91tlnsXdk5kYM1Xk7jP34A5vxLRZHxO6ONpSZX+D+Tuq5Ev9UOjpjyyPiyTO4h8twN0bgOgzC+TgHB7ATv+B7LIuInzrSfrOus3Orox9uwgQcz8xleDMilqq/Rb3byMw78BzuRK//uaxvdQxpG6CZuQnv4OOIOHwqP03d3HG9MApLMnNlZg51llpm3pCZ32BpFWm9OtjEELyPXzNzbKPBnWjDsS4zp2RmnEXAIjMnY32VFjtrA/F5Zs7NzAtLAAe9MR2zM7PPWQCtNz7B69W9daWNwarMHFQCuDYbh696Mrwqa3yI8d3o5lqsPBm8pgbe+yh80IMDbhoeroOfgVicmReUAg4eycyHemC0PYgX6+jyGrxbEjh4KzP79SBol+LtBrgen5n3lgTuIrzcgwLuJVzcIN8zMrO5FHAwsSdEXWZegscbKOHqarZZDLg+eKwHRNsEtepQI+2JksDR+dpkPWxMARqGZ2b/ksC1VKmo1DTZF8MKkNKEkSWBC7QUHG0tBWWoYU2Fdc7ggsGVpG1wM77E2kIEbS8Y3HbMLETL780R8WqJj5TSBEXEIiwqRU9zZj6F/oXoWRERy3GowMnJrRhZiJwdzbhLrRZWgm2pPvcUmAUuxwOFaFle2uSk7Rm3tUBwf5bUTyWBS2yqztcXCG4zWgvRsqkkcJsiYl91vrG0dBkR+/FjAVJasbokcEtO6KRWzC0w6pYWoGFDROwpBdwRzGv328wCXwvm4d8Ga5hNOSWcORHxV7vUtLGk96ZK017MaeSLd1vUlwBun9p6wpPZJBwtLOrew94G+Z4eEcdLAfda+2g7YYT/jFcKjLpGVJvmR8SKti+NBjc7Ihac4pppWFwYvIX4rI4ut7UfwI0E9zWmnkYntWIs1hWWMqfW6Rm8CxMj4mAJ4Bbg2Yg4dpoj/CBux/KCou44JmN+N7rZivERsbP9H/UGdxRvYFJEHOlgRx1Qq6vOKKWCERFHMUVtWf2RLm5+IcZFxK6T/VlPcGsxOiI+iog8w446FhEvqG2u+KEQeBkRszAaa7qgyZ14JiKeb58eT7Tmbr6v4/gOsyJidRd21qrMbMF9eBq36Zq9cJ3RtFVtZfbNeLQaXB3ZarUFn1azx1NGb1eCO4yD2IHf1ArFKyPi7+4a6VUlY15mDsA9uAXXY0BVdemKykt2UNcarKkWF43AjbgKV+A8tR2ph7BbbffuBqyKiG0d8fMfeH43oVcTpHAAAAAASUVORK5CYII="> Sign in with Duo</a>\n  </form>\n</div>\n'}),define("views/login",["jquery","underscore","backbone","models/settings","models/authSession","views/alert","views/loginBackdrop","views/modalSettings","text!templates/login.html"],function($,_,Backbone,SettingsModel,AuthSessionModel,AlertView,LoginBackdropView,ModalSettingsView,loginTemplate){"use strict";var LoginView=Backbone.View.extend({className:"login",template:_.template(loginTemplate),events:{"submit .login-form":"login"},initialize:function(options){return window.loginViewLock?(this.active=!1,void this.destroy()):(window.loginViewLock=!0,this.active=!0,this.alert=options.alert,this.callback=options.callback,this.backdrop=new LoginBackdropView,void this.addView(this.backdrop))},deinitialize:function(){this.active&&($("header").removeClass("blur"),$("#app").removeClass("blur"))},render:function(){return this.$el.html(this.template()),$("header").addClass("blur"),$("#app").addClass("blur"),$("body").append(this.backdrop.render().el),this.alert&&this.setAlert(this.alert),"google"===window.sso||"google_duo"===window.sso?this.$("form").addClass("sso-google"):"duo"===window.sso&&this.$("form").addClass("sso-duo"),window.demo&&this.$(".username, .password").val("demo"),this},setAlert:function(message){return this.alertView?void(this.alertView.message!==message?(this.alertView.close(function(){this.setAlert(message)}.bind(this)),this.alertView=null):this.alertView.flash()):(this.alertView=new AlertView({type:"danger",message:message,force:!0}),this.$(".login-form").prepend(this.alertView.render().el),this.addView(this.alertView),void this.$("input").addClass("has-warning"))},openSettings:function(){var model=new SettingsModel;model.fetch({success:function(){var modal=new ModalSettingsView({initial:!0,model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully saved settings.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)}.bind(this),error:function(){var alertView=new AlertView({type:"danger",message:"Failed to load authentication data, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)})},login:function(){this.$(".login-button").attr("disabled","disabled");var username=this.$(".username").val(),password=this.$(".password").val(),authSessionModel=new AuthSessionModel;return authSessionModel.save({username:username,password:password},{success:function(model){this.callback&&this.callback(),this.backdrop.$el.fadeOut(400),this.$(".login-box").animate({top:"-50%"},{duration:400,complete:function(){this.destroy(),model.get("default")&&this.openSettings(),window.loginViewLock=!1}.bind(this)}),$("header").removeClass("blur"),$("#app").removeClass("blur")}.bind(this),error:function(model,response){this.$(".login-button").removeAttr("disabled"),response.responseJSON&&response.responseJSON.error_msg?this.setAlert(response.responseJSON.error_msg):this.setAlert("Server error occurred.")}.bind(this)}),!1}});return LoginView}),define("models/status",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var StatusModel=Backbone.Model.extend({defaults:{org_count:null,users_online:null,user_count:null,servers_online:null,server_count:null,server_version:null,public_ip:null,local_networks:null,notification:null},url:function(){return"/status"}});return StatusModel}),define("text!templates/modalNotification.html",[],function(){return'<div class="notification">\n  <%- notification %>\n</div>\n'}),define("views/modalNotification",["jquery","underscore","backbone","models/org","views/modal","text!templates/modalNotification.html"],function($,_,Backbone,OrgModel,ModalView,modalNotificationTemplate){"use strict";var ModalNotificationView=ModalView.extend({className:"notification-modal",template:_.template(modalNotificationTemplate),title:"Update Notification",okText:"Close",cancelText:null,body:function(){return this.template(this.model.toJSON())}});return ModalNotificationView}),define("text!templates/dashboardStatus.html",[],function(){return'<table>\n  <tbody>\n    <tr>\n      <td class="status-item orgs-status">\n        <h3 class="status-title title">\n          <span class="status-icon glyphicon glyphicon-tower"></span>\n          <span>Organizations</span>\n        </h3>\n        <div class="status-text title">\n          <span class="status-num">-/-</span>\n          <span>available</span>\n        </div>\n      </td>\n      <td class="status-item users-status">\n        <h3 class="status-title title">\n          <span class="status-icon glyphicon glyphicon-user"></span>\n          <span>Users</span>\n        </h3>\n        <div class="status-text title">\n          <span class="status-num">-/-</span>\n          <span>online</span>\n        </div>\n      </td>\n      <td class="status-item last servers-status">\n        <h3 class="status-title title">\n          <span class="status-icon glyphicon glyphicon-cloud"></span>\n          <span>Servers</span>\n        </h3>\n        <div class="status-text title">\n          <span class="status-num">-/-</span>\n          <span>online</span>\n        </div>\n      </td>\n      <td class="status-item last hosts-status">\n        <h3 class="status-title title">\n          <span class="status-icon glyphicon glyphicon-globe"></span>\n          <span>Hosts</span>\n        </h3>\n        <div class="status-text title">\n          <span class="status-num">-/-</span>\n          <span>online</span>\n        </div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n<div class="server-info"></div>\n'}),define("views/dashboardStatus",["jquery","underscore","backbone","models/status","views/alert","views/modalNotification","text!templates/dashboardStatus.html"],function($,_,Backbone,StatusModel,AlertView,ModalNotificationView,dashboardStatusTemplate){"use strict";var DashboardStatusView=Backbone.View.extend({className:"status-container",template:_.template(dashboardStatusTemplate),initialize:function(){this.notified=!1,this.model=new StatusModel,this.listenTo(window.events,"users_updated",this.update),this.listenTo(window.events,"organizations_updated",this.update),this.listenTo(window.events,"servers_updated",this.update),this.listenTo(window.events,"hosts_updated",this.update)},onNotification:function(){if(!this.notified){this.notified=!0;var modal=new ModalNotificationView({model:this.model.clone()});this.addView(modal)}},update:function(){this.model.fetch({error:function(){this.$(".orgs-status .status-num").text("-/-"),this.$(".users-status .status-num").text("-/-"),this.$(".servers-status .status-num").text("-/-"),this.$(".hosts-status .status-num").text("-/-");var selectors=".orgs-status .status-num, .users-status .status-num, .servers-status .status-num.hosts-status .status-num";this.$(selectors).removeClass("default-text warning-text success-text"),this.$(selectors).addClass("error-text");var alertView=new AlertView({type:"danger",message:"Failed to load server status, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this),success:function(){var i,num,totalNum;this.model.get("notification")&&this.onNotification(),num=this.model.get("org_count"),0===num?(num="-",this.$(".orgs-status .status-num").removeClass("error-text warning-text success-text"),this.$(".orgs-status .status-num").addClass("default-text")):(this.$(".orgs-status .status-num").removeClass("default-text error-text warning-text"),this.$(".orgs-status .status-num").addClass("success-text")),this.$(".orgs-status .status-num").text(num+"/"+num),num=this.model.get("users_online"),totalNum=this.model.get("user_count"),0===num?(0===totalNum&&(num="-",totalNum="-"),this.$(".users-status .status-num").removeClass("error-text warning-text success-text"),this.$(".users-status .status-num").addClass("default-text")):(this.$(".users-status .status-num").removeClass("default-text error-text warning-text"),this.$(".users-status .status-num").addClass("success-text")),this.$(".users-status .status-num").text(num+"/"+totalNum);var type,types=["server","host"];for(i=0;i<types.length;i++)type=types[i],num=this.model.get(type+"s_online"),totalNum=this.model.get(type+"_count"),0===totalNum?(num="-",totalNum="-",this.$("."+type+"s-status .status-num").removeClass("error-text warning-text success-text"),this.$("."+type+"s-status .status-num").addClass("default-text")):0===num?(this.$("."+type+"s-status .status-num").removeClass("default-text warning-text success-text"),this.$("."+type+"s-status .status-num").addClass("error-text")):totalNum>num?(this.$("."+type+"s-status .status-num").removeClass("default-text error-text success-text"),this.$("."+type+"s-status .status-num").addClass("warning-text")):(this.$("."+type+"s-status .status-num").removeClass("default-text error-text warning-text"),this.$("."+type+"s-status .status-num").addClass("success-text")),this.$("."+type+"s-status .status-num").text(num+"/"+totalNum);var serverInfo="";this.model.get("server_version")&&(serverInfo+="v"+this.model.get("server_version")),this.model.get("current_host")&&(serverInfo&&(serverInfo+=" "),serverInfo+=this.model.get("current_host").substr(0,6)),this.$(".server-info").text(serverInfo);
}.bind(this)})},render:function(){return this.$el.html(this.template()),this.update(),this}});return DashboardStatusView}),define("models/log",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LogModel=Backbone.Model.extend({defaults:{id:null,timestamp:null,message:null},url:function(){var url="/log";return this.get("id")&&(url+="/"+this.get("id")),url}});return LogModel}),define("collections/log",["jquery","underscore","backbone","models/log"],function($,_,Backbone,LogModel){"use strict";var LogCollection=Backbone.Collection.extend({model:LogModel,url:function(){return"/log"}});return LogCollection}),define("views/list",["jquery","underscore","backbone","views/alert"],function($,_,Backbone,AlertView){"use strict";var MAX_SLIDE_COUNT=5,ListView=Backbone.View.extend({listContainer:null,listErrorMsg:"Failed to load list, server error occurred.",initialize:function(){this.listenTo(this.collection,"reset",this._onReset),this.views=[]},render:function(){return this.$el.html(this.template()),this.update(),this},_showItem:function(view,slide,complete){view.visible=!0,slide===!1?(view.$el.show(),complete&&complete(view)):view.$el.slideDown({duration:window.slideTime,complete:function(){complete&&complete(view)}})},_hideItem:function(view,slide,complete){view.visible=!1,slide===!1?(view.$el.hide(),complete&&complete(view)):view.$el.slideUp({duration:window.slideTime,complete:function(){complete&&complete(view)}})},_removeItem:function(view,slide){this._hideItem(view,slide,this.removeItem.bind(this))},_onReset:function(collection,options){if(!this.ignore(options)){var i,newIndex,modelView,delSlide,addSlide,passDel,passAdd,currentModels=[],newModels=[],curVisible=0,newVisible=0,delTotal=0,addTotal=0,delSlideCount=0,addSlideCount=0,passDelCount=0,passAddCount=0,slide=this.views.length?!0:!1,scroll=$(document).scrollTop();for(i=0;i<collection.models.length;i++)newModels.push(collection.models[i].get("id"));for(i=0;i<this.views.length;i++)currentModels.push(this.views[i].model.get("id"));for(i=0;i<this.views.length;i++)this.views[i].visible&&(curVisible+=1,(-1===newModels.indexOf(this.views[i].model.get("id"))||this.views[i].model.get("hidden")&&!this.showHidden)&&(delTotal+=1));for(i=0;i<collection.models.length;i++)(!collection.models[i].get("hidden")||this.showHidden)&&(newVisible+=1),-1===currentModels.indexOf(collection.models[i].get("id"))&&(!collection.models[i].get("hidden")||this.showHidden)&&(addTotal+=1);for(delSlide=Math.max(0,curVisible-newVisible),addSlide=Math.max(0,newVisible-curVisible),passDel=0,delSlide&&(passDel=Math.max(0,delTotal-delSlide)),passAdd=0,addSlide&&(passAdd=Math.max(0,addTotal-addSlide)),delSlide=Math.min(MAX_SLIDE_COUNT,delSlide),addSlide=Math.min(MAX_SLIDE_COUNT,addSlide),i=0;i<this.views.length;i++)-1===newModels.indexOf(this.views[i].model.get("id"))&&(!slide||delSlideCount>=delSlide||passDel>passDelCount?(this._removeItem(this.views[i],!1),passDelCount+=1):(this._removeItem(this.views[i],!0),delSlideCount+=1),this.views.splice(i,1),i-=1);for(i=0;i<collection.models.length;i++)-1===currentModels.indexOf(collection.models[i].get("id"))&&(modelView=this.buildItem(collection.models[i]),this.addView(modelView),this.views.splice(i,0,modelView),modelView.render().$el.hide(),0===i?this.listContainer?this.$(this.listContainer).prepend(modelView.el):this.$el.prepend(modelView.el):this.views[i-1].$el.after(modelView.el),(!modelView.model.get("hidden")||this.showHidden)&&(!slide||addSlideCount>=addSlide||passAdd>passAddCount?(this._showItem(modelView,!1),passAddCount+=1):(this._showItem(modelView,!0),addSlideCount+=1)));for(currentModels=[],i=0;i<this.views.length;i++)currentModels.push(this.views[i].model.get("id"));for(;;){for(i=0;i<currentModels.length;i++)if(newIndex=newModels.indexOf(currentModels[i]),i>newIndex){0===newIndex?this.listContainer?this.$(this.listContainer).prepend(this.views[i].el):this.$el.prepend(this.views[i].el):this.views[newIndex-1].$el.after(this.views[i].el),this.views.splice(newIndex,0,this.views.splice(i,1)[0]),currentModels.splice(newIndex,0,currentModels.splice(i,1)[0]);break}if(i===currentModels.length)break}for(i=0;i<collection.models.length;i++)this.isItemChanged(this.views[i].model,collection.models[i])&&(this.views[i].model.set(collection.models[i].attributes),this.views[i].update());var views=[];for(i=0;i<this.views.length;i++){if(this.views[i].model.get("hidden")){if(!this.showHidden){delSlideCount>=delSlide||passDel>passDelCount?(this._hideItem(this.views[i],!1),passDelCount+=1):(this._hideItem(this.views[i],!0),delSlideCount+=1);continue}addSlideCount>=addSlide||passAdd>passAddCount?(this._showItem(this.views[i],!1),passAddCount+=1):(this._showItem(this.views[i],!0),addSlideCount+=1)}views.push(this.views[i])}this.resetItems(views),$(document).scrollTop(scroll)}},update:function(){var loading=!0;setTimeout(function(){loading&&(this.loading=!1,this.$(".loading").slideDown(window.slideTime))}.bind(this),400),this.collection.fetch({data:this.getOptions(),reset:!0,error:function(){loading=!1,this.$(".loading").slideUp(window.slideTime);var alertView=new AlertView({type:"danger",message:this.listErrorMsg,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.collection.reset()}.bind(this),success:function(){loading=!1,this.$(".loading").slideUp(window.slideTime)}.bind(this)})},ignore:function(){},getOptions:function(){},removeItem:function(view){view.destroy()},buildItem:function(){},resetItems:function(){},isItemChanged:function(model,newModel){var attr;for(attr in newModel.attributes)if(model.get(attr)!==newModel.get(attr))return!0;return!1}});return ListView}),define("text!templates/dashboardLogItem.html",[],function(){return'<span class="log-icon glyphicon glyphicon-record"></span>\n<span class="log-msg">\n  <%- message %>\n</span>\n<span class="log-time">\n  <%- window.formatTime(timestamp) %>\n</span>\n'}),define("views/dashboardLogItem",["jquery","underscore","backbone","text!templates/dashboardLogItem.html"],function($,_,Backbone,dashboardLogItemTemplate){"use strict";var DashboardLogItemView=Backbone.View.extend({className:"log-entry clearfix",template:_.template(dashboardLogItemTemplate),render:function(){return this.$el.html(this.template(this.model.toJSON())),this},update:function(){this.$(".log-msg").text(this.model.get("message")),this.$(".log-time").text(window.formatTime(this.model.get("timestamp")))}});return DashboardLogItemView}),define("text!templates/dashboardLog.html",[],function(){return'<h2 class="log-title title">\n  Recent log entries\n</h2>\n<div class="log-entry-list"></div>\n'}),define("views/dashboardLog",["jquery","underscore","backbone","collections/log","views/list","views/dashboardLogItem","text!templates/dashboardLog.html"],function($,_,Backbone,LogCollection,ListView,DashboardLogItemView,dashboardLogTemplate){"use strict";var DashboardLogView=ListView.extend({className:"log-container",listContainer:".log-entry-list",listErrorMsg:"Failed to load log entries, server error occurred.",template:_.template(dashboardLogTemplate),initialize:function(){this.collection=new LogCollection,this.listenTo(window.events,"log_updated",this.update),DashboardLogView.__super__.initialize.call(this)},buildItem:function(model){var modelView=new DashboardLogItemView({model:model});return modelView},resetItems:function(views){views.length&&(this.$(".last").removeClass("last"),views[views.length-1].$el.addClass("last"))}});return DashboardLogView}),define("text!templates/dashboard.html",[],function(){return'<div class="alerts-container"></div>\n'}),define("views/dashboard",["jquery","underscore","backbone","views/dashboardStatus","views/dashboardLog","text!templates/dashboard.html"],function($,_,Backbone,DashboardStatusView,DashboardLogView,dashboardTemplate){"use strict";var DashboardView=Backbone.View.extend({className:"dashboard container",template:_.template(dashboardTemplate),initialize:function(){this.dashboardStatusView=new DashboardStatusView,this.addView(this.dashboardStatusView),this.dashboardLogView=new DashboardLogView,this.addView(this.dashboardLogView)},render:function(){return this.$el.html(this.template()),this.$el.prepend(this.dashboardStatusView.render().el),this.$el.append(this.dashboardLogView.render().el),this}});return DashboardView}),define("models/admin",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var AdminModel=Backbone.Model.extend({defaults:{id:null,username:null,yubikey_id:null,super_user:null,auth_api:null,token:null,secret:null,otp_auth:null,otp_secret:null,audit:null},url:function(){var url="/admin";return this.get("id")&&(url+="/"+this.get("id")),url},destroyOtpSecret:function(options){var otpSecret=this.get("otp_secret");this.save({otp_secret:!0},options),this.set({otp_secret:otpSecret})}});return AdminModel}),define("collections/admin",["jquery","underscore","backbone","models/admin"],function($,_,Backbone,AdminModel){"use strict";var AdminCollection=Backbone.Collection.extend({model:AdminModel,url:function(){return"/admin"}});return AdminCollection}),define("models/key",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var KeyModel=Backbone.Model.extend({defaults:{id:null,key_url:null,key_zip_url:null,key_onc_url:null,view_url:null,uri_url:null},url:function(){return"/key/"+this.get("organization")+"/"+this.get("user")}});return KeyModel}),define("collections/adminAudit",["jquery","underscore","backbone","models/userAudit"],function($,_,Backbone,UserAuditModel){"use strict";var AdminAuditCollection=Backbone.Collection.extend({model:UserAuditModel,initialize:function(options){this.user=options.user},url:function(){return"/admin/"+this.user.get("id")+"/audit"}});return AdminAuditCollection}),define("text!templates/modalModifyAdmin.html",[],function(){return'<div class="form-group username">\n  <label>Username</label>\n  <input type="text" class="form-control" placeholder="Enter username" data-toggle="tooltip" title="Username for administrator" value="<%- username %>" autofocus>\n</div>\n<div class="form-group password">\n  <label>Password</label>\n  <input type="password" class="form-control" placeholder="Enter new password"\n    data-toggle="tooltip" title="Administrator password">\n</div>\n<div class="form-group yubikey-id">\n  <label>YubiKey ID</label>\n  <input type="text" class="form-control" maxlength="12" placeholder="Insert YubiKey" data-toggle="tooltip" title="Insert and touch YubiKey to get ID" value="<%- yubikey_id %>">\n</div>\n<div class="super-user-toggle toggle-form form-group">\n  <label>Super User</label>\n  <div class="selector <%= super_user ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Allow administrator to modify other administrators.">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="otp-auth-toggle toggle-form form-group">\n  <label>Enable Two-Step Authentication</label>\n  <div class="selector <%= otp_auth ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Enable two-step authentication with Google Authenticator.">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="auth-api-toggle toggle-form form-group">\n  <label>Enable Token Authentication</label>\n  <div class="selector <%= auth_api ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Enable authentication with an api token.">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="auth-token-form" <%= auth_api ? \'\' : \'style="display: none"\' %>>\n  <div class="api-token form-group">\n    <label>API Token</label>\n    <input type="text" class="form-control" placeholder="" value="<%- token || \'\' %>" readonly>\n  </div>\n  <div class="api-secret form-group">\n    <label>API Secret</label>\n    <input type="text" class="form-control" placeholder="" value="<%- secret || \'\' %>" readonly>\n  </div>\n  <button type="button" class="generate-new-api-key btn btn-danger">Generate New API Key</button>\n</div>\n'}),define("views/modalModifyAdmin",["jquery","underscore","backbone","views/modal","text!templates/modalModifyAdmin.html"],function($,_,Backbone,ModalView,modalModifyAdminTemplate){"use strict";var ModalModifyAdminView=ModalView.extend({className:"modify-admin-modal",template:_.template(modalModifyAdminTemplate),title:"Modify Administrator",okText:"Modify",enterOk:!1,events:function(){return _.extend({"click .super-user-toggle":"onSuperSelect","click .otp-auth-toggle":"onOtpAuthSelect","click .auth-api-toggle":"onAuthSelect","click .api-token input, .api-secret input":"onClickInput","click .generate-new-api-key":"onGenerateNewKey"},ModalModifyAdminView.__super__.events)},body:function(){return this.template(this.model.toJSON())},update:function(){this.$(".auth-token input").val(this.model.get("auth_token")),this.$(".auth-secret input").val(this.model.get("auth_secret"))},getSuperSelect:function(){return this.$(".super-user-toggle .selector").hasClass("selected")},setSuperSelect:function(state){state?(this.$(".super-user-toggle .selector").addClass("selected"),this.$(".super-user-toggle .selector-inner").show()):(this.$(".super-user-toggle .selector").removeClass("selected"),this.$(".super-user-toggle .selector-inner").hide())},onSuperSelect:function(){this.setSuperSelect(!this.getSuperSelect())},getOtpAuthSelect:function(){return this.$(".otp-auth-toggle .selector").hasClass("selected")},setOtpAuthSelect:function(state){state?(this.$(".otp-auth-toggle .selector").addClass("selected"),this.$(".otp-auth-toggle .selector-inner").show()):(this.$(".otp-auth-toggle .selector").removeClass("selected"),this.$(".otp-auth-toggle .selector-inner").hide())},onOtpAuthSelect:function(){this.setOtpAuthSelect(!this.getOtpAuthSelect())},getAuthSelect:function(){return this.$(".auth-api-toggle .selector").hasClass("selected")},setAuthSelect:function(state){state?(this.$(".auth-api-toggle .selector").addClass("selected"),this.$(".auth-api-toggle .selector-inner").show(),this.$(".auth-token-form").slideDown(window.slideTime)):(this.$(".auth-api-toggle .selector").removeClass("selected"),this.$(".auth-api-toggle .selector-inner").hide(),this.$(".auth-token-form").slideUp(window.slideTime))},onAuthSelect:function(){this.setAuthSelect(!this.getAuthSelect())},onClickInput:function(evt){this.$(evt.target).select()},onGenerateNewKey:function(){this.setLoading("Generating new api key..."),this.model.save({auth_token:!0,auth_secret:!0},{success:function(){this.clearLoading(),this.setAlert("success","Successfully generated a new api key."),this.update()}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})},onOk:function(){var username=this.$(".username input").val(),password=this.$(".password input").val(),yubikeyId=this.$(".yubikey-id input").val(),superUser=this.getSuperSelect(),otpAuth=this.getOtpAuthSelect(),authApi=this.getAuthSelect();if(!username)return void this.setAlert("danger","Username can not be empty.",".username");var data={username:username,yubikey_id:yubikeyId,super_user:superUser,otp_auth:otpAuth,otp_secret:null,auth_api:authApi,token:null,secret:null};password&&(data.password=password),this.setLoading("Modifying administrator..."),this.model.save(data,{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalModifyAdminView}),define("text!templates/modalKeyLink.html",[],function(){return'<div class="key-link form-group">\n  <label>Temporary url to download profile, expires after 24 hours</label>\n  <input type="text" class="form-control" readonly>\n  <a class="glyphicon glyphicon-download no-select" data-toggle="tooltip" title="Download profile"></a>\n</div>\n<div class="key-zip-link form-group">\n  <label>Temporary url to download zip profile, expires after 24 hours</label>\n  <input type="text" class="form-control" readonly>\n  <a class="glyphicon glyphicon-download no-select" data-toggle="tooltip" title="Download profile"></a>\n</div>\n<div class="key-onc-link form-group">\n  <label>Temporary url to download Chromebook profile, expires after 24 hours</label>\n  <input type="text" class="form-control" readonly>\n  <a class="glyphicon glyphicon-download no-select" data-toggle="tooltip" title="Download profile"></a>\n</div>\n<div class="otp-link form-group">\n  <label>Temporary url to view profile links, expires after 24 hours</label>\n  <input type="text" class="form-control" readonly>\n  <a class="glyphicon glyphicon-download no-select" data-toggle="tooltip" title="Open profile link" target="_blank"></a>\n</div>\n<div class="uri-link form-group">\n  <label>Temporary uri link for Pritunl Client, expires after 24 hours</label>\n  <input type="text" class="form-control" readonly>\n  <a class="glyphicon glyphicon-download no-select" data-toggle="tooltip" title="Open profile uri link" target="_blank"></a>\n</div>\n'}),define("views/modalKeyLink",["jquery","underscore","backbone","views/modal","text!templates/modalKeyLink.html"],function($,_,Backbone,ModalView,modalKeyLinkTemplate){"use strict";var ModalKeyLinkView=ModalView.extend({className:"key-link-modal",template:_.template(modalKeyLinkTemplate),title:"Temporary Profile Link",cancelText:null,okText:"Close",events:function(){return _.extend({"click input":"onClickInput"},ModalKeyLinkView.__super__.events)},body:function(){return this.template()},postRender:function(){this.setLoading("Generating temporary url...",!0),this.model.fetch({success:function(){this.clearLoading();var keyLink=window.location.protocol+"//"+window.location.host+this.model.get("key_url"),keyZipLink=window.location.protocol+"//"+window.location.host+this.model.get("key_zip_url"),keyOncLink=window.location.protocol+"//"+window.location.host+this.model.get("key_onc_url"),otpLink=window.location.protocol+"//"+window.location.host+this.model.get("view_url"),uriLink="pritunl://"+window.location.host+this.model.get("uri_url");this.$(".key-link input").val(keyLink),this.$(".key-link a").attr("href",keyLink),this.$(".key-zip-link input").val(keyZipLink),this.$(".key-zip-link a").attr("href",keyZipLink),this.$(".key-onc-link input").val(keyOncLink),this.$(".key-onc-link a").attr("href",keyOncLink),this.$(".otp-link input").val(otpLink),this.$(".otp-link a").attr("href",otpLink),this.$(".uri-link input").val(uriLink),this.$(".uri-link a").attr("href",uriLink)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})},onClickInput:function(evt){this.$(evt.target).select()}});return ModalKeyLinkView}),define("text!templates/modalAuditUser.html",[],function(){return'<label class="user-title" style="<%= user.name ? \'\' : \'display: none\' %>"><%- user.name %><%- user.email ? \' (\' + user.email + \')\' : \'\' %></label>\n<ul class="modal-audit-user" style="<%= events.length ? \'\' : \'display: none\' %>">\n  <% _.each(events, function(event) { %>\n  <li class="audit-event layout-horizontal">\n    <span class="event-msg layout-flex">\n      <span class="glyphicon glyphicon-record"></span>\n      <%- event.message %>\n    </span>\n    <span class="event-addr" style="<%= event.remote_addr ? \'\' : \'display: none\' %>">\n      <span class="glyphicon glyphicon-globe"></span>\n      <%- event.remote_addr %>\n    </span>\n    <span class="event-time">\n      <span class="glyphicon glyphicon-time"></span>\n      <%- window.formatTime(event.timestamp) %>\n    </span>\n  </li>\n  <% }); %>\n</ul>\n'}),define("views/modalAuditUser",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalAuditUser.html"],function($,_,Backbone,ModalView,AlertView,modalAuditUserTemplate){"use strict";var ModalAuditUserView=ModalView.extend({className:"audit-user-modal",template:_.template(modalAuditUserTemplate),title:"User Audit",okText:"Close",cancelText:null,body:function(){return this.template({user:this.collection.user.toJSON(),events:[]})},postRender:function(){this.setLoading("Loading user audit...",!0),this.collection.fetch({success:function(){this.clearLoading(),this.collection.length?this.$(".modal-body").append(this.template({user:{},events:this.collection.toJSON()})):this.setAlert("info","User has no audit events",!1,!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAuditUserView}),define("text!templates/modalOtpAuth.html",[],function(){return'<div class="otp-auth-key form-group">\n  <label>Two-step authentication key</label>\n  <input type="text" class="form-control" readonly>\n  <div class="qrcode"></div>\n  <button type="button" class="generate-new-key btn btn-danger">Generate New Key</button>\n</div>\n'}),define("views/modalOtpAuth",["jquery","underscore","backbone","qrcode","views/modal","text!templates/modalOtpAuth.html"],function($,_,Backbone,QRCode,ModalView,modalOtpAuthTemplate){"use strict";var ModalOtpAuthView=ModalView.extend({className:"otp-auth-modal",template:_.template(modalOtpAuthTemplate),title:"Two-Step Authentication Key",cancelText:null,okText:"Close",events:function(){return _.extend({"click .generate-new-key":"onGenerateNewKey","click input":"onClickInput"},ModalOtpAuthView.__super__.events)},body:function(){return this.template()},postRender:function(){this.update(),this.listenTo(this.model,"change",this.update)},update:function(model){var colorDark,colorLight;model&&(this.$(".generate-new-key").removeAttr("disabled"),this.clearLoading(),this.setAlert("success","Successfully generated new key.")),this.$("input").val(this.model.get("otp_secret"));var name=this.model.get("name")||this.model.get("username"),org=this.model.get("organization_name");org&&(name+="@"+org);var otpUrl="otpauth://totp/"+name+"?secret="+this.model.get("otp_secret");this.$(".qrcode").empty(),$("body").hasClass("dark")?(colorDark="#14171a",colorLight="#385468"):(colorDark="#3276b1",colorLight="#fff"),new QRCode(this.$(".qrcode").get(0),{text:otpUrl,width:192,height:192,colorDark:colorDark,colorLight:colorLight})},onGenerateNewKey:function(){this.$(".generate-new-key").attr("disabled","disabled"),this.setLoading("Generating new key..."),this.model.destroyOtpSecret({error:function(model,response){this.$(".generate-new-key").removeAttr("disabled"),this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})},onClickInput:function(evt){this.$(evt.target).select()}});return ModalOtpAuthView}),define("models/serverOrg",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var ServerOrgModel=Backbone.Model.extend({defaults:{id:null,server:null,name:null},url:function(){var url="/server/"+this.get("server")+"/organization";return this.get("id")&&(url+="/"+this.get("id")),url}});return ServerOrgModel}),define("collections/userServer",["jquery","underscore","backbone","models/serverOrg"],function($,_,Backbone,UserServerModel){"use strict";var UserServerCollection=Backbone.Collection.extend({model:UserServerModel});return UserServerCollection}),define("text!templates/userServersListItem.html",[],function(){return'<div class="layout-horizontal">\n  <div class="info-container layout-flex">\n    <div class="server-name-device">\n      <span class="server-item server-name" data-toggle="tooltip" title="Server name">\n        <span class="name-icon glyphicon glyphicon-dashboard"></span>\n        <span class="title"></span>\n      </span>\n      <span class="server-item server-device" data-toggle="tooltip" title="Device name">\n        <span class="name-icon fa"></span>\n        <span class="title"></span>\n      </span>\n    </div>\n  </div>\n  <div class="client-container">\n    <span class="server-item server-addr" data-toggle="tooltip" title="User virtual IP address">\n      <span class="name-icon glyphicon glyphicon-send no-select"></span>\n      <span class="title ipv4"></span>\n      <span class="title ipv6"></span>\n    </span>\n    <span class="server-item server-real-addr" data-toggle="tooltip" title="User real IP address">\n      <span class="name-icon glyphicon glyphicon-globe"></span>\n      <span class="title"></span>\n    </span>\n    <span class="server-item server-time" data-toggle="tooltip" title="Connected since">\n      <span class="name-icon glyphicon glyphicon-time"></span>\n      <span class="title"></span>\n    </span>\n  </div>\n  <div class="status-container">\n    <div class="status-icon"></div>\n    <span class="status-text title"></span>\n  </div>\n</div>\n'}),define("views/userServersListItem",["jquery","underscore","backbone","text!templates/userServersListItem.html"],function($,_,Backbone,userServersListItemTemplate){"use strict";var UserServersListItemView=Backbone.View.extend({className:"user-server",template:_.template(userServersListItemTemplate),events:{"click .server-addr .name-icon":"toggleServerAddr"},render:function(){return this.$el.html(this.template()),this.update(),this.$(".server-item").tooltip(),this},toggleServerAddr:function(){this.$el.toggleClass("ipv6")},update:function(){this.$(".server-name .title").text(this.model.get("name"));var deviceName=this.model.get("device_name"),platform=this.model.get("platform");platform="win"===platform?"windows":"mac"===platform||"ios"===platform?"apple":"linux"===platform||"chrome"===platform||"android"===platform?platform:"desktop",deviceName?this.$(".server-device .title").text(deviceName):this.$(".server-device .title").text(platform+" device"),this.$(".server-device .name-icon").removeClass("fa-windows fa-apple fa-linux fa-desktop"),this.$(".server-device .name-icon").addClass("fa-"+platform);var addr=this.model.get("virt_address");addr?(this.$(".server-addr .title").text(addr),this.$(".server-addr").show()):this.$(".server-addr").hide();var addr6=this.model.get("virt_address6");addr6&&this.$(".server-addr .title.ipv6").text(addr6);var addrReal=this.model.get("real_address");addrReal?(this.$(".server-real-addr .title").text(addrReal),this.$(".server-real-addr").show()):this.$(".server-real-addr").hide(),this.model.get("bytes_sent")?(this.$(".server-sent .title").text(window.formatSize(this.model.get("bytes_sent"))),this.$(".server-sent").show()):this.$(".server-sent").hide(),this.model.get("bytes_received")?(this.$(".server-recv .title").text(window.formatSize(this.model.get("bytes_received"))),this.$(".server-recv").show()):this.$(".server-recv").hide(),this.model.get("connected_since")?(this.$(".server-time .title").text(window.formatTime(this.model.get("connected_since"),"short")),this.$(".server-time").show()):this.$(".server-time").hide(),this.model.get("status")?(this.$(".server-device").show(),this.$(".status-icon").hasClass("online")||(this.$(".status-icon").removeClass("offline"),this.$(".status-icon").addClass("online"),this.$(".status-text").text("Online"))):(this.$(".server-device").hide(),this.$(".status-icon").hasClass("offline")||(this.$(".status-icon").removeClass("online"),this.$(".status-icon").addClass("offline"),this.$(".status-text").text("Offline")))}});return UserServersListItemView}),define("text!templates/userServersList.html",[],function(){return'<div class="no-servers title">\n  No servers available\n</div>\n'}),define("views/userServersList",["jquery","underscore","backbone","collections/userServer","views/list","views/userServersListItem","text!templates/userServersList.html"],function($,_,Backbone,UserServerCollection,ListView,UserServersListItemView,userServersListTemplate){"use strict";var ServerOrgsListView=ListView.extend({className:"user-servers",template:_.template(userServersListTemplate),listErrorMsg:"Failed to load user information, server error occurred.",initialize:function(options){this.models=options.models,this.collection=new UserServerCollection,ServerOrgsListView.__super__.initialize.call(this)},buildItem:function(model){return new UserServersListItemView({model:model})},update:function(models){void 0===models&&(models=this.models),this.collection.reset(models)},resetItems:function(views){views.length?this.$(".no-servers").slideUp(window.slideTime):this.$(".no-servers").slideDown(window.slideTime)}});return ServerOrgsListView}),define("text!templates/adminsListItem.html",[],function(){return'<div class="admin layout-horizontal">\n  <div class="selector no-select">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n  <div class="name-container layout-flex">\n    <span class="name-icon glyphicon glyphicon-user"></span>\n    <a class="admin-username title no-select" data-toggle="tooltip" title="Click to modify this administrator"><%- username %></a>\n    <span class="admin-id title">(<%- id %>)</span>\n  </div>\n  <div class="right-container">\n    <a class="get-otp-auth glyphicon glyphicon-qrcode no-select <%- otp_auth ? \'\' : \'no-otp-auth\' %>" data-toggle="tooltip" title="Get two-step authentication key"></a>\n    <a class="audit-admin glyphicon glyphicon-list-alt no-select <%- audit ? \'\' : \'no-audit-admin\' %>" data-toggle="tooltip" title="Administrator audit"></a>\n    <a class="disable-admin glyphicon glyphicon glyphicon-ban-circle no-select" data-toggle="tooltip" title="Disable and logout administrator"></a>\n    <a class="enable-admin glyphicon glyphicon glyphicon-ok-circle no-select" data-toggle="tooltip" title="Enable administrator"></a>\n  </div>\n</div>\n'}),define("views/adminsListItem",["jquery","underscore","backbone","models/key","collections/adminAudit","views/alert","views/modalModifyAdmin","views/modalKeyLink","views/modalAuditUser","views/modalOtpAuth","views/userServersList","text!templates/adminsListItem.html"],function($,_,Backbone,KeyModel,AdminAuditCollection,AlertView,ModalModifyAdminView,ModalKeyLinkView,ModalAuditUserView,ModalOtpAuthView,UserServersListView,adminsListItemTemplate){"use strict";var AdminsListItemView=Backbone.View.extend({template:_.template(adminsListItemTemplate),events:{"click .selector":"onSelect","click .admin-username":"onModify","click .audit-admin":"onAuditAdmin","click .get-otp-auth":"onGetOtpAuth","click .disable-admin":"onDisableAdmin","click .enable-admin":"onEnableAdmin"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$('[data-toggle="tooltip"]').tooltip(),this.model.get("disabled")?this.$(".disable-admin").hide():this.$(".enable-admin").hide(),this},update:function(){this.$(".admin-username").text(this.model.get("username")),this.model.get("disabled")?(this.$(".admin .status-icon").removeClass("online"),this.$(".admin .status-icon").removeClass("offline"),this.$(".admin .status-icon").addClass("disabled"),this.$(".admin .status-text").text("Disabled"),this.$(".disable-admin").hide(),this.$(".enable-admin").show()):(this.$(".user .status-icon").removeClass("disabled"),this.$(".enable-admin").hide(),this.$(".disable-admin").show()),this.model.get("otp_auth")?this.$(".get-otp-auth").removeClass("no-otp-auth"):this.$(".get-otp-auth").addClass("no-otp-auth"),this.model.get("audit")?this.$(".audit-admin").removeClass("no-audit-admin"):this.$(".audit-admin").addClass("no-audit-admin")},getSelect:function(){return this.$(".selector").hasClass("selected")},setSelect:function(state,shiftKey){state!==this.getSelect()&&(state?(this.$(".selector").addClass("selected"),this.$(".selector-inner").show()):(this.$(".selector").removeClass("selected"),this.$(".selector-inner").hide()),this.trigger("select",this,shiftKey))},onSelect:function(evt){this.setSelect(!this.getSelect(),evt.shiftKey)},
onModify:function(){var modal=new ModalModifyAdminView({model:this.model.clone()});this.addView(modal)},onAuditAdmin:function(){var modal=new ModalAuditUserView({collection:new AdminAuditCollection({user:this.model})});this.addView(modal)},onGetOtpAuth:function(){var modal=new ModalOtpAuthView({model:this.model});this.addView(modal)},onDisableAdmin:function(){this.$(".disable-admin").hasClass("disabled")||(this.$(".disable-admin").addClass("disabled"),this.model.save({disabled:!0,otp_secret:null,token:null,secret:null},{success:function(){this.$(".disable-admin").removeClass("disabled"),this.update()}.bind(this),error:function(model,response){var message;message=response.responseJSON?response.responseJSON.error_msg:"Failed to disable administrator, server error occurred.";var alertView=new AlertView({type:"danger",message:message,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.$(".disable-admin").removeClass("disabled")}.bind(this)}))},onEnableAdmin:function(){this.$(".enable-admin").hasClass("disabled")||(this.$(".enable-admin").addClass("disabled"),this.model.save({disabled:!1,otp_secret:null,token:null,secret:null},{success:function(){this.$(".enable-admin").removeClass("disabled"),this.update()}.bind(this),error:function(model,response){var message;message=response.responseJSON?response.responseJSON.error_msg:"Failed to enable administrator, server error occurred.";var alertView=new AlertView({type:"danger",message:message,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.$(".enable-admin").removeClass("disabled")}.bind(this)}))}});return AdminsListItemView}),define("text!templates/adminsList.html",[],function(){return'<div class="loading">\n  Loading...\n</div>\n'}),define("views/adminsList",["jquery","underscore","backbone","collections/admin","views/list","views/adminsListItem","text!templates/adminsList.html"],function($,_,Backbone,AdminCollection,ListView,AdminsListItemView,adminsListTemplate){"use strict";var AdminsListView=ListView.extend({className:"admins-list-container",template:_.template(adminsListTemplate),listErrorMsg:"Failed to load administrators, server error occurred.",initialize:function(){this.collection=new AdminCollection,this.listenTo(window.events,"administrators_updated",this.update),AdminsListView.__super__.initialize.call(this)},removeItem:function(view){view.getSelect()&&view.setSelect(!1),view.destroy()},onSelect:function(view,shiftKey){var i,curView,select=!1,lastSelected=this.lastSelected;if(lastSelected&&shiftKey&&lastSelected.getSelect()&&lastSelected!==view)for(i=0;i<this.views.length;i++){if(curView=this.views[i],select||curView!==lastSelected&&curView!==view){if(select&&(curView===lastSelected||curView===view)){this.views[i].setSelect(!0);break}}else select=!0;select&&this.views[i].setSelect(!0)}this.trigger("select",view),this.lastSelected=view},buildItem:function(model){var modelView=new AdminsListItemView({model:model});return this.listenTo(modelView,"select",this.onSelect),modelView}});return AdminsListView}),define("text!templates/modalAddAdmin.html",[],function(){return'<div class="form-group username">\n  <label>Username</label>\n  <input type="text" class="form-control" placeholder="Enter username" data-toggle="tooltip" title="Username for administrator" autofocus>\n</div>\n<div class="form-group password">\n  <label>Password</label>\n  <input type="password" class="form-control" placeholder="Enter new password"\n    data-toggle="tooltip" title="Administrator password">\n</div>\n<div class="form-group yubikey-id">\n  <label>YubiKey ID</label>\n  <input type="text" class="form-control" maxlength="12"\n    placeholder="Insert YubiKey" data-toggle="tooltip"\n    title="Insert and touch YubiKey to get ID">\n</div>\n<div class="super-user-toggle toggle-form form-group">\n  <label>Super User</label>\n  <div class="selector no-select" data-toggle="tooltip" title="Allow administrator to modify other administrators.">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="otp-auth-toggle toggle-form form-group">\n  <label>Enable Two-Step Authentication</label>\n  <div class="selector no-select" data-toggle="tooltip" title="Enable two-step authentication with Google Authenticator.">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="auth-api-toggle toggle-form form-group">\n  <label>Enable Token Authentication</label>\n  <div class="selector no-select" data-toggle="tooltip" title="Enable authentication with an api token.">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n'}),define("views/modalAddAdmin",["jquery","underscore","backbone","models/admin","views/modal","text!templates/modalAddAdmin.html"],function($,_,Backbone,AdminModel,ModalView,modalAddAdminTemplate){"use strict";var ModalAddAdminView=ModalView.extend({className:"modify-admin-modal",template:_.template(modalAddAdminTemplate),title:"Add Administrator",okText:"Add",enterOk:!1,events:function(){return _.extend({"click .super-user-toggle":"onSuperSelect","click .otp-auth-toggle":"onOtpAuthSelect","click .auth-api-toggle":"onAuthSelect","click .auth-token input, .auth-secret input":"onClickInput"},ModalAddAdminView.__super__.events)},body:function(){return this.template()},update:function(){this.$(".auth-token input").val(this.model.get("auth_token")),this.$(".auth-secret input").val(this.model.get("auth_secret"))},getSuperSelect:function(){return this.$(".super-user-toggle .selector").hasClass("selected")},setSuperSelect:function(state){state?(this.$(".super-user-toggle .selector").addClass("selected"),this.$(".super-user-toggle .selector-inner").show()):(this.$(".super-user-toggle .selector").removeClass("selected"),this.$(".super-user-toggle .selector-inner").hide())},onSuperSelect:function(){this.setSuperSelect(!this.getSuperSelect())},getOtpAuthSelect:function(){return this.$(".otp-auth-toggle .selector").hasClass("selected")},setOtpAuthSelect:function(state){state?(this.$(".otp-auth-toggle .selector").addClass("selected"),this.$(".otp-auth-toggle .selector-inner").show()):(this.$(".otp-auth-toggle .selector").removeClass("selected"),this.$(".otp-auth-toggle .selector-inner").hide())},onOtpAuthSelect:function(){this.setOtpAuthSelect(!this.getOtpAuthSelect())},getAuthSelect:function(){return this.$(".auth-api-toggle .selector").hasClass("selected")},setAuthSelect:function(state){state?(this.$(".auth-api-toggle .selector").addClass("selected"),this.$(".auth-api-toggle .selector-inner").show(),this.$(".auth-token-form").slideDown(window.slideTime)):(this.$(".auth-api-toggle .selector").removeClass("selected"),this.$(".auth-api-toggle .selector-inner").hide(),this.$(".auth-token-form").slideUp(window.slideTime))},onAuthSelect:function(){this.setAuthSelect(!this.getAuthSelect())},onClickInput:function(evt){this.$(evt.target).select()},onOk:function(){var username=this.$(".username input").val(),password=this.$(".password input").val(),yubikeyId=this.$(".yubikey-id input").val(),superUser=this.getSuperSelect(),otpAuth=this.getOtpAuthSelect(),authApi=this.getAuthSelect();if(!username)return void this.setAlert("danger","Username can not be empty.",".username");if(!password)return void this.setAlert("danger","Password can not be empty.",".username");var data={username:username,password:password,yubikey_id:yubikeyId,super_user:superUser,otp_auth:otpAuth,auth_api:authApi,token:null,secret:null};this.setLoading("Adding administrator...");var adminModel=new AdminModel;adminModel.save(data,{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddAdminView}),define("text!templates/modalDeleteAdmins.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to logout and delete the following administrators?</label>\n  <ul class="modal-user-list">\n    <% _.each(admins, function(admin) { %>\n      <li>\n        <%- admin.username %>\n      </li>\n    <% }); %>\n  </ul>\n</div>\n'}),define("views/modalDeleteAdmins",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDeleteAdmins.html"],function($,_,Backbone,ModalView,AlertView,modalDeleteAdminsTemplate){"use strict";var ModalDeleteAdminsView=ModalView.extend({className:"delete-admins-modal",template:_.template(modalDeleteAdminsTemplate),title:"Delete Administrators",okText:"Delete",body:function(){var i,nameId,admins=[],adminsSort=[],adminsObj={},data=this.collection.toJSON();for(i=0;i<data.length;i++)nameId=data[i].username+"_"+data[i].id,adminsSort.push(nameId),adminsObj[nameId]=data[i];for(adminsSort.sort(),i=0;i<adminsSort.length;i++)admins.push(adminsObj[adminsSort[i]]);return this.template({admins:admins})},onOk:function(){this.setLoading("Deleting administrators...");var i,model,users=this.collection.models.slice(0),error=!1,count=users.length,destroyData={success:function(){--count<1&&!error&&this.close(!0)}.bind(this),error:function(model,response){error||(this.$(".ok").hide(),this.$(".cancel").text("Close"),error=!0,this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg))}.bind(this)};for(count||this.close(),i=0;i<users.length;i++)model=users[i].clone(),model.destroy(destroyData)}});return ModalDeleteAdminsView}),define("text!templates/admins.html",[],function(){return'<div class="admins-list">\n  <div class="admins-list-header">\n    <h1 class="admins-title title">Administrators</h1>\n    <div class="admins-list-buttons">\n      <button type="button" class="header-button admins-del-selected btn btn-danger" disabled>Delete Selected</button>\n      <button type="button" class="header-button admins-add-admin btn btn-primary">Add Administrator</button>\n    </div>\n  </div>\n  <div class="alerts-container"></div>\n  <div class="admins-container">\n    <div class="admins-list-header">\n      <div class="label label-warning toggle-hidden no-select">Administrators</div>\n    </div>\n  </div>\n</div>\n'}),define("views/admins",["jquery","underscore","backbone","collections/admin","views/alert","views/adminsList","views/modalAddAdmin","views/modalDeleteAdmins","text!templates/admins.html"],function($,_,Backbone,AdminCollection,AlertView,AdminsListView,ModalAddAdminView,ModalDeleteAdminsView,adminsTemplate){"use strict";var AdminsView=Backbone.View.extend({template:_.template(adminsTemplate),className:"admins container",events:{"click .admins-add-admin":"onAddAdmin","click .admins-del-selected":"onDelSelected"},initialize:function(){this.adminsList=new AdminsListView,this.listenTo(this.adminsList,"select",this.onSelect),this.addView(this.adminsList),this.selected=[]},onSelect:function(view){var i;if(view.getSelect())this.selected.push(view);else for(i=0;i<this.selected.length;i++)this.selected[i]===view&&this.selected.splice(i,1);this.selected.length?this.$(".admins-del-selected").removeAttr("disabled"):this.$(".admins-del-selected").attr("disabled","disabled")},onAddAdmin:function(){var modal=new ModalAddAdminView;this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added administrator.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onDelSelected:function(){var i,models=[];for(i=0;i<this.selected.length;i++)models.push(this.selected[i].model);var modal=new ModalDeleteAdminsView({collection:new AdminCollection(models)});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully deleted selected administrators.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},render:function(){return this.$el.html(this.template()),this.$(".admins-container").append(this.adminsList.render().el),this}});return AdminsView}),define("collections/user",["jquery","underscore","backbone","models/user"],function($,_,Backbone,UserModel){"use strict";var UserCollection=Backbone.Collection.extend({model:UserModel,initialize:function(options){this.org=options.org,window.user_page=window.user_page||{},this.page=window.user_page[this.org]||0},url:function(){return"/user/"+this.org},parse:function(response){var hasKey=response.server_count?!0:!1;void 0!==response.page?(this.setPage(response.page),this.setPageTotal(response.page_total)):(this.setSearchTime(response.search_time),this.setSearchMore(response.search_more),this.setSearchCount(response.search_count),this.setSearchLimit(response.search_limit));for(var i=0;i<response.users.length;i++)response.users[i].has_key=hasKey;return response.users},setPage:function(page){this.page=page,window.user_page[this.org]=page},getPage:function(){return this.page},nextPage:function(){this.page+=1},prevPage:function(){this.page-=1},setPageTotal:function(total){this.pageTotal=total},getPageTotal:function(){return this.pageTotal},setSearch:function(term){this.search=term},getSearch:function(){return this.search},clearSearch:function(){this.search=null},setSearchTime:function(time){this.searchTime=time},getSearchTime:function(){return this.searchTime.toFixed(4)},setSearchLimit:function(limit){this.searchLimit=limit},getSearchLimit:function(){return this.searchLimit},setSearchMore:function(more){this.searchMore=more},getSearchMore:function(){return this.searchMore},setSearchCount:function(count){this.searchCount=count},getSearchCount:function(){return this.searchCount},isLastPage:function(){return this.page===this.pageTotal}});return UserCollection}),define("text!templates/modalRenameUser.html",[],function(){return'<div class="form-group name">\n  <label>Name</label>\n  <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of user" value="<%- name %>" autofocus>\n</div>\n<div class="form-group email">\n  <label>Email (optional)</label>\n  <input type="email" class="form-control" placeholder="Enter email address" data-toggle="tooltip" title="User email address" value="<%- email ? email : \'\' %>">\n</div>\n<div class="form-group groups">\n  <label>Groups</label>\n  <div class="groups-label" data-toggle="tooltip" title="Enter space seperated list of groups to associate with user. Names are case sensitive.">\n    <input type="text" placeholder="Enter groups" value="<%- groups ? groups.join(\',\') : \'\' %>">\n  </div>\n</div>\n<div class="form-group pin">\n  <label>Pin</label>\n  <input type="password" class="form-control" placeholder="Enter user pin"\n    data-toggle="tooltip" title="User pin, required when user connects to vpn. When using with two-factor authentication the pin and two-factor authentication code should both be placed in the password field."\n    value="<%- pin ? \'******\' : \'\' %>">\n</div>\n<div class="form-group port-forwarding">\n  <label>Port Forwarding</label>\n  <input type="text" class="form-control"\n    placeholder="Enter port mappings" data-toggle="tooltip"\n    title="Enter comma seperated list of ports to forward using format source_port:dest_port/protocol or start_port-end_port/protocol. Such as 21, 80/tcp, 80:8000/tcp, 1000-2000/udp."\n    value="<%- portForwardingFormatted %>">\n</div>\n<div class="form-group network-links">\n  <label>Network Link</label>\n  <input type="text" class="form-control"\n    placeholder="Enter network address" data-toggle="tooltip"\n    title="Enter network address with cidr subnet. This will provision access to a clients local network to the attached vpn servers and other clients. Multiple networks may be separated by a comma."\n    value="<%- network_links ? network_links.join(\', \') : \'\' %>">\n</div>\n<div class="client-to-client-toggle toggle-form form-group">\n  <label>Client-to-Client Only</label>\n  <div class="selector <%= client_to_client ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Only allow this client to communicate with other clients. Access to routed networks will be blocked.">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="advanced">\n  <div class="form-group auth-type">\n    <label>Type</label>\n    <select class="form-control" data-toggle="tooltip" title="User authentication type. This will determine how the user authenticates. This should be set automatically when the user authenticates with single sign-on.">\n      <option value="local" <%= auth_type === \'local\' ? \'selected\' : \'\' %>>Local</option>\n      <option value="duo" <%= auth_type === \'duo\' ? \'selected\' : \'\' %>>Duo</option>\n      <option value="yubico" <%= auth_type === \'yubico\' ? \'selected\' : \'\' %>>Yubico</option>\n      <option value="google" <%= auth_type === \'google\' ? \'selected\' : \'\' %>>Google</option>\n      <option value="google_duo" <%= auth_type === \'google_duo\' ? \'selected\' : \'\' %>>Google + Duo</option>\n      <option value="google_yubico" <%= auth_type === \'google_yubico\' ? \'selected\' : \'\' %>>Google + Yubico</option>\n      <option value="slack" <%= auth_type === \'slack\' ? \'selected\' : \'\' %>>Slack</option>\n      <option value="slack_duo" <%= auth_type === \'slack_duo\' ? \'selected\' : \'\' %>>Slack + Duo</option>\n      <option value="slack_yubico" <%= auth_type === \'slack_yubico\' ? \'selected\' : \'\' %>>Slack + Yubico</option>\n      <option value="saml" <%= auth_type === \'saml\' ? \'selected\' : \'\' %>>SAML</option>\n      <option value="saml_duo" <%= auth_type === \'saml_duo\' ? \'selected\' : \'\' %>>SAML + Duo</option>\n      <option value="saml_yubico" <%= auth_type === \'saml_yubico\' ? \'selected\' : \'\' %>>SAML + Yubico</option>\n      <option value="saml_okta" <%= auth_type === \'saml_okta\' ? \'selected\' : \'\' %>>Okta</option>\n      <option value="saml_okta_duo" <%= auth_type === \'saml_okta_duo\' ? \'selected\' : \'\' %>>Okta + Duo</option>\n      <option value="saml_okta_yubico" <%= auth_type === \'saml_okta_yubico\' ? \'selected\' : \'\' %>>Okta Yubico</option>\n      <option value="saml_onelogin" <%= auth_type === \'saml_onelogin\' ? \'selected\' : \'\' %>>OneLogin</option>\n      <option value="saml_onelogin_duo" <%= auth_type === \'saml_onelogin_duo\' ? \'selected\' : \'\' %>>OneLogin Duo</option>\n      <option value="saml_onelogin_yubico" <%= auth_type === \'saml_onelogin_yubico\' ? \'selected\' : \'\' %>>OneLogin Yubico</option>\n      <option value="radius" <%= auth_type === \'radius\' ? \'selected\' : \'\' %>>Radius</option>\n      <option value="radius_duo" <%= auth_type === \'radius_duo\' ? \'selected\' : \'\' %>>Radius + Duo</option>\n      <option value="plugin" <%= auth_type === \'plugin\' ? \'selected\' : \'\' %>>Plugin</option>\n    </select>\n  </div>\n  <div class="form-group dns-servers">\n    <label>DNS Forwarding Server</label>\n    <input type="text" class="form-control"\n      placeholder="Enter dns server" data-toggle="tooltip"\n      title="Enter dns server with port to forward sub-domain dns requests coming from this users domain. Multiple dns servers may be separated by a comma."\n      value="<%- dns_servers ? dns_servers.join(\', \') : \'\' %>">\n  </div>\n  <div class="form-group dns-suffix">\n    <label>DNS Forwarding Suffix</label>\n    <input type="text" class="form-control"\n      placeholder="Enter dns suffix" data-toggle="tooltip"\n      title="Enter the suffix to use when forwarding dns requests. The full dns request will be the combination of the sub-domain of the users dns name suffixed by the dns suffix."\n      value="<%- dns_suffix ? dns_suffix : \'\' %>">\n  </div>\n  <div class="bypass-secondary-toggle toggle-form form-group">\n    <label>Bypass Secondary Authentication</label>\n    <div class="selector <%= bypass_secondary ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Bypass secondary authentication such as two-factor authentication. Use for server users that can\'t provide a two-factor code.">\n      <span class="selector-inner glyphicon glyphicon-ok"></span>\n    </div>\n  </div>\n</div>\n'}),define("views/modalRenameUser",["jquery","underscore","backbone","views/modal","text!templates/modalRenameUser.html"],function($,_,Backbone,ModalView,modalRenameUserTemplate){"use strict";var ModalRenameUserView=ModalView.extend({className:"rename-user-modal",template:_.template(modalRenameUserTemplate),title:"Modify User",okText:"Save",hasAdvanced:!0,events:function(){return _.extend({"click .bypass-secondary-toggle":"onBypassSecondarySelect","click .client-to-client-toggle":"onClientToClientSelect"},ModalRenameUserView.__super__.events)},body:function(){return this.template(_.extend({portForwardingFormatted:this.model.portForwardingFormatted()},this.model.toJSON()))},postRender:function(){this.$(".groups input").select2({tags:[],tokenSeparators:[","," "],width:"200px"})},getPortForwarding:function(){var item,protocol,port,dport,ports=[],data=this.$(".port-forwarding input").val();data=data.split(",");for(var i=0;i<data.length;i++)protocol=null,port=null,dport=null,item=data[i],item=item.split("/"),2===item.length&&(protocol=item[1]),item=item[0].split(":"),2===item.length&&(dport=item[1]),port=item[0],port&&ports.push({protocol:protocol,port:port,dport:dport});return ports},getBypassSecondarySelect:function(){return this.$(".bypass-secondary-toggle .selector").hasClass("selected")},setBypassSecondarySelect:function(state){state?(this.$(".bypass-secondary-toggle .selector").addClass("selected"),this.$(".bypass-secondary-toggle .selector-inner").show()):(this.$(".bypass-secondary-toggle .selector").removeClass("selected"),this.$(".bypass-secondary-toggle .selector-inner").hide())},onBypassSecondarySelect:function(){this.setBypassSecondarySelect(!this.getBypassSecondarySelect())},getClientToClientSelect:function(){return this.$(".client-to-client-toggle .selector").hasClass("selected")},setClientToClientSelect:function(state){state?(this.$(".client-to-client-toggle .selector").addClass("selected"),this.$(".client-to-client-toggle .selector-inner").show()):(this.$(".client-to-client-toggle .selector").removeClass("selected"),this.$(".client-to-client-toggle .selector-inner").hide())},onClientToClientSelect:function(){this.setClientToClientSelect(!this.getClientToClientSelect())},getGroups:function(){var groups=[],groupsData=this.$(".groups input").select2("data");if(groupsData.length)for(var i=0;i<groupsData.length;i++)groups.push(groupsData[i].text);else{var groupsVal=this.$(".groups input").val();groupsVal&&"Enter groups"!==groupsVal&&(groups=[groupsVal])}return groups},onOk:function(){var i,name=this.$(".name input").val(),email=this.$(".email input").val(),emailReg=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,dnsSuffix=this.$(".dns-suffix input").val(),pin=this.$(".pin input").val()||null,bypassSecondary=this.getBypassSecondarySelect(),clientToClient=this.getClientToClientSelect(),portForwarding=this.getPortForwarding(),groups=this.getGroups(),authType=this.$(".auth-type select").val();"******"===pin&&(pin=!0);var networkLink,networkLinks=[],networkLinksTemp=this.$(".network-links input").val().split(",");for(i=0;i<networkLinksTemp.length;i++)networkLink=$.trim(networkLinksTemp[i]),networkLink&&networkLinks.push(networkLink);var dnsServer,dnsServers=[],dnsServersTemp=this.$(".dns-servers input").val().split(",");for(i=0;i<dnsServersTemp.length;i++)dnsServer=$.trim(dnsServersTemp[i]),dnsServer&&dnsServers.push(dnsServer);if(!name)return void this.setAlert("danger","Name can not be empty.",".form-group.name");if(email){if(!emailReg.test(email))return void this.setAlert("danger","Email is not valid.",".form-group.email")}else email=null;this.setLoading("Modifying user..."),this.model.save({name:name,groups:groups,email:email,pin:pin,network_links:networkLinks,bypass_secondary:bypassSecondary,client_to_client:clientToClient,dns_servers:dnsServers,dns_suffix:dnsSuffix,port_forwarding:portForwarding,auth_type:authType},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalRenameUserView}),define("text!templates/usersListItem.html",[],function(){return'<%\nname = name + (email ? \' (\' + email + \')\' : \'\');\n\nif (name.length > 40) {\n  name = name.substr(0, 40);\n  if (name.substr(39, 1) === \'.\') {\n    name += \'..\';\n  } else {\n    name += \'...\';\n  }\n}\n%>\n<div class="user layout-horizontal">\n  <div class="selector no-select">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n  <div class="name-container type-<%- type %> layout-flex">\n    <span class="name-icon glyphicon glyphicon-user" <%= type === \'server\' ? \'data-toggle="tooltip" title="Server user"\' : \'\' %>></span>\n    <img class="name-gravatar" src="<%- email && gravatar ? \'//www.gravatar.com/avatar/\' + window.md5(email) + \'?r=x&s=52&d=404\' : \'\'%>" onload="$(this).show(); $(this).siblings(\'.name-icon\').hide()" onerror="$(this).hide(); $(this).siblings(\'.name-icon\').show()"/>\n    <a class="user-name title no-select" data-toggle="tooltip" title="Click to modify this user"><%- name %></a>\n    <span class="user-id title">(<%- id %>)</span>\n  </div>\n  <div class="user-dns-name" data-toggle="tooltip"\n      title="User dns name" <%= dns_mapping ? \'\' : \'style="display: none"\' %>>\n    <span class="fa fa-globe"></span><span\n      class="title name"><%- dns_mapping %></span>\n  </div>\n  <div class="user-network-link" data-toggle="tooltip"\n      title="User network links">\n    <% for (var i in network_links) { %>\n      <span class="fa fa-circle-o"></span><span\n        class="title link"><%- network_links[i] %></span>\n    <% } %>\n  </div>\n  <div class="sso-logos">\n    <div class="saml-logo" data-toggle="tooltip" title="User authenticated with SAML" <%= bypass_secondary !== true && sso && sso.indexOf(\'saml\') !== -1 && auth_type.indexOf(\'saml\') !== -1 ? \'\' : \'style="display: none"\' %>><i class="fa fa-lock"></i></div>\n    <div class="google-logo" data-toggle="tooltip" title="User is authenticating with Google Apps" <%= bypass_secondary !== true && sso && sso.indexOf(\'google\') !== -1 && auth_type.indexOf(\'google\') !== -1 ? \'\' : \'style="display: none"\' %>></div>\n    <div class="slack-logo" data-toggle="tooltip" title="User is authenticating with Slack" <%= bypass_secondary !== true && sso && sso.indexOf(\'slack\') !== -1 && auth_type.indexOf(\'slack\') !== -1 ? \'\' : \'style="display: none"\' %>></div>\n    <div class="okta-logo" data-toggle="tooltip" title="User is authenticating with Okta" <%= bypass_secondary !== true && sso && sso.indexOf(\'okta\') !== -1 && auth_type.indexOf(\'okta\') !== -1 ? \'\' : \'style="display: none"\' %>></div>\n    <div class="onelogin-logo" data-toggle="tooltip" title="User is authenticating with OneLogin" <%= bypass_secondary !== true && sso && sso.indexOf(\'onelogin\') !== -1 && auth_type.indexOf(\'onelogin\') !== -1 ? \'\' : \'style="display: none"\' %>></div>\n    <div class="radius-logo" data-toggle="tooltip" title="User is authenticating with Radius" <%= bypass_secondary !== true && sso === \'radius\' && auth_type === \'radius\' ? \'\' : \'style="display: none"\' %>><i class="fa fa-lock"></i></div>\n    <div class="plugin-logo" data-toggle="tooltip" title="User is authenticating with plugin" <%= bypass_secondary !== true && auth_type === \'plugin\' ? \'\' : \'style="display: none"\' %>><i class="fa fa-lock"></i></div>\n    <div class="duo-logo" data-toggle="tooltip" title="User is authenticating with Duo Security" <%= bypass_secondary !== true && sso && sso.indexOf(\'duo\') !== -1 && auth_type.indexOf(\'duo\') !== -1 ? \'\' : \'style="display: none"\' %>></div>\n    <div class="yubico-logo" data-toggle="tooltip" title="User is authenticating with Yubikey" <%= bypass_secondary !== true && sso && sso.indexOf(\'yubico\') !== -1 && auth_type.indexOf(\'yubico\') !== -1 ? \'\' : \'style="display: none"\' %>></div>\n  </div>\n  <div class="right-container <%- otp_auth ? \'\' : \'no-otp-auth\' %>">\n    <div class="status-container">\n      <div class="status-icon <%- disabled ? \'disabled\' : (status ? \'online\' : \'offline\') %>"></div>\n      <span class="status-text title"><%- disabled ? \'Disabled\' : (status ? \'Online\' : \'Offline\') %></span>\n    </div>\n    <a class="get-otp-auth glyphicon glyphicon-qrcode no-select <%- !bypass_secondary && otp_auth ? \'\' : \'no-otp-auth\' %>" data-toggle="tooltip" title="Get two-step authentication key"></a>\n    <a class="audit-user glyphicon glyphicon-list-alt no-select <%- audit ? \'\' : \'no-audit-user\' %>" data-toggle="tooltip" title="User audit"></a>\n    <a class="get-key-link glyphicon glyphicon-link no-select" data-toggle="tooltip" title="<%- key_link_tooltip %>"></a>\n    <a class="download-key glyphicon glyphicon-download no-select" data-toggle="tooltip" title="<%- download_tooltip %>" <%= key_link ? \'href="\' : \'\' %><%- key_link ? key_link : \'\' %><%= key_link ? \'"\' : \'\' %>></a>\n    <a class="disable-user glyphicon glyphicon glyphicon-ban-circle no-select" data-toggle="tooltip" title="Disable and disconnect user"></a>\n    <a class="enable-user glyphicon glyphicon glyphicon-ok-circle no-select" data-toggle="tooltip" title="Enable user"></a>\n    <a class="toggle-servers glyphicon glyphicon glyphicon-chevron-down no-select" data-toggle="tooltip" title="Show additional user information"></a>\n  </div>\n</div>\n'}),define("views/usersListItem",["jquery","underscore","backbone","models/key","collections/userAudit","views/alert","views/modalRenameUser","views/modalKeyLink","views/modalAuditUser","views/modalOtpAuth","views/userServersList","text!templates/usersListItem.html"],function($,_,Backbone,KeyModel,UserAuditCollection,AlertView,ModalRenameUserView,ModalKeyLinkView,ModalAuditUserView,ModalOtpAuthView,UserServersListView,usersListItemTemplate){"use strict";var UsersListItemView=Backbone.View.extend({template:_.template(usersListItemTemplate),events:{"click .selector":"onSelect","click .user-name":"onRename","click .get-key-link":"onGetKeyLink","click .audit-user":"onAuditUser","click .get-otp-auth":"onGetOtpAuth","click .disable-user":"onDisableUser","click .enable-user":"onEnableUser","click .toggle-servers":"onToggleServers"},initialize:function(){this.serverList=new UserServersListView({models:this.model.get("servers")})},_getDownloadTooltip:function(){return this.model.get("has_key")?"Click to download profile":"Organization must be attached to server to download profile"},_getKeyLink:function(){return this.model.get("has_key")?window.demo?"../key/demo.tar":"/key/"+this.model.get("organization")+"/"+this.model.get("id")+".tar":""},_getKeyLinkTooltip:function(){return this.model.get("has_key")?"Get temporary profile links":"Organization must be attached to server to get temporary profile links"},render:function(){return this.$el.html(this.template(_.extend({download_tooltip:this._getDownloadTooltip(),key_link:this._getKeyLink(),key_link_tooltip:this._getKeyLinkTooltip()},this.model.toJSON()))),this.$('[data-toggle="tooltip"]').tooltip(),this.$el.append(this.serverList.render().el),this.model.get("disabled")?this.$(".disable-user").hide():this.$(".enable-user").hide(),this},update:function(){var email=this.model.get("email"),name=this.model.get("name")+(email?" ("+email+")":"");name.length>40&&(name=name.substr(0,40),name+="."===name.substr(39,1)?"..":"..."),this.$(".user-name").text(name),email&&this.model.get("gravatar")?this.$(".name-gravatar").attr("src","//www.gravatar.com/avatar/"+window.md5(email)+"?r=x&s=52&d=404"):(this.$(".name-gravatar").hide(),
this.$(".name-gravatar").attr("src",""),this.$(".name-icon").show()),this.model.get("disabled")?(this.$(".user .status-icon").removeClass("online"),this.$(".user .status-icon").removeClass("offline"),this.$(".user .status-icon").addClass("disabled"),this.$(".user .status-text").text("Disabled"),this.$(".disable-user").hide(),this.$(".enable-user").show()):(this.model.get("status")?(this.$(".user .status-icon").removeClass("offline"),this.$(".user .status-icon").addClass("online"),this.$(".user .status-text").text("Online")):(this.$(".user .status-icon").removeClass("online"),this.$(".user .status-icon").addClass("offline"),this.$(".user .status-text").text("Offline")),this.$(".user .status-icon").removeClass("disabled"),this.$(".enable-user").hide(),this.$(".disable-user").show()),this.$(".download-key").tooltip("destroy"),this.$(".download-key").attr("title",this._getDownloadTooltip()),this.$(".download-key").attr("data-original-title",this._getDownloadTooltip()),this.$(".download-key").tooltip(),this.$(".get-key-link").tooltip("destroy"),this.$(".get-key-link").attr("title",this._getKeyLinkTooltip()),this.$(".get-key-link").attr("data-original-title",this._getKeyLinkTooltip()),this.$(".get-key-link").tooltip(),!this.model.get("bypass_secondary")&&this.model.get("otp_auth")?(this.$(".right-container").removeClass("no-otp-auth"),this.$(".get-otp-auth").removeClass("no-otp-auth")):(this.$(".right-container").addClass("no-otp-auth"),this.$(".get-otp-auth").addClass("no-otp-auth")),this.model.get("audit")?this.$(".audit-user").removeClass("no-audit-user"):this.$(".audit-user").addClass("no-audit-user");var dnsMapping=this.model.get("dns_mapping");dnsMapping?(this.$(".user-dns-name .name").text(dnsMapping),this.$(".user-dns-name").show()):(this.$(".user-dns-name").hide(),this.$(".user-dns-name .name").text(""));var networkLinks=this.model.get("network_links");if(this.$(".user-network-link").empty(),networkLinks)for(var i=0;i<networkLinks.length;i++)this.$(".user-network-link").append('<span class="fa fa-circle-o">').append($('<span class="title link"></span>').text(networkLinks[i]));if(this.model.get("bypass_secondary"))this.$(".saml-logo").hide(),this.$(".google-logo").hide(),this.$(".slack-logo").hide(),this.$(".duo-logo").hide(),this.$(".radius-logo").hide(),this.$(".plugin-logo").hide();else{var sso=this.model.get("sso")||"",auth_type=this.model.get("auth_type");-1!==sso.indexOf("saml")&&-1!==auth_type.indexOf("saml")?this.$(".saml-logo").show():this.$(".saml-logo").hide(),-1!==sso.indexOf("google")&&-1!==auth_type.indexOf("google")?this.$(".google-logo").show():this.$(".google-logo").hide(),-1!==sso.indexOf("slack")&&-1!==auth_type.indexOf("slack")?this.$(".slack-logo").show():this.$(".slack-logo").hide(),-1!==sso.indexOf("duo")&&-1!==auth_type.indexOf("duo")?this.$(".duo-logo").show():this.$(".duo-logo").hide(),-1!==sso.indexOf("yubico")&&-1!==auth_type.indexOf("yubico")?this.$(".yubico-logo").show():this.$(".yubico-logo").hide(),-1!==sso.indexOf("okta")&&-1!==auth_type.indexOf("okta")?this.$(".okta-logo").show():this.$(".okta-logo").hide(),-1!==sso.indexOf("onelogin")&&-1!==auth_type.indexOf("onelogin")?this.$(".onelogin-logo").show():this.$(".onelogin-logo").hide(),"radius"===sso&&"radius"===auth_type?this.$(".radius-logo").show():this.$(".radius-logo").hide(),"plugin"===auth_type?this.$(".plugin-logo").show():this.$(".plugin-logo").hide()}this.serverList.update(this.model.get("servers"))},getSelect:function(){return this.$(".selector").hasClass("selected")},setSelect:function(state,shiftKey){state!==this.getSelect()&&(state?(this.$(".selector").addClass("selected"),this.$(".selector-inner").show()):(this.$(".selector").removeClass("selected"),this.$(".selector-inner").hide()),this.trigger("select",this,shiftKey))},onSelect:function(evt){this.setSelect(!this.getSelect(),evt.shiftKey)},onRename:function(){var modal=new ModalRenameUserView({model:this.model.clone()});this.addView(modal)},onGetKeyLink:function(){if(this.model.get("has_key")){var modal=new ModalKeyLinkView({model:new KeyModel({organization:this.model.get("organization"),user:this.model.get("id"),otp_auth:this.model.get("otp_auth")})});this.addView(modal)}},onAuditUser:function(){var modal=new ModalAuditUserView({collection:new UserAuditCollection({user:this.model})});this.addView(modal)},onGetOtpAuth:function(){var modal=new ModalOtpAuthView({model:this.model});this.addView(modal)},onDisableUser:function(){this.$(".disable-user").hasClass("disabled")||(this.$(".disable-user").addClass("disabled"),this.model.save({disabled:!0},{success:function(){this.$(".disable-user").removeClass("disabled")}.bind(this),error:function(model,response){var message;message=response.responseJSON?response.responseJSON.error_msg:"Failed to disable user, server error occurred.";var alertView=new AlertView({type:"danger",message:message,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.$(".disable-user").removeClass("disabled")}.bind(this)}))},onEnableUser:function(){this.$(".enable-user").hasClass("disabled")||(this.$(".enable-user").addClass("disabled"),this.model.save({disabled:!1},{success:function(){this.$(".enable-user").removeClass("disabled")}.bind(this),error:function(model,response){var message;message=response.responseJSON?response.responseJSON.error_msg:"Failed to enable user, server error occurred.";var alertView=new AlertView({type:"danger",message:message,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.$(".enable-user").removeClass("disabled")}.bind(this)}))},onToggleServers:function(){var tooltipText;this.$(".toggle-servers").hasClass("glyphicon-chevron-down")?(this.$(".toggle-servers").removeClass("glyphicon-chevron-down"),this.$(".toggle-servers").addClass("glyphicon-chevron-up"),this.$(".user-servers").slideDown(window.slideTime),tooltipText="Hide additional user information"):(this.$(".toggle-servers").removeClass("glyphicon-chevron-up"),this.$(".toggle-servers").addClass("glyphicon-chevron-down"),this.$(".user-servers").slideUp(window.slideTime),tooltipText="Show additional user information"),this.$(".toggle-servers").tooltip("destroy"),this.$(".toggle-servers").attr("title",tooltipText),this.$(".toggle-servers").attr("data-original-title",tooltipText),this.$(".toggle-servers").tooltip()}});return UsersListItemView}),define("text!templates/usersList.html",[],function(){return'<div class="no-users">\n  There are no users in this organization\n</div>\n<div class="no-users-search">\n  No users found\n</div>\n<div class="loading">\n  Loading...\n</div>\n<button type="button" class="prev-page btn btn-primary btn-sm">Previous Page</button>\n<button type="button" class="next-page btn btn-primary btn-sm">Next Page</button>\n<div class="pages no-select">\n  <div class="links">\n    <a class="link first">First</a>\n    <a class="link last">Last</a>\n  </div>\n</div>\n<div class="search-time no-select"></div>\n<div class="search-more">\n  <a class="no-select">show more results</a>\n</div>\n'}),define("views/usersList",["jquery","underscore","backbone","collections/user","views/list","views/usersListItem","text!templates/usersList.html"],function($,_,Backbone,UserCollection,ListView,UsersListItemView,usersListTemplate){"use strict";var UsersListView=ListView.extend({className:"users-list-container",template:_.template(usersListTemplate),listErrorMsg:"Failed to load users, server error occurred.",events:{"click .prev-page":"prevPage","click .next-page":"nextPage","click .link.first":"firstPage","click .link.last":"lastPage","click .search-more a":"searchMore"},initialize:function(options){this.collection=new UserCollection({org:options.org}),this.listenTo(window.events,"users_updated:"+this.collection.org,this.update),UsersListView.__super__.initialize.call(this)},removeItem:function(view){view.getSelect()&&view.setSelect(!1),view.destroy()},onSelect:function(view,shiftKey){var i,curView,select=!1,lastSelected=this.lastSelected;if(lastSelected&&shiftKey&&lastSelected.getSelect()&&lastSelected!==view)for(i=0;i<this.views.length;i++){if(curView=this.views[i],select||curView!==lastSelected&&curView!==view){if(select&&(curView===lastSelected||curView===view)){this.views[i].setSelect(!0);break}}else select=!0;select&&this.views[i].setSelect(!0)}this.trigger("select",view),this.lastSelected=view},buildItem:function(model){var modelView=new UsersListItemView({model:model});return this.listenTo(modelView,"select",this.onSelect),modelView},addPageElem:function(page,curPage){var pageElem=$('<a class="link page">'+(page+1)+"</a>");this.$(".pages .link.last").before(pageElem),page===curPage&&pageElem.addClass("current"),pageElem.one("click",function(){this.collection.setPage(page),this.update()}.bind(this))},resetItems:function(views){if(views.length&&(this.$(".no-users").slideUp(window.slideTime),this.$(".no-users-search").slideUp(window.slideTime)),this.collection.getSearch())views.length||(this.$(".no-users").slideUp(window.slideTime),this.$(".no-users-search").slideDown(window.slideTime)),this.$(".prev-page").hide(),this.$(".next-page").hide(),this.$(".pages").hide(),this.$(".search-time").text("search found "+this.collection.getSearchCount()+" results in "+this.collection.getSearchTime()+" seconds"),this.$(".search-time").show(),this.collection.getSearchMore()?this.$(".search-more").show():this.$(".search-more").hide();else{var curPage=this.collection.getPage(),pageTotal=this.collection.getPageTotal();if(views.length||(this.$(".no-users").slideDown(window.slideTime),this.$(".no-users-search").slideUp(window.slideTime)),this.$(".search-time").hide(),this.$(".search-more").hide(),this.collection.getPage()?(this.$(".pages").removeClass("padded-left"),this.$(".prev-page").show()):(this.$(".pages").addClass("padded-left"),this.$(".prev-page").hide()),this.collection.isLastPage()?(this.$(".pages").addClass("padded-right"),this.$(".next-page").hide()):(this.$(".pages").removeClass("padded-right"),this.$(".next-page").show()),2>pageTotal)this.$(".pages").hide();else{this.$(".pages").show();var i,page=Math.max(0,curPage-7);for(this.$(".pages .link.page").remove(),this.$(".pages .link.first").removeClass("current"),this.$(".pages .link.last").removeClass("current"),i=0;15>i&&(page>0&&this.addPageElem(page,curPage),page+=1,!(page>pageTotal-1));i++);0===curPage?this.$(".pages .link.first").addClass("current"):curPage===pageTotal&&this.$(".pages .link.last").addClass("current")}}},getOptions:function(){if(this.collection.getSearch()){var options={search:this.collection.getSearch()};return this.collection.getSearchLimit()&&(options.limit=this.collection.getSearchLimit()),options}return{page:this.collection.getPage()}},ignore:function(options){var search=this.collection.getSearch();return search&&search!==options.data.search?!0:!search&&options.data.search?!0:void 0},prevPage:function(){this.collection.prevPage(),this.update()},nextPage:function(){this.collection.nextPage(),this.update()},firstPage:function(){this.collection.setPage(0),this.update()},lastPage:function(){this.collection.setPage(this.collection.getPageTotal()),this.update()},search:function(term){this.collection.setSearchLimit(null),this.collection.setSearch(term),this.update()},searchMore:function(){this.collection.setSearchLimit(2*this.collection.getSearchLimit()),this.update()}});return UsersListView}),define("text!templates/modalRenameOrg.html",[],function(){return'<div class="form-group">\n  <div class="form-group name">\n    <label>Name</label>\n    <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of organization" value="<%- name %>" autofocus>\n  </div>\n</div>\n'}),define("views/modalRenameOrg",["jquery","underscore","backbone","views/modal","text!templates/modalRenameOrg.html"],function($,_,Backbone,ModalView,modalRenameOrgTemplate){"use strict";var ModalRenameOrgView=ModalView.extend({className:"rename-org-modal",template:_.template(modalRenameOrgTemplate),title:"Modify Organization",okText:"Modify",body:function(){return this.template(this.model.toJSON())},onOk:function(){var name=this.$(".name input").val();return name?(this.setLoading("Modifying organization..."),void this.model.save({name:name},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})):void this.setAlert("danger","Name can not be empty.",".name")}});return ModalRenameOrgView}),define("text!templates/modalDeleteOrg.html",[],function(){return'<div class="form-group">\n  <label>Enter the name of the organization to confirm</label>\n  <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of organization" autofocus>\n</div>\n'}),define("views/modalDeleteOrg",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDeleteOrg.html"],function($,_,Backbone,ModalView,AlertView,modalDeleteOrgTemplate){"use strict";var ModalDeleteOrgView=ModalView.extend({className:"delete-org-modal",template:_.template(modalDeleteOrgTemplate),title:"Delete Organization",okText:"Delete",inputMatch:!0,initialize:function(){ModalDeleteOrgView.__super__.initialize.call(this);var alertView=new AlertView({type:"danger",message:"Deleting the organization will delete all the users in it. Any servers that are attached to the organization will be stopped.",animate:!1});this.addView(alertView),this.$(".modal-body").prepend(alertView.render().el),this.inputMatchText=this.model.get("name")},body:function(){return this.template()},onOk:function(){this.setLoading("Deleting organization..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDeleteOrgView}),define("text!templates/orgsListItem.html",[],function(){return'<div class="users-list-header">\n  <div class="label label-success toggle-hidden no-select">Organization</div><h2 class="users-list-title title"><a class="org-title no-select" data-toggle="tooltip" title="Click to modify this organization"><%- name %></a><span class="org-id title"> (<%- id %>)</span></h2>\n  <button type="button" class="org-del btn btn-danger btn-sm">Delete Organization</button>\n  <input type="text" class="org-search form-control" placeholder="Search for user">\n  <div class="user-count label label-default no-select">\n    <%- user_count %> users\n  </div>\n</div>\n'}),define("views/orgsListItem",["jquery","underscore","backbone","views/alert","views/usersList","views/modalRenameOrg","views/modalDeleteOrg","text!templates/orgsListItem.html"],function($,_,Backbone,AlertView,UsersListView,ModalRenameOrgView,ModalDeleteOrgView,orgsListItemTemplate){"use strict";var OrgsListItemView=Backbone.View.extend({className:"users-list",template:_.template(orgsListItemTemplate),events:{"click .org-title":"onRename","click .org-del":"onDelete","click .toggle-hidden":"onToggleHidden","input .org-search":"onSearch"},initialize:function(){this.usersListView=new UsersListView({org:this.model.get("id")}),this.addView(this.usersListView),this.listenTo(this.usersListView,"select",this.onSelect)},update:function(){this.$(".org-title").text(this.model.get("name")),this.$(".user-count").text(this.model.get("user_count")+" users")},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.append(this.usersListView.render().el),this.$(".org-title").tooltip({container:this.el}),this.$(".download-key").tooltip(),this},onSelect:function(view){this.trigger("select",view)},onRename:function(){var modal=new ModalRenameOrgView({model:this.model.clone()});this.addView(modal)},onDelete:function(evt){var model=this.model.clone();if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDeleteOrgView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully deleted organization.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onToggleHidden:function(evt){(evt.ctrlKey||evt.shiftKey)&&(this.usersListView.showHidden?(this.usersListView.showHidden=!1,this.$(".toggle-hidden").removeClass("label-primary"),this.$(".toggle-hidden").addClass("label-success"),this.$(".toggle-hidden").tooltip("destroy"),this.$el.removeClass("show-hidden")):(this.usersListView.showHidden=!0,this.$(".toggle-hidden").removeClass("label-success"),this.$(".toggle-hidden").addClass("label-primary"),this.$(".toggle-hidden").tooltip({title:"Showing server users"}),this.$(".toggle-hidden").tooltip("show"),this.$el.addClass("show-hidden")),this.usersListView.update())},onSearch:function(evt){this.usersListView.search($(evt.target).val()||null)}});return OrgsListItemView}),define("text!templates/modalAddOrg.html",[],function(){return'<div class="form-group">\n  <div class="form-group name">\n    <label>Name</label>\n    <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of organization" autofocus>\n  </div>\n</div>\n'}),define("views/modalAddOrg",["jquery","underscore","backbone","models/org","views/modal","text!templates/modalAddOrg.html"],function($,_,Backbone,OrgModel,ModalView,modalAddOrgTemplate){"use strict";var ModalAddOrgView=ModalView.extend({className:"add-org-modal",template:_.template(modalAddOrgTemplate),title:"Add Organization",okText:"Add",body:function(){return this.template()},onOk:function(){var name=this.$(".name input").val();if(!name)return void this.setAlert("danger","Name can not be empty.",".name");this.setLoading("Adding organization...");var orgModel=new OrgModel;orgModel.save({name:name},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddOrgView}),define("text!templates/modalAddUser.html",[],function(){return'<div class="form-group name">\n  <label>Name</label>\n  <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of user" autofocus>\n</div>\n<div class="form-group org">\n  <label>Select an organization</label>\n  <select class="form-control">\n    <% _.each(orgs, function(org) { %>\n      <option value="<%- org.id %>" <%= (lastOrg === org.id) ? \'selected\' : \'\' %>><%- org.name %></option>\n    <% }); %>\n  </select>\n</div>\n<div class="form-group groups">\n  <label>Groups</label>\n  <div class="groups-label" data-toggle="tooltip" title="Enter space seperated list of groups to associate with user. Names are case sensitive.">\n    <input type="text" placeholder="Enter groups">\n  </div>\n</div>\n<div class="form-group email">\n  <label>Email (optional)</label>\n  <input type="email" class="form-control" placeholder="Enter email address" data-toggle="tooltip" title="User email address">\n</div>\n<div class="form-group pin">\n  <label>Pin</label>\n  <input type="password" class="form-control" placeholder="Enter user pin" data-toggle="tooltip" title="User pin, required when user connects to vpn. When using with two-factor authentication the pin and two-factor authentication code should both be placed in the password field.">\n</div>\n<div class="form-group port-forwarding">\n  <label>Port Forwarding</label>\n  <input type="text" class="form-control"\n    placeholder="Enter port mappings" data-toggle="tooltip"\n    title="Enter comma seperated list of ports to forward using format source_port:dest_port/protocol or start_port-end_port/protocol. Such as 80, 80/tcp, 80:8000/tcp, 1000-2000/udp."\n    value="">\n</div>\n<div class="form-group network-links">\n  <label>Network Link</label>\n  <input type="text" class="form-control"\n    placeholder="Enter network address" data-toggle="tooltip"\n    title="Enter network address with cidr subnet. This will provision access to a clients local network to the attached vpn servers and other clients. Multiple networks may be separated by a comma.">\n</div>\n<div class="client-to-client-toggle toggle-form form-group">\n  <label>Client-to-Client Only</label>\n  <div class="selector no-select" data-toggle="tooltip" title="Only allow this client to communicate with other clients. Access to routed networks will be blocked.">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="advanced form-group">\n  <div class="form-group auth-type">\n    <label>Type</label>\n    <select class="form-control" data-toggle="tooltip" title="User authentication type. This will determine how the user authenticates. This should be set automatically when the user authenticates with single sign-on.">\n      <option value="local" selected>Local</option>\n      <option value="duo">Duo</option>\n      <option value="yubico">Yubico</option>\n      <option value="google">Google</option>\n      <option value="google_duo">Google + Duo</option>\n      <option value="google_yubico">Google + Yubico</option>\n      <option value="slack">Slack</option>\n      <option value="slack_duo">Slack + Duo</option>\n      <option value="slack_yubico">Slack + Yubico</option>\n      <option value="saml">SAML</option>\n      <option value="saml_duo">SAML + Duo</option>\n      <option value="saml_yubico">SAML + Yubico</option>\n      <option value="saml_okta">Okta</option>\n      <option value="saml_okta_duo">Okta + Duo</option>\n      <option value="saml_okta_yubico">Okta Yubico</option>\n      <option value="saml_onelogin">OneLogin</option>\n      <option value="saml_onelogin_duo">OneLogin Duo</option>\n      <option value="saml_onelogin_yubico">OneLogin Yubico</option>\n      <option value="radius">Radius</option>\n      <option value="radius_duo">Radius + Duo</option>\n      <option value="plugin">Plugin</option>\n    </select>\n  </div>\n  <div class="form-group dns-servers">\n    <label>DNS Forwarding Server</label>\n    <input type="text" class="form-control"\n      placeholder="Enter dns server" data-toggle="tooltip"\n      title="Enter dns server with port to forward sub-domain dns requests coming from this users domain. Multiple dns servers may be separated by a comma.">\n  </div>\n  <div class="form-group dns-suffix">\n    <label>DNS Forwarding Suffix</label>\n    <input type="text" class="form-control"\n      placeholder="Enter dns suffix" data-toggle="tooltip"\n      title="Enter the suffix to use when forwarding dns requests. The full dns request will be the combination of the sub-domain of the users dns name suffixed by the dns suffix.">\n  </div>\n  <div class="bypass-secondary-toggle toggle-form form-group">\n    <label>Bypass Secondary Authentication</label>\n    <div class="selector no-select" data-toggle="tooltip" title="Bypass secondary authentication such as two-factor authentication. Use for server users that can\'t provide a two-factor code.">\n      <span class="selector-inner glyphicon glyphicon-ok"></span>\n    </div>\n  </div>\n</div>\n'}),define("views/modalAddUser",["jquery","underscore","backbone","models/user","views/modal","text!templates/modalAddUser.html"],function($,_,Backbone,UserModel,ModalView,modalAddUserTemplate){"use strict";var lastOrg,ModalAddUserView=ModalView.extend({className:"add-user-modal",template:_.template(modalAddUserTemplate),title:"Add User",okText:"Add",hasAdvanced:!0,events:function(){return _.extend({"click .bypass-secondary-toggle":"onBypassSecondarySelect","click .client-to-client-toggle":"onClientToClientSelect"},ModalAddUserView.__super__.events)},initialize:function(options){this.orgs=options.orgs,ModalAddUserView.__super__.initialize.call(this)},postRender:function(){this.$(".groups input").select2({tags:[],tokenSeparators:[","," "],width:"200px"})},body:function(){return this.template({orgs:this.orgs.toJSON(),lastOrg:lastOrg})},getPortForwarding:function(){var item,protocol,port,dport,ports=[],data=this.$(".port-forwarding input").val();data=data.split(",");for(var i=0;i<data.length;i++)protocol=null,port=null,dport=null,item=data[i],item=item.split("/"),2===item.length&&(protocol=item[1]),item=item[0].split(":"),2===item.length&&(dport=item[1]),port=item[0],port&&ports.push({protocol:protocol,port:port,dport:dport});return ports},getBypassSecondarySelect:function(){return this.$(".bypass-secondary-toggle .selector").hasClass("selected")},setBypassSecondarySelect:function(state){state?(this.$(".bypass-secondary-toggle .selector").addClass("selected"),this.$(".bypass-secondary-toggle .selector-inner").show()):(this.$(".bypass-secondary-toggle .selector").removeClass("selected"),this.$(".bypass-secondary-toggle .selector-inner").hide())},onBypassSecondarySelect:function(){this.setBypassSecondarySelect(!this.getBypassSecondarySelect())},getClientToClientSelect:function(){return this.$(".client-to-client-toggle .selector").hasClass("selected")},setClientToClientSelect:function(state){state?(this.$(".client-to-client-toggle .selector").addClass("selected"),this.$(".client-to-client-toggle .selector-inner").show()):(this.$(".client-to-client-toggle .selector").removeClass("selected"),this.$(".client-to-client-toggle .selector-inner").hide())},onClientToClientSelect:function(){this.setClientToClientSelect(!this.getClientToClientSelect())},getGroups:function(){var groups=[],groupsData=this.$(".groups input").select2("data");if(groupsData.length)for(var i=0;i<groupsData.length;i++)groups.push(groupsData[i].text);else{var groupsVal=this.$(".groups input").val();groupsVal&&"Enter groups"!==groupsVal&&(groups=[groupsVal])}return groups},onOk:function(){var i,networkLink,name=this.$(".name input").val(),org=this.$(".org select").val(),email=this.$(".email input").val(),emailReg=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,dnsSuffix=this.$(".dns-suffix input").val(),pin=this.$(".pin input").val()||null,bypassSecondary=this.getBypassSecondarySelect(),clientToClient=this.getClientToClientSelect(),portForwarding=this.getPortForwarding(),groups=this.getGroups(),authType=this.$(".auth-type select").val(),networkLinks=[],networkLinksTemp=this.$(".network-links input").val().split(",");for(i=0;i<networkLinksTemp.length;i++)networkLink=$.trim(networkLinksTemp[i]),networkLink&&networkLinks.push(networkLink);var dnsServer,dnsServers=[],dnsServersTemp=this.$(".dns-servers input").val().split(",");for(i=0;i<dnsServersTemp.length;i++)dnsServer=$.trim(dnsServersTemp[i]),dnsServer&&dnsServers.push(dnsServer);if(!name)return void this.setAlert("danger","Name can not be empty.",".form-group.name");if(email){if(!emailReg.test(email))return void this.setAlert("danger","Email is not valid.",".form-group.email")}else email=null;lastOrg=org,this.setLoading("Adding user...");var userModel=new UserModel;userModel.save({organization:org,name:name,groups:groups,email:email,pin:pin,network_links:networkLinks,bypass_secondary:bypassSecondary,client_to_client:clientToClient,dns_servers:dnsServers,dns_suffix:dnsSuffix,port_forwarding:portForwarding,auth_type:authType},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddUserView}),define("models/userBulk",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var UserBulkModel=Backbone.Model.extend({defaults:{organization:null,users:null},initialize:function(){this.set({users:[]})},url:function(){return"/user/"+this.get("organization")+"/multi"},toJSON:function(){return this.get("users")},addUser:function(name,email){var users=this.get("users");users.push({name:name,email:email||null})}});return UserBulkModel}),define("text!templates/modalAddUserBulk.html",[],function(){return'<div class="form-group users">\n  <label>Enter list of usernames and optionally an email addresses on each line with a comma separating the username from the email address</label><br>\n  <textarea class="form-control" rows="12" placeholder="user1,user1@pritunl.com" spellcheck="false" autofocus></textarea>\n</div>\n<div class="form-group org">\n  <label>Select an organization</label>\n  <select class="form-control">\n    <% _.each(orgs, function(org) { %>\n      <option value="<%- org.id %>" <%= (lastOrg === org.id) ? \'selected\' : \'\' %>><%- org.name %></option>\n    <% }); %>\n  </select>\n</div>\n'}),define("views/modalAddUserBulk",["jquery","underscore","backbone","models/userBulk","views/modal","views/alert","text!templates/modalAddUserBulk.html"],function($,_,Backbone,UserBulkModel,ModalView,AlertView,modalAddUserBulkTemplate){"use strict";var lastOrg,ModalAddUserBulkView=ModalView.extend({className:"add-user-bulk-modal",template:_.template(modalAddUserBulkTemplate),title:"Bulk Add Users",okText:"Add",enterOk:!1,safeClose:!0,initialize:function(options){this.orgs=options.orgs,ModalAddUserBulkView.__super__.initialize.call(this)},body:function(){return this.template({orgs:this.orgs.toJSON(),lastOrg:lastOrg})},onOk:function(){var i,userLine,userLines=this.$(".users textarea").val().split("\n"),org=this.$(".org select").val(),model=new UserBulkModel,emailReg=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;for(i=0;i<userLines.length;i++)if(userLine=userLines[i].split(","),userLine[0]){if(userLine[1]&&!emailReg.test(userLine[1]))return void this.setAlert("danger",'Email "'+userLine[1]+'" not valid.',".form-group.users");model.addUser(userLine[0],userLine[1])}lastOrg=org,this.$(".users textarea").attr("disabled","disabled"),this.$(".org select").attr("disabled","disabled"),this.setLoading("Adding users..."),model.save({organization:org},{success:function(_,response){"users_background"===response.status?this.close(!0,response.status_msg):this.close(!0)}.bind(this),error:function(model,response){this.$(".users textarea").removeAttr("disabled"),this.$(".org select").removeAttr("disabled"),this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddUserBulkView}),define("text!templates/modalDeleteUsers.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to disconnect and delete the following users?</label>\n  <ul class="modal-user-list">\n    <% _.each(users, function(user) { %>\n      <li>\n        <%- user.name %>\n      </li>\n    <% }); %>\n  </ul>\n</div>\n'}),define("views/modalDeleteUsers",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDeleteUsers.html"],function($,_,Backbone,ModalView,AlertView,modalDeleteUsersTemplate){"use strict";var ModalDeleteUsersView=ModalView.extend({className:"delete-users-modal",template:_.template(modalDeleteUsersTemplate),title:"Delete Users",okText:"Delete",initialize:function(){var i,alertView,removingServerUsers=!1;for(ModalDeleteUsersView.__super__.initialize.call(this),i=0;i<this.collection.models.length;i++)"server"===this.collection.models[i].get("type")&&(removingServerUsers=!0);removingServerUsers&&(alertView=new AlertView({type:"danger",message:"Warning, deleting server users can break the servers.",animate:!1}),this.addView(alertView),this.$(".modal-body").prepend(alertView.render().el))},body:function(){var i,nameId,users=[],usersSort=[],usersObj={},usersData=this.collection.toJSON();for(i=0;i<usersData.length;i++)nameId=usersData[i].name+"_"+usersData[i].id,usersSort.push(nameId),usersObj[nameId]=usersData[i];for(usersSort.sort(),i=0;i<usersSort.length;i++)users.push(usersObj[usersSort[i]]);return this.template({users:users})},onOk:function(){this.setLoading("Deleting users...");var i,model,users=this.collection.models.slice(0),error=!1,count=users.length,destroyData={
success:function(){--count<1&&!error&&this.close(!0)}.bind(this),error:function(model,response){error||(this.$(".ok").hide(),this.$(".cancel").text("Close"),error=!0,this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg))}.bind(this)};for(count||this.close(),i=0;i<users.length;i++)model=users[i].clone(),model.destroy(destroyData)}});return ModalDeleteUsersView}),define("text!templates/modalEmailUsers.html",[],function(){return"<div class=\"form-group\">\n  <label>Are you sure you want to email a key link to the following users?</label>\n  <ul class=\"modal-user-list\">\n    <% _.each(users, function(user) { %>\n      <li class=\"user-<%- user.id %>\">\n        <%- user.name %><%- user.email ? ' (' + user.email + ')' : '' %>\n      </li>\n    <% }); %>\n  </ul>\n</div>\n"}),define("views/modalEmailUsers",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalEmailUsers.html"],function($,_,Backbone,ModalView,AlertView,modalEmailUsersTemplate){"use strict";var ModalEmailUsersView=ModalView.extend({className:"email-users-modal",template:_.template(modalEmailUsersTemplate),title:"Email Users",okText:"Send",initialize:function(){var i;for(ModalEmailUsersView.__super__.initialize.call(this),i=0;i<this.collection.models.length;i++)if(!this.collection.models[i].get("email")){var alertView=new AlertView({type:"warning",message:"Warning, not all of selected users have an email address configured and will not receive a key email.",animate:!1});this.addView(alertView),this.$(".modal-body").prepend(alertView.render().el);break}},body:function(){var i,nameId,users=[],usersSort=[],usersObj={},usersData=this.collection.toJSON();for(i=0;i<usersData.length;i++)nameId=usersData[i].name+"_"+usersData[i].id,usersSort.push(nameId),usersObj[nameId]=usersData[i];for(usersSort.sort(),i=0;i<usersSort.length;i++)users.push(usersObj[usersSort[i]]);return this.template({users:users})},setUserText:function(model,color,text){var email=model.get("email");this.$(".user-"+model.get("id")).removeClass("primary-text-light error-text-light warning-text-light success-text-light"),this.$(".user-"+model.get("id")).addClass(color),this.$(".user-"+model.get("id")).text(model.get("name")+(email?" ("+email+")":"")+" - "+text)},onOk:function(){if("Close"===this.$(".ok").text())return void this.close();this.setLoading("Emailing users...");var i,model,users=this.collection.models.slice(0),error=!1,count=users.length,close=function(){error||this.setAlert("success","Successfully emailed selected users."),this.$(".ok").text("Close"),this.$(".cancel").hide(),this.clearLoading()}.bind(this),saveData={success:function(model){this.setUserText(model,"success-text-light","Sent"),--count<1&&close()}.bind(this),error:function(model,response){this.setUserText(model,"error-text-light","Failed"),error||(error=!0,response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger","Failed to email users, server error occurred.")),--count<1&&close()}.bind(this)};for(count||this.close(),i=0;i<users.length;i++)model=users[i].clone(),model.get("email")?(model.save({send_key_email:!0},saveData),this.setUserText(model,"primary-text-light","Sending...")):(this.setUserText(model,"warning-text-light","Skipped"),--count<1&&close())}});return ModalEmailUsersView}),define("text!templates/orgsList.html",[],function(){return'<div class="orgs-list">\n  <div class="orgs-list-header">\n    <h1 class="orgs-list-title title">Users and Organizations</h1>\n    <div class="orgs-list-buttons">\n      <button type="button" class="header-button orgs-add-org btn btn-primary">Add Organization</button>\n      <button type="button" class="header-button orgs-add-user btn btn-primary">Add User</button>\n      <button type="button" class="header-button orgs-add-user-bulk btn btn-primary">Bulk Add Users</button>\n      <button type="button" class="header-button orgs-email-selected btn btn-warning" disabled>Email Selected</button>\n      <button type="button" class="header-button orgs-del-selected btn btn-danger" disabled>Delete Selected</button>\n    </div>\n  </div>\n  <div class="alerts-container"></div>\n  <div class="orgs-list-container">\n    <div class="no-orgs">\n      There are no organizations.\n    </div>\n  </div>\n  <button type="button" class="prev-page btn btn-primary btn-sm">Previous Page</button>\n  <button type="button" class="next-page btn btn-primary btn-sm">Next Page</button>\n  <div class="pages no-select">\n    <div class="links">\n      <a class="link first">First</a>\n      <a class="link last">Last</a>\n    </div>\n  </div>\n</div>\n'}),define("views/orgsList",["jquery","underscore","backbone","collections/org","collections/user","views/list","views/orgsListItem","views/alert","views/modalAddOrg","views/modalAddUser","views/modalAddUserBulk","views/modalDeleteUsers","views/modalEmailUsers","text!templates/orgsList.html"],function($,_,Backbone,OrgCollection,UserCollection,ListView,OrgsListItemView,AlertView,ModalAddOrgView,ModalAddUserView,ModalAddUserBulkView,ModalDeleteUsersView,ModalEmailUsersView,orgsListTemplate){"use strict";var OrgsListView=ListView.extend({listContainer:".orgs-list-container",template:_.template(orgsListTemplate),listErrorMsg:"Failed to load organizations, server error occurred.",events:{"click .orgs-list > .prev-page":"prevPage","click .orgs-list > .next-page":"nextPage","click .orgs-list > .pages .link.first":"firstPage","click .orgs-list > .pages .link.last":"lastPage","click .orgs-add-org":"onAddOrg","click .orgs-add-user":"onAddUser","click .orgs-add-user-bulk":"onAddUserBulk","click .orgs-del-selected":"onDelSelected","click .orgs-email-selected":"onEmailSelected"},initialize:function(){this.collection=new OrgCollection,this.listenTo(window.events,"organizations_updated",this.update),this.selected=[],OrgsListView.__super__.initialize.call(this)},removeItem:function(view){var i,views=view.usersListView.views;for(i=0;i<views.length;i++)views[i].getSelect()&&views[i].setSelect(!1);view.destroy()},prevPage:function(){this.collection.prevPage(),this.update()},nextPage:function(){this.collection.nextPage(),this.update()},firstPage:function(){this.collection.setPage(0),this.update()},lastPage:function(){this.collection.setPage(this.collection.getPageTotal()),this.update()},onAddOrg:function(){var modal=new ModalAddOrgView;this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added organization.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onAddUser:function(){var modal=new ModalAddUserView({orgs:this.collection});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added user.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onAddUserBulk:function(){var modal=new ModalAddUserBulkView({orgs:this.collection});this.listenToOnce(modal,"applied",function(response){var msg;msg=response?response:"Successfully added users.";var alertView=new AlertView({type:"success",message:msg,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onDelSelected:function(){var i,models=[];for(i=0;i<this.selected.length;i++)models.push(this.selected[i].model);var modal=new ModalDeleteUsersView({collection:new UserCollection(models)});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully deleted selected users.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onEmailSelected:function(){var i,models=[];for(i=0;i<this.selected.length;i++)models.push(this.selected[i].model);var modal=new ModalEmailUsersView({collection:new UserCollection(models)});this.addView(modal)},onSelect:function(view){var i;if(view.getSelect())this.selected.push(view);else for(i=0;i<this.selected.length;i++)this.selected[i]===view&&this.selected.splice(i,1);this.selected.length?this.$(".orgs-email-selected, .orgs-del-selected").removeAttr("disabled"):this.$(".orgs-email-selected, .orgs-del-selected").attr("disabled","disabled")},buildItem:function(model){var modelView=new OrgsListItemView({model:model});return this.listenTo(modelView,"select",this.onSelect),modelView},getOptions:function(){return{page:this.collection.getPage()}},addPageElem:function(page,curPage){var pageElem=$('<a class="link page">'+(page+1)+"</a>");this.$(".orgs-list > .pages .link.last").before(pageElem),page===curPage&&pageElem.addClass("current"),pageElem.one("click",function(){this.collection.setPage(page),this.update()}.bind(this))},resetItems:function(views){var curPage=this.collection.getPage(),pageTotal=this.collection.getPageTotal();if(views.length?(this.$(".orgs-add-user").removeAttr("disabled"),this.$(".orgs-add-user-bulk").removeAttr("disabled"),this.$(".no-orgs").slideUp(window.slideTime)):(this.$(".orgs-add-user").attr("disabled","disabled"),this.$(".orgs-add-user-bulk").attr("disabled","disabled"),this.$(".no-orgs").slideDown(window.slideTime)),this.collection.getPage()?(this.$(".orgs-list > .pages").removeClass("padded-left"),this.$(".orgs-list > .prev-page").show()):(this.$(".orgs-list > .pages").addClass("padded-left"),this.$(".prev-page").hide()),this.collection.isLastPage()?(this.$(".orgs-list > .pages").addClass("padded-right"),this.$(".orgs-list > .next-page").hide()):(this.$(".orgs-list > .pages").removeClass("padded-right"),this.$(".orgs-list > .next-page").show()),2>pageTotal)this.$(".orgs-list > .pages").hide();else{this.$(".orgs-list > .pages").show();var i,page=Math.max(0,curPage-7);for(this.$(".orgs-list > .pages .link.page").remove(),this.$(".orgs-list > .pages .link.first").removeClass("current"),this.$(".orgs-list > .pages .link.last").removeClass("current"),i=0;15>i&&(page>0&&this.addPageElem(page,curPage),page+=1,!(page>pageTotal-1));i++);0===curPage?this.$(".orgs-list > .pages .link.first").addClass("current"):curPage===pageTotal&&this.$(".orgs-list > .pages .link.last").addClass("current")}}});return OrgsListView}),define("views/users",["jquery","underscore","backbone","views/orgsList"],function($,_,Backbone,OrgsListView){"use strict";var UsersView=Backbone.View.extend({className:"users container",initialize:function(){this.orgsList=new OrgsListView,this.addView(this.orgsList)},render:function(){return this.$el.append(this.orgsList.render().el),this}});return UsersView}),define("models/server",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var ServerModel=Backbone.Model.extend({defaults:{id:null,name:null,status:null,uptime:null,users_online:null,devices_online:null,user_count:null,network:null,groups:null,bind_address:null,port:null,protocol:null,dh_param_bits:null,ipv6:null,ipv6_firewall:null,network_mode:null,network_start:null,network_end:null,restrict_routes:null,multi_device:null,dns_servers:null,onc_hostname:null,search_domain:null,otp_auth:null,cipher:null,hash:null,block_outside_dns:null,jumbo_frames:null,lzo_compression:null,inter_client:null,ping_interval:null,ping_timeout:null,link_ping_interval:null,link_ping_timeout:null,inactive_timeout:null,allowed_devices:null,max_clients:null,replica_count:null,vxlan:null,dns_mapping:null,debug:null,policy:null},url:function(){var url="/server";return this.get("id")&&(url+="/"+this.get("id"),this.get("operation")&&(url+="/operation/"+this.get("operation"))),url}});return ServerModel}),define("collections/server",["jquery","underscore","backbone","models/server"],function($,_,Backbone,ServerModel){"use strict";var ServerCollection=Backbone.Collection.extend({model:ServerModel,initialize:function(){this.page=window.server_page||0},url:function(){return"/server"},parse:function(response){return void 0!==response.page?(this.setPage(response.page),this.setPageTotal(response.page_total),response.servers):response},setPage:function(page){this.page=page,window.server_page=page},getPage:function(){return this.page},nextPage:function(){this.page+=1},prevPage:function(){this.page-=1},setPageTotal:function(total){this.pageTotal=total},getPageTotal:function(){return this.pageTotal},isLastPage:function(){return this.page===this.pageTotal}});return ServerCollection}),define("models/host",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var HostModel=Backbone.Model.extend({defaults:{name:null,hostname:null,instance_id:null,status:null,uptime:null,user_count:null,users_online:null,public_address:null,public_address6:null,routed_subnet6:null,local_address:null,link_address:null,availability_group:null},url:function(){var url="/host";return this.get("id")&&(url+="/"+this.get("id")),url}});return HostModel}),define("collections/host",["jquery","underscore","backbone","models/host"],function($,_,Backbone,HostModel){"use strict";var HostCollection=Backbone.Collection.extend({model:HostModel,initialize:function(){this.page=window.host_page||0},url:function(){return"/host"},parse:function(response){return void 0!==response.page?(this.setPage(response.page),this.setPageTotal(response.page_total),response.hosts):response},setPage:function(page){this.page=page,window.host_page=page},getPage:function(){return this.page},nextPage:function(){this.page+=1},prevPage:function(){this.page-=1},setPageTotal:function(total){this.pageTotal=total},getPageTotal:function(){return this.pageTotal},isLastPage:function(){return this.page===this.pageTotal}});return HostCollection}),define("models/serverRoute",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var ServerRouteModel=Backbone.Model.extend({defaults:{id:null,server:null,network:null,comment:null,virtual_network:null,network_link:null,server_link:null,nat:null,nat_interface:null,net_gateway:null,vpc_region:null,vpc_id:null},url:function(){var url="/server/"+this.get("server")+"/route";return this.get("id")&&(url+="/"+this.get("id")),url}});return ServerRouteModel}),define("collections/serverRoute",["jquery","underscore","backbone","models/serverRoute"],function($,_,Backbone,ServerRouteModel){"use strict";var ServerRouteCollection=Backbone.Collection.extend({model:ServerRouteModel,initialize:function(options){this.server=options.server},url:function(){return"/server/"+this.server+"/route"}});return ServerRouteCollection}),define("models/vpcs",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var VpcsModel=Backbone.Model.extend({defaults:{"us-east-1":[],"us-east-2":[],"us-west-1":[],"us-west-2":[],"us-gov-west-1":[],"eu-west-1":[],"eu-central-1":[],"ap-northeast-1":[],"ap-northeast-2":[],"ap-southeast-1":[],"ap-southeast-2":[],"ap-south-1":[],"sa-east-1":[]},url:"/server/vpcs"});return VpcsModel}),define("text!templates/modalModifyRoute.html",[],function(){return"<div class=\"route-comment form-group\">\n  <label>Comment</label>\n  <input type=\"text\" class=\"form-control\" placeholder=\"Enter route comment\" data-toggle=\"tooltip\" title=\"Comment for route\"  value=\"<%- comment || '' %>\">\n</div>\n<div class=\"nat-route-toggle toggle-form form-group\">\n  <label>NAT Route</label>\n  <div class=\"selector <%= nat ? 'selected' : '' %> no-select\" data-toggle=\"tooltip\" title=\"NAT vpn traffic destined to this network\">\n    <span class=\"selector-inner glyphicon glyphicon-ok\"></span>\n  </div>\n</div>\n<div class=\"nat-interface form-group\">\n  <label>NAT Interface Name</label>\n  <input type=\"text\" class=\"form-control\" placeholder=\"Auto select\" data-toggle=\"tooltip\" title=\"Optional outbound interface for NAT. Leave blank to automatically detect interface\" value=\"<%- nat_interface || '' %>\">\n</div>\n<div class=\"net-gateway-toggle toggle-form form-group\">\n  <label>Net Gateway</label>\n  <div class=\"selector <%= net_gateway ? 'selected' : '' %> no-select\" data-toggle=\"tooltip\" title=\"Route the network through the pre-existing default gateway. Useful for excluding an address or network from routing that is inside an already routed network\">\n    <span class=\"selector-inner glyphicon glyphicon-ok\"></span>\n  </div>\n</div>\n<div class=\"route-advertisement-toggle toggle-form form-group\">\n  <label>Route Advertisement</label>\n  <div class=\"selector <%= vpc_id ? 'selected' : '' %> no-select\" data-toggle=\"tooltip\" title=\"Enable VPC route advertisement\">\n    <span class=\"selector-inner glyphicon glyphicon-ok\"></span>\n  </div>\n</div>\n<div class=\"route-advertisement\" <%= vpc_id ? '' : 'style=\"display: none\"' %>>\n  <div class=\"vpc-region form-group\">\n    <label>VPC Route Advertisement Region</label>\n    <select class=\"form-control\" data-toggle=\"tooltip\" title=\"VPC region for route advertisement\">\n      <option value=\"us-east-1\" <%= vpc_region === 'us-east-1' ? 'selected' : '' %>>US East (N. Virginia)</option>\n      <option value=\"us-east-2\" <%= vpc_region === 'us-east-2' ? 'selected' : '' %>>US East (Ohio)</option>\n      <option value=\"us-west-1\" <%= vpc_region === 'us-west-1' ? 'selected' : '' %>>US West (N. California)</option>\n      <option value=\"us-west-2\" <%= vpc_region === 'us-west-2' ? 'selected' : '' %>>US West (Oregon)</option>\n      <option value=\"us-gov-west-1\" <%= vpc_region === 'us-gov-west-1' ? 'selected' : '' %>>US GovCloud (West)</option>\n      <option value=\"eu-west-1\" <%= vpc_region === 'eu-west-1' ? 'selected' : '' %>>EU (Ireland)</option>\n      <option value=\"eu-west-2\" <%= vpc_region === 'eu-west-2' ? 'selected' : '' %>>EU (London)</option>\n      <option value=\"eu-central-1\" <%= vpc_region === 'eu-central-1' ? 'selected' : '' %>>EU (Frankfurt)</option>\n      <option value=\"ca-central-1\" <%= vpc_region === 'ca-central-1' ? 'selected' : '' %>>Canada (Central)</option>\n      <option value=\"ap-northeast-1\" <%= vpc_region === 'ap-northeast-1' ? 'selected' : '' %>>Asia Pacific (Tokyo)</option>\n      <option value=\"ap-northeast-2\" <%= vpc_region === 'ap-northeast-2' ? 'selected' : '' %>>Asia Pacific (Seoul)</option>\n      <option value=\"ap-southeast-1\" <%= vpc_region === 'ap-southeast-1' ? 'selected' : '' %>>Asia Pacific (Singapore)</option>\n      <option value=\"ap-southeast-2\" <%= vpc_region === 'ap-southeast-2' ? 'selected' : '' %>>Asia Pacific (Sydney)</option>\n      <option value=\"ap-south-1\" <%= vpc_region === 'ap-south-1' ? 'selected' : '' %>>Asia Pacific (Mumbai)</option>\n      <option value=\"sa-east-1\" <%= vpc_region === 'sa-east-1' ? 'selected' : '' %>>South America (Sao Paulo)</option>\n    </select>\n  </div>\n  <div class=\"vpc-id form-group\">\n    <label>VPC Route Advertisement ID</label>\n    <select class=\"form-control\" data-toggle=\"tooltip\" title=\"VPC ID for route advertisement. EC2 server must be connected to the VPC\">\n      <option selected value=\"\">No VPCs available</option>\n    </select>\n  </div>\n</div>\n"}),define("views/modalModifyRoute",["jquery","underscore","backbone","models/vpcs","views/modal","text!templates/modalModifyRoute.html"],function($,_,Backbone,VpcsModel,ModalView,modaleModifyRouteTemplate){"use strict";var ModalModifyRouteView=ModalView.extend({className:"modify-route-modal",template:_.template(modaleModifyRouteTemplate),title:"Modify Route",okText:"Save",hasAdvanced:!1,events:function(){return _.extend({"change .vpc-region select":"updateVpcIds","click .route-advertisement-toggle":"onRotueAdSelect","click .nat-route-toggle":"onNatRouteSelect","click .net-gateway-toggle":"onNetGatewaySelect"},ModalModifyRouteView.__super__.events)},initialize:function(){this.vpcs=new VpcsModel,ModalModifyRouteView.__super__.initialize.call(this)},body:function(){return this.template(this.model.toJSON())},postRender:function(){this.$(".label").tooltip(),this.setLoading("Loading AWS VPC information...",!0),this.vpcs.fetch({success:function(){this.clearLoading(),this.updateVpcIds()}.bind(this),error:function(model,response){this.clearLoading(),this.updateVpcIds(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})},updateVpcIds:function(){var vpcId,vpcNet,vpcLabel,curVpcId=this.model.get("vpc_id"),vpcRegion=this.$(".vpc-region select").val(),vpcs=this.vpcs.get(vpcRegion)||[];if(!vpcs.length)return void this.$(".vpc-id select").html('<option selected value="">No VPCs available</option>');this.$(".vpc-id select").empty();for(var i=0;i<vpcs.length;i++)vpcId=vpcs[i].id,vpcNet=vpcs[i].network,vpcLabel=vpcId+" ("+vpcNet+")",this.$(".vpc-id select").append("<option "+(vpcId===curVpcId?"selected":"")+' value="'+vpcId+'">'+vpcLabel+"</option>")},getNatRouteSelect:function(){return this.$(".nat-route-toggle .selector").hasClass("selected")},setNatRouteSelect:function(state){state?(this.$(".nat-route-toggle .selector").addClass("selected"),this.$(".nat-route-toggle .selector-inner").show()):(this.$(".nat-route-toggle .selector").removeClass("selected"),this.$(".nat-route-toggle .selector-inner").hide())},onNatRouteSelect:function(){this.setNatRouteSelect(!this.getNatRouteSelect())},getNetGatewaySelect:function(){return this.$(".net-gateway-toggle .selector").hasClass("selected")},setNetGatewaySelect:function(state){state?(this.$(".net-gateway-toggle .selector").addClass("selected"),this.$(".net-gateway-toggle .selector-inner").show()):(this.$(".net-gateway-toggle .selector").removeClass("selected"),this.$(".net-gateway-toggle .selector-inner").hide())},onNetGatewaySelect:function(){this.setNetGatewaySelect(!this.getNetGatewaySelect())},getRotueAdSelect:function(){return this.$(".route-advertisement-toggle .selector").hasClass("selected")},setRotueAdSelect:function(state){state?(this.$(".route-advertisement-toggle .selector").addClass("selected"),this.$(".route-advertisement-toggle .selector-inner").show(),this.$(".route-advertisement").slideDown(window.slideTime)):(this.$(".route-advertisement-toggle .selector").removeClass("selected"),this.$(".route-advertisement-toggle .selector-inner").hide(),this.$(".route-advertisement").slideUp(window.slideTime))},onRotueAdSelect:function(){this.setRotueAdSelect(!this.getRotueAdSelect())},onOk:function(){var comment=this.$(".route-comment input").val(),nat=this.getNatRouteSelect(),natInterface=this.$(".nat-interface input").val(),netGateway=this.getNetGatewaySelect(),routeAd=this.getRotueAdSelect(),vpcRegion=null,vpcId=null;routeAd&&(vpcRegion=this.$(".vpc-region select").val(),vpcId=this.$(".vpc-id select").val()),this.setLoading("Modifying route..."),this.model.save({comment:comment,nat:nat,nat_interface:natInterface,net_gateway:netGateway,vpc_region:vpcRegion,vpc_id:vpcId},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalModifyRouteView}),define("text!templates/modalRemoveRoute.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to remove the <b><%- network %></b> route?</label>\n</div>\n'}),define("views/modalRemoveRoute",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalRemoveRoute.html"],function($,_,Backbone,ModalView,AlertView,modalRemoveRouteTemplate){"use strict";var ModalRemoveRouteView=ModalView.extend({className:"remove-route-modal",template:_.template(modalRemoveRouteTemplate),title:"Remove Route",okText:"Remove",body:function(){return this.template(this.model.toJSON())},onOk:function(){this.setLoading("Removing route..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalRemoveRouteView}),define("text!templates/serverRoutesListItem.html",[],function(){return'<div class="name-container">\n  <span class="name-icon glyphicon glyphicon-globe"></span>\n  <a class="route-network title" data-toggle="tooltip" title="Click to modify this route"><%- network %></a>\n  <span class="route-network-no-click title"><%- network %></span>\n  <span class="route-comment title"><%- comment %></span>\n</div>\n<div class="button-container">\n  <div class="route-vpc-id label label-purple no-select" <%= vpc_id ? \'\' : \'style="display: none;"\' %>><%- vpc_id %></div>\n  <div class="route-virtual-network label label-danger no-select" <%= virtual_network ? \'\' : \'style="display: none;"\' %>>Virtual Network</div>\n  <div class="route-network-link label label-warning no-select" <%= network_link ? \'\' : \'style="display: none;"\' %>>Network Link</div>\n  <div class="route-nat label label-success no-select" <%= nat && !net_gateway ? \'\' : \'style="display: none;"\' %>>NAT</div>\n  <div class="route-net-gateway label label-purple no-select" <%= net_gateway ? \'\' : \'style="display: none;"\' %>>Net Gateway</div>\n  <div class="route-server-link label label-primary no-select" <%= server_link ? \'\' : \'style="display: none;"\' %>>Server Link</div>\n  <button type="button" <%- virtual_network || network_link || server_link ? \'disabled\' : \'\' %> class="server-remove-route btn btn-danger btn-xs">Remove Route</button>\n</div>\n'}),define("views/serverRoutesListItem",["jquery","underscore","backbone","views/alert","views/modalModifyRoute","views/modalRemoveRoute","text!templates/serverRoutesListItem.html"],function($,_,Backbone,AlertView,ModalModifyRouteView,ModalRemoveRouteView,serverRoutesListItemTemplate){"use strict";var ServerRoutesListItemView=Backbone.View.extend({className:"route",template:_.template(serverRoutesListItemTemplate),events:{"click .route-network":"onModify","click .server-remove-route":"onRemove"},initialize:function(options){this.server=options.server},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$('[data-toggle="tooltip"]').tooltip(),this},update:function(){this.$(".route-network").text(this.model.get("network")),this.$(".route-comment").text(this.model.get("comment")),this.$(".route-network-no-click").text(this.model.get("network")),this.model.get("vpc_id")?(this.$(".route-vpc-id").text(this.model.get("vpc_id")),this.$(".route-vpc-id").show()):(this.$(".route-vpc-id").hide(),this.$(".route-vpc-id").text("")),this.model.get("virtual_network")?this.$(".route-virtual-network").show():this.$(".route-virtual-network").hide(),this.model.get("network_link")?this.$(".route-network-link").show():this.$(".route-network-link").hide(),this.model.get("server_link")?this.$(".route-server-link").show():this.$(".route-server-link").hide(),this.model.get("nat")&&!this.model.get("net_gateway")?this.$(".route-nat").show():this.$(".route-nat").hide(),this.model.get("net_gateway")?this.$(".route-net-gateway").show():this.$(".route-net-gateway").hide(),this.model.get("virtual_network")||this.model.get("network_link")||this.model.get("server_link")?this.$(".server-remove-route").attr("disabled","disabled"):this.$(".server-remove-route").removeAttr("disabled")},onModify:function(){var model=this.model.clone(),modal=new ModalModifyRouteView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully modified route.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onRemove:function(evt){var model=this.model.clone();if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalRemoveRouteView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully removed route.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)}});return ServerRoutesListItemView}),define("text!templates/serverRoutesList.html",[],function(){return""}),define("views/serverRoutesList",["jquery","underscore","backbone","collections/serverRoute","views/list","views/serverRoutesListItem","text!templates/serverRoutesList.html"],function($,_,Backbone,ServerRouteCollection,ListView,ServerRoutesListItemView,serverRoutesListTemplate){"use strict";var ServerRoutesListView=ListView.extend({className:"server-routes-list",template:_.template(serverRoutesListTemplate),listErrorMsg:"Failed to load server routes, server error occurred.",initialize:function(options){this.collection=new ServerRouteCollection({server:options.server.get("id")}),this.listenTo(window.events,"server_routes_updated:"+options.server.get("id"),this.update),this.server=options.server,this.serverView=options.serverView,ServerRoutesListView.__super__.initialize.call(this)},buildItem:function(model){return new ServerRoutesListItemView({model:model,server:this.server})}});return ServerRoutesListView}),define("collections/serverOrg",["jquery","underscore","backbone","models/serverOrg"],function($,_,Backbone,ServerOrgModel){"use strict";var ServerOrgCollection=Backbone.Collection.extend({model:ServerOrgModel,initialize:function(options){this.server=options.server},url:function(){return"/server/"+this.server+"/organization"}});return ServerOrgCollection}),define("text!templates/modalDetachOrg.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to detach the <b><%- name %></b> organization?</label>\n</div>\n'}),define("views/modalDetachOrg",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDetachOrg.html"],function($,_,Backbone,ModalView,AlertView,modalDetachOrgTemplate){"use strict";var ModalDetachOrgView=ModalView.extend({className:"detach-org-modal",template:_.template(modalDetachOrgTemplate),title:"Detach Organization",okText:"Detach",initialize:function(){ModalDetachOrgView.__super__.initialize.call(this),this.setAlert("warning","Detaching an organization will require users that are not using an offical Pritunl client to download their updated profile again before being able to connect. Users using an offical Pritunl client will be able sync the changes.")},body:function(){return this.template(this.model.toJSON())},onOk:function(){this.setLoading("Detaching organization..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDetachOrgView}),define("text!templates/serverOrgsListItem.html",[],function(){return'<div class="name-container">\n  <span class="name-icon glyphicon glyphicon-tower"></span>\n  <span class="org-name title"><%- name %></span>\n  <span class="org-id title">(<%- id %>)</span>\n</div>\n<div class="button-container">\n  <button type="button" class="server-detach-org btn btn-danger btn-xs">Detach Organization</button>\n</div>\n'}),define("views/serverOrgsListItem",["jquery","underscore","backbone","views/alert","views/modalDetachOrg","text!templates/serverOrgsListItem.html"],function($,_,Backbone,AlertView,ModalDetachOrg,serverOrgsListItemTemplate){"use strict";var ServerOrgsListItemView=Backbone.View.extend({className:"org",template:_.template(serverOrgsListItemTemplate),events:{"click .server-detach-org":"onDetachOrg"},initialize:function(options){this.server=options.server},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},update:function(){this.$(".org-name").text(this.model.get("name"))},onDetachOrg:function(evt){if("online"===this.server.get("status")){var alertView=new AlertView({type:"danger",message:"Server must be offline to detach an organization.",dismissable:!0});return void $(".alerts-container").append(alertView.render().el);
}var model=this.model.clone();if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDetachOrg({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully detached server organization.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)}});return ServerOrgsListItemView}),define("text!templates/serverOrgsList.html",[],function(){return'<div class="no-orgs">\n  There are no organizations attached to this server.\n</div>\n'}),define("views/serverOrgsList",["jquery","underscore","backbone","collections/serverOrg","views/list","views/serverOrgsListItem","text!templates/serverOrgsList.html"],function($,_,Backbone,ServerOrgCollection,ListView,ServerOrgsListItemView,serverOrgsListTemplate){"use strict";var ServerOrgsListView=ListView.extend({className:"server-orgs-list",template:_.template(serverOrgsListTemplate),listErrorMsg:"Failed to load server organizations, server error occurred.",initialize:function(options){this.collection=new ServerOrgCollection({server:options.server.get("id")}),this.listenTo(window.events,"server_organizations_updated:"+options.server.get("id"),this.update),this.server=options.server,this.serverView=options.serverView,ServerOrgsListView.__super__.initialize.call(this)},buildItem:function(model){var modelView=new ServerOrgsListItemView({model:model,server:this.server});return modelView},resetItems:function(views){views.length?this.$(".no-orgs").slideUp(window.slideTime):this.$(".no-orgs").slideDown(window.slideTime),this.serverView.updateOrgsCount(),this.serverView.updateButtons()}});return ServerOrgsListView}),define("models/serverHost",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var ServerHostModel=Backbone.Model.extend({defaults:{id:null,server:null,name:null,address:null},url:function(){var url="/server/"+this.get("server")+"/host";return this.get("id")&&(url+="/"+this.get("id")),url}});return ServerHostModel}),define("collections/serverHost",["jquery","underscore","backbone","models/serverHost"],function($,_,Backbone,ServerHostModel){"use strict";var ServerHostCollection=Backbone.Collection.extend({model:ServerHostModel,initialize:function(options){this.server=options.server},url:function(){return"/server/"+this.server+"/host"}});return ServerHostCollection}),define("text!templates/modalDetachHost.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to detach the <b><%- name %></b> host?</label>\n</div>\n'}),define("views/modalDetachHost",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDetachHost.html"],function($,_,Backbone,ModalView,AlertView,modalDetachHostTemplate){"use strict";var ModalDetachHostView=ModalView.extend({className:"detach-host-modal",template:_.template(modalDetachHostTemplate),title:"Detach Host",okText:"Detach",body:function(){return this.template(this.model.toJSON())},onOk:function(){this.setLoading("Detaching host..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDetachHostView}),define("text!templates/serverHostsListItem.html",[],function(){return'<div class="name-container">\n  <span class="name-icon glyphicon glyphicon-dashboard"></span>\n  <span class="host-name title"><%- name %></span>\n  <span class="host-public-address title"><%- address ? \'(\' + address + \')\' : \'\'%></span>\n  <span class="host-id title">(<%- id %>)</span>\n</div>\n<div class="button-container">\n  <div class="host-online label label-success no-select" <%= status === \'online\' ? \'\' : \'style="display: none;"\' %>>Online</div>\n  <div class="host-offline label label-danger no-select" <%= status === \'offline\' ? \'\' : \'style="display: none;"\' %>>Offline</div>\n  <button type="button" class="server-detach-host btn btn-danger btn-xs">Detach Host</button>\n</div>\n'}),define("views/serverHostsListItem",["jquery","underscore","backbone","views/alert","views/modalDetachHost","text!templates/serverHostsListItem.html"],function($,_,Backbone,AlertView,ModalDetachHostView,serverHostsListItemTemplate){"use strict";var ServerHostsListItemView=Backbone.View.extend({className:"host",template:_.template(serverHostsListItemTemplate),events:{"click .server-detach-host":"onDetach"},initialize:function(options){this.server=options.server},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},update:function(){this.$(".host-name").text(this.model.get("name")),this.$(".host-address")?this.$(".host-address").text("("+this.model.get("address")+")"):this.$(".host-address").text(""),"online"===this.model.get("status")?(this.$(".host-offline").hide(),this.$(".host-online").show()):"offline"===this.model.get("status")?(this.$(".host-online").hide(),this.$(".host-offline").show()):(this.$(".host-online").hide(),this.$(".host-offline").hide())},onDetach:function(evt){var model=this.model.clone();if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDetachHostView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully detached host.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)}});return ServerHostsListItemView}),define("text!templates/serverHostsList.html",[],function(){return'<div class="no-hosts">\n  There are no hosts attached to this server.\n</div>\n'}),define("views/serverHostsList",["jquery","underscore","backbone","collections/serverHost","views/list","views/serverHostsListItem","text!templates/serverHostsList.html"],function($,_,Backbone,ServerHostCollection,ListView,ServerHostsListItemView,serverHostsListTemplate){"use strict";var ServerHostsListView=ListView.extend({className:"server-hosts-list",template:_.template(serverHostsListTemplate),listErrorMsg:"Failed to load server hosts, server error occurred.",initialize:function(options){this.collection=new ServerHostCollection({server:options.server.get("id")}),this.listenTo(window.events,"server_hosts_updated:"+options.server.get("id"),this.update),this.server=options.server,this.serverView=options.serverView,ServerHostsListView.__super__.initialize.call(this)},buildItem:function(model){return new ServerHostsListItemView({model:model,server:this.server})},resetItems:function(views){views.length?this.$(".no-hosts").slideUp(window.slideTime):this.$(".no-hosts").slideDown(window.slideTime),this.serverView.updateHostsCount(),this.serverView.updateButtons()}});return ServerHostsListView}),define("models/serverLink",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var ServerLinkModel=Backbone.Model.extend({defaults:{id:null,server:null,name:null,use_local_address:null},url:function(){var url="/server/"+this.get("server")+"/link";return this.get("id")&&(url+="/"+this.get("id")),url}});return ServerLinkModel}),define("collections/serverLink",["jquery","underscore","backbone","models/serverLink"],function($,_,Backbone,ServerLinkModel){"use strict";var ServerLinkCollection=Backbone.Collection.extend({model:ServerLinkModel,initialize:function(options){this.server=options.server},url:function(){return"/server/"+this.server+"/link"}});return ServerLinkCollection}),define("text!templates/modalDetachLink.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to detach the <b><%- name %></b> link?</label>\n</div>\n'}),define("views/modalDetachLink",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDetachLink.html"],function($,_,Backbone,ModalView,AlertView,modalDetachLinkTemplate){"use strict";var ModalDetachLinkView=ModalView.extend({className:"detach-link-modal",template:_.template(modalDetachLinkTemplate),title:"Detach Link",okText:"Detach",body:function(){return this.template(this.model.toJSON())},onOk:function(){this.setLoading("Detaching link..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger","Failed to detach link, server error occurred.")}.bind(this)})}});return ModalDetachLinkView}),define("text!templates/serverLinksListItem.html",[],function(){return'<div class="name-container">\n  <span class="name-icon glyphicon glyphicon-transfer"></span>\n  <span class="link-name title"><%- name %></span>\n  <span class="link-id title">(<%- id %>)</span>\n</div>\n<div class="button-container">\n  <div class="link-use-local label label-default no-select" <%= use_local_address ? \'\' : \'style="display: none;"\' %>>LAN</div>\n  <div class="link-online label label-success no-select" <%= status === \'online\' ? \'\' : \'style="display: none;"\' %>>Online</div>\n  <div class="link-offline label label-danger no-select" <%= status === \'offline\' ? \'\' : \'style="display: none;"\' %>>Offline</div>\n  <button type="button" class="server-detach-link btn btn-danger btn-xs">Unlink Server</button>\n</div>\n'}),define("views/serverLinksListItem",["jquery","underscore","backbone","views/alert","views/modalDetachLink","text!templates/serverLinksListItem.html"],function($,_,Backbone,AlertView,ModalDetachLink,serverLinksListItemTemplate){"use strict";var ServerLinksListItemView=Backbone.View.extend({className:"link",template:_.template(serverLinksListItemTemplate),events:{"click .server-detach-link":"onDetach"},initialize:function(options){this.server=options.server},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},update:function(){this.$(".link-name").text(this.model.get("name")),"online"===this.model.get("status")?(this.$(".link-offline").hide(),this.$(".link-online").show()):"offline"===this.model.get("status")?(this.$(".link-online").hide(),this.$(".link-offline").show()):(this.$(".link-online").hide(),this.$(".link-offline").hide()),this.model.get("use_local_address")?this.$(".link-use-local").show():this.$(".link-use-local").hide()},onDetach:function(evt){var model=this.model.clone();if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDetachLink({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully detached link.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)}});return ServerLinksListItemView}),define("text!templates/serverLinksList.html",[],function(){return""}),define("views/serverLinksList",["jquery","underscore","backbone","collections/serverLink","views/list","views/serverLinksListItem","text!templates/serverLinksList.html"],function($,_,Backbone,ServerLinkCollection,ListView,ServerLinksListItemView,serverLinksListTemplate){"use strict";var ServerLinksListView=ListView.extend({className:"server-links-list",template:_.template(serverLinksListTemplate),listErrorMsg:"Failed to load server links, server error occurred.",initialize:function(options){this.collection=new ServerLinkCollection({server:options.server.get("id")}),this.listenTo(window.events,"server_links_updated:"+options.server.get("id"),this.update),this.server=options.server,this.serverView=options.serverView,ServerLinksListView.__super__.initialize.call(this)},buildItem:function(model){var modelView=new ServerLinksListItemView({model:model,server:this.server});return modelView},resetItems:function(views){views.length?this.$el.removeClass("no-links"):this.$el.addClass("no-links"),this.serverView.updateButtons()}});return ServerLinksListView}),define("models/serverOutput",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var ServerOutputModel=Backbone.Model.extend({defaults:{id:null,output:null},url:function(){return"/server/"+this.get("id")+"/output"}});return ServerOutputModel}),define("views/serverOutput",["jquery","underscore","backbone","models/serverOutput","views/text","views/alert"],function($,_,Backbone,ServerOutputModel,TextView,AlertView){"use strict";var ServerOutputView=TextView.extend({errorMsg:"Failed to load server output, server error occurred.",initialize:function(options){this.model=new ServerOutputModel({id:options.server}),this.state=!0,this.listenTo(window.events,"server_output_updated:"+options.server,this.update)},update:function(){this.getState()&&this.model.fetch({error:function(){var alertView=new AlertView({type:"danger",message:this.errorMsg,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.setData("")}.bind(this),success:function(){this.setData(this.model.get("output"))}.bind(this)})},setState:function(state){this.getState()!==state&&(this.state=state,state?(this.$el.parent().show(),this.update()):this.$el.parent().hide())},getState:function(){return this.state}});return ServerOutputView}),define("models/serverOutputLink",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var ServerOutputLinkModel=Backbone.Model.extend({defaults:{id:null,output:null},url:function(){return"/server/"+this.get("id")+"/link_output"}});return ServerOutputLinkModel}),define("views/serverOutputLink",["jquery","underscore","backbone","models/serverOutputLink","views/serverOutput"],function($,_,Backbone,ServerOutputLinkModel,ServerOutputView){"use strict";var ServerOutputLinkView=ServerOutputView.extend({errorMsg:"Failed to load server link output, server error occurred.",initialize:function(options){this.model=new ServerOutputLinkModel({id:options.server}),this.state=!1,this.listenTo(window.events,"server_link_output_updated:"+options.server,this.update)}});return ServerOutputLinkView}),!function(){function n(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function t(n){return null===n?NaN:+n}function e(n){return!isNaN(n)}function r(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function u(n){return n.length}function i(n){for(var t=1;n*t%1;)t*=10;return t}function o(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function a(){this._=Object.create(null)}function c(n){return(n+="")===la||n[0]===sa?sa+n:n}function l(n){return(n+="")[0]===sa?n.slice(1):n}function s(n){return c(n)in this._}function f(n){return(n=c(n))in this._&&delete this._[n]}function h(){var n=[];for(var t in this._)n.push(l(t));return n}function g(){var n=0;for(var t in this._)++n;return n}function p(){for(var n in this._)return!1;return!0}function v(){this._=Object.create(null)}function d(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function m(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=fa.length;r>e;++e){var u=fa[e]+t;if(u in n)return u}}function y(){}function x(){}function M(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new a;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function _(){Bo.event.preventDefault()}function b(){for(var n,t=Bo.event;n=t.sourceEvent;)t=n;return t}function w(n){for(var t=new x,e=0,r=arguments.length;++e<r;)t[arguments[e]]=M(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=Bo.event;u.target=n,Bo.event=u,t[u.type].apply(e,r)}finally{Bo.event=i}}},t}function S(n){return ga(n,ya),n}function k(n){return"function"==typeof n?n:function(){return pa(n,this)}}function E(n){return"function"==typeof n?n:function(){return va(n,this)}}function A(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=Bo.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?i:u}function C(n){return n.trim().replace(/\s+/g," ")}function N(n){return new RegExp("(?:^|\\s+)"+Bo.requote(n)+"(?:\\s+|$)","g")}function z(n){return(n+"").trim().split(/^|\s+/)}function L(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=z(n).map(T);var u=n.length;return"function"==typeof t?r:e}function T(n){var t=N(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",C(u+" "+n))):e.setAttribute("class",C(u.replace(t," ")))}}function q(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function R(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function D(n){return"function"==typeof n?n:(n=Bo.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,n)}}function P(n){return{__data__:n}}function U(n){return function(){return ma(this,n)}}function j(t){return arguments.length||(t=n),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function F(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function H(n){return ga(n,Ma),n}function O(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function Y(){var n=this.__transition__;n&&++n.active}function I(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,Jo(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+Bo.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),c=Z;a>0&&(n=n.slice(0,a));var l=ba.get(n);return l&&(n=l,c=V),a?t?u:r:t?y:i}function Z(n,t){return function(e){var r=Bo.event;Bo.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{Bo.event=r}}}function V(n,t){var e=Z(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function X(){var n=".dragsuppress-"+ ++Sa,t="click"+n,e=Bo.select(Qo).on("touchmove"+n,_).on("dragstart"+n,_).on("selectstart"+n,_);if(wa){var r=Ko.style,u=r[wa];r[wa]="none"}return function(i){function o(){e.on(t,null)}e.on(n,null),wa&&(r[wa]=u),i&&(e.on(t,function(){_(),o()},!0),setTimeout(o,0))}}function $(n,t){t.changedTouches&&(t=t.changedTouches[0]);var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>ka&&(Qo.scrollX||Qo.scrollY)){e=Bo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=e[0][0].getScreenCTM();ka=!(u.f||u.e),e.remove()}return ka?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}function B(){return Bo.event.changedTouches[0].identifier}function W(){return Bo.event.target}function J(){return Qo}function G(n){return n>0?1:0>n?-1:0}function K(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function Q(n){return n>1?0:-1>n?Ea:Math.acos(n)}function nt(n){return n>1?Ca:-1>n?-Ca:Math.asin(n)}function tt(n){return((n=Math.exp(n))-1/n)/2}function et(n){return((n=Math.exp(n))+1/n)/2}function rt(n){return((n=Math.exp(2*n))-1)/(n+1)}function ut(n){return(n=Math.sin(n/2))*n}function it(){}function ot(n,t,e){return this instanceof ot?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof ot?new ot(n.h,n.s,n.l):Mt(""+n,_t,ot):new ot(n,t,e)}function at(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,new dt(u(n+120),u(n),u(n-120))}function ct(n,t,e){return this instanceof ct?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof ct?new ct(n.h,n.c,n.l):n instanceof st?ht(n.l,n.a,n.b):ht((n=bt((n=Bo.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new ct(n,t,e)}function lt(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new st(e,Math.cos(n*=La)*t,Math.sin(n)*t)}function st(n,t,e){return this instanceof st?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof st?new st(n.l,n.a,n.b):n instanceof ct?lt(n.h,n.c,n.l):bt((n=dt(n)).r,n.g,n.b):new st(n,t,e)}function ft(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=gt(u)*Ya,r=gt(r)*Ia,i=gt(i)*Za,new dt(vt(3.2404542*u-1.5371385*r-.4985314*i),vt(-.969266*u+1.8760108*r+.041556*i),vt(.0556434*u-.2040259*r+1.0572252*i))}function ht(n,t,e){return n>0?new ct(Math.atan2(e,t)*Ta,Math.sqrt(t*t+e*e),n):new ct(NaN,NaN,n)}function gt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function pt(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function vt(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function dt(n,t,e){return this instanceof dt?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof dt?new dt(n.r,n.g,n.b):Mt(""+n,dt,at):new dt(n,t,e)}function mt(n){return new dt(n>>16,255&n>>8,255&n)}function yt(n){return mt(n)+""}function xt(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function Mt(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(St(u[0]),St(u[1]),St(u[2]))}return(i=$a.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function _t(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=NaN,u=c>0&&1>c?0:r),new ot(r,u,c)}function bt(n,t,e){n=wt(n),t=wt(t),e=wt(e);var r=pt((.4124564*n+.3575761*t+.1804375*e)/Ya),u=pt((.2126729*n+.7151522*t+.072175*e)/Ia),i=pt((.0193339*n+.119192*t+.9503041*e)/Za);return st(116*u-16,500*(r-u),200*(u-i))}function wt(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function St(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function kt(n){return"function"==typeof n?n:function(){return n}}function Et(n){return n}function At(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Ct(t,e,n,r)}}function Ct(n,t,e,r){function u(){var n,t=c.status;if(!t&&zt(c)||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return void o.error.call(i,r)}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=Bo.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!Qo.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=Bo.event;Bo.event=n;try{o.progress.call(i,c)}finally{Bo.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(l=n,i):l},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(Jo(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var s in a)c.setRequestHeader(s,a[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},Bo.rebind(i,o,"on"),null==r?i:i.get(Nt(r))}function Nt(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function zt(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function Lt(){var n=Tt(),t=qt()-n;t>24?(isFinite(t)&&(clearTimeout(Ga),Ga=setTimeout(Lt,t)),Ja=0):(Ja=1,Qa(Lt))}function Tt(){var n=Date.now();for(Ka=Ba;Ka;)n>=Ka.t&&(Ka.f=Ka.c(n-Ka.t)),Ka=Ka.n;return n}function qt(){for(var n,t=Ba,e=1/0;t;)t.f?t=n?n.n=t.n:Ba=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Wa=n,e}function Rt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Dt(n,t){var e=Math.pow(10,3*ca(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Pt(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],o=0,a=r[0],c=0;u>0&&a>0&&(c+a+1>t&&(a=Math.max(1,t-c)),i.push(n.substring(u-=a,u+a)),!((c+=a+1)>t));)a=r[o=(o+1)%r.length];return i.reverse().join(e)}:Et;return function(n){var e=tc.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",c=e[4]||"",l=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===c&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=ec.get(g)||Ut;var x=l&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>p){var c=Bo.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var M,_,b=n.lastIndexOf(".");if(0>b){var w=y?n.lastIndexOf("e"):-1;0>w?(M=n,_=""):(M=n.substring(0,w),_=n.substring(w))}else M=n.substring(0,b),_=t+n.substring(b+1);!l&&f&&(M=i(M,1/0));var S=v.length+M.length+_.length+(x?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return x&&(M=i(k+M,k.length?s-_.length:1/0)),u+=v,n=M+_,("<"===o?u+n+k:">"===o?k+u+n:"^"===o?k.substring(0,S>>=1)+u+n+k.substring(S):u+(x?n:k+n))+e}}}function Ut(n){return n+""}function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ft(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new uc(e-1)),1),e}function i(n,e){return t(n=new uc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{uc=jt;var r=new jt;return r._=n,o(r,t,e)}finally{uc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Ht(n);return c.floor=c,c.round=Ht(r),c.ceil=Ht(u),c.offset=Ht(i),c.range=a,n}function Ht(n){return function(t,e){try{uc=jt;var r=new jt;return r._=t,n(r,e)._}finally{uc=Date}}}function Ot(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(c,a)),null!=(u=oc[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=C[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),o.push(e),c=a+1);return o.push(n.slice(c,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&uc!==jt,o=new(i?jt:uc);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(0|r.Z/100),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,l=e.length;c>a;){if(r>=l)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=N[o in oc?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){b.lastIndex=0;var r=b.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){M.lastIndex=0;var r=M.exec(t.slice(e));return r?(n.w=_.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.slice(e));return r?(n.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,C.c.toString(),t,r)}function c(n,t,r){return e(n,C.x.toString(),t,r)}function l(n,t,r){return e(n,C.X.toString(),t,r)}function s(n,t,e){var r=x.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{uc=jt;var t=new uc;return t._=n,r(t)}finally{uc=Date}}var r=t(n);return e.parse=function(n){try{uc=jt;var t=r.parse(n);return t&&t._}finally{uc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ae;var x=Bo.map(),M=It(v),_=Zt(v),b=It(d),w=Zt(d),S=It(m),k=Zt(m),E=It(y),A=Zt(y);p.forEach(function(n,t){x.set(n.toLowerCase(),t)});var C={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return Yt(n.getDate(),t,2)},e:function(n,t){return Yt(n.getDate(),t,2)},H:function(n,t){return Yt(n.getHours(),t,2)},I:function(n,t){return Yt(n.getHours()%12||12,t,2)},j:function(n,t){return Yt(1+rc.dayOfYear(n),t,3)},L:function(n,t){return Yt(n.getMilliseconds(),t,3)},m:function(n,t){return Yt(n.getMonth()+1,t,2)},M:function(n,t){return Yt(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return Yt(n.getSeconds(),t,2)},U:function(n,t){return Yt(rc.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Yt(rc.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return Yt(n.getFullYear()%100,t,2)},Y:function(n,t){return Yt(n.getFullYear()%1e4,t,4)},Z:ie,"%":function(){return"%"}},N={a:r,A:u,b:i,B:o,c:a,d:Qt,e:Qt,H:te,I:te,j:ne,L:ue,m:Kt,M:ee,p:s,S:re,U:Xt,w:Vt,W:$t,x:c,X:l,y:Wt,Y:Bt,Z:Jt,"%":oe};return t}function Yt(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function It(n){return new RegExp("^(?:"+n.map(Bo.requote).join("|")+")","i")}function Zt(n){for(var t=new a,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Vt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Xt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function $t(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Bt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Wt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.y=Gt(+r[0]),e+r[0].length):-1}function Jt(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,
e+5):-1}function Gt(n){return n+(n>68?1900:2e3)}function Kt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Qt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function ne(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function te(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ee(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function re(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ue(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ie(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=0|ca(t)/60,u=ca(t)%60;return e+Yt(r,"0",2)+Yt(u,"0",2)}function oe(n,t,e){cc.lastIndex=0;var r=cc.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ae(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ce(){}function le(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function se(n,t){n&&hc.hasOwnProperty(n.type)&&hc[n.type](n,t)}function fe(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function he(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)fe(n[e],t,1);t.polygonEnd()}function ge(){function n(n,t){n*=La,t=t*La/2+Ea/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),l=Math.sin(t),s=i*l,f=u*c+s*Math.cos(a),h=s*o*Math.sin(a);pc.add(Math.atan2(h,f)),r=n,u=c,i=l}var t,e,r,u,i;vc.point=function(o,a){vc.point=n,r=(t=o)*La,u=Math.cos(a=(e=a)*La/2+Ea/4),i=Math.sin(a)},vc.lineEnd=function(){n(t,e)}}function pe(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function ve(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function de(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function me(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ye(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function xe(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Me(n){return[Math.atan2(n[1],n[0]),nt(n[2])]}function _e(n,t){return ca(n[0]-t[0])<Na&&ca(n[1]-t[1])<Na}function be(n,t){n*=La;var e=Math.cos(t*=La);we(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function we(n,t,e){++dc,yc+=(n-yc)/dc,xc+=(t-xc)/dc,Mc+=(e-Mc)/dc}function Se(){function n(n,u){n*=La;var i=Math.cos(u*=La),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);mc+=l,_c+=l*(t+(t=o)),bc+=l*(e+(e=a)),wc+=l*(r+(r=c)),we(t,e,r)}var t,e,r;Ac.point=function(u,i){u*=La;var o=Math.cos(i*=La);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),Ac.point=n,we(t,e,r)}}function ke(){Ac.point=be}function Ee(){function n(n,t){n*=La;var e=Math.cos(t*=La),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=u*c-i*a,s=i*o-r*c,f=r*a-u*o,h=Math.sqrt(l*l+s*s+f*f),g=r*o+u*a+i*c,p=h&&-Q(g)/h,v=Math.atan2(h,g);Sc+=p*l,kc+=p*s,Ec+=p*f,mc+=v,_c+=v*(r+(r=o)),bc+=v*(u+(u=a)),wc+=v*(i+(i=c)),we(r,u,i)}var t,e,r,u,i;Ac.point=function(o,a){t=o,e=a,Ac.point=n,o*=La;var c=Math.cos(a*=La);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),we(r,u,i)},Ac.lineEnd=function(){n(t,e),Ac.lineEnd=ke,Ac.point=be}}function Ae(){return!0}function Ce(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(_e(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return void u.lineEnd()}var c=new ze(e,n,null,!0),l=new ze(e,null,c,!1);c.o=l,i.push(c),o.push(l),c=new ze(r,n,null,!1),l=new ze(r,null,c,!0),c.o=l,i.push(c),o.push(l)}}),o.sort(t),Ne(i),Ne(o),i.length){for(var a=0,c=e,l=o.length;l>a;++a)o[a].e=c=!c;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,l=s.length;l>a;++a)u.point((f=s[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var a=s.length-1;a>=0;--a)u.point((f=s[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function Ne(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function ze(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Le(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function l(){y.point=o,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);M.point(e[0],e[1])}function f(){M.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),M.lineEnd();var n,t=M.clean(),e=x.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,o=-1;if(r>0){for(_||(i.polygonStart(),_=!0),i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Te))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:l,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=l,g=Bo.merge(g);var n=je(m,p);g.length?(_||(i.polygonStart(),_=!0),Ce(g,Re,n,e,i)):n&&(_||(i.polygonStart(),_=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),_&&(i.polygonEnd(),_=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},x=qe(),M=t(x),_=!1;return y}}function Te(n){return n.length>1}function qe(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:y,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Re(n,t){return((n=n.x)[0]<0?n[1]-Ca-Na:Ca-n[1])-((t=t.x)[0]<0?t[1]-Ca-Na:Ca-t[1])}function De(n){var t,e=NaN,r=NaN,u=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?Ea:-Ea,c=ca(i-e);ca(c-Ea)<Na?(n.point(e,r=(r+o)/2>0?Ca:-Ca),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=Ea&&(ca(e-u)<Na&&(e-=u*Na),ca(i-a)<Na&&(i-=a*Na),r=Pe(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function Pe(n,t,e,r){var u,i,o=Math.sin(n-e);return ca(o)>Na?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function Ue(n,t,e,r){var u;if(null==n)u=e*Ca,r.point(-Ea,u),r.point(0,u),r.point(Ea,u),r.point(Ea,0),r.point(Ea,-u),r.point(0,-u),r.point(-Ea,-u),r.point(-Ea,0),r.point(-Ea,u);else if(ca(n[0]-t[0])>Na){var i=n[0]<t[0]?Ea:-Ea;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function je(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;pc.reset();for(var a=0,c=t.length;c>a;++a){var l=t[a],s=l.length;if(s)for(var f=l[0],h=f[0],g=f[1]/2+Ea/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=l[d];var m=n[0],y=n[1]/2+Ea/4,x=Math.sin(y),M=Math.cos(y),_=m-h,b=_>=0?1:-1,w=b*_,S=w>Ea,k=p*x;if(pc.add(Math.atan2(k*b*Math.sin(w),v*M+k*Math.cos(w))),i+=S?_+b*Aa:_,S^h>=e^m>=e){var E=de(pe(f),pe(n));xe(E);var A=de(u,E);xe(A);var C=(S^_>=0?-1:1)*nt(A[2]);(r>C||r===C&&(E[0]||E[1]))&&(o+=S^_>=0?1:-1)}if(!d++)break;h=m,p=x,v=M,f=n}}return(-Na>i||Na>i&&0>pc)^1&o}function Fe(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?Ea:-Ea),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(_e(e,g)||_e(p,g))&&(p[0]+=Na,p[1]+=Na,v=t(p[0],p[1]))),v!==c)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(s=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&_e(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return s|(l&&c)<<1}}}function r(n,t,e){var r=pe(n),u=pe(t),o=[1,0,0],a=de(r,u),c=ve(a,a),l=a[0],s=c-l*l;if(!s)return!e&&n;var f=i*c/s,h=-i*l/s,g=de(o,a),p=ye(o,f),v=ye(a,h);me(p,v);var d=g,m=ve(p,d),y=ve(d,d),x=m*m-y*(ve(p,p)-1);if(!(0>x)){var M=Math.sqrt(x),_=ye(d,(-m-M)/y);if(me(_,p),_=Me(_),!e)return _;var b,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(b=w,w=S,S=b);var A=S-w,C=ca(A-Ea)<Na,N=C||Na>A;if(!C&&k>E&&(b=k,k=E,E=b),N?C?k+E>0^_[1]<(ca(_[0]-w)<Na?k:E):k<=_[1]&&_[1]<=E:A>Ea^(w<=_[0]&&_[0]<=S)){var z=ye(d,(-m+M)/y);return me(z,p),[_,Me(z)]}}}function u(t,e){var r=o?n:Ea-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=ca(i)>Na,c=gr(n,6*La);return Le(t,e,c,o?[0,-n]:[-Ea,n-Ea])}function He(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,l=o.y,s=a.x,f=a.y,h=0,g=1,p=s-c,v=f-l;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-l,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-l,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:l+h*v}),1>g&&(u.b={x:c+g*p,y:l+g*v}),u}}}}}}function Oe(n,t,e,r){function u(r,u){return ca(r[0]-n)<Na?u>0?0:3:ca(r[0]-e)<Na?u>0?2:1:ca(r[1]-t)<Na?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,l=a[0];c>o;++o)i=a[o],l[1]<=r?i[1]>r&&K(l,i,n)>0&&++t:i[1]<=r&&K(l,i,n)<0&&--t,l=i;return 0!==t}function l(i,a,c,l){var s=0,f=0;if(null==i||(s=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do l.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+c+4)%4)!==f)}else l.point(a[0],a[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&a.point(n,t)}function h(){N.point=p,d&&d.push(m=[]),S=!0,w=!1,_=b=NaN}function g(){v&&(p(y,x),M&&w&&A.rejoin(),v.push(A.buffer())),N.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-Nc,Math.min(Nc,n)),t=Math.max(-Nc,Math.min(Nc,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,x=t,M=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:_,y:b},b:{x:n,y:t}};C(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}_=n,b=t,w=e}var v,d,m,y,x,M,_,b,w,S,k,E=a,A=qe(),C=He(n,t,e,r),N={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=A,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=Bo.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),l(null,null,1,a),a.lineEnd()),u&&Ce(v,i,t,l,a),a.polygonEnd()),v=d=m=null}};return N}}function Ye(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function Ie(n){var t=0,e=Ea/3,r=ir(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*Ea/180,e=n[1]*Ea/180):[180*(t/Ea),180*(e/Ea)]},u}function Ze(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,nt((i-(n*n+e*e)*u*u)/(2*u))]},e}function Ve(){function n(n,t){Lc+=u*n-r*t,r=n,u=t}var t,e,r,u;Pc.point=function(i,o){Pc.point=n,t=r=i,e=u=o},Pc.lineEnd=function(){n(t,e)}}function Xe(n,t){Tc>n&&(Tc=n),n>Rc&&(Rc=n),qc>t&&(qc=t),t>Dc&&(Dc=t)}function $e(){function n(n,t){o.push("M",n,",",t,i)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function u(){o.push("Z")}var i=Be(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=Be(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Be(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function We(n,t){yc+=n,xc+=t,++Mc}function Je(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);_c+=o*(t+n)/2,bc+=o*(e+r)/2,wc+=o,We(t=n,e=r)}var t,e;jc.point=function(r,u){jc.point=n,We(t=r,e=u)}}function Ge(){jc.point=We}function Ke(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);_c+=o*(r+n)/2,bc+=o*(u+t)/2,wc+=o,o=u*n-r*t,Sc+=o*(r+n),kc+=o*(u+t),Ec+=3*o,We(r=n,u=t)}var t,e,r,u;jc.point=function(i,o){jc.point=n,We(t=r=i,e=u=o)},jc.lineEnd=function(){n(t,e)}}function Qe(n){function t(t,e){n.moveTo(t,e),n.arc(t,e,o,0,Aa)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:y};return a}function nr(n){function t(n){return(a?r:e)(n)}function e(t){return rr(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){x=NaN,S.point=i,t.lineStart()}function i(e,r){var i=pe([e,r]),o=n(e,r);u(x,M,y,_,b,w,x=o[0],M=o[1],y=e,_=i[0],b=i[1],w=i[2],a,t),t.point(x,M)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=l,S.lineEnd=s}function l(n,t){i(f=n,h=t),g=x,p=M,v=_,d=b,m=w,S.point=i}function s(){u(x,M,y,_,b,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,x,M,_,b,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,l,s,f,h,g,p,v,d,m){var y=s-t,x=f-e,M=y*y+x*x;if(M>4*i&&d--){var _=a+g,b=c+p,w=l+v,S=Math.sqrt(_*_+b*b+w*w),k=Math.asin(w/=S),E=ca(ca(w)-1)<Na||ca(r-h)<Na?(r+h)/2:Math.atan2(b,_),A=n(E,k),C=A[0],N=A[1],z=C-t,L=N-e,T=x*z-y*L;(T*T/M>i||ca((y*z+x*L)/M-.5)>.3||o>a*g+c*p+l*v)&&(u(t,e,r,a,c,l,C,N,E,_/=S,b/=S,w,d,m),m.point(C,N),u(C,N,E,_,b,w,s,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*La),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function tr(n){var t=nr(function(t,e){return n([t*Ta,e*Ta])});return function(n){return or(t(n))}}function er(n){this.stream=n}function rr(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ur(n){return ir(function(){return n})()}function ir(n){function t(n){return n=a(n[0]*La,n[1]*La),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Ta,n[1]*Ta]}function r(){a=Ye(o=lr(m,y,x),i);var n=i(v,d);return c=g-n[0]*h,l=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,o,a,c,l,s,f=nr(function(n,t){return n=i(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,y=0,x=0,M=Cc,_=Et,b=null,w=null;return t.stream=function(n){return s&&(s.valid=!1),s=or(M(o,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(M=null==n?(b=n,Cc):Fe((b=+n)*La),u()):b},t.clipExtent=function(n){return arguments.length?(w=n,_=n?Oe(n[0][0],n[0][1],n[1][0],n[1][1]):Et,u()):w},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*La,d=n[1]%360*La,r()):[v*Ta,d*Ta]},t.rotate=function(n){return arguments.length?(m=n[0]%360*La,y=n[1]%360*La,x=n.length>2?n[2]%360*La:0,r()):[m*Ta,y*Ta,x*Ta]},Bo.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function or(n){return rr(n,function(t,e){n.point(t*La,e*La)})}function ar(n,t){return[n,t]}function cr(n,t){return[n>Ea?n-Aa:-Ea>n?n+Aa:n,t]}function lr(n,t,e){return n?t||e?Ye(fr(n),hr(t,e)):fr(n):t||e?hr(t,e):cr}function sr(n){return function(t,e){return t+=n,[t>Ea?t-Aa:-Ea>t?t+Aa:t,e]}}function fr(n){var t=sr(n);return t.invert=sr(-n),t}function hr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*r+a*u;return[Math.atan2(c*i-s*o,a*r-l*u),nt(s*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*i-c*o;return[Math.atan2(c*i+l*o,a*r+s*u),nt(s*r-a*u)]},e}function gr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=pr(e,u),i=pr(e,i),(o>0?i>u:u>i)&&(u+=o*Aa)):(u=n+o*Aa,i=n-.5*c);for(var l,s=u;o>0?s>i:i>s;s-=c)a.point((l=Me([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],l[1])}}function pr(n,t){var e=pe(t);e[0]-=n,xe(e);var r=Q(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Na)%(2*Math.PI)}function vr(n,t,e){var r=Bo.range(n,t-Na,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function dr(n,t,e){var r=Bo.range(n,t-Na,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function mr(n){return n.source}function yr(n){return n.target}function xr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),l=u*Math.sin(n),s=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(ut(r-t)+u*o*ut(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*s,u=e*l+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Ta,Math.atan2(o,Math.sqrt(r*r+u*u))*Ta]}:function(){return[n*Ta,t*Ta]};return p.distance=h,p}function Mr(){function n(n,u){var i=Math.sin(u*=La),o=Math.cos(u),a=ca((n*=La)-t),c=Math.cos(a);Fc+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Hc.point=function(u,i){t=u*La,e=Math.sin(i*=La),r=Math.cos(i),Hc.point=n},Hc.lineEnd=function(){Hc.point=Hc.lineEnd=y}}function _r(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function br(n,t){function e(n,t){o>0?-Ca+Na>t&&(t=-Ca+Na):t>Ca-Na&&(t=Ca-Na);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(Ea/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=G(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Ca]},e):Sr}function wr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return ca(u)<Na?ar:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-G(u)*Math.sqrt(n*n+e*e)]},e)}function Sr(n,t){return[n,Math.log(Math.tan(Ea/4+t/2))]}function kr(n){var t,e=ur(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=Ea*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Er(n,t){return[Math.log(Math.tan(Ea/4+t/2)),-n]}function Ar(n){return n[0]}function Cr(n){return n[1]}function Nr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&K(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function zr(n,t){return n[0]-t[0]||n[1]-t[1]}function Lr(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Tr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],l=e[1],s=t[1]-c,f=r[1]-l,h=(a*(c-l)-f*(u-i))/(f*o-a*s);return[u+h*o,c+h*s]}function qr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Rr(){tu(this),this.edge=this.site=this.circle=null}function Dr(n){var t=Kc.pop()||new Rr;return t.site=n,t}function Pr(n){Xr(n),Wc.remove(n),Kc.push(n),tu(n)}function Ur(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Pr(n);for(var c=i;c.circle&&ca(e-c.circle.x)<Na&&ca(r-c.circle.cy)<Na;)i=c.P,a.unshift(c),Pr(c),c=i;a.unshift(c),Xr(c);for(var l=o;l.circle&&ca(e-l.circle.x)<Na&&ca(r-l.circle.cy)<Na;)o=l.N,a.push(l),Pr(l),l=o;a.push(l),Xr(l);var s,f=a.length;for(s=1;f>s;++s)l=a[s],c=a[s-1],Kr(l.edge,c.site,l.site,u);c=a[0],l=a[f-1],l.edge=Jr(c.site,l.site,null,u),Vr(c),Vr(l)}function jr(n){for(var t,e,r,u,i=n.x,o=n.y,a=Wc._;a;)if(r=Fr(a,o)-i,r>Na)a=a.L;else{if(u=i-Hr(a,o),!(u>Na)){r>-Na?(t=a.P,e=a):u>-Na?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Dr(n);if(Wc.insert(t,c),t||e){if(t===e)return Xr(t),e=Dr(t.site),Wc.insert(c,e),c.edge=e.edge=Jr(t.site,c.site),Vr(t),void Vr(e);if(!e)return void(c.edge=Jr(t.site,c.site));Xr(t),Xr(e);var l=t.site,s=l.x,f=l.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,x=v*v+d*d,M={x:(d*y-g*x)/m+s,y:(h*x-v*y)/m+f};Kr(e.edge,l,p,M),c.edge=Jr(l,n,null,M),e.edge=Jr(n,p,null,M),Vr(t),Vr(e)}}function Fr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var s=a-r,f=1/i-1/l,h=s/l;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*l)-c+l/2+u-i/2)))/f+r:(r+a)/2}function Hr(n,t){var e=n.N;if(e)return Fr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Or(n){this.site=n,this.edges=[]}function Yr(n){for(var t,e,r,u,i,o,a,c,l,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=Bc,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)s=a[o].end(),r=s.x,u=s.y,l=a[++o%c].start(),t=l.x,e=l.y,(ca(r-t)>Na||ca(u-e)>Na)&&(a.splice(o,0,new Qr(Gr(i.site,s,ca(r-f)<Na&&p-u>Na?{x:f,y:ca(t-f)<Na?e:p}:ca(u-p)<Na&&h-r>Na?{x:ca(e-p)<Na?t:h,y:p}:ca(r-h)<Na&&u-g>Na?{x:h,y:ca(t-h)<Na?e:g}:ca(u-g)<Na&&r-f>Na?{x:ca(e-g)<Na?t:f,y:g}:null),i.site,null)),++c)}function Ir(n,t){return t.angle-n.angle}function Zr(){tu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,l=r.y-a,s=i.x-o,f=i.y-a,h=2*(c*f-l*s);if(!(h>=-za)){var g=c*c+l*l,p=s*s+f*f,v=(f*g-l*p)/h,d=(c*p-s*g)/h,f=d+a,m=Qc.pop()||new Zr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,x=Gc._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}Gc.insert(y,m),y||(Jc=m)}}}}function Xr(n){var t=n.circle;t&&(t.P||(Jc=t.N),Gc.remove(t),Qc.push(t),tu(t),n.circle=null)}function $r(n){for(var t,e=$c,r=He(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Br(t,n)||!r(t)||ca(t.a.x-t.b.x)<Na&&ca(t.a.y-t.b.y)<Na)&&(t.a=t.b=null,e.splice(u,1))}function Br(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=l)return}else i={x:d,y:c};e={x:d,y:l}}else{if(i){if(i.y<c)return}else i={x:d,y:l};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else{if(i){if(i.y<c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Wr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Jr(n,t,e,r){var u=new Wr(n,t);return $c.push(u),e&&Kr(u,n,t,e),r&&Kr(u,t,n,r),Bc[n.i].edges.push(new Qr(u,n,t)),Bc[t.i].edges.push(new Qr(u,t,n)),u}function Gr(n,t,e){var r=new Wr(n,null);return r.a=t,r.b=e,$c.push(r),r}function Kr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Qr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function nu(){this._=null}function tu(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function eu(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ru(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function uu(n){for(;n.L;)n=n.L;return n}function iu(n,t){var e,r,u,i=n.sort(ou).pop();for($c=[],Bc=new Array(n.length),Wc=new nu,Gc=new nu;;)if(u=Jc,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(Bc[i.i]=new Or(i),jr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Ur(u.arc)}t&&($r(t),Yr(t));var o={cells:Bc,edges:$c};return Wc=Gc=$c=Bc=null,o}function ou(n,t){return t.y-n.y||t.x-n.x}function au(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function cu(n){return n.x}function lu(n){return n.y}function su(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fu(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&fu(n,c[0],e,r,o,a),c[1]&&fu(n,c[1],o,r,u,a),c[2]&&fu(n,c[2],e,a,o,i),c[3]&&fu(n,c[3],o,a,u,i)}}function hu(n,t){n=Bo.rgb(n),t=Bo.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return"#"+xt(Math.round(e+i*n))+xt(Math.round(r+o*n))+xt(Math.round(u+a*n))}}function gu(n,t){var e,r={},u={};for(e in n)e in t?r[e]=du(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function pu(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function vu(n,t){var e,r,u,i=tl.lastIndex=el.lastIndex=0,o=-1,a=[],c=[];for(n+="",t+="";(e=tl.exec(n))&&(r=el.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),a[o]?a[o]+=u:a[++o]=u),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:pu(e,r)})),i=el.lastIndex;return i<t.length&&(u=t.slice(i),a[o]?a[o]+=u:a[++o]=u),a.length<2?c[0]?(t=c[0].x,function(n){return t(n)+""}):function(){return t}:(t=c.length,function(n){for(var e,r=0;t>r;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function du(n,t){for(var e,r=Bo.interpolators.length;--r>=0&&!(e=Bo.interpolators[r](n,t)););return e}function mu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(du(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function yu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function xu(n){return function(t){return 1-n(1-t)}}function Mu(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function _u(n){return n*n}function bu(n){return n*n*n}function wu(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Su(n){return function(t){return Math.pow(t,n)}}function ku(n){return 1-Math.cos(n*Ca)}function Eu(n){return Math.pow(2,10*(n-1))}function Au(n){return 1-Math.sqrt(1-n*n)}function Cu(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Aa*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Aa/t)}}function Nu(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function zu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Lu(n,t){n=Bo.hcl(n),t=Bo.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return lt(e+i*n,r+o*n,u+a*n)+""}}function Tu(n,t){n=Bo.hsl(n),t=Bo.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return at(e+i*n,r+o*n,u+a*n)+""}}function qu(n,t){n=Bo.lab(n),t=Bo.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ft(e+i*n,r+o*n,u+a*n)+""}}function Ru(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Du(n){var t=[n.a,n.b],e=[n.c,n.d],r=Uu(t),u=Pu(t,e),i=Uu(ju(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Ta,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Ta:0}function Pu(n,t){return n[0]*t[0]+n[1]*t[1]}function Uu(n){var t=Math.sqrt(Pu(n,n));return t&&(n[0]/=t,n[1]/=t),t}function ju(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Fu(n,t){var e,r=[],u=[],i=Bo.transform(n),o=Bo.transform(t),a=i.translate,c=o.translate,l=i.rotate,s=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:pu(a[0],c[0])},{i:3,x:pu(a[1],c[1])})):c[0]||c[1]?r.push("translate("+c+")"):r.push(""),l!=s?(l-s>180?s+=360:s-l>180&&(l+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:pu(l,s)})):s&&r.push(r.pop()+"rotate("+s+")"),f!=h?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:pu(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:pu(g[0],p[0])},{i:e-2,x:pu(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function Hu(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Ou(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Yu(n){for(var t=n.source,e=n.target,r=Zu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Iu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Zu(n,t){if(n===t)return n;for(var e=Iu(n),r=Iu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function Vu(n){n.fixed|=2}function Xu(n){n.fixed&=-7}function $u(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Bu(n){n.fixed&=-5}function Wu(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Wu(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,u+=l*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Ju(n,t){return Bo.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=ei,n}function Gu(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function Ku(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,o=-1;++o<u;)e.push(i[o]);for(;null!=(n=r.pop());)t(n)}function Qu(n){return n.children}function ni(n){return n.value}function ti(n,t){return t.value-n.value}function ei(n){return Bo.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function ri(n){return n.x}function ui(n){return n.y}function ii(n,t,e){n.y0=t,n.y=e}function oi(n){return Bo.range(n.length)}function ai(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function ci(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function li(n){return n.reduce(si,0)}function si(n,t){return n+t[1]}function fi(n,t){return hi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function hi(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function gi(n){return[Bo.min(n),Bo.max(n)]}function pi(n,t){return n.value-t.value}function vi(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function di(n,t){n._pack_next=t,t._pack_prev=n}function mi(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function yi(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(l=e.length)){var e,r,u,i,o,a,c,l,s=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(xi),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(u=e[1],u.x=u.r,u.y=0,t(u),l>2))for(i=e[2],bi(r,u,i),t(i),vi(r,i),r._pack_prev=i,vi(i,u),u=r._pack_next,o=3;l>o;o++){bi(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(mi(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!mi(c,i);c=c._pack_prev,d++);
p?(d>v||v==d&&u.r<r.r?di(r,u=a):di(r=c,u),o--):(vi(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,x=0;for(o=0;l>o;o++)i=e[o],i.x-=m,i.y-=y,x=Math.max(x,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=x,e.forEach(Mi)}}function xi(n){n._pack_next=n._pack_prev=n}function Mi(n){delete n._pack_next,delete n._pack_prev}function _i(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)_i(u[i],t,e,r)}function bi(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+l*i,e.y=n.y+c*i-l*u}else e.x=n.x+r,e.y=n.y}function wi(n,t){return n.parent==t.parent?1:2}function Si(n){var t=n.children;return t.length?t[0]:n.t}function ki(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ei(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Ai(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Ci(n,t,e){return n.a.parent===t.parent?n.a:e}function Ni(n){return 1+Bo.max(n,function(n){return n.y})}function zi(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Li(n){var t=n.children;return t&&t.length?Li(t[0]):n}function Ti(n){var t,e=n.children;return e&&(t=e.length)?Ti(e[t-1]):n}function qi(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Ri(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Di(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Pi(n){return n.rangeExtent?n.rangeExtent():Di(n.range())}function Ui(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function ji(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Fi(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:gl}function Hi(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=Bo.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Oi(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Hi:Ui,c=r?Ou:Hu;return o=u(n,t,c,e),a=u(t,n,c,du),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Ru)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Vi(n,t)},i.tickFormat=function(t,e){return Xi(n,t,e)},i.nice=function(t){return Ii(n,t),u()},i.copy=function(){return Oi(n,t,e,r)},u()}function Yi(n,t){return Bo.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Ii(n,t){return ji(n,Fi(Zi(n,t)[2]))}function Zi(n,t){null==t&&(t=10);var e=Di(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Vi(n,t){return Bo.range.apply(Bo,Zi(n,t))}function Xi(n,t,e){var r=Zi(n,t);if(e){var u=tc.exec(e);if(u.shift(),"s"===u[8]){var i=Bo.formatPrefix(Math.max(ca(r[0]),ca(r[1])));return u[7]||(u[7]="."+$i(i.scale(r[2]))),u[8]="f",e=Bo.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+Bi(u[8],r)),e=u.join("")}else e=",."+$i(r[2])+"f";return Bo.format(e)}function $i(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Bi(n,t){var e=$i(t[2]);return n in pl?Math.abs(e-$i(Math.max(ca(t[0]),ca(t[1]))))+ +("e"!==n):e-2*("%"===n)}function Wi(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=ji(r.map(u),e?Math:dl);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=Di(r),o=[],a=n[0],c=n[1],l=Math.floor(u(a)),s=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(s-l)){if(e){for(;s>l;l++)for(var h=1;f>h;h++)o.push(i(l)*h);o.push(i(l))}else for(o.push(i(l));l++<s;)for(var h=f-1;h>0;h--)o.push(i(l)*h);for(l=0;o[l]<a;l++);for(s=o.length;o[s-1]>c;s--);o=o.slice(l,s)}return o},o.tickFormat=function(n,t){if(!arguments.length)return vl;arguments.length<2?t=vl:"function"!=typeof t&&(t=Bo.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):""}},o.copy=function(){return Wi(n.copy(),t,e,r)},Yi(o,n)}function Ji(n,t,e){function r(t){return n(u(t))}var u=Gi(t),i=Gi(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Vi(e,n)},r.tickFormat=function(n,t){return Xi(e,n,t)},r.nice=function(n){return r.domain(Ii(e,n))},r.exponent=function(o){return arguments.length?(u=Gi(t=o),i=Gi(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Ji(n.copy(),t,e)},Yi(r,n)}function Gi(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function Ki(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):NaN))-1)%i.length]}function r(t,e){return Bo.range(n.length).map(function(n){return t+e*n})}var u,i,o;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new a;for(var i,o=-1,c=r.length;++o<c;)u.has(i=r[o])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,o=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=(l-c)/(Math.max(1,n.length-1)+a);return i=r(n.length<2?(c+l)/2:c+s*a/2,s),o=0,t={t:"rangePoints",a:arguments},e},e.rangeBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=(f-s)/(n.length-a+2*c);return i=r(s+h*c,h),l&&i.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=Math.floor((f-s)/(n.length-a+2*c)),g=f-s-(n.length-a)*h;return i=r(s+Math.round(g/2),h),l&&i.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Di(t.a[0])},e.copy=function(){return Ki(n,t)},e.domain(n)}function Qi(r,u){function i(){var n=0,t=u.length;for(a=[];++n<t;)a[n-1]=Bo.quantile(r,n/t);return o}function o(n){return isNaN(n=+n)?void 0:u[Bo.bisect(a,n)]}var a;return o.domain=function(u){return arguments.length?(r=u.map(t).filter(e).sort(n),i()):r},o.range=function(n){return arguments.length?(u=n,i()):u},o.quantiles=function(){return a},o.invertExtent=function(n){return n=u.indexOf(n),0>n?[NaN,NaN]:[n>0?a[n-1]:r[0],n<a.length?a[n]:r[r.length-1]]},o.copy=function(){return Qi(r,u)},i()}function no(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?NaN:t/i+n,[t,t+1/i]},r.copy=function(){return no(n,t,e)},u()}function to(n,t){function e(e){return e>=e?t[Bo.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return to(n,t)},e}function eo(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Vi(n,t)},t.tickFormat=function(t,e){return Xi(n,t,e)},t.copy=function(){return eo(n)},t}function ro(n){return n.innerRadius}function uo(n){return n.outerRadius}function io(n){return n.startAngle}function oo(n){return n.endAngle}function ao(n){function t(t){function o(){l.push("M",i(n(s),a))}for(var c,l=[],s=[],f=-1,h=t.length,g=kt(e),p=kt(r);++f<h;)u.call(this,c=t[f],f)?s.push([+g.call(this,c,f),+p.call(this,c,f)]):s.length&&(o(),s=[]);return s.length&&o(),l.length?l.join(""):null}var e=Ar,r=Cr,u=Ae,i=co,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?i=n:(i=wl.get(n)||co).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function co(n){return n.join("L")}function lo(n){return co(n)+"Z"}function so(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function fo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function ho(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function go(n,t){return n.length<4?co(n):n[1]+mo(n.slice(1,n.length-1),yo(n,t))}function po(n,t){return n.length<3?co(n):n[0]+mo((n.push(n[0]),n),yo([n[n.length-2]].concat(n,[n[1]]),t))}function vo(n,t){return n.length<3?co(n):n[0]+mo(n,yo(n,t))}function mo(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return co(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+="C"+(u[0]+o[0])+","+(u[1]+o[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,c++)i=n[c],a=t[l],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(e){var s=n[c];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+s[0]+","+s[1]}return r}function yo(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function xo(n){if(n.length<3)return co(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,",",i,"L",wo(El,o),",",wo(El,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),So(c,o,a);return n.pop(),c.push("L",r),c.join("")}function Mo(n){if(n.length<4)return co(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(wo(El,i)+","+wo(El,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),So(e,i,o);return e.join("")}function _o(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[wo(El,o),",",wo(El,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),So(t,o,a);return t.join("")}function bo(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],u=l/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return xo(n)}function wo(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function So(n,t,e){n.push("C",wo(Sl,t),",",wo(Sl,e),",",wo(kl,t),",",wo(kl,e),",",wo(El,t),",",wo(El,e))}function ko(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Eo(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=ko(u,i);++t<e;)r[t]=(o+(o=ko(u=i,i=n[t+1])))/2;return r[t]=o,r}function Ao(n){for(var t,e,r,u,i=[],o=Eo(n),a=-1,c=n.length-1;++a<c;)t=ko(n[a],n[a+1]),ca(t)<Na?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function Co(n){return n.length<3?co(n):n[0]+mo(n,Ao(n))}function No(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]+_l,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function zo(n){function t(t){function c(){v.push("M",a(n(m),f),s,l(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,x=t.length,M=kt(e),_=kt(u),b=e===r?function(){return g}:kt(r),w=u===i?function(){return p}:kt(i);++y<x;)o.call(this,h=t[y],y)?(d.push([g=+M.call(this,h,y),p=+_.call(this,h,y)]),m.push([+b.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(""):null}var e=Ar,r=Ar,u=0,i=Cr,o=Ae,a=co,c=a.key,l=a,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=wl.get(n)||co).key,l=a.reverse||a,s=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Lo(n){return n.radius}function To(n){return[n.x,n.y]}function qo(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]+_l;return[e*Math.cos(r),e*Math.sin(r)]}}function Ro(){return 64}function Do(){return"circle"}function Po(n){var t=Math.sqrt(n/Ea);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Uo(n,t){return ga(n,Tl),n.id=t,n}function jo(n,t,e,r){var u=n.id;return F(n,"function"==typeof e?function(n,i,o){n.__transition__[u].tween.set(t,r(e.call(n,n.__data__,i,o)))}:(e=r(e),function(n){n.__transition__[u].tween.set(t,e)}))}function Fo(n){return null==n&&(n=""),function(){this.textContent=n}}function Ho(n,t,e,r){var u=n.__transition__||(n.__transition__={active:0,count:0}),i=u[e];if(!i){var o=r.time;i=u[e]={tween:new a,time:o,ease:r.ease,delay:r.delay,duration:r.duration},++u.count,Bo.timer(function(r){function a(r){return u.active>e?l():(u.active=e,i.event&&i.event.start.call(n,s,t),i.tween.forEach(function(e,r){(r=r.call(n,s,t))&&v.push(r)}),void Bo.timer(function(){return p.c=c(r||1)?Ae:c,1},0,o))}function c(r){if(u.active!==e)return l();for(var o=r/g,a=f(o),c=v.length;c>0;)v[--c].call(n,a);return o>=1?(i.event&&i.event.end.call(n,s,t),l()):void 0}function l(){return--u.count?delete u[e]:delete n.__transition__,1}var s=n.__data__,f=i.ease,h=i.delay,g=i.duration,p=Ka,v=[];return p.t=h+o,r>=h?a(r-h):void(p.c=a)},0,o)}}function Oo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function Yo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function Io(n){return n.toISOString()}function Zo(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=Bo.bisect(Ol,u);return i==Ol.length?[t.year,Zi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Ol[i-1]<Ol[i]/u?i-1:i]:[Zl,Zi(n,e)[2]]}return r.invert=function(t){return Vo(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Vo)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Vo(+e+1),t).length}var i=r.domain(),o=Di(i),a=null==n?u(o,10):"number"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(ji(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Vo(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Vo(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Di(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Vo(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Zo(n.copy(),t,e)},Yi(r,n)}function Vo(n){return new Date(n)}function Xo(n){return JSON.parse(n.responseText)}function $o(n){var t=Go.createRange();return t.selectNode(Go.body),t.createContextualFragment(n.responseText)}var Bo={version:"3.4.13"};Date.now||(Date.now=function(){return+new Date});var Wo=[].slice,Jo=function(n){return Wo.call(n)},Go=document,Ko=Go.documentElement,Qo=window;try{Jo(Ko.childNodes)[0].nodeType}catch(na){Jo=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}try{Go.createElement("div").style.setProperty("opacity",0,"")}catch(ta){var ea=Qo.Element.prototype,ra=ea.setAttribute,ua=ea.setAttributeNS,ia=Qo.CSSStyleDeclaration.prototype,oa=ia.setProperty;ea.setAttribute=function(n,t){ra.call(this,n,t+"")},ea.setAttributeNS=function(n,t,e){ua.call(this,n,t,e+"")},ia.setProperty=function(n,t,e){oa.call(this,n,t+"",e)}}Bo.ascending=n,Bo.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN},Bo.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i&&!(null!=(e=n[u])&&e>=e);)e=void 0;for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i&&!(null!=(e=t.call(n,n[u],u))&&e>=e);)e=void 0;for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},Bo.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i&&!(null!=(e=n[u])&&e>=e);)e=void 0;for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i&&!(null!=(e=t.call(n,n[u],u))&&e>=e);)e=void 0;for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},Bo.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o&&!(null!=(e=u=n[i])&&e>=e);)e=u=void 0;for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o&&!(null!=(e=u=t.call(n,n[i],i))&&e>=e);)e=void 0;for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},Bo.sum=function(n,t){var r,u=0,i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)e(r=+n[o])&&(u+=r);else for(;++o<i;)e(r=+t.call(n,n[o],o))&&(u+=r);return u},Bo.mean=function(n,r){var u,i=0,o=n.length,a=-1,c=o;if(1===arguments.length)for(;++a<o;)e(u=t(n[a]))?i+=u:--c;else for(;++a<o;)e(u=t(r.call(n,n[a],a)))?i+=u:--c;return c?i/c:void 0},Bo.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},Bo.median=function(r,u){var i,o=[],a=r.length,c=-1;if(1===arguments.length)for(;++c<a;)e(i=t(r[c]))&&o.push(i);else for(;++c<a;)e(i=t(u.call(r,r[c],c)))&&o.push(i);return o.length?Bo.quantile(o.sort(n),.5):void 0};var aa=r(n);Bo.bisectLeft=aa.left,Bo.bisect=Bo.bisectRight=aa.right,Bo.bisector=function(t){return r(1===t.length?function(e,r){return n(t(e),r)}:t)},Bo.shuffle=function(n){for(var t,e,r=n.length;r;)e=0|Math.random()*r--,t=n[r],n[r]=n[e],n[e]=t;return n},Bo.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},Bo.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},Bo.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=Bo.min(arguments,u),e=new Array(t);++n<t;)for(var r,i=-1,o=e[n]=new Array(r);++i<r;)o[i]=arguments[i][n];return e},Bo.transpose=function(n){return Bo.zip.apply(Bo,n)},Bo.keys=function(n){var t=[];for(var e in n)t.push(e);return t},Bo.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},Bo.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},Bo.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var ca=Math.abs;Bo.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),1/0===(t-n)/e)throw new Error("infinite range");var r,u=[],o=i(ca(e)),a=-1;if(n*=o,t*=o,e*=o,0>e)for(;(r=n+e*++a)>t;)u.push(r/o);else for(;(r=n+e*++a)<t;)u.push(r/o);return u},Bo.map=function(n){var t=new a;if(n instanceof a)n.forEach(function(n,e){t.set(n,e)});else for(var e in n)t.set(e,n[e]);return t};var la="__proto__",sa="\x00";o(a,{has:s,get:function(n){return this._[c(n)]},set:function(n,t){return this._[c(n)]=t},remove:f,keys:h,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:l(t),value:this._[t]});return n},size:g,empty:p,forEach:function(n){for(var t in this._)n.call(this,l(t),this._[t])}}),Bo.nest=function(){function n(t,o,c){if(c>=i.length)return r?r.call(u,o):e?o.sort(e):o;for(var l,s,f,h,g=-1,p=o.length,v=i[c++],d=new a;++g<p;)(h=d.get(l=v(s=o[g])))?h.push(s):d.set(l,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,c))}):(s={},f=function(e,r){s[e]=n(t,r,c)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=o[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],o=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(Bo.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return o[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},Bo.set=function(n){var t=new v;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},o(v,{has:s,add:function(n){return this._[c(n+="")]=!0,n},remove:f,values:h,size:g,empty:p,forEach:function(n){for(var t in this._)n.call(this,l(t))}}),Bo.behavior={},Bo.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=d(n,t,t[e]);return n};var fa=["webkit","ms","moz","Moz","o","O"];Bo.dispatch=function(){for(var n=new x,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=M(n);return n},x.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},Bo.event=null,Bo.requote=function(n){return n.replace(ha,"\\$&")};var ha=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ga={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},pa=function(n,t){return t.querySelector(n)},va=function(n,t){return t.querySelectorAll(n)},da=Ko.matches||Ko[m(Ko,"matchesSelector")],ma=function(n,t){return da.call(n,t)};"function"==typeof Sizzle&&(pa=function(n,t){return Sizzle(n,t)[0]||null},va=Sizzle,ma=Sizzle.matchesSelector),Bo.selection=function(){return _a};var ya=Bo.selection.prototype=[];ya.select=function(n){var t,e,r,u,i=[];n=k(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return S(i)},ya.selectAll=function(n){var t,e,r=[];n=E(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=Jo(n.call(e,e.__data__,a,u))),t.parentNode=e);return S(r)};var xa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Bo.ns={prefix:xa,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.slice(0,t),n=n.slice(t+1)),xa.hasOwnProperty(e)?{space:xa[e],local:n}:n}},ya.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=Bo.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(A(t,n[t]));return this}return this.each(A(n,t))},ya.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=z(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!N(n[u]).test(t))return!1;return!0}for(t in n)this.each(L(t,n[t]));return this}return this.each(L(n,t))},ya.style=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t="");for(e in n)this.each(q(e,n[e],t));return this}if(2>r)return Qo.getComputedStyle(this.node(),null).getPropertyValue(n);e=""}return this.each(q(n,t,e))},ya.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},ya.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},ya.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},ya.append=function(n){return n=D(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},ya.insert=function(n,t){return n=D(n),t=k(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},ya.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})},ya.data=function(n,t){function e(n,e){var r,u,i,o=n.length,f=e.length,h=Math.min(o,f),g=new Array(f),p=new Array(f),v=new Array(o);if(t){var d,m=new a,y=new Array(o);for(r=-1;++r<o;)m.has(d=t.call(u=n[r],u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d;for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=P(i),m.set(d,!0);for(r=-1;++r<o;)m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=P(i);for(;f>r;++r)p[r]=P(e[r]);for(;o>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,c.push(p),l.push(g),s.push(v)}var r,u,i=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++i<o;)(u=r[i])&&(n[i]=u.__data__);return n}var c=H([]),l=S([]),s=S([]);if("function"==typeof n)for(;++i<o;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],n);return l.enter=function(){return c},l.exit=function(){return s},l},ya.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},ya.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=U(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return S(u)},ya.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},ya.sort=function(n){n=j.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},ya.each=function(n){return F(this,function(t,e,r){n.call(t,t.__data__,e,r)})},ya.call=function(n){var t=Jo(arguments);return n.apply(t[0]=this,t),this},ya.empty=function(){return!this.node()},ya.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},ya.size=function(){var n=0;return F(this,function(){++n}),n};var Ma=[];Bo.selection.enter=H,Bo.selection.enter.prototype=Ma,Ma.append=ya.append,Ma.empty=ya.empty,Ma.node=ya.node,Ma.call=ya.call,Ma.size=ya.size,Ma.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var l=-1,s=u.length;++l<s;)(i=u[l])?(t.push(r[l]=e=n.call(u.parentNode,i.__data__,l,a)),e.__data__=i.__data__):t.push(null)}return S(o)},Ma.insert=function(n,t){return arguments.length<2&&(t=O(this)),ya.insert.call(this,n,t)},ya.transition=function(){for(var n,t,e=Cl||++ql,r=[],u=Nl||{time:Date.now(),ease:wu,delay:0,duration:250},i=-1,o=this.length;++i<o;){r.push(n=[]);for(var a=this[i],c=-1,l=a.length;++c<l;)(t=a[c])&&Ho(t,c,e,u),n.push(t)}return Uo(r,e)},ya.interrupt=function(){return this.each(Y)},Bo.select=function(n){var t=["string"==typeof n?pa(n,Go):n];return t.parentNode=Ko,S([t])},Bo.selectAll=function(n){var t=Jo("string"==typeof n?va(n,Go):n);return t.parentNode=Ko,S([t])};var _a=Bo.select(Ko);ya.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(I(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(I(n,t,e))};var ba=Bo.map({mouseenter:"mouseover",mouseleave:"mouseout"});ba.forEach(function(n){"on"+n in Go&&ba.remove(n)});var wa="onselectstart"in Go?null:m(Ko.style,"userSelect"),Sa=0;Bo.mouse=function(n){return $(n,b())};var ka=/WebKit/.test(Qo.navigator.userAgent)?-1:0;Bo.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=b().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return $(n,r)},Bo.behavior.drag=function(){function n(){this.on("mousedown.drag",u).on("touchstart.drag",i)}function t(n,t,u,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-x[0],e=r[1]-x[1],p|=n|e,x=r,g({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&Bo.event.target===f),g({type:"dragend"}))}var l,s=this,f=Bo.event.target,h=s.parentNode,g=e.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=Bo.select(u()).on(i+d,a).on(o+d,c),y=X(),x=t(h,v);r?(l=r.apply(s,arguments),l=[l.x-x[0],l.y-x[1]]):l=[0,0],g({type:"dragstart"})}}var e=w(n,"drag","dragstart","dragend"),r=null,u=t(y,Bo.mouse,J,"mousemove","mouseup"),i=t(B,Bo.touch,W,"touchmove","touchend");return n.origin=function(t){return arguments.length?(r=t,n):r},Bo.rebind(n,e,"on")},Bo.touches=function(n,t){return arguments.length<2&&(t=b().touches),t?Jo(t).map(function(t){var e=$(n,t);return e.identifier=t.identifier,e}):[]};var Ea=Math.PI,Aa=2*Ea,Ca=Ea/2,Na=1e-6,za=Na*Na,La=Ea/180,Ta=180/Ea,qa=Math.SQRT2,Ra=2,Da=4;Bo.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=et(v),o=i/(Ra*h)*(e*rt(qa*t+v)-tt(v));return[r+o*l,u+o*s,i*e/et(qa*t+v)]}return[r+n*l,u+n*s,i*Math.exp(qa*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],l=o-r,s=a-u,f=l*l+s*s,h=Math.sqrt(f),g=(c*c-i*i+Da*f)/(2*i*Ra*h),p=(c*c-i*i-Da*f)/(2*c*Ra*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/qa;return e.duration=1e3*y,e},Bo.behavior.zoom=function(){function n(n){n.on(A,l).on(ja+".zoom",f).on("dblclick.zoom",h).on(z,s)}function t(n){return[(n[0]-S.x)/S.k,(n[1]-S.y)/S.k]}function e(n){return[n[0]*S.k+S.x,n[1]*S.k+S.y]}function r(n){S.k=Math.max(E[0],Math.min(E[1],n))}function u(n,t){t=e(t),S.x+=n[0]-t[0],S.y+=n[1]-t[1]}function i(){x&&x.domain(y.range().map(function(n){return(n-S.x)/S.k}).map(y.invert)),b&&b.domain(M.range().map(function(n){return(n-S.y)/S.k}).map(M.invert))}function o(n){n({type:"zoomstart"})}function a(n){i(),n({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(n){n({type:"zoomend"})}function l(){function n(){s=1,u(Bo.mouse(r),h),a(l)}function e(){f.on(C,null).on(N,null),g(s&&Bo.event.target===i),c(l)}var r=this,i=Bo.event.target,l=L.of(r,arguments),s=0,f=Bo.select(Qo).on(C,n).on(N,e),h=t(Bo.mouse(r)),g=X();Y.call(r),o(l)}function s(){function n(){var n=Bo.touches(g);return h=S.k,n.forEach(function(n){n.identifier in v&&(v[n.identifier]=t(n))}),n}function e(){var t=Bo.event.target;Bo.select(t).on(x,i).on(M,f),b.push(t);for(var e=Bo.event.changedTouches,o=0,c=e.length;c>o;++o)v[e[o].identifier]=null;var l=n(),s=Date.now();if(1===l.length){if(500>s-m){var h=l[0],g=v[h.identifier];r(2*S.k),u(h,g),_(),a(p)}m=s}else if(l.length>1){var h=l[0],y=l[1],w=h[0]-y[0],k=h[1]-y[1];d=w*w+k*k}}function i(){for(var n,t,e,i,o=Bo.touches(g),c=0,l=o.length;l>c;++c,i=null)if(e=o[c],i=v[e.identifier]){if(t)break;n=e,t=i}if(i){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=d&&Math.sqrt(s/d);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+i[0])/2,(t[1]+i[1])/2],r(f*h)}m=null,u(n,t),a(p)}function f(){if(Bo.event.touches.length){for(var t=Bo.event.changedTouches,e=0,r=t.length;r>e;++e)delete v[t[e].identifier];for(var u in v)return void n()}Bo.selectAll(b).on(y,null),w.on(A,l).on(z,s),k(),c(p)}var h,g=this,p=L.of(g,arguments),v={},d=0,y=".zoom-"+Bo.event.changedTouches[0].identifier,x="touchmove"+y,M="touchend"+y,b=[],w=Bo.select(g),k=X();Y.call(g),e(),o(p),w.on(A,null).on(z,e)}function f(){var n=L.of(this,arguments);d?clearTimeout(d):(g=t(p=v||Bo.mouse(this)),Y.call(this),o(n)),d=setTimeout(function(){d=null,c(n)},50),_(),r(Math.pow(2,.002*Pa())*S.k),u(p,g),a(n)}function h(){var n=L.of(this,arguments),e=Bo.mouse(this),i=t(e),l=Math.log(S.k)/Math.LN2;
o(n),r(Math.pow(2,Bo.event.shiftKey?Math.ceil(l)-1:Math.floor(l)+1)),u(e,i),a(n),c(n)}var g,p,v,d,m,y,x,M,b,S={x:0,y:0,k:1},k=[960,500],E=Ua,A="mousedown.zoom",C="mousemove.zoom",N="mouseup.zoom",z="touchstart.zoom",L=w(n,"zoomstart","zoom","zoomend");return n.event=function(n){n.each(function(){var n=L.of(this,arguments),t=S;Cl?Bo.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},o(n)}).tween("zoom:zoom",function(){var e=k[0],r=k[1],u=e/2,i=r/2,o=Bo.interpolateZoom([(u-S.x)/S.k,(i-S.y)/S.k,e/S.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),c=e/r[2];this.__chart__=S={x:u-r[0]*c,y:i-r[1]*c,k:c},a(n)}}).each("end.zoom",function(){c(n)}):(this.__chart__=S,o(n),a(n),c(n))})},n.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},i(),n):[S.x,S.y]},n.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:+t},i(),n):S.k},n.scaleExtent=function(t){return arguments.length?(E=null==t?Ua:[+t[0],+t[1]],n):E},n.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],n):v},n.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],n):k},n.x=function(t){return arguments.length?(x=t,y=t.copy(),S={x:0,y:0,k:1},n):x},n.y=function(t){return arguments.length?(b=t,M=t.copy(),S={x:0,y:0,k:1},n):b},Bo.rebind(n,L,"on")};var Pa,Ua=[0,1/0],ja="onwheel"in Go?(Pa=function(){return-Bo.event.deltaY*(Bo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Go?(Pa=function(){return Bo.event.wheelDelta},"mousewheel"):(Pa=function(){return-Bo.event.detail},"MozMousePixelScroll");Bo.color=it,it.prototype.toString=function(){return this.rgb()+""},Bo.hsl=ot;var Fa=ot.prototype=new it;Fa.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ot(this.h,this.s,this.l/n)},Fa.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ot(this.h,this.s,n*this.l)},Fa.rgb=function(){return at(this.h,this.s,this.l)},Bo.hcl=ct;var Ha=ct.prototype=new it;Ha.brighter=function(n){return new ct(this.h,this.c,Math.min(100,this.l+Oa*(arguments.length?n:1)))},Ha.darker=function(n){return new ct(this.h,this.c,Math.max(0,this.l-Oa*(arguments.length?n:1)))},Ha.rgb=function(){return lt(this.h,this.c,this.l).rgb()},Bo.lab=st;var Oa=18,Ya=.95047,Ia=1,Za=1.08883,Va=st.prototype=new it;Va.brighter=function(n){return new st(Math.min(100,this.l+Oa*(arguments.length?n:1)),this.a,this.b)},Va.darker=function(n){return new st(Math.max(0,this.l-Oa*(arguments.length?n:1)),this.a,this.b)},Va.rgb=function(){return ft(this.l,this.a,this.b)},Bo.rgb=dt;var Xa=dt.prototype=new it;Xa.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new dt(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new dt(u,u,u)},Xa.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new dt(n*this.r,n*this.g,n*this.b)},Xa.hsl=function(){return _t(this.r,this.g,this.b)},Xa.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var $a=Bo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$a.forEach(function(n,t){$a.set(n,mt(t))}),Bo.functor=kt,Bo.xhr=At(Et),Bo.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=Ct(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=l)return o;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<l;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;l>s;){var r=n.charCodeAt(s++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++a);else if(r!==c)continue;return n.slice(t,s-a)}return n.slice(t)}for(var r,u,i={},o={},a=[],l=n.length,s=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,f++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new v,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},Bo.csv=Bo.dsv(",","text/csv"),Bo.tsv=Bo.dsv("	","text/tab-separated-values");var Ba,Wa,Ja,Ga,Ka,Qa=Qo[m(Qo,"requestAnimationFrame")]||function(n){setTimeout(n,17)};Bo.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};Wa?Wa.n=i:Ba=i,Wa=i,Ja||(Ga=clearTimeout(Ga),Ja=1,Qa(Lt))},Bo.timer.flush=function(){Tt(),qt()},Bo.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var nc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Dt);Bo.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=Bo.round(n,Rt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),nc[8+e/3]};var tc=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ec=Bo.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=Bo.round(n,Rt(n,t))).toFixed(Math.max(0,Math.min(20,Rt(n*(1+1e-15),t))))}}),rc=Bo.time={},uc=Date;jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ic.setUTCDate.apply(this._,arguments)},setDay:function(){ic.setUTCDay.apply(this._,arguments)},setFullYear:function(){ic.setUTCFullYear.apply(this._,arguments)},setHours:function(){ic.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ic.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ic.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ic.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ic.setUTCSeconds.apply(this._,arguments)},setTime:function(){ic.setTime.apply(this._,arguments)}};var ic=Date.prototype;rc.year=Ft(function(n){return n=rc.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),rc.years=rc.year.range,rc.years.utc=rc.year.utc.range,rc.day=Ft(function(n){var t=new uc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),rc.days=rc.day.range,rc.days.utc=rc.day.utc.range,rc.dayOfYear=function(n){var t=rc.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=rc[n]=Ft(function(n){return(n=rc.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=rc.year(n).getDay();return Math.floor((rc.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});rc[n+"s"]=e.range,rc[n+"s"].utc=e.utc.range,rc[n+"OfYear"]=function(n){var e=rc.year(n).getDay();return Math.floor((rc.dayOfYear(n)+(e+t)%7)/7)}}),rc.week=rc.sunday,rc.weeks=rc.sunday.range,rc.weeks.utc=rc.sunday.utc.range,rc.weekOfYear=rc.sundayOfYear;var oc={"-":"",_:" ",0:"0"},ac=/^\s*\d+/,cc=/^%/;Bo.locale=function(n){return{numberFormat:Pt(n),timeFormat:Ot(n)}};var lc=Bo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Bo.format=lc.numberFormat,Bo.geo={},ce.prototype={s:0,t:0,add:function(n){le(n,this.t,sc),le(sc.s,this.s,this),this.s?this.t+=sc.t:this.s=sc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var sc=new ce;Bo.geo.stream=function(n,t){n&&fc.hasOwnProperty(n.type)?fc[n.type](n,t):se(n,t)};var fc={Feature:function(n,t){se(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)se(e[r].geometry,t)}},hc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){fe(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)fe(e[r],t,0)},Polygon:function(n,t){he(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)he(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)se(e[r],t)}};Bo.geo.area=function(n){return gc=0,Bo.geo.stream(n,vc),gc};var gc,pc=new ce,vc={sphere:function(){gc+=4*Ea},point:y,lineStart:y,lineEnd:y,polygonStart:function(){pc.reset(),vc.lineStart=ge},polygonEnd:function(){var n=2*pc;gc+=0>n?4*Ea+n:n,vc.lineStart=vc.lineEnd=vc.point=y}};Bo.geo.bounds=function(){function n(n,t){x.push(M=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=pe([t*La,e*La]);if(m){var u=de(m,r),i=[u[1],-u[0],0],o=de(i,u);xe(o),o=Me(o);var c=t-p,l=c>0?1:-1,v=o[0]*Ta*l,d=ca(c)>180;if(d^(v>l*p&&l*t>v)){var y=o[1]*Ta;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>l*p&&l*t>v)){var y=-o[1]*Ta;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){_.point=t}function r(){M[0]=s,M[1]=h,_.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=ca(r)>180?r+(r>0?360:-360):r}else v=n,d=e;vc.point(n,e),t(n,e)}function i(){vc.lineStart()}function o(){u(v,d),vc.lineEnd(),ca(y)>Na&&(s=-(h=180)),M[0]=s,M[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,x,M,_={point:n,lineStart:e,lineEnd:r,polygonStart:function(){_.point=u,_.lineStart=i,_.lineEnd=o,y=0,vc.polygonStart()},polygonEnd:function(){vc.polygonEnd(),_.point=n,_.lineStart=e,_.lineEnd=r,0>pc?(s=-(h=180),f=-(g=90)):y>Na?g=90:-Na>y&&(f=-90),M[0]=s,M[1]=h}};return function(n){g=h=-(s=f=1/0),x=[],Bo.geo.stream(n,_);var t=x.length;if(t){x.sort(c);for(var e,r=1,u=x[0],i=[u];t>r;++r)e=x[r],l(e[0],u)||l(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,s=e[0],h=u[1])}return x=M=null,1/0===s||1/0===f?[[NaN,NaN],[NaN,NaN]]:[[s,f],[h,g]]}}(),Bo.geo.centroid=function(n){dc=mc=yc=xc=Mc=_c=bc=wc=Sc=kc=Ec=0,Bo.geo.stream(n,Ac);var t=Sc,e=kc,r=Ec,u=t*t+e*e+r*r;return za>u&&(t=_c,e=bc,r=wc,Na>mc&&(t=yc,e=xc,r=Mc),u=t*t+e*e+r*r,za>u)?[NaN,NaN]:[Math.atan2(e,t)*Ta,nt(r/Math.sqrt(u))*Ta]};var dc,mc,yc,xc,Mc,_c,bc,wc,Sc,kc,Ec,Ac={sphere:y,point:be,lineStart:Se,lineEnd:ke,polygonStart:function(){Ac.lineStart=Ee},polygonEnd:function(){Ac.lineStart=Se}},Cc=Le(Ae,De,Ue,[-Ea,-Ea/2]),Nc=1e9;Bo.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Oe(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(Bo.geo.conicEqualArea=function(){return Ie(Ze)}).raw=Ze,Bo.geo.albers=function(){return Bo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Bo.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=Bo.geo.albers(),o=Bo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=Bo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var l=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*l,f-.238*l],[s+.455*l,f+.238*l]]).stream(c).point,r=o.translate([s-.307*l,f+.201*l]).clipExtent([[s-.425*l+Na,f+.12*l+Na],[s-.214*l-Na,f+.234*l-Na]]).stream(c).point,u=a.translate([s-.205*l,f+.212*l]).clipExtent([[s-.214*l+Na,f+.166*l+Na],[s-.115*l-Na,f+.234*l-Na]]).stream(c).point,n},n.scale(1070)};var zc,Lc,Tc,qc,Rc,Dc,Pc={point:y,lineStart:y,lineEnd:y,polygonStart:function(){Lc=0,Pc.lineStart=Ve},polygonEnd:function(){Pc.lineStart=Pc.lineEnd=Pc.point=y,zc+=ca(Lc/2)}},Uc={point:Xe,lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},jc={point:We,lineStart:Je,lineEnd:Ge,polygonStart:function(){jc.lineStart=Ke},polygonEnd:function(){jc.point=We,jc.lineStart=Je,jc.lineEnd=Ge}};Bo.geo.path=function(){function n(n){return n&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),Bo.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return zc=0,Bo.geo.stream(n,u(Pc)),zc},n.centroid=function(n){return yc=xc=Mc=_c=bc=wc=Sc=kc=Ec=0,Bo.geo.stream(n,u(jc)),Ec?[Sc/Ec,kc/Ec]:wc?[_c/wc,bc/wc]:Mc?[yc/Mc,xc/Mc]:[NaN,NaN]},n.bounds=function(n){return Rc=Dc=-(Tc=qc=1/0),Bo.geo.stream(n,u(Uc)),[[Tc,qc],[Rc,Dc]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||tr(n):Et,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new $e:new Qe(n),"function"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(Bo.geo.albersUsa()).context(null)},Bo.geo.transform=function(n){return{stream:function(t){var e=new er(t);for(var r in n)e[r]=n[r];return e}}},er.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Bo.geo.projection=ur,Bo.geo.projectionMutator=ir,(Bo.geo.equirectangular=function(){return ur(ar)}).raw=ar.invert=ar,Bo.geo.rotation=function(n){function t(t){return t=n(t[0]*La,t[1]*La),t[0]*=Ta,t[1]*=Ta,t}return n=lr(n[0]%360*La,n[1]*La,n.length>2?n[2]*La:0),t.invert=function(t){return t=n.invert(t[0]*La,t[1]*La),t[0]*=Ta,t[1]*=Ta,t},t},cr.invert=ar,Bo.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=lr(-n[0]*La,-n[1]*La,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Ta,n[1]*=Ta}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=gr((t=+r)*La,u*La),n):t},n.precision=function(r){return arguments.length?(e=gr(t*La,(u=+r)*La),n):u},n.angle(90)},Bo.geo.distance=function(n,t){var e,r=(t[0]-n[0])*La,u=n[1]*La,i=t[1]*La,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),l=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=l*s-c*f*a)*e),c*s+l*f*a)},Bo.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return Bo.range(Math.ceil(i/d)*d,u,d).map(h).concat(Bo.range(Math.ceil(l/m)*m,c,m).map(g)).concat(Bo.range(Math.ceil(r/p)*p,e,p).filter(function(n){return ca(n%d)>Na}).map(s)).concat(Bo.range(Math.ceil(a/v)*v,o,v).filter(function(n){return ca(n%m)>Na}).map(f))}var e,r,u,i,o,a,c,l,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],l=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),l>c&&(t=l,l=c,c=t),n.precision(y)):[[i,l],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=vr(a,o,90),f=dr(r,e,y),h=vr(l,c,90),g=dr(i,u,y),n):y},n.majorExtent([[-180,-90+Na],[180,90-Na]]).minorExtent([[-180,-80-Na],[180,80+Na]])},Bo.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=mr,u=yr;return n.distance=function(){return Bo.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},Bo.geo.interpolate=function(n,t){return xr(n[0]*La,n[1]*La,t[0]*La,t[1]*La)},Bo.geo.length=function(n){return Fc=0,Bo.geo.stream(n,Hc),Fc};var Fc,Hc={sphere:y,point:y,lineStart:Mr,lineEnd:y,polygonStart:y,polygonEnd:y},Oc=_r(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(Bo.geo.azimuthalEqualArea=function(){return ur(Oc)}).raw=Oc;var Yc=_r(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},Et);(Bo.geo.azimuthalEquidistant=function(){return ur(Yc)}).raw=Yc,(Bo.geo.conicConformal=function(){return Ie(br)}).raw=br,(Bo.geo.conicEquidistant=function(){return Ie(wr)}).raw=wr;var Ic=_r(function(n){return 1/n},Math.atan);(Bo.geo.gnomonic=function(){return ur(Ic)}).raw=Ic,Sr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Ca]},(Bo.geo.mercator=function(){return kr(Sr)}).raw=Sr;var Zc=_r(function(){return 1},Math.asin);(Bo.geo.orthographic=function(){return ur(Zc)}).raw=Zc;var Vc=_r(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(Bo.geo.stereographic=function(){return ur(Vc)}).raw=Vc,Er.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Ca]},(Bo.geo.transverseMercator=function(){var n=kr(Er),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Er,Bo.geom={},Bo.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=kt(e),i=kt(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(zr),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var l=Nr(a),s=Nr(c),f=s[0]===l[0],h=s[s.length-1]===l[l.length-1],g=[];for(t=l.length-1;t>=0;--t)g.push(n[a[l[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[a[s[t]][2]]);return g}var e=Ar,r=Cr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},Bo.geom.polygon=function(n){return ga(n,Xc),n};var Xc=Bo.geom.polygon.prototype=[];Xc.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},Xc.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},Xc.clip=function(n){for(var t,e,r,u,i,o,a=qr(n),c=-1,l=this.length-qr(this),s=this[l-1];++c<l;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],Lr(o,s,u)?(Lr(i,s,u)||n.push(Tr(i,o,s,u)),n.push(o)):Lr(i,s,u)&&n.push(Tr(i,o,s,u)),i=o;a&&n.push(n[0]),s=u}return n};var $c,Bc,Wc,Jc,Gc,Kc=[],Qc=[];Or.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Ir),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nu.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=uu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(eu(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ru(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ru(this,e),n=e,e=n.U),e.C=!1,r.C=!0,eu(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?uu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,eu(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ru(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,eu(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ru(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,eu(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ru(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},Bo.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return iu(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,s=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=i&&l.y>=u&&l.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];s.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Na)*Na,y:Math.round(o(n,t)/Na)*Na,i:t}})}var r=Ar,u=Cr,i=r,o=u,a=nl;return n?t(n):(t.links=function(n){return iu(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return iu(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Ir),c=-1,l=a.length,s=a[l-1].edge,f=s.l===o?s.r:s.l;++c<l;)u=s,i=f,s=a[c].edge,f=s.l===o?s.r:s.l,r<i.i&&r<f.i&&au(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=kt(r=n),t):r},t.y=function(n){return arguments.length?(o=kt(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?nl:n,t):a===nl?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===nl?null:a&&a[1]},t)};var nl=[[-1e6,-1e6],[1e6,1e6]];Bo.geom.delaunay=function(n){return Bo.geom.voronoi().triangles(n)},Bo.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,s=n.y;if(null!=c)if(ca(c-e)+ca(s-r)<.01)l(n,t,e,r,u,i,o,a);else{var f=n.point;n.x=n.y=n.point=null,l(n,f,c,s,u,i,o,a),l(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,u,i,o,a)}function l(n,t,e,r,u,o,a,c){var l=.5*(u+a),s=.5*(o+c),f=e>=l,h=r>=s,g=(h<<1)+f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=su()),f?u=l:a=l,h?o=s:c=s,i(n,t,e,r,u,o,a,c)}var s,f,h,g,p,v,d,m,y,x=kt(a),M=kt(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var _=+x(s=n[g],g),b=+M(s,g);v>_&&(v=_),d>b&&(d=b),_>m&&(m=_),b>y&&(y=b),f.push(_),h.push(b)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=su();if(k.add=function(n){i(k,n,+x(n,++g),+M(n,g),v,d,m,y)},k.visit=function(n){fu(n,k,v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var o,a=Ar,c=Cr;return(o=arguments.length)?(a=cu,c=lu,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},Bo.interpolateRgb=hu,Bo.interpolateObject=gu,Bo.interpolateNumber=pu,Bo.interpolateString=vu;var tl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,el=new RegExp(tl.source,"g");Bo.interpolate=du,Bo.interpolators=[function(n,t){var e=typeof t;return("string"===e?$a.has(t)||/^(#|rgb\(|hsl\()/.test(t)?hu:vu:t instanceof it?hu:Array.isArray(t)?mu:"object"===e&&isNaN(t)?gu:pu)(n,t)}],Bo.interpolateArray=mu;var rl=function(){return Et},ul=Bo.map({linear:rl,poly:Su,quad:function(){return _u},cubic:function(){return bu},sin:function(){return ku},exp:function(){return Eu},circle:function(){return Au},elastic:Cu,back:Nu,bounce:function(){return zu}}),il=Bo.map({"in":Et,out:xu,"in-out":Mu,"out-in":function(n){return Mu(xu(n))}});Bo.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=ul.get(e)||rl,r=il.get(r)||Et,yu(r(e.apply(null,Wo.call(arguments,1))))},Bo.interpolateHcl=Lu,Bo.interpolateHsl=Tu,Bo.interpolateLab=qu,Bo.interpolateRound=Ru,Bo.transform=function(n){var t=Go.createElementNS(Bo.ns.prefix.svg,"g");return(Bo.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Du(e?e.matrix:ol)})(n)},Du.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ol={a:1,b:0,c:0,d:1,e:0,f:0};Bo.interpolateTransform=Fu,Bo.layout={},Bo.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Yu(n[e]));return t}},Bo.layout.chord=function(){function n(){var n,l,f,h,g,p={},v=[],d=Bo.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(l=0,g=-1;++g<i;)l+=u[h][g];v.push(l),m.push(Bo.range(i)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(Aa-s*i)/n,l=0,h=-1;++h<i;){for(f=l,g=-1;++g<i;){var y=d[h],x=m[y][g],M=u[y][x],_=l,b=l+=M*n;p[y+"-"+x]={index:y,subindex:x,startAngle:_,endAngle:b,value:M}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/n},l+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,l={},s=0;return l.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,l):u},l.padding=function(n){return arguments.length?(s=n,e=r=null,l):s},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},Bo.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var l=t.charge/c;n.px-=i*l,n.py-=o*l}return!0}if(t.point&&c&&p>c){var l=t.pointCharge/c;n.px-=i*l,n.py-=o*l}}return!t.charge}}function t(n){n.px=Bo.event.x,n.py=Bo.event.y,a.resume()}var e,r,u,i,o,a={},c=Bo.dispatch("start","tick","end"),l=[1,1],s=.9,f=al,h=cl,g=-30,p=ll,v=.1,d=.64,m=[],y=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,f,h,p,d,x,M,_=m.length,b=y.length;
for(e=0;b>e;++e)a=y[e],f=a.source,h=a.target,x=h.x-f.x,M=h.y-f.y,(p=x*x+M*M)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,x*=p,M*=p,h.x-=x*(d=f.weight/(h.weight+f.weight)),h.y-=M*d,f.x+=x*(d=1-d),f.y+=M*d);if((d=r*v)&&(x=l[0]/2,M=l[1]/2,e=-1,d))for(;++e<_;)a=m[e],a.x+=(x-a.x)*d,a.y+=(M-a.y)*d;if(g)for(Wu(t=Bo.geom.quadtree(m),r,o),e=-1;++e<_;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<_;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*s,a.y-=(a.py-(a.py=a.y))*s);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(y=n,a):y},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(f="function"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(s=+n,a):s},a.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v=+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),Bo.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;l>a;++a){var u=y[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,s=y.length,p=l[0],v=l[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;s>t;++t)r=y[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n("x",p)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof f)for(t=0;s>t;++t)u[t]=+f.call(this,y[t],t);else for(t=0;s>t;++t)u[t]=f;if(i=[],"function"==typeof h)for(t=0;s>t;++t)i[t]=+h.call(this,y[t],t);else for(t=0;s>t;++t)i[t]=h;if(o=[],"function"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=Bo.behavior.drag().origin(Et).on("dragstart.force",Vu).on("drag.force",t).on("dragend.force",Xu)),arguments.length?void this.on("mouseover.force",$u).on("mouseout.force",Bu).call(e):e},Bo.rebind(a,c,"on")};var al=20,cl=1,ll=1/0;Bo.layout.hierarchy=function(){function n(u){var i,o=[u],a=[];for(u.depth=0;null!=(i=o.pop());)if(a.push(i),(l=e.call(n,i,i.depth))&&(c=l.length)){for(var c,l,s;--c>=0;)o.push(s=l[c]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Ku(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),a}var t=ti,e=Qu,r=ni;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Gu(t,function(n){n.children&&(n.value=0)}),Ku(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},Bo.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=i[l],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=Bo.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Ju(e,r)},Bo.layout.pie=function(){function n(i){var o=i.map(function(e,r){return+t.call(n,e,r)}),a=+("function"==typeof r?r.apply(this,arguments):r),c=(("function"==typeof u?u.apply(this,arguments):u)-a)/Bo.sum(o),l=Bo.range(i.length);null!=e&&l.sort(e===sl?function(n,t){return o[t]-o[n]}:function(n,t){return e(i[n],i[t])});var s=[];return l.forEach(function(n){var t;s[n]={data:i[n],value:t=o[n],startAngle:a,endAngle:a+=t*c}}),s}var t=Number,e=sl,r=0,u=Aa;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n};var sl={};Bo.layout.stack=function(){function n(a,c){if(!(h=a.length))return a;var l=a.map(function(e,r){return t.call(n,e,r)}),s=l.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,s,c);l=Bo.permute(l,f),s=Bo.permute(s,f);var h,g,p,v,d=r.call(n,s,c),m=l[0].length;for(p=0;m>p;++p)for(u.call(n,l[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,l[g][p],v+=s[g-1][p][1],s[g][p][1]);return a}var t=Et,e=oi,r=ai,u=ii,i=ri,o=ui;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:fl.get(t)||oi,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:hl.get(t)||ai,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var fl=Bo.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(ci),i=n.map(li),o=Bo.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,l=[],s=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],l.push(e)):(c+=i[e],s.push(e));return s.reverse().concat(l)},reverse:function(n){return Bo.range(n.length).reverse()},"default":oi}),hl=Bo.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,l,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=l=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];s>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,l>c&&(l=c)}for(e=0;h>e;++e)g[e]-=l;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:ai});Bo.layout.histogram=function(){function n(n,i){for(var o,a,c=[],l=n.map(e,this),s=r.call(this,l,i),f=u.call(this,s,l,i),i=-1,h=l.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=l[i],a>=s[0]&&a<=s[1]&&(o=c[Bo.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=gi,u=fi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=kt(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return hi(n,t)}:kt(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},Bo.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],l=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Ku(a,function(n){n.r=+s(n.value)}),Ku(a,yi),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Ku(a,function(n){n.r+=f}),Ku(a,yi),Ku(a,function(n){n.r-=f})}return _i(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=Bo.layout.hierarchy().sort(pi),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Ju(n,e)},Bo.layout.tree=function(){function n(n,u){var s=o.call(this,n,u),f=s[0],h=t(f);if(Ku(h,e),h.parent.m=-h.z,Gu(h,r),l)Gu(f,i);else{var g=f,p=f,v=f;Gu(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=a(g,p)/2-g.x,m=c[0]/(p.x+a(p,g)/2+d),y=c[1]/(v.depth||1);Gu(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,o=0,a=i.length;a>o;++o)r.push((i[o]=u={_:i[o],parent:t,children:(u=i[o].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Ai(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+a(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,o=t,c=u.parent.children[0],l=u.m,s=i.m,f=o.m,h=c.m;o=ki(o),u=Si(u),o&&u;)c=Si(c),i=ki(i),i.a=n,r=o.z+f-u.z-l+a(o._,u._),r>0&&(Ei(Ci(o,n,e),n,r),l+=r,s+=r),f+=o.m,l+=u.m,h+=c.m,s+=i.m;o&&!ki(i)&&(i.t=o,i.m+=f-s),u&&!Si(c)&&(c.t=u,c.m+=l-h,e=n)}return e}function i(n){n.x*=c[0],n.y=n.depth*c[1]}var o=Bo.layout.hierarchy().sort(null).value(null),a=wi,c=[1,1],l=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(l=null==(c=t)?i:null,n):l?null:c},n.nodeSize=function(t){return arguments.length?(l=null==(c=t)?null:i,n):l?c:null},Ju(n,o)},Bo.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],l=0;Ku(c,function(n){var t=n.children;t&&t.length?(n.x=zi(t),n.y=Ni(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var s=Li(c),f=Ti(c),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return Ku(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=Bo.layout.hierarchy().sort(null).value(null),e=wi,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Ju(n,t)},Bo.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,l=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),s.area=0;(c=h.length)>0;)s.push(o=h[c-1]),s.area+=o.area,"squarify"!==g||(a=r(s,v))<=p?(h.pop(),p=a):(s.area-=s.pop().area,u(s,v,l,!1),v=Math.min(l.dx,l.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,l,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,l=e.y,s=t?c(n.area/t):0;if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<o;)u=n[i],u.x=a,u.y=l,u.dy=s,a+=u.dx=Math.min(e.x+e.dx-a,s?c(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<o;)u=n[i],u.x=a,u.y=l,u.dx=s,l+=u.dy=Math.min(e.y+e.dy-l,s?c(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=l[0],i.dy=l[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),h&&(o=u),u}var o,a=Bo.layout.hierarchy(),c=Math.round,l=[1,1],s=null,f=qi,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(n){return arguments.length?(l=n,i):l},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?qi(t):Ri(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Ri(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?qi:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},Ju(i,a)},Bo.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=Bo.random.normal.apply(Bo,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=Bo.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},Bo.scale={};var gl={floor:Et,ceil:Et};Bo.scale.linear=function(){return Oi([0,1],[0,1],du,!1)};var pl={s:1,g:1,p:1,r:1,e:1};Bo.scale.log=function(){return Wi(Bo.scale.linear().domain([0,1]),10,!0,[1,10])};var vl=Bo.format(".0e"),dl={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};Bo.scale.pow=function(){return Ji(Bo.scale.linear(),1,[0,1])},Bo.scale.sqrt=function(){return Bo.scale.pow().exponent(.5)},Bo.scale.ordinal=function(){return Ki([],{t:"range",a:[[]]})},Bo.scale.category10=function(){return Bo.scale.ordinal().range(ml)},Bo.scale.category20=function(){return Bo.scale.ordinal().range(yl)},Bo.scale.category20b=function(){return Bo.scale.ordinal().range(xl)},Bo.scale.category20c=function(){return Bo.scale.ordinal().range(Ml)};var ml=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yt),yl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yt),xl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yt),Ml=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yt);Bo.scale.quantile=function(){return Qi([],[])},Bo.scale.quantize=function(){return no(0,1,[0,1])},Bo.scale.threshold=function(){return to([.5],[0,1])},Bo.scale.identity=function(){return eo([0,1])},Bo.svg={},Bo.svg.arc=function(){function n(){var n=t.apply(this,arguments),i=e.apply(this,arguments),o=r.apply(this,arguments)+_l,a=u.apply(this,arguments)+_l,c=(o>a&&(c=o,o=a,a=c),a-o),l=Ea>c?"0":"1",s=Math.cos(o),f=Math.sin(o),h=Math.cos(a),g=Math.sin(a);return c>=bl?n?"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"M0,"+n+"A"+n+","+n+" 0 1,0 0,"+-n+"A"+n+","+n+" 0 1,0 0,"+n+"Z":"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z":n?"M"+i*s+","+i*f+"A"+i+","+i+" 0 "+l+",1 "+i*h+","+i*g+"L"+n*h+","+n*g+"A"+n+","+n+" 0 "+l+",0 "+n*s+","+n*f+"Z":"M"+i*s+","+i*f+"A"+i+","+i+" 0 "+l+",1 "+i*h+","+i*g+"L0,0Z"}var t=ro,e=uo,r=io,u=oo;return n.innerRadius=function(e){return arguments.length?(t=kt(e),n):t},n.outerRadius=function(t){return arguments.length?(e=kt(t),n):e},n.startAngle=function(t){return arguments.length?(r=kt(t),n):r},n.endAngle=function(t){return arguments.length?(u=kt(t),n):u},n.centroid=function(){var n=(t.apply(this,arguments)+e.apply(this,arguments))/2,i=(r.apply(this,arguments)+u.apply(this,arguments))/2+_l;return[Math.cos(i)*n,Math.sin(i)*n]},n};var _l=-Ca,bl=Aa-Na;Bo.svg.line=function(){return ao(Et)};var wl=Bo.map({linear:co,"linear-closed":lo,step:so,"step-before":fo,"step-after":ho,basis:xo,"basis-open":Mo,"basis-closed":_o,bundle:bo,cardinal:vo,"cardinal-open":go,"cardinal-closed":po,monotone:Co});wl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Sl=[0,2/3,1/3,0],kl=[0,1/3,2/3,0],El=[0,1/6,2/3,1/6];Bo.svg.line.radial=function(){var n=ao(No);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},fo.reverse=ho,ho.reverse=fo,Bo.svg.area=function(){return zo(Et)},Bo.svg.area.radial=function(){var n=zo(No);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},Bo.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+u(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)+_l,s=l.call(n,u,r)+_l;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>Ea)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=mr,o=yr,a=Lo,c=io,l=oo;return n.radius=function(t){return arguments.length?(a=kt(t),n):a},n.source=function(t){return arguments.length?(i=kt(t),n):i},n.target=function(t){return arguments.length?(o=kt(t),n):o},n.startAngle=function(t){return arguments.length?(c=kt(t),n):c},n.endAngle=function(t){return arguments.length?(l=kt(t),n):l},n},Bo.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=mr,e=yr,r=To;return n.source=function(e){return arguments.length?(t=kt(e),n):t},n.target=function(t){return arguments.length?(e=kt(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},Bo.svg.diagonal.radial=function(){var n=Bo.svg.diagonal(),t=To,e=n.projection;return n.projection=function(n){return arguments.length?e(qo(t=n)):t},n},Bo.svg.symbol=function(){function n(n,r){return(Al.get(t.call(this,n,r))||Po)(e.call(this,n,r))}var t=Do,e=Ro;return n.type=function(e){return arguments.length?(t=kt(e),n):t},n.size=function(t){return arguments.length?(e=kt(t),n):e},n};var Al=Bo.map({circle:Po,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Ll)),e=t*Ll;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/zl),e=t*zl/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/zl),e=t*zl/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});Bo.svg.symbolTypes=Al.keys();var Cl,Nl,zl=Math.sqrt(3),Ll=Math.tan(30*La),Tl=[],ql=0;Tl.call=ya.call,Tl.empty=ya.empty,Tl.node=ya.node,Tl.size=ya.size,Bo.transition=function(n){return arguments.length?Cl?n.transition():n:_a.transition()},Bo.transition.prototype=Tl,Tl.select=function(n){var t,e,r,u=this.id,i=[];n=k(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]);for(var c=this[o],l=-1,s=c.length;++l<s;)(r=c[l])&&(e=n.call(r,r.__data__,l,o))?("__data__"in r&&(e.__data__=r.__data__),Ho(e,l,u,r.__transition__[u]),t.push(e)):t.push(null)}return Uo(i,u)},Tl.selectAll=function(n){var t,e,r,u,i,o=this.id,a=[];n=E(n);for(var c=-1,l=this.length;++c<l;)for(var s=this[c],f=-1,h=s.length;++f<h;)if(r=s[f]){i=r.__transition__[o],e=n.call(r,r.__data__,f,c),a.push(t=[]);for(var g=-1,p=e.length;++g<p;)(u=e[g])&&Ho(u,g,o,i),t.push(u)}return Uo(a,o)},Tl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=U(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return Uo(u,this.id)},Tl.tween=function(n,t){var e=this.id;return arguments.length<2?this.node().__transition__[e].tween.get(n):F(this,null==t?function(t){t.__transition__[e].tween.remove(n)}:function(r){r.__transition__[e].tween.set(n,t)})},Tl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?Fu:du,a=Bo.ns.qualify(n);return jo(this,"attr."+n,t,a.local?i:u)},Tl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=Bo.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Tl.style=function(n,t,e){function r(){this.style.removeProperty(n)}function u(t){return null==t?r:(t+="",function(){var r,u=Qo.getComputedStyle(this,null).getPropertyValue(n);return u!==t&&(r=du(u,t),function(t){this.style.setProperty(n,r(t),e)})})}var i=arguments.length;if(3>i){if("string"!=typeof n){2>i&&(t="");for(e in n)this.style(e,n[e],t);return this}e=""}return jo(this,"style."+n,t,u)},Tl.styleTween=function(n,t,e){function r(r,u){var i=t.call(this,r,u,Qo.getComputedStyle(this,null).getPropertyValue(n));return i&&function(t){this.style.setProperty(n,i(t),e)}}return arguments.length<3&&(e=""),this.tween("style."+n,r)},Tl.text=function(n){return jo(this,"text",n,Fo)},Tl.remove=function(){return this.each("end.transition",function(){var n;this.__transition__.count<2&&(n=this.parentNode)&&n.removeChild(this)})},Tl.ease=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof n&&(n=Bo.ease.apply(Bo,arguments)),F(this,function(e){e.__transition__[t].ease=n}))},Tl.delay=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:F(this,"function"==typeof n?function(e,r,u){e.__transition__[t].delay=+n.call(e,e.__data__,r,u)}:(n=+n,function(e){e.__transition__[t].delay=n}))},Tl.duration=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:F(this,"function"==typeof n?function(e,r,u){e.__transition__[t].duration=Math.max(1,n.call(e,e.__data__,r,u))}:(n=Math.max(1,n),function(e){e.__transition__[t].duration=n}))},Tl.each=function(n,t){var e=this.id;if(arguments.length<2){var r=Nl,u=Cl;Cl=e,F(this,function(t,r,u){Nl=t.__transition__[e],n.call(t,t.__data__,r,u)}),Nl=r,Cl=u}else F(this,function(r){var u=r.__transition__[e];(u.event||(u.event=Bo.dispatch("start","end"))).on(n,t)});return this},Tl.transition=function(){for(var n,t,e,r,u=this.id,i=++ql,o=[],a=0,c=this.length;c>a;a++){o.push(n=[]);for(var t=this[a],l=0,s=t.length;s>l;l++)(e=t[l])&&(r=Object.create(e.__transition__[u]),r.delay+=r.duration,Ho(e,l,i,r)),n.push(e)}return Uo(o,i)},Bo.svg.axis=function(){function n(n){n.each(function(){var n,l=Bo.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):Et:t,p=l.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Na),d=Bo.transition(p.exit()).style("opacity",Na).remove(),m=Bo.transition(p.order()).style("opacity",1),y=Math.max(u,0)+o,x=Pi(f),M=l.selectAll(".domain").data([0]),_=(M.enter().append("path").attr("class","domain"),Bo.transition(M));v.append("line"),v.append("text");var b,w,S,k,E=v.select("line"),A=m.select("line"),C=p.select("text").text(g),N=v.select("text"),z=m.select("text"),L="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=Oo,b="x",S="y",w="x2",k="y2",C.attr("dy",0>L?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+L*i+"V0H"+x[1]+"V"+L*i)):(n=Yo,b="y",S="x",w="y2",k="x2",C.attr("dy",".32em").style("text-anchor",0>L?"end":"start"),_.attr("d","M"+L*i+","+x[0]+"H0V"+x[1]+"H"+L*i)),E.attr(k,L*u),N.attr(S,L*y),A.attr(w,0).attr(k,L*u),z.attr(b,0).attr(S,L*y),f.rangeBand){var T=f,q=T.rangeBand()/2;s=f=function(n){return T(n)+q}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=Bo.scale.linear(),r=Rl,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Dl?t+"":Rl,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var Rl="bottom",Dl={top:1,right:1,bottom:1,left:1};Bo.svg.brush=function(){function n(i){i.each(function(){var i=Bo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=i.selectAll(".resize").data(p,Et);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Pl[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var s,f=Bo.transition(i),h=Bo.transition(o);c&&(s=Pi(c),h.attr("x",s[0]).attr("width",s[1]-s[0]),e(f)),l&&(s=Pi(l),h.attr("y",s[0]).attr("height",s[1]-s[0]),r(f)),t(f)})}function t(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+s[+/e$/.test(n)]+","+f[+/^s/.test(n)]+")"})}function e(n){n.select(".extent").attr("x",s[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function r(n){n.select(".extent").attr("y",f[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function u(){function u(){32==Bo.event.keyCode&&(C||(y=null,z[0]-=s[1],z[1]-=f[1],C=2),_())}function p(){32==Bo.event.keyCode&&2==C&&(z[0]+=s[1],z[1]+=f[1],C=0,_())}function v(){var n=Bo.mouse(M),u=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(Bo.event.altKey?(y||(y=[(s[0]+s[1])/2,(f[0]+f[1])/2]),z[0]=s[+(n[0]<y[0])],z[1]=f[+(n[1]<y[1])]):y=null),E&&d(n,c,0)&&(e(S),u=!0),A&&d(n,l,1)&&(r(S),u=!0),u&&(t(S),w({type:"brush",mode:C?"move":"resize"}))}function d(n,t,e){var r,u,a=Pi(t),c=a[0],l=a[1],p=z[e],v=e?f:s,d=v[1]-v[0];return C&&(c-=p,l-=d+p),r=(e?g:h)?Math.max(c,Math.min(l,n[e])):n[e],C?u=(r+=p)+d:(y&&(p=Math.max(c,Math.min(l,2*y[e]-r))),r>p?(u=r,r=p):u=p),v[0]!=r||v[1]!=u?(e?o=null:i=null,v[0]=r,v[1]=u,!0):void 0}function m(){v(),S.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),Bo.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),N(),w({type:"brushend"})}var y,x,M=this,b=Bo.select(Bo.event.target),w=a.of(M,arguments),S=Bo.select(M),k=b.datum(),E=!/^(n|s)$/.test(k)&&c,A=!/^(e|w)$/.test(k)&&l,C=b.classed("extent"),N=X(),z=Bo.mouse(M),L=Bo.select(Qo).on("keydown.brush",u).on("keyup.brush",p);if(Bo.event.changedTouches?L.on("touchmove.brush",v).on("touchend.brush",m):L.on("mousemove.brush",v).on("mouseup.brush",m),S.interrupt().selectAll("*").interrupt(),C)z[0]=s[0]-z[0],z[1]=f[0]-z[1];else if(k){var T=+/w$/.test(k),q=+/^n/.test(k);x=[s[1-T]-z[0],f[1-q]-z[1]],z[0]=s[T],z[1]=f[q]}else Bo.event.altKey&&(y=z.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),Bo.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),v()}var i,o,a=w(n,"brushstart","brush","brushend"),c=null,l=null,s=[0,0],f=[0,0],h=!0,g=!0,p=Ul[0];return n.event=function(n){n.each(function(){var n=a.of(this,arguments),t={x:s,y:f,i:i,j:o},e=this.__chart__||t;this.__chart__=t,Cl?Bo.select(this).transition().each("start.brush",function(){i=e.i,o=e.j,s=e.x,f=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=mu(s,t.x),r=mu(f,t.y);return i=o=null,function(u){s=t.x=e(u),f=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,p=Ul[!c<<1|!l],n):c},n.y=function(t){return arguments.length?(l=t,p=Ul[!c<<1|!l],n):l},n.clamp=function(t){return arguments.length?(c&&l?(h=!!t[0],g=!!t[1]):c?h=!!t:l&&(g=!!t),n):c&&l?[h,g]:c?h:l?g:null},n.extent=function(t){var e,r,u,a,h;return arguments.length?(c&&(e=t[0],r=t[1],l&&(e=e[0],r=r[0]),i=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(h=e,e=r,r=h),(e!=s[0]||r!=s[1])&&(s=[e,r])),l&&(u=t[0],a=t[1],c&&(u=u[1],a=a[1]),o=[u,a],l.invert&&(u=l(u),a=l(a)),u>a&&(h=u,u=a,a=h),(u!=f[0]||a!=f[1])&&(f=[u,a])),n):(c&&(i?(e=i[0],r=i[1]):(e=s[0],r=s[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(h=e,e=r,r=h))),l&&(o?(u=o[0],a=o[1]):(u=f[0],a=f[1],l.invert&&(u=l.invert(u),a=l.invert(a)),u>a&&(h=u,u=a,a=h))),c&&l?[[e,u],[r,a]]:c?[e,r]:l&&[u,a])},n.clear=function(){return n.empty()||(s=[0,0],f=[0,0],i=o=null),n},n.empty=function(){return!!c&&s[0]==s[1]||!!l&&f[0]==f[1]},Bo.rebind(n,a,"on")};var Pl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ul=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],jl=rc.format=lc.timeFormat,Fl=jl.utc,Hl=Fl("%Y-%m-%dT%H:%M:%S.%LZ");jl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Io:Hl,Io.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Io.toString=Hl.toString,rc.second=Ft(function(n){return new uc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),rc.seconds=rc.second.range,rc.seconds.utc=rc.second.utc.range,rc.minute=Ft(function(n){return new uc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),rc.minutes=rc.minute.range,rc.minutes.utc=rc.minute.utc.range,rc.hour=Ft(function(n){var t=n.getTimezoneOffset()/60;return new uc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),rc.hours=rc.hour.range,rc.hours.utc=rc.hour.utc.range,rc.month=Ft(function(n){return n=rc.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),rc.months=rc.month.range,rc.months.utc=rc.month.utc.range;var Ol=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Yl=[[rc.second,1],[rc.second,5],[rc.second,15],[rc.second,30],[rc.minute,1],[rc.minute,5],[rc.minute,15],[rc.minute,30],[rc.hour,1],[rc.hour,3],[rc.hour,6],[rc.hour,12],[rc.day,1],[rc.day,2],[rc.week,1],[rc.month,1],[rc.month,3],[rc.year,1]],Il=jl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",Ae]]),Zl={range:function(n,t,e){return Bo.range(Math.ceil(n/e)*e,+t,e).map(Vo)},floor:Et,ceil:Et};Yl.year=rc.year,rc.scale=function(){return Zo(Bo.scale.linear(),Yl,Il)};var Vl=Yl.map(function(n){return[n[0].utc,n[1]]}),Xl=Fl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth();
}],["%Y",Ae]]);Vl.year=rc.year.utc,rc.scale.utc=function(){return Zo(Bo.scale.linear(),Vl,Xl)},Bo.text=At(function(n){return n.responseText}),Bo.json=function(n,t){return Ct(n,"application/json",Xo,t)},Bo.html=function(n,t){return Ct(n,"text/html",$o,t)},Bo.xml=At(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define("d3",Bo):"object"==typeof module&&module.exports&&(module.exports=Bo),this.d3=Bo}(),function(root,factory){"function"==typeof define&&define.amd?define("rickshaw",["d3"],function(d3){return root.Rickshaw=factory(d3)}):"object"==typeof exports?module.exports=factory(require("d3")):root.Rickshaw=factory(d3)}(this,function(d3){var Rickshaw={namespace:function(namespace,obj){for(var parts=namespace.split("."),parent=Rickshaw,i=1,length=parts.length;length>i;i++){var currentPart=parts[i];parent[currentPart]=parent[currentPart]||{},parent=parent[currentPart]}return parent},keys:function(obj){var keys=[];for(var key in obj)keys.push(key);return keys},extend:function(destination,source){for(var property in source)destination[property]=source[property];return destination},clone:function(obj){return JSON.parse(JSON.stringify(obj))}};return function(globalContext){function isFunction(object){return _toString.call(object)===FUNCTION_CLASS}function extend(destination,source){for(var property in source)source.hasOwnProperty(property)&&(destination[property]=source[property]);return destination}function keys(object){if(Type(object)!==OBJECT_TYPE)throw new TypeError;var results=[];for(var property in object)object.hasOwnProperty(property)&&results.push(property);return results}function Type(o){switch(o){case null:return NULL_TYPE;case void 0:return UNDEFINED_TYPE}var type=typeof o;switch(type){case"boolean":return BOOLEAN_TYPE;case"number":return NUMBER_TYPE;case"string":return STRING_TYPE}return OBJECT_TYPE}function isUndefined(object){return"undefined"==typeof object}function argumentNames(fn){var names=fn.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=names.length||names[0]?names:[]}function wrap(fn,wrapper){var __method=fn;return function(){var a=update([bind(__method,this)],arguments);return wrapper.apply(this,a)}}function update(array,args){for(var arrayLength=array.length,length=args.length;length--;)array[arrayLength+length]=args[length];return array}function merge(array,args){return array=slice.call(array,0),update(array,args)}function bind(fn,context){if(arguments.length<2&&isUndefined(arguments[0]))return this;var __method=fn,args=slice.call(arguments,2);return function(){var a=merge(args,arguments);return __method.apply(context,a)}}var _toString=Object.prototype.toString,NULL_TYPE="Null",UNDEFINED_TYPE="Undefined",BOOLEAN_TYPE="Boolean",NUMBER_TYPE="Number",STRING_TYPE="String",OBJECT_TYPE="Object",FUNCTION_CLASS="[object Function]",slice=Array.prototype.slice,emptyFunction=function(){},Class=function(){function subclass(){}function create(){function klass(){this.initialize.apply(this,arguments)}var parent=null,properties=[].slice.apply(arguments);if(isFunction(properties[0])&&(parent=properties.shift()),extend(klass,Class.Methods),klass.superclass=parent,klass.subclasses=[],parent){subclass.prototype=parent.prototype,klass.prototype=new subclass;try{parent.subclasses.push(klass)}catch(e){}}for(var i=0,length=properties.length;length>i;i++)klass.addMethods(properties[i]);return klass.prototype.initialize||(klass.prototype.initialize=emptyFunction),klass.prototype.constructor=klass,klass}function addMethods(source){var ancestor=this.superclass&&this.superclass.prototype,properties=keys(source);IS_DONTENUM_BUGGY&&(source.toString!=Object.prototype.toString&&properties.push("toString"),source.valueOf!=Object.prototype.valueOf&&properties.push("valueOf"));for(var i=0,length=properties.length;length>i;i++){var property=properties[i],value=source[property];if(ancestor&&isFunction(value)&&"$super"==argumentNames(value)[0]){var method=value;value=wrap(function(m){return function(){return ancestor[m].apply(this,arguments)}}(property),method),value.valueOf=bind(method.valueOf,method),value.toString=bind(method.toString,method)}this.prototype[property]=value}return this}var IS_DONTENUM_BUGGY=function(){for(var p in{toString:1})if("toString"===p)return!1;return!0}();return{create:create,Methods:{addMethods:addMethods}}}();globalContext.exports?globalContext.exports.Class=Class:globalContext.Class=Class}(Rickshaw),Rickshaw.namespace("Rickshaw.Compat.ClassList"),Rickshaw.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||!function(view){"use strict";var classListProp="classList",protoProp="prototype",elemCtrProto=(view.HTMLElement||view.Element)[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){for(var i=0,len=this.length;len>i;i++)if(i in this&&this[i]===item)return i;return-1},DOMEx=function(type,message){this.name=type,this.code=DOMException[type],this.message=message},checkTokenAndGetIndex=function(classList,token){if(""===token)throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(token))throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");return arrIndexOf.call(classList,token)},ClassList=function(elem){for(var trimmedClasses=strTrim.call(elem.className),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;len>i;i++)this.push(classes[i]);this._updateClassName=function(){elem.className=this.toString()}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};if(DOMEx[protoProp]=Error[protoProp],classListProto.item=function(i){return this[i]||null},classListProto.contains=function(token){return token+="",-1!==checkTokenAndGetIndex(this,token)},classListProto.add=function(token){token+="",-1===checkTokenAndGetIndex(this,token)&&(this.push(token),this._updateClassName())},classListProto.remove=function(token){token+="";var index=checkTokenAndGetIndex(this,token);-1!==index&&(this.splice(index,1),this._updateClassName())},classListProto.toggle=function(token){token+="",-1===checkTokenAndGetIndex(this,token)?this.add(token):this.remove(token)},classListProto.toString=function(){return this.join(" ")},objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:!0,configurable:!0};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){-2146823252===ex.number&&(classListPropDesc.enumerable=!1,objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc))}}else objCtr[protoProp].__defineGetter__&&elemCtrProto.__defineGetter__(classListProp,classListGetter)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new Rickshaw.Compat.ClassList,Rickshaw.namespace("Rickshaw.Graph"),Rickshaw.Graph=function(args){var self=this;this.initialize=function(args){if(!args.element)throw"Rickshaw.Graph needs a reference to an element";if(1!==args.element.nodeType)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=args.element,this.series=args.series,this.window={},this.updateCallbacks=[],this.configureCallbacks=[],this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0,preserve:!1,xScale:void 0,yScale:void 0,stack:!0},this._loadRenderers(),this.configure(args),this.validateSeries(args.series),this.series.active=function(){return self.series.filter(function(s){return!s.disabled})},this.setSize({width:args.width,height:args.height}),this.element.classList.add("rickshaw_graph"),this.vis=d3.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height),this.discoverRange()},this._loadRenderers=function(){for(var name in Rickshaw.Graph.Renderer)if(name&&Rickshaw.Graph.Renderer.hasOwnProperty(name)){var r=Rickshaw.Graph.Renderer[name];r&&r.prototype&&r.prototype.render&&self.registerRenderer(new r({graph:self}))}},this.validateSeries=function(series){if(!(Array.isArray(series)||series instanceof Rickshaw.Series)){var seriesSignature=Object.prototype.toString.apply(series);throw"series is not an array: "+seriesSignature}series.forEach(function(s){if(!(s instanceof Object))throw"series element is not an object: "+s;if(!s.data)throw"series has no data: "+JSON.stringify(s);if(!Array.isArray(s.data))throw"series data is not an array: "+JSON.stringify(s.data);if(s.data.length>0){var x=s.data[0].x,y=s.data[0].y;if("number"!=typeof x||"number"!=typeof y&&null!==y)throw"x and y properties of points should be numbers instead of "+typeof x+" and "+typeof y}if(s.data.length>=3&&(s.data[2].x<s.data[1].x||s.data[1].x<s.data[0].x||s.data[s.data.length-1].x<s.data[0].x))throw"series data needs to be sorted on x values for series name: "+s.name},this)},this.dataDomain=function(){var data=this.series.map(function(s){return s.data}),min=d3.min(data.map(function(d){return d[0].x})),max=d3.max(data.map(function(d){return d[d.length-1].x}));return[min,max]},this.discoverRange=function(){var domain=this.renderer.domain();this.x=(this.xScale||d3.scale.linear()).copy().domain(domain.x).range([0,this.width]),this.y=(this.yScale||d3.scale.linear()).copy().domain(domain.y).range([this.height,0]),this.x.magnitude=d3.scale.linear().domain([domain.x[0]-domain.x[0],domain.x[1]-domain.x[0]]).range([0,this.width]),this.y.magnitude=d3.scale.linear().domain([domain.y[0]-domain.y[0],domain.y[1]-domain.y[0]]).range([0,this.height])},this.render=function(){this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(callback){callback()})},this.update=this.render,this.stackData=function(){var data=this.series.active().map(function(d){return d.data}).map(function(d){return d.filter(function(d){return this._slice(d)},this)},this),preserve=this.preserve;preserve||this.series.forEach(function(series){series.scale&&(preserve=!0)}),data=preserve?Rickshaw.clone(data):data,this.series.active().forEach(function(series,index){if(series.scale){var seriesData=data[index];seriesData&&seriesData.forEach(function(d){d.y=series.scale(d.y)})}}),this.stackData.hooks.data.forEach(function(entry){data=entry.f.apply(self,[data])});var stackedData;if(!this.renderer.unstack){this._validateStackable();var layout=d3.layout.stack();layout.offset(self.offset),stackedData=layout(data)}stackedData=stackedData||data,this.renderer.unstack&&stackedData.forEach(function(seriesData){seriesData.forEach(function(d){d.y0=void 0===d.y0?0:d.y0})}),this.stackData.hooks.after.forEach(function(entry){stackedData=entry.f.apply(self,[data])});var i=0;return this.series.forEach(function(series){series.disabled||(series.stack=stackedData[i++])}),this.stackedData=stackedData,stackedData},this._validateStackable=function(){var pointsCount,series=this.series;series.forEach(function(s){if(pointsCount=pointsCount||s.data.length,pointsCount&&s.data.length!=pointsCount)throw"stacked series cannot have differing numbers of points: "+pointsCount+" vs "+s.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(d){if(this.window.xMin||this.window.xMax){var isInRange=!0;return this.window.xMin&&d.x<this.window.xMin&&(isInRange=!1),this.window.xMax&&d.x>this.window.xMax&&(isInRange=!1),isInRange}return!0},this.onUpdate=function(callback){this.updateCallbacks.push(callback)},this.onConfigure=function(callback){this.configureCallbacks.push(callback)},this.registerRenderer=function(renderer){this._renderers=this._renderers||{},this._renderers[renderer.name]=renderer},this.configure=function(args){this.config=this.config||{},(args.width||args.height)&&this.setSize(args),Rickshaw.keys(this.defaults).forEach(function(k){this.config[k]=k in args?args[k]:k in this?this[k]:this.defaults[k]},this),Rickshaw.keys(this.config).forEach(function(k){this[k]=this.config[k]},this),"stack"in args&&(args.unstack=!args.stack);var renderer=args.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(renderer,args),this.configureCallbacks.forEach(function(callback){callback(args)})},this.setRenderer=function(r,args){if("function"==typeof r)this.renderer=new r({graph:self}),this.registerRenderer(this.renderer);else{if(!this._renderers[r])throw"couldn't find renderer "+r;this.renderer=this._renderers[r]}"object"==typeof args&&this.renderer.configure(args)},this.setSize=function(args){if(args=args||{},void 0!==typeof window)var style=window.getComputedStyle(this.element,null),elementWidth=parseInt(style.getPropertyValue("width"),10),elementHeight=parseInt(style.getPropertyValue("height"),10);this.width=args.width||elementWidth||400,this.height=args.height||elementHeight||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(args)},Rickshaw.namespace("Rickshaw.Fixtures.Color"),Rickshaw.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},Rickshaw.namespace("Rickshaw.Fixtures.RandomData"),Rickshaw.Fixtures.RandomData=function(timeInterval){timeInterval=timeInterval||1;var lastRandomValue=200,timeBase=Math.floor((new Date).getTime()/1e3);this.addData=function(data){var randomValue=100*Math.random()+15+lastRandomValue,index=data[0].length,counter=1;data.forEach(function(series){var randomVariance=20*Math.random(),v=randomValue/25+counter++ +15*(Math.cos(index*counter*11/960)+2)+7*(Math.cos(index/7)+2)+1*(Math.cos(index/17)+2);series.push({x:index*timeInterval+timeBase,y:v+randomVariance})}),lastRandomValue=.85*randomValue},this.removeData=function(data){data.forEach(function(series){series.shift()}),timeBase+=timeInterval}},Rickshaw.namespace("Rickshaw.Fixtures.Time"),Rickshaw.Fixtures.Time=function(){var self=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(d){return 10*parseInt(d.getUTCFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(d){return d.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(d){return self.months[d.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(d){return self.formatDate(d)}},{name:"day",seconds:86400,formatter:function(d){return d.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(d){return self.formatTime(d)}},{name:"hour",seconds:3600,formatter:function(d){return self.formatTime(d)}},{name:"15 minute",seconds:900,formatter:function(d){return self.formatTime(d)}},{name:"minute",seconds:60,formatter:function(d){return d.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(d){return d.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(d){return d.getUTCSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(d){return d.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(d){return d.getUTCMilliseconds()+"ms"}}],this.unit=function(unitName){return this.units.filter(function(unit){return unitName==unit.name}).shift()},this.formatDate=function(d){return d3.time.format("%b %e")(d)},this.formatTime=function(d){return d.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(time,unit){var date,floor,year;if("month"==unit.name){if(date=new Date(1e3*time),floor=Date.UTC(date.getUTCFullYear(),date.getUTCMonth())/1e3,floor==time)return time;year=date.getUTCFullYear();var month=date.getUTCMonth();return 11==month?(month=0,year+=1):month+=1,Date.UTC(year,month)/1e3}return"year"==unit.name?(date=new Date(1e3*time),floor=Date.UTC(date.getUTCFullYear(),0)/1e3,floor==time?time:(year=date.getUTCFullYear()+1,Date.UTC(year,0)/1e3)):Math.ceil(time/unit.seconds)*unit.seconds}},Rickshaw.namespace("Rickshaw.Fixtures.Time.Local"),Rickshaw.Fixtures.Time.Local=function(){var self=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(d){return 10*parseInt(d.getFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(d){return d.getFullYear()}},{name:"month",seconds:2635200,formatter:function(d){return self.months[d.getMonth()]}},{name:"week",seconds:604800,formatter:function(d){return self.formatDate(d)}},{name:"day",seconds:86400,formatter:function(d){return d.getDate()}},{name:"6 hour",seconds:21600,formatter:function(d){return self.formatTime(d)}},{name:"hour",seconds:3600,formatter:function(d){return self.formatTime(d)}},{name:"15 minute",seconds:900,formatter:function(d){return self.formatTime(d)}},{name:"minute",seconds:60,formatter:function(d){return d.getMinutes()}},{name:"15 second",seconds:15,formatter:function(d){return d.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(d){return d.getSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(d){return d.getMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(d){return d.getMilliseconds()+"ms"}}],this.unit=function(unitName){return this.units.filter(function(unit){return unitName==unit.name}).shift()},this.formatDate=function(d){return d3.time.format("%b %e")(d)},this.formatTime=function(d){return d.toString().match(/(\d+:\d+):/)[1]},this.ceil=function(time,unit){var date,floor,year;if("day"==unit.name){var nearFuture=new Date(1e3*(time+unit.seconds-1)),rounded=new Date(0);return rounded.setMilliseconds(0),rounded.setSeconds(0),rounded.setMinutes(0),rounded.setHours(0),rounded.setDate(nearFuture.getDate()),rounded.setMonth(nearFuture.getMonth()),rounded.setFullYear(nearFuture.getFullYear()),rounded.getTime()/1e3}if("month"==unit.name){if(date=new Date(1e3*time),floor=new Date(date.getFullYear(),date.getMonth()).getTime()/1e3,floor==time)return time;year=date.getFullYear();var month=date.getMonth();return 11==month?(month=0,year+=1):month+=1,new Date(year,month).getTime()/1e3}return"year"==unit.name?(date=new Date(1e3*time),floor=new Date(date.getUTCFullYear(),0).getTime()/1e3,floor==time?time:(year=date.getFullYear()+1,new Date(year,0).getTime()/1e3)):Math.ceil(time/unit.seconds)*unit.seconds}},Rickshaw.namespace("Rickshaw.Fixtures.Number"),Rickshaw.Fixtures.Number.formatKMBT=function(y){var abs_y=Math.abs(y);return abs_y>=1e12?y/1e12+"T":abs_y>=1e9?y/1e9+"B":abs_y>=1e6?y/1e6+"M":abs_y>=1e3?y/1e3+"K":1>abs_y&&y>0?y.toFixed(2):0===abs_y?"":y},Rickshaw.Fixtures.Number.formatBase1024KMGTP=function(y){var abs_y=Math.abs(y);return abs_y>=0x4000000000000?y/0x4000000000000+"P":abs_y>=1099511627776?y/1099511627776+"T":abs_y>=1073741824?y/1073741824+"G":abs_y>=1048576?y/1048576+"M":abs_y>=1024?y/1024+"K":1>abs_y&&y>0?y.toFixed(2):0===abs_y?"":y},Rickshaw.namespace("Rickshaw.Color.Palette"),Rickshaw.Color.Palette=function(args){var color=new Rickshaw.Fixtures.Color;if(args=args||{},this.schemes={},this.scheme=color.schemes[args.scheme]||args.scheme||color.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,args.interpolatedStopCount){var i,j,schemeCount=this.scheme.length-1,scheme=[];for(i=0;schemeCount>i;i++){scheme.push(this.scheme[i]);var generator=d3.interpolateHsl(this.scheme[i],this.scheme[i+1]);for(j=1;j<args.interpolatedStopCount;j++)scheme.push(generator(1/args.interpolatedStopCount*j))}scheme.push(this.scheme[this.scheme.length-1]),this.scheme=scheme}this.rotateCount=this.scheme.length,this.color=function(key){return this.scheme[key]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){if(Array.isArray(this.scheme)){var color;return this.generatorIndex==2*this.rotateCount-1?(color=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(color=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(color),color}}},Rickshaw.namespace("Rickshaw.Graph.Ajax"),Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(args){this.dataURL=args.dataURL,this.onData=args.onData||function(d){return d},this.onComplete=args.onComplete||function(){},this.onError=args.onError||function(){},this.args=args,this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(data,status){data=this.onData(data),this.args.series=this._splice({data:data,series:this.args.series}),this.graph=this.graph||new Rickshaw.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(args){var data=args.data,series=args.series;return args.series?(series.forEach(function(s){var seriesKey=s.key||s.name;if(!seriesKey)throw"series needs a key or a name";data.forEach(function(d){var dataKey=d.key||d.name;if(!dataKey)throw"data needs a key or a name";if(seriesKey==dataKey){var properties=["color","name","data"];properties.forEach(function(p){d[p]&&(s[p]=d[p])})}})}),series):data}}),Rickshaw.namespace("Rickshaw.Graph.Annotate"),Rickshaw.Graph.Annotate=function(args){this.graph=args.graph;this.elements={timeline:args.element};var self=this;this.data={},this.elements.timeline.classList.add("rickshaw_annotation_timeline"),this.add=function(time,content,end_time){self.data[time]=self.data[time]||{boxes:[]},self.data[time].boxes.push({content:content,end:end_time})},this.update=function(){Rickshaw.keys(self.data).forEach(function(time){var annotation=self.data[time],left=self.graph.x(time);if(0>left||left>self.graph.x.range()[1])return annotation.element&&(annotation.line.classList.add("offscreen"),annotation.element.style.display="none"),void annotation.boxes.forEach(function(box){box.rangeElement&&box.rangeElement.classList.add("offscreen")});if(!annotation.element){var element=annotation.element=document.createElement("div");element.classList.add("annotation"),this.elements.timeline.appendChild(element),element.addEventListener("click",function(e){element.classList.toggle("active"),annotation.line.classList.toggle("active"),annotation.boxes.forEach(function(box){box.rangeElement&&box.rangeElement.classList.toggle("active")})},!1)}annotation.element.style.left=left+"px",annotation.element.style.display="block",annotation.boxes.forEach(function(box){var element=box.element;if(element||(element=box.element=document.createElement("div"),element.classList.add("content"),element.innerHTML=box.content,annotation.element.appendChild(element),annotation.line=document.createElement("div"),annotation.line.classList.add("annotation_line"),self.graph.element.appendChild(annotation.line),box.end&&(box.rangeElement=document.createElement("div"),box.rangeElement.classList.add("annotation_range"),self.graph.element.appendChild(box.rangeElement))),box.end){var annotationRangeStart=left,annotationRangeEnd=Math.min(self.graph.x(box.end),self.graph.x.range()[1]);annotationRangeStart>annotationRangeEnd&&(annotationRangeEnd=left,annotationRangeStart=Math.max(self.graph.x(box.end),self.graph.x.range()[0]));var annotationRangeWidth=annotationRangeEnd-annotationRangeStart;box.rangeElement.style.left=annotationRangeStart+"px",box.rangeElement.style.width=annotationRangeWidth+"px",box.rangeElement.classList.remove("offscreen")}annotation.line.classList.remove("offscreen"),annotation.line.style.left=left+"px"})},this)},this.graph.onUpdate(function(){self.update()})},Rickshaw.namespace("Rickshaw.Graph.Axis.Time"),Rickshaw.Graph.Axis.Time=function(args){var self=this;this.graph=args.graph,this.elements=[],this.ticksTreatment=args.ticksTreatment||"plain",this.fixedTimeUnit=args.timeUnit;var time=args.timeFixture||new Rickshaw.Fixtures.Time;this.appropriateTimeUnit=function(){var unit,units=time.units,domain=this.graph.x.domain(),rangeSeconds=domain[1]-domain[0];return units.forEach(function(u){Math.floor(rangeSeconds/u.seconds)>=2&&(unit=unit||u)}),unit||time.units[time.units.length-1]},this.tickOffsets=function(){for(var domain=this.graph.x.domain(),unit=this.fixedTimeUnit||this.appropriateTimeUnit(),count=Math.ceil((domain[1]-domain[0])/unit.seconds),runningTick=domain[0],offsets=[],i=0;count>i;i++){var tickValue=time.ceil(runningTick,unit);runningTick=tickValue+unit.seconds/2,offsets.push({value:tickValue,unit:unit})}return offsets},this.render=function(){this.elements.forEach(function(e){e.parentNode.removeChild(e)}),this.elements=[];var offsets=this.tickOffsets();offsets.forEach(function(o){if(!(self.graph.x(o.value)>self.graph.x.range()[1])){var element=document.createElement("div");element.style.left=self.graph.x(o.value)+"px",element.classList.add("x_tick"),element.classList.add(self.ticksTreatment);var title=document.createElement("div");title.classList.add("title"),title.innerHTML=o.unit.formatter(new Date(1e3*o.value)),element.appendChild(title),self.graph.element.appendChild(element),self.elements.push(element)}})},this.graph.onUpdate(function(){self.render()})},Rickshaw.namespace("Rickshaw.Graph.Axis.X"),Rickshaw.Graph.Axis.X=function(args){var self=this,berthRate=.1;this.initialize=function(args){this.graph=args.graph,this.orientation=args.orientation||"top",this.pixelsPerTick=args.pixelsPerTick||75,args.ticks&&(this.staticTicks=args.ticks),args.tickValues&&(this.tickValues=args.tickValues),this.tickSize=args.tickSize||4,this.ticksTreatment=args.ticksTreatment||"plain",args.element?(this.element=args.element,this._discoverSize(args.element,args),this.vis=d3.select(args.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:args.width,height:args.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){self.render()})},this.setSize=function(args){if(args=args||{},this.element){this._discoverSize(this.element.parentNode,args),this.vis.attr("height",this.height).attr("width",this.width*(1+berthRate));var berth=Math.floor(this.width*berthRate/2);this.element.style.left=-1*berth+"px"}},this.render=function(){void 0!==this._renderWidth&&this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var axis=d3.svg.axis().scale(this.graph.x).orient(this.orientation);axis.tickFormat(args.tickFormat||function(x){return x}),this.tickValues&&axis.tickValues(this.tickValues),this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var transform,berth=Math.floor(this.width*berthRate/2)||0;if("top"==this.orientation){var yOffset=this.height||this.graph.height;transform="translate("+berth+","+yOffset+")"}else transform="translate("+berth+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",transform).call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var gridSize=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(gridSize)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)}),this._renderHeight=this.graph.height},this._discoverSize=function(element,args){if("undefined"!=typeof window){var style=window.getComputedStyle(element,null),elementHeight=parseInt(style.getPropertyValue("height"),10);if(!args.auto)var elementWidth=parseInt(style.getPropertyValue("width"),10)}this.width=(args.width||elementWidth||this.graph.width)*(1+berthRate),this.height=args.height||elementHeight||40},this.initialize(args)},Rickshaw.namespace("Rickshaw.Graph.Axis.Y"),Rickshaw.Graph.Axis.Y=Rickshaw.Class.create({initialize:function(args){this.graph=args.graph,this.orientation=args.orientation||"right",this.pixelsPerTick=args.pixelsPerTick||75,args.ticks&&(this.staticTicks=args.ticks),args.tickValues&&(this.tickValues=args.tickValues),this.tickSize=args.tickSize||4,this.ticksTreatment=args.ticksTreatment||"plain",this.tickFormat=args.tickFormat||function(y){return y},this.berthRate=.1,args.element?(this.element=args.element,this.vis=d3.select(args.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:args.width,height:args.height})):this.vis=this.graph.vis;var self=this;this.graph.onUpdate(function(){self.render()})},setSize:function(args){if(args=args||{},this.element){if("undefined"!=typeof window){var style=window.getComputedStyle(this.element.parentNode,null),elementWidth=parseInt(style.getPropertyValue("width"),10);if(!args.auto)var elementHeight=parseInt(style.getPropertyValue("height"),10)}this.width=args.width||elementWidth||this.graph.width*this.berthRate,this.height=args.height||elementHeight||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var berth=this.height*this.berthRate;"left"==this.orientation&&(this.element.style.top=-1*berth+"px")}},render:function(){void 0!==this._renderHeight&&this.graph.height!==this._renderHeight&&this.setSize({auto:!0}),this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var axis=this._drawAxis(this.graph.y);this._drawGrid(axis),this._renderHeight=this.graph.height},_drawAxis:function(scale){var axis=d3.svg.axis().scale(scale).orient(this.orientation);if(axis.tickFormat(this.tickFormat),this.tickValues&&axis.tickValues(this.tickValues),"left"==this.orientation)var berth=this.height*this.berthRate,transform="translate("+this.width+", "+berth+")";return this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",transform).call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),axis},_drawGrid:function(axis){var gridSize=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(axis.ticks(this.ticks).tickSubdivide(0).tickSize(gridSize)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)})}}),Rickshaw.namespace("Rickshaw.Graph.Axis.Y.Scaled"),Rickshaw.Graph.Axis.Y.Scaled=Rickshaw.Class.create(Rickshaw.Graph.Axis.Y,{initialize:function($super,args){if("undefined"==typeof args.scale)throw new Error("Scaled requires scale");this.scale=args.scale,"undefined"==typeof args.grid?this.grid=!0:this.grid=args.grid,
$super(args)},_drawAxis:function($super,scale){var domain=this.scale.domain(),renderDomain=this.graph.renderer.domain().y,extents=[Math.min.apply(Math,domain),Math.max.apply(Math,domain)],extentMap=d3.scale.linear().domain([0,1]).range(extents),adjExtents=[extentMap(renderDomain[0]),extentMap(renderDomain[1])],adjustment=d3.scale.linear().domain(extents).range(adjExtents),adjustedScale=this.scale.copy().domain(domain.map(adjustment)).range(scale.range());return $super(adjustedScale)},_drawGrid:function($super,axis){this.grid&&$super(axis)}}),Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),Rickshaw.Graph.Behavior.Series.Highlight=function(args){this.graph=args.graph,this.legend=args.legend;var self=this,colorSafe={},activeLine=null,disabledColor=args.disabledColor||function(seriesColor){return d3.interpolateRgb(seriesColor,d3.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(l){l.element.addEventListener("mouseover",function(e){activeLine||(activeLine=l,self.legend.lines.forEach(function(line){if(l!==line)colorSafe[line.series.name]=colorSafe[line.series.name]||line.series.color,line.series.color=disabledColor(line.series.color);else if(self.graph.renderer.unstack&&(line.series.renderer?line.series.renderer.unstack:!0)){var seriesIndex=self.graph.series.indexOf(line.series);line.originalIndex=seriesIndex;var series=self.graph.series.splice(seriesIndex,1)[0];self.graph.series.push(series)}}),self.graph.update())},!1),l.element.addEventListener("mouseout",function(e){activeLine&&(activeLine=null,self.legend.lines.forEach(function(line){if(l===line&&line.hasOwnProperty("originalIndex")){var series=self.graph.series.pop();self.graph.series.splice(line.originalIndex,0,series),delete line.originalIndex}colorSafe[line.series.name]&&(line.series.color=colorSafe[line.series.name])}),self.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(l){self.addHighlightEvents(l)})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Order"),Rickshaw.Graph.Behavior.Series.Order=function(args){this.graph=args.graph,this.legend=args.legend;var self=this;if("undefined"==typeof window.jQuery)throw"couldn't find jQuery at window.jQuery";if("undefined"==typeof window.jQuery.ui)throw"couldn't find jQuery UI at window.jQuery.ui";jQuery(function(){jQuery(self.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(event,ui){var series=[];jQuery(self.legend.list).find("li").each(function(index,item){item.series&&series.push(item.series)});for(var i=self.graph.series.length-1;i>=0;i--)self.graph.series[i]=series.shift();self.graph.update()}}),jQuery(self.legend.list).disableSelection()}),this.graph.onUpdate(function(){var h=window.getComputedStyle(self.legend.element).height;self.legend.element.style.height=h})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),Rickshaw.Graph.Behavior.Series.Toggle=function(args){this.graph=args.graph,this.legend=args.legend;var self=this;if(this.addAnchor=function(line){var anchor=document.createElement("a");anchor.innerHTML="&#10004;",anchor.classList.add("action"),line.element.insertBefore(anchor,line.element.firstChild),anchor.onclick=function(e){if(line.series.disabled)line.series.enable(),line.element.classList.remove("disabled");else{if(this.graph.series.filter(function(s){return!s.disabled}).length<=1)return;line.series.disable(),line.element.classList.add("disabled")}}.bind(this);var label=line.element.getElementsByTagName("span")[0];label.onclick=function(e){var disableAllOtherLines=line.series.disabled;if(!disableAllOtherLines)for(var i=0;i<self.legend.lines.length;i++){var l=self.legend.lines[i];if(line.series===l.series);else if(!l.series.disabled){disableAllOtherLines=!0;break}}disableAllOtherLines?(line.series.enable(),line.element.classList.remove("disabled"),self.legend.lines.forEach(function(l){line.series===l.series||(l.series.disable(),l.element.classList.add("disabled"))})):self.legend.lines.forEach(function(l){l.series.enable(),l.element.classList.remove("disabled")})}},this.legend){var $=jQuery;"undefined"!=typeof $&&$(this.legend.list).sortable&&$(this.legend.list).sortable({start:function(event,ui){ui.item.bind("no.onclick",function(event){event.preventDefault()})},stop:function(event,ui){setTimeout(function(){ui.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(l){self.addAnchor(l)})}this._addBehavior=function(){this.graph.series.forEach(function(s){s.disable=function(){if(self.graph.series.length<=1)throw"only one series left";s.disabled=!0,self.graph.update()},s.enable=function(){s.disabled=!1,self.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},Rickshaw.namespace("Rickshaw.Graph.HoverDetail"),Rickshaw.Graph.HoverDetail=Rickshaw.Class.create({initialize:function(args){var graph=this.graph=args.graph;this.xFormatter=args.xFormatter||function(x){return new Date(1e3*x).toUTCString()},this.yFormatter=args.yFormatter||function(y){return null===y?y:y.toFixed(2)};var element=this.element=document.createElement("div");element.className="detail",this.visible=!0,graph.element.appendChild(element),this.lastEvent=null,this._addListeners(),this.onShow=args.onShow,this.onHide=args.onHide,this.onRender=args.onRender,this.formatter=args.formatter||this.formatter},formatter:function(series,x,y,formattedX,formattedY,d){return series.name+":&nbsp;"+formattedY},update:function(e){if(e=e||this.lastEvent,e&&(this.lastEvent=e,e.target.nodeName.match(/^(path|svg|rect|circle)$/))){var nearestPoint,graph=this.graph,eventX=e.offsetX||e.layerX,eventY=e.offsetY||e.layerY,j=0,points=[];if(this.graph.series.active().forEach(function(series){var data=this.graph.stackedData[j++];if(data.length){var domainX=graph.x.invert(eventX),domainIndexScale=d3.scale.linear().domain([data[0].x,data.slice(-1)[0].x]).range([0,data.length-1]),approximateIndex=Math.round(domainIndexScale(domainX));approximateIndex==data.length-1&&approximateIndex--;for(var dataIndex=Math.min(approximateIndex||0,data.length-1),i=approximateIndex;i<data.length-1&&(data[i]&&data[i+1]);){if(data[i].x<=domainX&&data[i+1].x>domainX){dataIndex=Math.abs(domainX-data[i].x)<Math.abs(domainX-data[i+1].x)?i:i+1;break}data[i+1].x<=domainX?i++:i--}0>dataIndex&&(dataIndex=0);var value=data[dataIndex],distance=Math.sqrt(Math.pow(Math.abs(graph.x(value.x)-eventX),2)+Math.pow(Math.abs(graph.y(value.y+value.y0)-eventY),2)),xFormatter=series.xFormatter||this.xFormatter,yFormatter=series.yFormatter||this.yFormatter,point={formattedXValue:xFormatter(value.x),formattedYValue:yFormatter(series.scale?series.scale.invert(value.y):value.y),series:series,value:value,distance:distance,order:j,name:series.name};(!nearestPoint||distance<nearestPoint.distance)&&(nearestPoint=point),points.push(point)}},this),nearestPoint){nearestPoint.active=!0;var domainX=nearestPoint.value.x,formattedXValue=nearestPoint.formattedXValue;this.element.innerHTML="",this.element.style.left=graph.x(domainX)+"px",this.visible&&this.render({points:points,detail:points,mouseX:eventX,mouseY:eventY,formattedXValue:formattedXValue,domainX:domainX})}}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(args){var graph=this.graph,points=args.points,point=points.filter(function(p){return p.active}).shift();if(null!==point.value.y){var formattedXValue=point.formattedXValue,formattedYValue=point.formattedYValue;this.element.innerHTML="",this.element.style.left=graph.x(point.value.x)+"px";var xLabel=document.createElement("div");xLabel.className="x_label",xLabel.innerHTML=formattedXValue,this.element.appendChild(xLabel);var item=document.createElement("div");item.className="item";var series=point.series,actualY=series.scale?series.scale.invert(point.value.y):point.value.y;item.innerHTML=this.formatter(series,point.value.x,actualY,formattedXValue,formattedYValue,point),item.style.top=this.graph.y(point.value.y0+point.value.y)+"px",this.element.appendChild(item);var dot=document.createElement("div");dot.className="dot",dot.style.top=item.style.top,dot.style.borderColor=series.color,this.element.appendChild(dot),point.active&&(item.classList.add("active"),dot.classList.add("active"));var alignables=[xLabel,item];alignables.forEach(function(el){el.classList.add("left")}),this.show();var leftAlignError=this._calcLayoutError(alignables);if(leftAlignError>0){alignables.forEach(function(el){el.classList.remove("left"),el.classList.add("right")});var rightAlignError=this._calcLayoutError(alignables);rightAlignError>leftAlignError&&alignables.forEach(function(el){el.classList.remove("right"),el.classList.add("left")})}"function"==typeof this.onRender&&this.onRender(args)}},_calcLayoutError:function(alignables){var parentRect=this.element.parentNode.getBoundingClientRect(),error=0;alignables.forEach(function(el){var rect=el.getBoundingClientRect();rect.width&&(rect.right>parentRect.right&&(error+=rect.right-parentRect.right),rect.left<parentRect.left&&(error+=parentRect.left-rect.left))});return error},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(e){this.visible=!0,this.update(e)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(e){!e.relatedTarget||e.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),Rickshaw.namespace("Rickshaw.Graph.JSONP"),Rickshaw.Graph.JSONP=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),Rickshaw.namespace("Rickshaw.Graph.Legend"),Rickshaw.Graph.Legend=Rickshaw.Class.create({className:"rickshaw_legend",initialize:function(args){this.element=args.element,this.graph=args.graph,this.naturalOrder=args.naturalOrder,this.element.classList.add(this.className),this.list=document.createElement("ul"),this.element.appendChild(this.list),this.render(),this.graph.onUpdate(function(){})},render:function(){for(var self=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.lines=[];var series=this.graph.series.map(function(s){return s});this.naturalOrder||(series=series.reverse()),series.forEach(function(s){self.addLine(s)})},addLine:function(series){var line=document.createElement("li");line.className="line",series.disabled&&(line.className+=" disabled"),series.className&&d3.select(line).classed(series.className,!0);var swatch=document.createElement("div");swatch.className="swatch",swatch.style.backgroundColor=series.color,line.appendChild(swatch);var label=document.createElement("span");label.className="label",label.innerHTML=series.name,line.appendChild(label),this.list.appendChild(line),line.series=series,series.noLegend&&(line.style.display="none");var _line={element:line,series:series};return this.shelving&&(this.shelving.addAnchor(_line),this.shelving.updateBehaviour()),this.highlighter&&this.highlighter.addHighlightEvents(_line),this.lines.push(_line),line}}),Rickshaw.namespace("Rickshaw.Graph.RangeSlider"),Rickshaw.Graph.RangeSlider=Rickshaw.Class.create({initialize:function(args){var graph=(this.element=args.element,this.graph=args.graph);this.slideCallbacks=[],this.build(),graph.onUpdate(function(){this.update()}.bind(this))},build:function(){var element=this.element,graph=this.graph,$=jQuery,domain=graph.dataDomain(),self=this;$(function(){$(element).slider({range:!0,min:domain[0],max:domain[1],values:[domain[0],domain[1]],slide:function(event,ui){if(!(ui.values[1]<=ui.values[0])){graph.window.xMin=ui.values[0],graph.window.xMax=ui.values[1],graph.update();var domain=graph.dataDomain();domain[0]==ui.values[0]&&(graph.window.xMin=void 0),domain[1]==ui.values[1]&&(graph.window.xMax=void 0),self.slideCallbacks.forEach(function(callback){callback(graph,graph.window.xMin,graph.window.xMax)})}}})}),$(element)[0].style.width=graph.width+"px"},update:function(){var element=this.element,graph=this.graph,$=jQuery,values=$(element).slider("option","values"),domain=graph.dataDomain();$(element).slider("option","min",domain[0]),$(element).slider("option","max",domain[1]),null==graph.window.xMin&&(values[0]=domain[0]),null==graph.window.xMax&&(values[1]=domain[1]),$(element).slider("option","values",values)},onSlide:function(callback){this.slideCallbacks.push(callback)}}),Rickshaw.namespace("Rickshaw.Graph.RangeSlider.Preview"),Rickshaw.Graph.RangeSlider.Preview=Rickshaw.Class.create({initialize:function(args){if(!args.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!args.graph&&!args.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=args.element,this.element.style.position="relative",this.graphs=args.graph?[args.graph]:args.graphs,this.defaults={height:75,width:400,gripperColor:void 0,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2},this.heightRatio=args.heightRatio||this.defaults.heightRatio,this.defaults.gripperColor=d3.rgb(this.defaults.frameColor).darker().toString(),this.configureCallbacks=[],this.slideCallbacks=[],this.previews=[],args.width||(this.widthFromGraph=!0),args.height||(this.heightFromGraph=!0),(this.widthFromGraph||this.heightFromGraph)&&this.graphs[0].onConfigure(function(){this.configure(args),this.render()}.bind(this)),args.width=args.width||this.graphs[0].width||this.defaults.width,args.height=args.height||this.graphs[0].height*this.heightRatio||this.defaults.height,this.configure(args),this.render()},onSlide:function(callback){this.slideCallbacks.push(callback)},onConfigure:function(callback){this.configureCallbacks.push(callback)},configure:function(args){this.config=this.config||{},this.configureCallbacks.forEach(function(callback){callback(args)}),Rickshaw.keys(this.defaults).forEach(function(k){this.config[k]=k in args?args[k]:k in this.config?this.config[k]:this.defaults[k]},this),("width"in args||"height"in args)&&(this.widthFromGraph&&(this.config.width=this.graphs[0].width),this.heightFromGraph&&(this.config.height=this.graphs[0].height*this.heightRatio,this.previewHeight=this.config.height),this.previews.forEach(function(preview){var height=this.previewHeight/this.graphs.length-2*this.config.frameTopThickness,width=this.config.width-2*this.config.frameHandleThickness;if(preview.setSize({width:width,height:height}),this.svg){var svgHeight=height+2*this.config.frameHandleThickness,svgWidth=width+2*this.config.frameHandleThickness;this.svg.style("width",svgWidth+"px"),this.svg.style("height",svgHeight+"px")}},this))},render:function(){var self=this;this.svg=d3.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]),this.previewHeight=this.config.height-2*this.config.frameTopThickness,this.previewWidth=this.config.width-2*this.config.frameHandleThickness,this.currentFrame=[0,this.previewWidth];var buildGraph=function(parent,index){var graphArgs=Rickshaw.extend({},parent.config),height=self.previewHeight/self.graphs.length,renderer=parent.renderer.name;Rickshaw.extend(graphArgs,{element:this.appendChild(document.createElement("div")),height:height,width:self.previewWidth,series:parent.series,renderer:renderer});var graph=new Rickshaw.Graph(graphArgs);self.previews.push(graph),parent.onUpdate(function(){graph.render(),self.render()}),parent.onConfigure(function(args){delete args.height,args.width=args.width-2*self.config.frameHandleThickness,graph.configure(args),graph.render()}),graph.render()},graphContainer=d3.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs),translateCommand="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";graphContainer.enter().append("div").classed("rickshaw_range_slider_preview_container",!0).style("-webkit-transform",translateCommand).style("-moz-transform",translateCommand).style("-ms-transform",translateCommand).style("transform",translateCommand).each(buildGraph),graphContainer.exit().remove();var masterGraph=this.graphs[0],domainScale=d3.scale.linear().domain([0,this.previewWidth]).range(masterGraph.dataDomain()),currentWindow=[masterGraph.window.xMin,masterGraph.window.xMax];this.currentFrame[0]=void 0===currentWindow[0]?0:Math.round(domainScale.invert(currentWindow[0])),this.currentFrame[0]<0&&(this.currentFrame[0]=0),this.currentFrame[1]=void 0===currentWindow[1]?this.previewWidth:domainScale.invert(currentWindow[1]),this.currentFrame[1]-this.currentFrame[0]<self.config.minimumFrameWidth&&(this.currentFrame[1]=(this.currentFrame[0]||0)+self.config.minimumFrameWidth),this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",!0).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0),this._renderDimming(),this._renderFrame(),this._renderGrippers(),this._renderHandles(),this._renderMiddle(),this._registerMouseEvents()},_renderDimming:function(){var element=this.svg.selectAll("path.dimming").data([null]);element.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",!0);var path="";path+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness,path+=" h "+this.previewWidth,path+=" v "+this.previewHeight,path+=" h "+-this.previewWidth,path+=" z ",path+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness,path+=" H "+Math.min(this.currentFrame[1]+2*this.config.frameHandleThickness,this.previewWidth+this.config.frameHandleThickness),path+=" v "+this.previewHeight,path+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness),path+=" z",element.attr("d",path)},_renderFrame:function(){var element=this.svg.selectAll("path.frame").data([null]);element.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",!0);var path="";path+=" M "+this.currentFrame[0]+" 0",path+=" H "+(this.currentFrame[1]+2*this.config.frameHandleThickness),path+=" V "+this.config.height,path+=" H "+this.currentFrame[0],path+=" z",path+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness,path+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness),path+=" v "+this.previewHeight,path+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness),path+=" z",element.attr("d",path)},_renderGrippers:function(){var gripper=this.svg.selectAll("path.gripper").data([null]);gripper.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",!0);var path="";[.4,.6].forEach(function(spacing){path+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*spacing)+" "+Math.round(.3*this.config.height),path+=" V "+Math.round(.7*this.config.height),path+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+spacing))+" "+Math.round(.3*this.config.height),path+=" V "+Math.round(.7*this.config.height)}.bind(this)),gripper.attr("d",path)},_renderHandles:function(){var leftHandle=this.svg.selectAll("rect.left_handle").data([null]);leftHandle.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",!0),leftHandle.attr("x",this.currentFrame[0]).attr("height",this.config.height);var rightHandle=this.svg.selectAll("rect.right_handle").data([null]);rightHandle.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",!0),rightHandle.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var middleHandle=this.svg.selectAll("rect.middle_handle").data([null]);middleHandle.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",!0),middleHandle.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){function onMousemove(datum,index){drag.stop=self._getClientXFromEvent(d3.event,drag);var distanceTraveled=drag.stop-drag.start,frameAfterDrag=self.frameBeforeDrag.slice(0),minimumFrameWidth=self.config.minimumFrameWidth;drag.rigid&&(minimumFrameWidth=self.frameBeforeDrag[1]-self.frameBeforeDrag[0]),drag.left&&(frameAfterDrag[0]=Math.max(frameAfterDrag[0]+distanceTraveled,0)),drag.right&&(frameAfterDrag[1]=Math.min(frameAfterDrag[1]+distanceTraveled,self.previewWidth));var currentFrameWidth=frameAfterDrag[1]-frameAfterDrag[0];minimumFrameWidth>=currentFrameWidth&&(drag.left&&(frameAfterDrag[0]=frameAfterDrag[1]-minimumFrameWidth),drag.right&&(frameAfterDrag[1]=frameAfterDrag[0]+minimumFrameWidth),frameAfterDrag[0]<=0&&(frameAfterDrag[1]-=frameAfterDrag[0],frameAfterDrag[0]=0),frameAfterDrag[1]>=self.previewWidth&&(frameAfterDrag[0]-=frameAfterDrag[1]-self.previewWidth,frameAfterDrag[1]=self.previewWidth)),self.graphs.forEach(function(graph){var domainScale=d3.scale.linear().interpolate(d3.interpolateNumber).domain([0,self.previewWidth]).range(graph.dataDomain()),windowAfterDrag=[domainScale(frameAfterDrag[0]),domainScale(frameAfterDrag[1])];self.slideCallbacks.forEach(function(callback){callback(graph,windowAfterDrag[0],windowAfterDrag[1])}),0===frameAfterDrag[0]&&(windowAfterDrag[0]=void 0),frameAfterDrag[1]===self.previewWidth&&(windowAfterDrag[1]=void 0),graph.window.xMin=windowAfterDrag[0],graph.window.xMax=windowAfterDrag[1],graph.update()})}function onMousedown(){drag.target=d3.event.target,drag.start=self._getClientXFromEvent(d3.event,drag),self.frameBeforeDrag=self.currentFrame.slice(),d3.event.preventDefault?d3.event.preventDefault():d3.event.returnValue=!1,d3.select(document).on("mousemove.rickshaw_range_slider_preview",onMousemove),d3.select(document).on("mouseup.rickshaw_range_slider_preview",onMouseup),d3.select(document).on("touchmove.rickshaw_range_slider_preview",onMousemove),d3.select(document).on("touchend.rickshaw_range_slider_preview",onMouseup),d3.select(document).on("touchcancel.rickshaw_range_slider_preview",onMouseup)}function onMousedownLeftHandle(datum,index){drag.left=!0,onMousedown()}function onMousedownRightHandle(datum,index){drag.right=!0,onMousedown()}function onMousedownMiddleHandle(datum,index){drag.left=!0,drag.right=!0,drag.rigid=!0,onMousedown()}function onMouseup(datum,index){d3.select(document).on("mousemove.rickshaw_range_slider_preview",null),d3.select(document).on("mouseup.rickshaw_range_slider_preview",null),d3.select(document).on("touchmove.rickshaw_range_slider_preview",null),d3.select(document).on("touchend.rickshaw_range_slider_preview",null),d3.select(document).on("touchcancel.rickshaw_range_slider_preview",null),delete self.frameBeforeDrag,drag.left=!1,drag.right=!1,drag.rigid=!1}var element=d3.select(this.element),drag={target:null,start:null,stop:null,left:!1,right:!1,rigid:!1},self=this;element.select("rect.left_handle").on("mousedown",onMousedownLeftHandle),element.select("rect.right_handle").on("mousedown",onMousedownRightHandle),element.select("rect.middle_handle").on("mousedown",onMousedownMiddleHandle),element.select("rect.left_handle").on("touchstart",onMousedownLeftHandle),element.select("rect.right_handle").on("touchstart",onMousedownRightHandle),element.select("rect.middle_handle").on("touchstart",onMousedownMiddleHandle)},_getClientXFromEvent:function(event,drag){switch(event.type){case"touchstart":case"touchmove":for(var touchList=event.changedTouches,touch=null,touchIndex=0;touchIndex<touchList.length;touchIndex++)if(touchList[touchIndex].target===drag.target){touch=touchList[touchIndex];break}return null!==touch?touch.clientX:void 0;default:return event.clientX}}}),Rickshaw.namespace("Rickshaw.Graph.Renderer"),Rickshaw.Graph.Renderer=Rickshaw.Class.create({initialize:function(args){this.graph=args.graph,this.tension=args.tension||this.tension,this.configure(args)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(data){var stackedData=data||this.graph.stackedData||this.graph.stackData(),xMin=+(1/0),xMax=-(1/0),yMin=+(1/0),yMax=-(1/0);return stackedData.forEach(function(series){series.forEach(function(d){if(null!=d.y){var y=d.y+d.y0;yMin>y&&(yMin=y),y>yMax&&(yMax=y)}}),series.length&&(series[0].x<xMin&&(xMin=series[0].x),series[series.length-1].x>xMax&&(xMax=series[series.length-1].x))}),xMin-=(xMax-xMin)*this.padding.left,xMax+=(xMax-xMin)*this.padding.right,yMin="auto"===this.graph.min?yMin:this.graph.min||0,yMax=void 0===this.graph.max?yMax:this.graph.max,("auto"===this.graph.min||0>yMin)&&(yMin-=(yMax-yMin)*this.padding.bottom),void 0===this.graph.max&&(yMax+=(yMax-yMin)*this.padding.top),{x:[xMin,xMax],y:[yMin,yMax]}},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis;vis.selectAll("*").remove();var data=series.filter(function(s){return!s.disabled}).map(function(s){return s.stack}),pathNodes=vis.selectAll("path.path").data(data).enter().append("svg:path").classed("path",!0).attr("d",this.seriesPathFactory());if(this.stroke)var strokeNodes=vis.selectAll("path.stroke").data(data).enter().append("svg:path").classed("stroke",!0).attr("d",this.seriesStrokeFactory());var i=0;series.forEach(function(series){series.disabled||(series.path=pathNodes[0][i],this.stroke&&(series.stroke=strokeNodes[0][i]),this._styleSeries(series),i++)},this)},_styleSeries:function(series){var fill=this.fill?series.color:"none",stroke=this.stroke?series.color:"none";series.path.setAttribute("fill",fill),series.path.setAttribute("stroke",stroke),series.path.setAttribute("stroke-width",this.strokeWidth),series.className&&d3.select(series.path).classed(series.className,!0),series.className&&this.stroke&&d3.select(series.stroke).classed(series.className,!0)},configure:function(args){args=args||{},Rickshaw.keys(this.defaults()).forEach(function(key){return args.hasOwnProperty(key)?void("object"==typeof this.defaults()[key]?Rickshaw.keys(this.defaults()[key]).forEach(function(k){this[key][k]=void 0!==args[key][k]?args[key][k]:void 0!==this[key][k]?this[key][k]:this.defaults()[key][k]},this):this[key]=void 0!==args[key]?args[key]:void 0!==this[key]?this[key]:void 0!==this.graph[key]?this.graph[key]:this.defaults()[key]):void(this[key]=this[key]||this.graph[key]||this.defaults()[key])},this)},setStrokeWidth:function(strokeWidth){void 0!==strokeWidth&&(this.strokeWidth=strokeWidth)},setTension:function(tension){void 0!==tension&&(this.tension=tension)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Line"),Rickshaw.Graph.Renderer.Line=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"line",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var graph=this.graph,factory=d3.svg.line().x(function(d){return graph.x(d.x)}).y(function(d){return graph.y(d.y)}).interpolate(this.graph.interpolation).tension(this.tension);return factory.defined&&factory.defined(function(d){return null!==d.y}),factory}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Stack"),Rickshaw.Graph.Renderer.Stack=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"stack",defaults:function($super){return Rickshaw.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var graph=this.graph,factory=d3.svg.area().x(function(d){return graph.x(d.x)}).y0(function(d){return graph.y(d.y0)}).y1(function(d){return graph.y(d.y+d.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return factory.defined&&factory.defined(function(d){return null!==d.y}),factory}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Bar"),Rickshaw.Graph.Renderer.Bar=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"bar",defaults:function($super){var defaults=Rickshaw.extend($super(),{gapSize:.05,unstack:!1});return delete defaults.tension,defaults},initialize:function($super,args){args=args||{},this.gapSize=args.gapSize||this.gapSize,$super(args)},domain:function($super){var domain=$super(),frequentInterval=this._frequentInterval(this.graph.stackedData.slice(-1).shift());return domain.x[1]+=Number(frequentInterval.magnitude),domain},barWidth:function(series){var frequentInterval=this._frequentInterval(series.stack),barWidth=this.graph.x.magnitude(frequentInterval.magnitude)*(1-this.gapSize);return barWidth},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis;vis.selectAll("*").remove();var barWidth=this.barWidth(series.active()[0]),barXOffset=0,activeSeriesCount=series.filter(function(s){return!s.disabled}).length,seriesBarWidth=this.unstack?barWidth/activeSeriesCount:barWidth,transform=function(d){var matrix=[1,0,0,d.y<0?-1:1,0,d.y<0?2*graph.y.magnitude(Math.abs(d.y)):0];return"matrix("+matrix.join(",")+")"};series.forEach(function(series){if(!series.disabled){var nodes=(this.barWidth(series),vis.selectAll("path").data(series.stack.filter(function(d){return null!==d.y})).enter().append("svg:rect").attr("x",function(d){return graph.x(d.x)+barXOffset}).attr("y",function(d){return graph.y(d.y0+Math.abs(d.y))*(d.y<0?-1:1)}).attr("width",seriesBarWidth).attr("height",function(d){return graph.y.magnitude(Math.abs(d.y))}).attr("transform",transform));Array.prototype.forEach.call(nodes[0],function(n){n.setAttribute("fill",series.color)}),this.unstack&&(barXOffset+=seriesBarWidth)}},this)},_frequentInterval:function(data){for(var intervalCounts={},i=0;i<data.length-1;i++){var interval=data[i+1].x-data[i].x;intervalCounts[interval]=intervalCounts[interval]||0,intervalCounts[interval]++}var frequentInterval={count:0,magnitude:1};return Rickshaw.keys(intervalCounts).forEach(function(i){frequentInterval.count<intervalCounts[i]&&(frequentInterval={count:intervalCounts[i],magnitude:i})}),frequentInterval}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Area"),Rickshaw.Graph.Renderer.Area=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"area",defaults:function($super){return Rickshaw.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var graph=this.graph,factory=d3.svg.area().x(function(d){return graph.x(d.x)}).y0(function(d){return graph.y(d.y0)}).y1(function(d){return graph.y(d.y+d.y0)}).interpolate(graph.interpolation).tension(this.tension);return factory.defined&&factory.defined(function(d){return null!==d.y}),factory},seriesStrokeFactory:function(){var graph=this.graph,factory=d3.svg.line().x(function(d){return graph.x(d.x)}).y(function(d){return graph.y(d.y+d.y0)}).interpolate(graph.interpolation).tension(this.tension);return factory.defined&&factory.defined(function(d){return null!==d.y}),factory},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis;vis.selectAll("*").remove();var method=this.unstack?"append":"insert",data=series.filter(function(s){return!s.disabled}).map(function(s){return s.stack}),nodes=vis.selectAll("path").data(data).enter()[method]("svg:g","g");nodes.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&nodes.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var i=0;series.forEach(function(series){series.disabled||(series.path=nodes[0][i++],this._styleSeries(series))},this)},_styleSeries:function(series){series.path&&(d3.select(series.path).select(".area").attr("fill",series.color),
this.stroke&&d3.select(series.path).select(".line").attr("fill","none").attr("stroke",series.stroke||d3.interpolateRgb(series.color,"black")(.125)).attr("stroke-width",this.strokeWidth),series.className&&series.path.setAttribute("class",series.className))}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),Rickshaw.Graph.Renderer.ScatterPlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"scatterplot",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,args){$super(args)},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis,dotSize=this.dotSize;vis.selectAll("*").remove(),series.forEach(function(series){if(!series.disabled){var nodes=vis.selectAll("path").data(series.stack.filter(function(d){return null!==d.y})).enter().append("svg:circle").attr("cx",function(d){return graph.x(d.x)}).attr("cy",function(d){return graph.y(d.y)}).attr("r",function(d){return"r"in d?d.r:dotSize});series.className&&nodes.classed(series.className,!0),Array.prototype.forEach.call(nodes[0],function(n){n.setAttribute("fill",series.color)})}},this)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Multi"),Rickshaw.Graph.Renderer.Multi=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"multi",initialize:function($super,args){$super(args)},defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!1,stroke:!0})},configure:function($super,args){args=args||{},this.config=args,$super(args)},domain:function($super){this.graph.stackData();var domains=[],groups=this._groups();this._stack(groups),groups.forEach(function(group){var data=group.series.filter(function(s){return!s.disabled}).map(function(s){return s.stack});if(data.length){var domain=null;domain=group.renderer&&group.renderer.domain?group.renderer.domain(data):$super(data),domains.push(domain)}});var xMin=d3.min(domains.map(function(d){return d.x[0]})),xMax=d3.max(domains.map(function(d){return d.x[1]})),yMin=d3.min(domains.map(function(d){return d.y[0]})),yMax=d3.max(domains.map(function(d){return d.y[1]}));return{x:[xMin,xMax],y:[yMin,yMax]}},_groups:function(){var graph=this.graph,renderGroups={};graph.series.forEach(function(series){if(!series.disabled){if(!renderGroups[series.renderer]){var ns="http://www.w3.org/2000/svg",vis=document.createElementNS(ns,"g");graph.vis[0][0].appendChild(vis);var renderer=graph._renderers[series.renderer],config={},defaults=[this.defaults(),renderer.defaults(),this.config,this.graph];defaults.forEach(function(d){Rickshaw.extend(config,d)}),renderer.configure(config),renderGroups[series.renderer]={renderer:renderer,series:[],vis:d3.select(vis)}}renderGroups[series.renderer].series.push(series)}},this);var groups=[];return Object.keys(renderGroups).forEach(function(key){var group=renderGroups[key];groups.push(group)}),groups},_stack:function(groups){return groups.forEach(function(group){var series=group.series.filter(function(series){return!series.disabled}),data=series.map(function(series){return series.stack});if(!group.renderer.unstack){var layout=d3.layout.stack(),stackedData=Rickshaw.clone(layout(data));series.forEach(function(series,index){series._stack=Rickshaw.clone(stackedData[index])})}},this),groups},render:function(){this.graph.series.forEach(function(series){if(!series.renderer)throw new Error("Each series needs a renderer for graph 'multi' renderer")}),this.graph.vis.selectAll("*").remove();var groups=this._groups();groups=this._stack(groups),groups.forEach(function(group){var series=group.series.filter(function(series){return!series.disabled});series.active=function(){return series},group.renderer.render({series:series,vis:group.vis}),series.forEach(function(s){s.stack=s._stack||s.stack||s.data})})}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.LinePlot"),Rickshaw.Graph.Renderer.LinePlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"lineplot",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!1,stroke:!0,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var graph=this.graph,factory=d3.svg.line().x(function(d){return graph.x(d.x)}).y(function(d){return graph.y(d.y)}).interpolate(this.graph.interpolation).tension(this.tension);return factory.defined&&factory.defined(function(d){return null!==d.y}),factory},render:function(args){args=args||{};var graph=this.graph,series=args.series||graph.series,vis=args.vis||graph.vis,dotSize=this.dotSize;vis.selectAll("*").remove();var data=series.filter(function(s){return!s.disabled}).map(function(s){return s.stack}),nodes=vis.selectAll("path").data(data).enter().append("svg:path").attr("d",this.seriesPathFactory()),i=0;series.forEach(function(series){series.disabled||(series.path=nodes[0][i++],this._styleSeries(series))},this),series.forEach(function(series){if(!series.disabled){var nodes=vis.selectAll("x").data(series.stack.filter(function(d){return null!==d.y})).enter().append("svg:circle").attr("cx",function(d){return graph.x(d.x)}).attr("cy",function(d){return graph.y(d.y)}).attr("r",function(d){return"r"in d?d.r:dotSize});Array.prototype.forEach.call(nodes[0],function(n){n&&(n.setAttribute("data-color",series.color),n.setAttribute("fill","white"),n.setAttribute("stroke",series.color),n.setAttribute("stroke-width",this.strokeWidth))}.bind(this))}},this)}}),Rickshaw.namespace("Rickshaw.Graph.Smoother"),Rickshaw.Graph.Smoother=Rickshaw.Class.create({initialize:function(args){this.graph=args.graph,this.element=args.element,this.aggregationScale=1,this.build(),this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var self=this,$=jQuery;this.element&&$(function(){$(self.element).slider({min:1,max:100,slide:function(event,ui){self.setScale(ui.value),self.graph.update()}})})},setScale:function(scale){if(1>scale)throw"scale out of range: "+scale;this.aggregationScale=scale,this.graph.update()},transformer:function(data){if(1==this.aggregationScale)return data;var aggregatedData=[];return data.forEach(function(seriesData){for(var aggregatedSeriesData=[];seriesData.length;){var avgX=0,avgY=0,slice=seriesData.splice(0,this.aggregationScale);slice.forEach(function(d){avgX+=d.x/slice.length,avgY+=d.y/slice.length}),aggregatedSeriesData.push({x:avgX,y:avgY})}aggregatedData.push(aggregatedSeriesData)}.bind(this)),aggregatedData}}),Rickshaw.namespace("Rickshaw.Graph.Socketio"),Rickshaw.Graph.Socketio=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){var socket=io.connect(this.dataURL),self=this;socket.on("rickshaw",function(data){self.success(data)})}}),Rickshaw.namespace("Rickshaw.Series"),Rickshaw.Series=Rickshaw.Class.create(Array,{initialize:function(data,palette,options){options=options||{},this.palette=new Rickshaw.Color.Palette(palette),this.timeBase="undefined"==typeof options.timeBase?Math.floor((new Date).getTime()/1e3):options.timeBase;var timeInterval="undefined"==typeof options.timeInterval?1e3:options.timeInterval;this.setTimeInterval(timeInterval),data&&"object"==typeof data&&Array.isArray(data)&&data.forEach(function(item){this.addItem(item)},this)},addItem:function(item){if("undefined"==typeof item.name)throw"addItem() needs a name";item.color=item.color||this.palette.color(item.name),item.data=item.data||[],0===item.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach(function(plot){item.data.push({x:plot.x,y:0})}):0===item.data.length&&item.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(item),this.legend&&this.legend.addLine(this.itemByName(item.name))},addData:function(data,x){var index=this.getIndex();Rickshaw.keys(data).forEach(function(name){this.itemByName(name)||this.addItem({name:name})},this),this.forEach(function(item){item.data.push({x:x||(index*this.timeInterval||1)+this.timeBase,y:data[item.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(name){for(var i=0;i<this.length;i++)if(this[i].name==name)return this[i]},setTimeInterval:function(iv){this.timeInterval=iv/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var data={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(item){var newItem={color:item.color,name:item.name,data:[]};item.data.forEach(function(plot){newItem.data.push({x:plot.x,y:plot.y})}),data.items.push(newItem)}),data},load:function(data){data.timeInterval&&(this.timeInterval=data.timeInterval),data.timeBase&&(this.timeBase=data.timeBase),data.items&&data.items.forEach(function(item){this.push(item),this.legend&&this.legend.addLine(this.itemByName(item.name))},this)}}),Rickshaw.Series.zeroFill=function(series){Rickshaw.Series.fill(series,0)},Rickshaw.Series.fill=function(series,fill){for(var x,i=0,data=series.map(function(s){return s.data});i<Math.max.apply(null,data.map(function(d){return d.length}));)x=Math.min.apply(null,data.filter(function(d){return d[i]}).map(function(d){return d[i].x})),data.forEach(function(d){d[i]&&d[i].x==x||d.splice(i,0,{x:x,y:fill})}),i++},Rickshaw.namespace("Rickshaw.Series.FixedDuration"),Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(data,palette,options){if(options=options||{},"undefined"==typeof options.timeInterval)throw new Error("FixedDuration series requires timeInterval");if("undefined"==typeof options.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new Rickshaw.Color.Palette(palette),this.timeBase="undefined"==typeof options.timeBase?Math.floor((new Date).getTime()/1e3):options.timeBase,this.setTimeInterval(options.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=options.maxDataPoints,data&&"object"==typeof data&&Array.isArray(data)&&(data.forEach(function(item){this.addItem(item)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,"undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var i=this.maxDataPoints-this.currentSize-1;i>1;i--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(item){item.data.unshift({x:((i-1)*this.timeInterval||1)+this.timeBase,y:0,i:i})},this)},addData:function($super,data,x){if($super(data,x),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(item){item.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}}),Rickshaw}),define("models/serverBandwidth",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var ServerBandwidthModel=Backbone.Model.extend({defaults:{received:null,sent:null},url:function(){return"/server/"+this.get("id")+"/bandwidth/"+this.getPeriod()},getPeriod:function(){return this.period},setPeriod:function(period){this.period=period},getGraphData:function(type){var i,points=[],data=this.get(type);if(!data)return null;var max=0;for(i=0;i<data.length;i++)max=Math.max(data[i][1],max),points.push({x:data[i][0],y:data[i][1]});return{max:max,points:points}}});return ServerBandwidthModel}),define("text!templates/serverBandwidth.html",[],function(){return'<div class="server-graph-recv"></div>\n<div class="server-graph-sent"></div>\n'}),define("views/serverBandwidth",["jquery","underscore","backbone","rickshaw","models/serverBandwidth","views/alert","text!templates/serverBandwidth.html"],function($,_,Backbone,Rickshaw,ServerBandwidthModel,AlertView,serverBandwidthTemplate){"use strict";var BandwidthHover=Rickshaw.Class.create(Rickshaw.Graph.HoverDetail,{initialize:function(args){_.extend(args,{xFormatter:function(x){return window.formatTime(x)+"#####"},yFormatter:function(y){return window.formatSize(y,2)},onRender:function(args){$(this.graph.element).find(".detail .x_label").html($("<span>").text(args.formattedXValue.replace("#####","")+" ("+args.detail[0].series.period+")").html()+"<br>"+$("<span>").text(args.detail[0].name+": "+args.detail[0].formattedYValue).html())}}),Rickshaw.Graph.HoverDetail.prototype.initialize.call(this,args)}}),ServerBandwidthView=Backbone.View.extend({template:_.template(serverBandwidthTemplate),initialize:function(options){this.model=new ServerBandwidthModel({id:options.server}),this.model.setPeriod("1m"),this.state=!1,this.interval=setInterval(this.update.bind(this),15e3),this.bindId=window.uuid(),this.width=this.$el.width(),$(window).bind("resize."+this.bindId,this.onResize.bind(this))},deinitialize:function(){clearInterval(this.interval),$(window).unbind("resize."+this.bindId)},onResize:function(){var width=this.$el.width();width!==this.width&&(this.width=width,this.$el.empty(),this.render())},render:function(){return this.$el.html(this.template()),this.updateGraph(),this},update:function(){this.getState()&&this.model.fetch({error:function(){var alertView=new AlertView({type:"danger",message:"Failed to load server bandwidth, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this),success:function(){this.$el.empty(),this.render()}.bind(this)})},setState:function(state){this.getState()!==state&&(this.state=state,state?(this.$el.parent().show(),this.update()):this.$el.parent().hide())},getState:function(){return this.state},setPeriod:function(period){this.getPeriod()!==period&&(this.model.setPeriod(period),this.update())},getPeriod:function(){return this.model.getPeriod()},updateGraph:function(){var dataRecv=this.model.getGraphData("received"),dataSent=this.model.getGraphData("sent");if(dataRecv&&dataSent){"1m"===this.getPeriod()&&(dataRecv.points.pop(),dataSent.points.pop());var graphRecv=new Rickshaw.Graph({element:this.$(".server-graph-recv")[0],width:this.$(".server-graph-recv").width(),height:this.$(".server-graph-recv").height(),renderer:"area",stroke:!0,max:1.05*dataRecv.max,series:[{period:this.getPeriod(),name:"Inbound",color:"rgba(44, 127, 184, 0.05)",stroke:"#2c7fb8",data:dataRecv.points}]});graphRecv.render();var xAxisRecv=new Rickshaw.Graph.Axis.Time({graph:graphRecv});xAxisRecv.render(),new BandwidthHover({graph:graphRecv});var graphSent=new Rickshaw.Graph({element:this.$(".server-graph-sent")[0],width:this.$(".server-graph-sent").width(),height:this.$(".server-graph-sent").height(),renderer:"area",stroke:!0,max:1.05*dataSent.max,series:[{period:this.getPeriod(),name:"Outbound",color:"rgba(44, 127, 184, 0.05)",stroke:"#2c7fb8",data:dataSent.points}]});graphSent.render();var xAxisSent=new Rickshaw.Graph.Axis.Time({graph:graphSent});xAxisSent.render(),new BandwidthHover({graph:graphSent})}}});return ServerBandwidthView}),!function(a){"undefined"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){"use strict";function n(b){var c=a(document.createTextNode(""));b.before(c),c.before(b),c.remove()}function o(a){function b(a){return m[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function p(a,b){for(var c=0,d=b.length;d>c;c+=1)if(r(a,b[c]))return c;return-1}function q(){var b=a(l);b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function r(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+""==c+"":c.constructor===String?c+""==a+"":!1}function s(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function t(a){return a.outerWidth(!1)-a.width()}function u(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function v(c){c.on("mousemove",function(c){var d=i;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function w(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function x(a,b){var c=w(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){p(a.target,b.get())>=0&&c(a)})}function y(a){a[0]!==document.activeElement&&window.setTimeout(function(){var d,b=a[0],c=a.val().length;a.focus();var e=b.offsetWidth>0||b.offsetHeight>0;e&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(d=b.createTextRange(),d.collapse(!1),d.select()))},0)}function z(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function A(a){a.preventDefault(),a.stopPropagation()}function B(a){a.preventDefault(),a.stopImmediatePropagation()}function C(b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);h=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),h.attr("class","select2-sizer"),a("body").append(h)}return h.text(b.val()),h.width()}function D(b,c,d){var e,g,f=[];e=a.trim(b.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&f.push(this)})),e=a.trim(c.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(g=d(this),g&&f.push(g))})),b.attr("class",f.join(" "))}function E(a,b,c,d){var e=o(a.toUpperCase()).indexOf(o(b.toUpperCase())),f=b.length;return 0>e?void c.push(d(a)):(c.push(d(a.substring(0,e))),c.push("<span class='select2-match'>"),c.push(d(a.substring(e,e+f))),c.push("</span>"),void c.push(d(a.substring(e+f,a.length))))}function F(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function G(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page,i);i.callback(b)},error:function(a,b,c){var d={hasError:!0,jqXHR:a,textStatus:b,errorThrown:c};i.callback(d)}}),e=j.call(h,l)},f)}}function H(b){var d,e,c=b,f=function(a){return""+a.text};a.isArray(c)&&(e=c,c={results:e}),a.isFunction(c)===!1&&(e=c,c=function(){return e});var g=c();return g.text&&(f=g.text,a.isFunction(f)||(d=g.text,f=function(a){return a[d]})),function(b){var g,d=b.term,e={results:[]};return""===d?void b.callback(c()):(g=function(c,e){var h,i;if(c=c[0],c.children){h={};for(i in c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),(h.children.length||b.matcher(d,f(h),c))&&e.push(h)}else b.matcher(d,f(c),c)&&e.push(c)},a(c().results).each2(function(a,b){g(b,e.results)}),void b.callback(e))}}function I(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function J(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function K(b,c){if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return b.apply(c,d)}return b}function L(b){var c=0;return a.each(b,function(a,b){b.children?c+=L(b.children):c++}),c}function M(a,c,d,e){var h,i,j,k,l,f=a,g=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(i=-1,j=0,k=e.tokenSeparators.length;k>j&&(l=e.tokenSeparators[j],i=a.indexOf(l),!(i>=0));j++);if(0>i)break;if(h=a.substring(0,i),a=a.substring(i+l.length),h.length>0&&(h=e.createSearchChoice.call(this,h,c),h!==b&&null!==h&&e.id(h)!==b&&null!==e.id(h))){for(g=!1,j=0,k=c.length;k>j;j++)if(r(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}return f!==a?a:void 0}function N(){var b=this;a.each(arguments,function(a,c){b[c].remove(),b[c]=null})}function O(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var c,d,e,f,g,h,j,k,i={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},l="<div class='select2-measure-scrollbar'></div>",m={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};j=a(document),g=function(){var a=1;return function(){return a++}}(),d=O(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+g()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a("body"),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(K(c.containerCss,this.opts.element)),this.container.addClass(K(c.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",A),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(c.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",A),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",A),v(this.results),this.dropdown.on("mousemove-filtered",f,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",f,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on("touchmove",f,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",f,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),x(80,this.results),this.dropdown.on("scroll-debounced",f,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),A(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),A(a))}),u(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",f,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),k=k||q(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),
this.autofocus&&this.focus(),this.search.attr("placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2"),d=this;this.close(),a.length&&a[0].detachEvent&&a.each(function(){this.detachEvent("onpropertychange",d._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),N.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:r(a.attr("locked"),"locked")||r(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,h,i=this;if(d=c.element,"select"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var h,j=this.opts.id,k=this.liveRegion;(h=function(d,e,l){var m,n,o,p,q,r,s,t,u,v;d=c.sortResults(d,e,f);var w=[];for(m=0,n=d.length;n>m;m+=1)o=d[m],q=o.disabled===!0,p=!q&&j(o)!==b,r=o.children&&o.children.length>0,s=a("<li></li>"),s.addClass("select2-results-dept-"+l),s.addClass("select2-result"),s.addClass(p?"select2-result-selectable":"select2-result-unselectable"),q&&s.addClass("select2-disabled"),r&&s.addClass("select2-result-with-children"),s.addClass(i.opts.formatResultCssClass(o)),s.attr("role","presentation"),t=a(document.createElement("div")),t.addClass("select2-result-label"),t.attr("id","select2-result-label-"+g()),t.attr("role","option"),v=c.formatResult(o,t,f,i.opts.escapeMarkup),v!==b&&(t.html(v),s.append(t)),r&&(u=a("<ul></ul>"),u.addClass("select2-result-sub"),h(o.children,u,l+1),s.append(u)),s.data("select2-data",o),w.push(s[0]);e.append(w),k.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(a){var f,g,h,c={results:[],more:!1},e=a.term;h=function(b,c){var d;b.is("option")?a.matcher(e,b.text(),b)&&c.push(i.optionToData(b)):b.is("optgroup")&&(d=i.optionToData(b),b.children().each2(function(a,b){h(b,d.children)}),d.children.length>0&&c.push(d))},f=d.children(),this.getPlaceholder()!==b&&f.length>0&&(g=this.getPlaceholderOption(),g&&(f=f.not(g))),f.each2(function(a,b){h(b,c.results)}),a.callback(c)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?(h=c.element.data("ajax-url"),h&&h.length>0&&(c.ajax.url=h),c.query=G.call(c.element,c.ajax)):"data"in c?c.query=H(c.data):"tags"in c&&(c.query=I(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(s(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return r(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");if("top"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var d,c=this.opts.element,e=this;c.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var a=c.prop("disabled");a===b&&(a=!1),this.enable(!a);var d=c.prop("readonly");d===b&&(d=!1),this.readonly(d),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(K(this.opts.containerCssClass,this.opts.element)),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(this.opts.dropdownCssClass,this.opts.element))}),c.length&&c[0].attachEvent&&c.each(function(){this.attachEvent("onpropertychange",e._sync)}),d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,d!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new d(function(b){a.each(b,e._sync)}),this.propertyObserver.observe(c.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b,choice:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,u,v,w,x,b=this.dropdown,c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),g=a(window),h=g.width(),i=g.height(),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,o=l>=m+f,p=c.top-f>=g.scrollTop(),q=b.outerWidth(!1),r=j>=n+q,s=b.hasClass("select2-drop-above");s?(u=!0,!p&&o&&(v=!0,u=!1)):(u=!1,!o&&p&&(v=!0,u=!0)),v&&(b.hide(),c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,q=b.outerWidth(!1),r=j>=n+q,b.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(x=a(".select2-results",b)[0],b.addClass("select2-drop-auto-width"),b.css("width",""),q=b.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:k.width),q>e?e=q:q=e,f=b.outerHeight(!1),r=j>=n+q):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),m-=t.top,n-=t.left),r||(n=c.left+this.container.outerWidth(!1)-q),w={left:n,width:e},u?(w.top=c.top-f,w.bottom="auto",this.container.addClass("select2-drop-above"),b.addClass("select2-drop-above")):(w.top=m,w.bottom="auto",this.container.removeClass("select2-drop-above"),b.removeClass("select2-drop-above")),w=a.extend(w,K(this.opts.dropdownCss,this.opts.element)),b.css(w)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),j.on("mousemove.select2Event",function(a){i.x=a.pageX,i.y=a.pageY}),!0):!1},opening:function(){var f,b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),f=a("#select2-drop-mask"),0==f.length&&(f=a(document.createElement("div")),f.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body),f.on("mousedown touchstart click",function(b){n(f);var d,c=a("#select2-drop");c.length>0&&(d=c.data("select2"),d.opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close(),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),f.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){a(this).on(d+" "+c+" "+e,function(){g.opened()&&g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),j.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return K(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var c,d,e,f,g,h,i,j,b=this.results;if(d=this.highlight(),!(0>d)){if(0==d)return void b.scrollTop(0);c=this.findHighlightableChoices().find(".select2-result-label"),e=a(c[d]),j=(e.offset()||{}).top||0,f=j+e.outerHeight(!0),d===c.length-1&&(i=b.find("li.select2-more-results"),i.length>0&&(f=i.offset().top+i.outerHeight(!0))),g=b.offset().top+b.outerHeight(!0),f>g&&b.scrollTop(b.scrollTop()+(f-g)),h=j-b.offset().top,0>h&&"none"!=e.css("display")&&b.scrollTop(b.scrollTop()+h)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var d,e,c=this.findHighlightableChoices();return 0===arguments.length?p(c.filter(".select2-highlighted")[0],c.get()):(b>=c.length&&(b=c.length-1),0>b&&(b=0),this.removeHighlight(),d=a(c[b]),d.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",d.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(d.text()),e=d.data("select2-data"),void(e&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var c,a=this.results,b=a.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:f,page:d,context:g}),e.postprocessResults(c,!1,!1),c.more===!0?(b.detach().appendTo(a).text(K(e.opts.formatLoadMore,e.opts.element,d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(c){function m(){d.removeClass("select2-active"),h.positionDropdown(),e.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?h.liveRegion.text(e.text()):h.liveRegion.text(h.opts.formatMatches(e.find(".select2-result-selectable").length))}function n(a){e.html(a),m()}var g,i,l,d=this.search,e=this.results,f=this.opts,h=this,j=d.val(),k=a.data(this.container,"select2-last-term");if((c===!0||!k||!r(j,k))&&(a.data(this.container,"select2-last-term",j),c===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var o=this.getMaximumSelectionSize();if(o>=1&&(g=this.data(),a.isArray(g)&&g.length>=o&&J(f.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+K(f.formatSelectionTooBig,f.element,o)+"</li>");if(d.val().length<f.minimumInputLength)return n(J(f.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+K(f.formatInputTooShort,f.element,d.val(),f.minimumInputLength)+"</li>":""),void(c&&this.showSearch&&this.showSearch(!0));if(f.maximumInputLength&&d.val().length>f.maximumInputLength)return void n(J(f.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+K(f.formatInputTooLong,f.element,d.val(),f.maximumInputLength)+"</li>":"");f.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+K(f.formatSearching,f.element)+"</li>"),d.addClass("select2-active"),this.removeHighlight(),i=this.tokenize(),i!=b&&null!=i&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(g.hasError!==b&&J(f.formatAjaxError,"formatAjaxError"))return void n("<li class='select2-ajax-error'>"+K(f.formatAjaxError,f.element,g.jqXHR,g.textStatus,g.errorThrown)+"</li>");if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&""!==d.val()&&(i=this.opts.createSearchChoice.call(h,d.val(),g.results),i!==b&&null!==i&&h.id(i)!==b&&null!==h.id(i)&&0===a(g.results).filter(function(){return r(h.id(this),h.id(i))}).length&&this.opts.createSearchChoicePosition(g.results,i)),0===g.results.length&&J(f.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+K(f.formatNoMatches,f.element,d.val())+"</li>");e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),g.more===!0&&J(f.formatLoadMore,"formatLoadMore")&&(e.append("<li class='select2-more-results'>"+f.escapeMarkup(K(f.formatLoadMore,f.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),m(),this.opts.element.trigger({type:"select2-loaded",items:g})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){y(this.search)},selectHighlighted:function(a){if(this._touchMoved)return void this.clearTouchMoved();var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text())&&""===c.val())return c}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;g>f;f+=1)if(h=d[f].replace(/\s/g,""),e=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return"resolve"===this.opts.width?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css("width",d)}}),e=O(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"selection","focusser")},initContainer:function(){var b,h,d=this.container,e=this.dropdown,f=g();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=b=d.find(".select2-choice"),this.focusser=d.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+f),this.focusser.attr("aria-labelledby","select2-chosen-"+f),this.results.attr("id","select2-results-"+f),this.search.attr("aria-owns","select2-results-"+f),this.focusser.attr("id","s2id_autogen"+f),h=a("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(h.text()).attr("for",this.focusser.attr("id"));var i=this.opts.element.attr("title");this.opts.element.attr("title",i||h.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&229!=a.keyCode){if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)return void A(a);switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(a),void A(a)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.ESC){if(this.opts.openOnEnter===!1&&a.which===c.ENTER)return void A(a);if(a.which==c.DOWN||a.which==c.UP||a.which==c.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),void A(a)}return a.which==c.DELETE||a.which==c.BACKSPACE?(this.opts.allowClear&&this.clear(),void A(a)):void 0}})),u(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),B(a),this.close(),this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(c){n(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),A(c)})),e.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){A(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.setPlaceholder(),c.nextSearchTerm=c.opts.nextSearchTerm(a,c.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()===b?!1:(a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val()},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var g=r(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return r(e.id(b.data("select2-data")),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&(b===!0&&d>=0?this.highlight(d):this.highlight(0)),b===!0){var g=this.opts.minimumResultsForSearch;g>=0&&this.showSearch(L(a.results)>=g)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var d,e,c=this.selection.find(".select2-chosen");this.selection.data("select2-data",a),c.empty(),null!==a&&(d=this.opts.formatSelection(a,c,this.opts.escapeMarkup)),d!==b&&c.append(d),e=this.opts.formatSelectionCssClass(a,c),e!==b&&c.addClass(e),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data("select2-data"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),f=O(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=s(c.val(),b.separator),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return r(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var g=e[c],h=0;h<f.length;h++){var i=f[h];if(r(g,b.id(i))){a.push(i),f.splice(h,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"searchContainer","selection")},initContainer:function(){var d,b=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=d=this.container.find(b);var e=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){e.search[0].focus(),e.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+g()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var b=d.find(".select2-search-choice-focus"),e=b.prev(".select2-search-choice:not(.select2-locked)"),f=b.next(".select2-search-choice:not(.select2-locked)"),g=z(this.search);if(b.length&&(a.which==c.LEFT||a.which==c.RIGHT||a.which==c.BACKSPACE||a.which==c.DELETE||a.which==c.ENTER)){var h=b;return a.which==c.LEFT&&e.length?h=e:a.which==c.RIGHT?h=f.length?f:null:a.which===c.BACKSPACE?this.unselect(b.first())&&(this.search.width(10),h=e.length?e:f):a.which==c.DELETE?this.unselect(b.first())&&(this.search.width(10),h=f.length?f:null):a.which==c.ENTER&&(h=null),this.selectChoice(h),A(a),void(h&&h.length||this.open())}if((a.which===c.BACKSPACE&&1==this.keydowns||a.which==c.LEFT)&&0==g.offset&&!g.length)return this.selectChoice(d.find(".select2-search-choice:not(.select2-locked)").last()),void A(a);if(this.selectChoice(null),this.opened())switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(a),void A(a)}if(a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.BACKSPACE&&a.which!==c.ESC){if(a.which===c.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&A(a),a.which===c.ENTER&&A(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),
this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",b,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",b,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){p(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&""!==a.text&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var j,k,d=!c.locked,e=a("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),f=a("<li class='select2-search-choice select2-locked'><div></div></li>"),g=d?e:f,h=this.id(c),i=this.getVal();j=this.opts.formatSelection(c,g.find("div"),this.opts.escapeMarkup),j!=b&&g.find("div").replaceWith("<div>"+j+"</div>"),k=this.opts.formatSelectionCssClass(c,g.find("div")),k!=b&&g.addClass(k),d&&g.find(".select2-search-choice-close").on("mousedown",A).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),A(b),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),g.data("select2-data",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(b){var d,e,c=this.getVal();if(b=b.closest(".select2-search-choice"),0===b.length)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(d=b.data("select2-data")){var f=a.Event("select2-removing");if(f.val=this.id(d),f.choice=d,this.opts.element.trigger(f),f.isDefaultPrevented())return!1;for(;(e=p(this.id(d),c))>=0;)c.splice(e,1),this.setVal(c),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(d),choice:d}),this.triggerChange({removed:d}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(".select2-result"),f=this.results.find(".select2-result-with-children"),g=this;e.each2(function(a,b){var c=g.id(b.data("select2-data"));p(c,d)>=0&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),f.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")}),-1==this.highlight()&&c!==!1&&g.highlight(0),!this.opts.createSearchChoice&&!e.filter(".select2-result:not(.select2-selected)").length>0&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&J(g.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+K(g.opts.formatNoMatches,g.opts.element,g.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-t(this.search)},resizeSearch:function(){var a,b,c,d,e,f=t(this.search);a=C(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),s(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){p(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)r(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var e,f,d=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(f=this.data(),b||(b=[]),e=a.map(b,function(a){return d.opts.id(a)}),this.setVal(e),this.updateSelection(b),this.clearSearch(),void(c&&this.triggerChange(this.buildChangeDetails(f,this.data()))))}}),a.fn.select2=function(){var d,e,f,g,h,c=Array.prototype.slice.call(arguments,0),i=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],j=["opened","isFocused","container","dropdown"],k=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===c.length||"object"==typeof c[0])d=0===c.length?{}:a.extend({},c[0]),d.element=a(this),"select"===d.element.get(0).tagName.toLowerCase()?h=d.element.prop("multiple"):(h=d.multiple||!1,"tags"in d&&(d.multiple=h=!0)),e=h?new window.Select2["class"].multi:new window.Select2["class"].single,e.init(d);else{if("string"!=typeof c[0])throw"Invalid arguments to select2 plugin: "+c;if(p(c[0],i)<0)throw"Unknown method: "+c[0];if(g=b,e=a(this).data("select2"),e===b)return;if(f=c[0],"container"===f?g=e.container:"dropdown"===f?g=e.dropdown:(l[f]&&(f=l[f]),g=e[f].apply(e,c.slice(1))),p(c[0],j)>=0||p(c[0],k)>=0&&1==c.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return E(a.text,c.term,e,d),e.join("")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},matcher:function(a,b){return o(""+b).toUpperCase().indexOf(o(""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:F,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){var b="ontouchstart"in window||navigator.msMaxTouchPoints>0;return b&&a.opts.minimumResultsForSearch<0?!1:!0}},a.fn.select2.locales=[],a.fn.select2.locales.en={formatMatches:function(a){return 1===a?"One result is available, press enter to select it.":a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"}},a.extend(a.fn.select2.defaults,a.fn.select2.locales.en),a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:G,local:H,tags:I},util:{debounce:w,markMatch:E,escapeMarkup:F,stripDiacritics:o},"class":{"abstract":d,single:e,multi:f}}}}(jQuery),define("select",function(){}),define("text!templates/modalServerSettings.html",[],function(){return'<div class="layout-horizontal">\n  <div class="layout-flex left">\n    <div class="name form-group">\n      <label>Name</label>\n      <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of VPN server" value="<%- name %>" autofocus>\n    </div>\n    <div class="port-protocol form-group">\n      <label>Port</label>\n      <label>Protocol</label>\n      <br>\n      <input type="text" class="port form-control" placeholder="Enter port number" data-toggle="tooltip" title="Port number for VPN connections" value="<%- port %>" autocapitalize="off">\n      <select class="protocol form-control" data-toggle="tooltip" title="Protocol for VPN connections">\n        <option value="udp" <%= protocol === \'udp\' ? \'selected\' : \'\' %>>udp</option>\n        <option value="tcp" <%= protocol === \'tcp\' ? \'selected\' : \'\' %>>tcp</option>\n      </select>\n    </div>\n    <div class="form-group groups">\n      <label>Groups</label>\n      <div class="groups-label" data-toggle="tooltip" title="Enter list of groups to allow connections from. Names are case sensitive. If empty all groups will able to connect">\n        <input type="text" placeholder="Enter groups" value="<%- groups ? groups.join(\',\') : \'\' %>">\n      </div>\n    </div>\n    <div class="ipv6-toggle toggle-form form-group">\n      <label>Enable IPv6</label>\n      <div class="selector <%= ipv6 ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Enable IPv6 on server, requires IPv6 network interface">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n  </div>\n  <div class="right">\n    <div class="dns-servers form-group">\n      <label>DNS Server</label>\n      <input type="text" class="form-control" placeholder="Enter DNS server. Separate multiple DNS servers by a comma. Leave blank to use clients existing DNS servers" data-toggle="tooltip" title="Optional, DNS server for clients" value="<%- dns_servers.join(\', \') %>" autocapitalize="off">\n    </div>\n    <div class="network form-group">\n      <label>Virtual Network</label>\n      <span class="label label-default no-select" toggle="tooltip" title="Maximum number of users for this subnet"></span>\n      <input type="text" class="form-control" placeholder="Enter network address" data-toggle="tooltip" title="Network address for the private network that will be created for clients. This network cannot conflict with any existing local networks" value="<%- network %>" autocapitalize="off">\n    </div>\n    <div class="otp-auth-toggle toggle-form form-group">\n      <label>Enable Two-Step Authentication</label>\n      <div class="selector <%= otp_auth ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Enable two-step authentication using Google Authenticator. Verification code is entered as the user password when connecting">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n    <div class="ipv6-toggle toggle-form form-group">\n      <label>Enable IPv6</label>\n      <div class="selector <%= ipv6 ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Enable IPv6 on server, requires IPv6 network interface">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="layout-horizontal">\n  <div class="layout-flex left advanced">\n    <div class="dh-param-bits form-group">\n      <label>DH Param Bits</label>\n      <select class="form-control" data-toggle="tooltip" title="Size of DH parameters">\n        <option value="1024" <%= dh_param_bits === 1024 ? \'selected\' : \'\' %>>1024</option>\n        <option value="1536" <%= dh_param_bits === 1536 ? \'selected\' : \'\' %>>1536</option>\n        <option value="2048" <%= dh_param_bits === 2048 ? \'selected\' : \'\' %>>2048</option>\n        <option value="3072" <%= dh_param_bits === 3072 ? \'selected\' : \'\' %>>3072</option>\n        <option value="4096" <%= dh_param_bits === 4096 ? \'selected\' : \'\' %>>4096</option>\n      </select>\n    </div>\n    <div class="cipher form-group">\n      <label>Encryption Cipher</label>\n      <select class="form-control" data-toggle="tooltip" title="Encryption cipher used for VPN traffic. AES 128bit is recommended for best bandwidth. Using AES 256bit will impact bandwidth. AES ciphers will use GCM when available">\n        <option value="none" <%= cipher === \'none\' ? \'selected\' : \'\' %>>None</option>\n        <option value="bf128" <%= cipher === \'bf128\' ? \'selected\' : \'\' %>>Blowfish 128bit</option>\n        <option value="bf256" <%= cipher === \'bf256\' ? \'selected\' : \'\' %>>Blowfish 256bit</option>\n        <option value="aes128" <%= cipher === \'aes128\' ? \'selected\' : \'\' %>>AES 128bit</option>\n        <option value="aes192" <%= cipher === \'aes192\' ? \'selected\' : \'\' %>>AES 192bit</option>\n        <option value="aes256" <%= cipher === \'aes256\' ? \'selected\' : \'\' %>>AES 256bit</option>\n      </select>\n    </div>\n    <div class="ping-interval form-group">\n      <label>Ping Interval</label>\n      <input type="number" class="form-control" placeholder="Enter ping interval" data-toggle="tooltip" title="Optional, interval to ping client" value="<%- ping_interval || \'\' %>" min="0" autocapitalize="off">\n    </div>\n    <div class="link-ping-interval form-group">\n      <label>User Link Ping Interval</label>\n      <input type="number" class="form-control" placeholder="Enter ping interval" data-toggle="tooltip"\n        title="Optional, time in between pings used when multiple users have the same network link to failover to another user when one network link fails."\n        value="<%- link_ping_interval || \'\' %>" min="0" step="0.1"\n        autocapitalize="off">\n    </div>\n    <div class="inactive-timeout form-group">\n      <label>User Inactive Timeout</label>\n      <input type="number" class="form-control" placeholder="Enter inactive timeout" data-toggle="tooltip" title="Optional, disconnect users after the specified number of seconds of inactivity." min="0" step="0.1" value="<%- inactive_timeout || \'\' %>" autocapitalize="off">\n    </div>\n    <div class="max-clients form-group">\n      <label>Max Clients</label>\n      <input type="number" class="form-control" placeholder="Enter max clients" data-toggle="tooltip" title="Maximum number of clients connected to a server or to each server replica." min="0" value="<%- max_clients === -1 ? \'\' : max_clients %>" autocapitalize="off">\n    </div>\n    <div class="onc-hostname form-group">\n      <label>Chromebook Server Hostname</label>\n      <input type="text" class="form-control" placeholder="Enter Chromebook hostname" data-toggle="tooltip" title="Optional, hostname to use for Chromebook user profiles. Enter a DNS name with mutliple IP addresses to support connecting to replicated servers on Chrome OS." value="<%- onc_hostname || \'\' %>" autocapitalize="off">\n    </div>\n    <div class="network-mode form-group">\n      <label>Network Mode</label>\n      <select class="form-control" data-toggle="tooltip" title="Network mode">\n        <option value="tunnel" <%= network_mode === \'tunnel\' ? \'selected\' : \'\' %>>Tunnel</option>\n        <option value="bridge" <%= network_mode === \'bridge\' ? \'selected\' : \'\' %>>Bridge</option>\n      </select>\n    </div>\n    <div class="network-start form-group" <%= network_mode === \'bridge\' ? \'\' : \'style="display: none;"\' %>>\n      <label>Network Start</label>\n      <input type="text" class="form-control" placeholder="Enter start address" data-toggle="tooltip" title="Starting network address for the bridged VPN client IP addresses. Must be in the subnet of the server network" value="<%- network_start %>" autocapitalize="off">\n    </div>\n    <div class="multi-device-toggle toggle-form form-group">\n      <label>Allow Multiple Devices</label>\n      <div class="selector <%= multi_device ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Allow users to connect with multiple devices concurrently">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n    <div class="debug-toggle toggle-form form-group">\n      <label>Enable Debugging Output</label>\n      <div class="selector <%= debug ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Show server debugging information in output">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n    <div class="restrict-routes-toggle toggle-form form-group">\n      <label>Restrict Routing</label>\n      <div class="selector <%= restrict_routes ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Prevent traffic from networks not specified in the servers routes from being tunneled over the vpn">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n  <div class="block-outside-dns-toggle toggle-form form-group">\n    <label>Block Outside DNS</label>\n    <div class="selector <%= block_outside_dns ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Block outside DNS on Windows clients">\n      <span class="selector-inner glyphicon glyphicon-ok"></span>\n    </div>\n  </div>\n    <div class="policy form-group">\n      <label>User Policy</label><br>\n      <textarea class="form-control" rows="10" spellcheck="false"><%- policy %></textarea>\n    </div>\n  </div>\n  <div class="right advanced">\n    <div class="bind-address form-group">\n      <label>Bind Address</label>\n      <input type="text" class="form-control" placeholder="Enter bind address" data-toggle="tooltip" title="Optional, local address to bind vpn server to. Leave empty to bind to all interfaces. Using a bind address disables IPv6 connections and prevents several features from being used. Only use when necessary" value="<%- bind_address || \'\' %>" autocapitalize="off">\n    </div>\n    <div class="hash form-group">\n      <label>Hash Algorithm</label>\n      <select class="form-control" data-toggle="tooltip" title="Authentication hashing algorithm">\n        <option value="none" <%= hash === \'none\' ? \'selected\' : \'\' %>>None</option>\n        <option value="md5" <%= hash === \'md5\' ? \'selected\' : \'\' %>>MD5</option>\n        <option value="sha1" <%= hash === \'sha1\' ? \'selected\' : \'\' %>>SHA-1</option>\n        <option value="sha256" <%= hash === \'sha256\' ? \'selected\' : \'\' %>>SHA-256</option>\n        <option value="sha512" <%= hash === \'sha512\' ? \'selected\' : \'\' %>>SHA-512</option>\n      </select>\n    </div>\n    <div class="ping-timeout form-group">\n      <label>Ping Timeout</label>\n      <input type="number" class="form-control" placeholder="Enter ping timeout" data-toggle="tooltip" title="Optional, timeout for client ping. Must be greater then ping interval" min="0" value="<%- ping_timeout || \'\' %>" autocapitalize="off">\n    </div>\n    <div class="link-ping-timeout form-group">\n      <label>User Link Ping Timeout</label>\n      <input type="number" class="form-control" placeholder="Enter ping timeout" data-toggle="tooltip" title="Optional, ping timeout used when multiple users have the same network link to failover to another user when one network link fails." min="0" step="0.1" value="<%- link_ping_timeout || \'\' %>" autocapitalize="off">\n    </div>\n    <div class="allowed-devices form-group">\n      <label>Allowed Devices</label>\n      <select class="form-control" data-toggle="tooltip" title="Device types permitted to connect to server.">\n        <option value="any" <%= !allowed_devices ? \'selected\' : \'\' %>>Any</option>\n        <option value="mobile" <%= allowed_devices === \'mobile\' ? \'selected\' : \'\' %>>Mobile</option>\n        <option value="desktop" <%= allowed_devices === \'desktop\' ? \'selected\' : \'\' %>>Desktop</option>\n      </select>\n    </div>\n    <div class="search-domain form-group">\n      <label>DNS Search Domain</label>\n      <input type="text" class="form-control" placeholder="Enter DNS search domain" data-toggle="tooltip" title="Optional, DNS search domain for clients. Separate multiple search domains by a comma" value="<%- search_domain || \'\' %>" autocapitalize="off">\n    </div>\n    <div class="replica-count form-group">\n      <label>Replication Count</label>\n      <input type="number" class="form-control" placeholder="Enter replication count" data-toggle="tooltip" title="Replicate server accross multiple hosts." value="<%- replica_count === -1 ? \'\' : replica_count %>" min="1" autocapitalize="off">\n    </div>\n    <div class="network-end form-group" <%= network_mode === \'bridge\' ? \'\' : \'style="display: none;"\' %>>\n      <label>Network End</label>\n      <input type="text" class="form-control" placeholder="Enter end address" data-toggle="tooltip" title="Ending network address for the bridged VPN client IP addresses. Must be in the subnet of the server network" value="<%- network_end %>" autocapitalize="off">\n    </div>\n    <div class="dns-mapping-toggle toggle-form form-group">\n      <label>Enable VPN Client DNS Mapping</label>\n      <div class="selector <%= dns_mapping ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Map the vpn clients ip address to the .vpn domain such as example_user.example_org.vpn">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n    <div class="inter-client-toggle toggle-form form-group">\n      <label>Inter-Client Communication</label>\n      <div class="selector <%= inter_client ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Allow clients to communicate with each other on the vpn network">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n    <div class="vxlan-toggle toggle-form form-group">\n      <label>VXLan Routing</label>\n      <div class="selector <%= vxlan ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Use VXLan for routing client-to-client traffic with replicated servers">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n    <div class="ipv6-firewall-toggle toggle-form form-group" <%= ipv6 ? \'\' : \'style="display: none;"\' %>>\n      <label>Routed IPv6 Firewall</label>\n      <div class="selector <%= ipv6_firewall ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Enabled firewall when routed IPv6 is used">\n        <span class="selector-inner glyphicon glyphicon-ok"></span>\n      </div>\n    </div>\n  </div>\n</div>\n'}),define("views/modalServerSettings",["jquery","underscore","backbone","select","views/modal","text!templates/modalServerSettings.html"],function($,_,Backbone,Select,ModalView,modalServerSettingsTemplate){"use strict";var ModalServerSettingsView=ModalView.extend({className:"server-settings-modal",template:_.template(modalServerSettingsTemplate),title:"Server Settings",okText:"Save",loadingMsg:"Saving server...",errorMsg:"Failed to saving server, server error occurred.",hasAdvanced:!0,events:function(){return _.extend({"change .dh-param-bits select":"onDhParamBits","change .network-mode select":"onNetworkMode","click .otp-auth-toggle":"onOtpAuthSelect","click .inter-client-toggle":"onInterClientSelect","click .dns-mapping-toggle":"onDnsMappingSelect","click .debug-toggle":"onDebugSelect","click .block-outside-dns-toggle":"onBlockOutsideDnsSelect","click .ipv6-toggle":"onIpv6Select","click .multi-device-toggle":"onMultiDeviceSelect","click .vxlan-toggle":"onVxlanSelect","click .ipv6-firewall-toggle":"onIpv6FirewallSelect","click .restrict-routes-toggle":"onRestrictRoutesSelect","change select.protocol, .cipher select, .network-mode select":"onInputChange","click div.otp-auth-toggle":"onInputChange"},ModalServerSettingsView.__super__.events)},body:function(){return this.template(this.model.toJSON())},postRender:function(){this.$(".groups input").select2({tags:[],tokenSeparators:[","," "],width:"200px"}),this.$(".network .label").tooltip(),this.updateMaxHosts()},onDhParamBits:function(evt){var val=$(evt.target).val();val>2048?this.setAlert("danger","Using dh parameters larger then 2048 can take several hours to generate.",".dh-param-bits"):this.clearAlert()},getNetworkMode:function(){return this.$(".network-mode select").val()},setNetworkMode:function(mode){"bridge"===mode?(this.$(".network-start").slideDown(window.slideTime),this.$(".network-end").slideDown(window.slideTime)):(this.$(".network-start").slideUp(window.slideTime),this.$(".network-end").slideUp(window.slideTime))},onNetworkMode:function(){this.setNetworkMode(this.getNetworkMode())},getOtpAuthSelect:function(){return this.$(".otp-auth-toggle .selector").hasClass("selected")},setOtpAuthSelect:function(state){state?(this.$(".otp-auth-toggle .selector").addClass("selected"),this.$(".otp-auth-toggle .selector-inner").show()):(this.$(".otp-auth-toggle .selector").removeClass("selected"),this.$(".otp-auth-toggle .selector-inner").hide())},onOtpAuthSelect:function(){this.setOtpAuthSelect(!this.getOtpAuthSelect())},getInterClientSelect:function(){return this.$(".inter-client-toggle .selector").hasClass("selected")},setInterClientSelect:function(state){state?(this.$(".inter-client-toggle .selector").addClass("selected"),this.$(".inter-client-toggle .selector-inner").show()):(this.$(".inter-client-toggle .selector").removeClass("selected"),this.$(".inter-client-toggle .selector-inner").hide())},onInterClientSelect:function(){this.setInterClientSelect(!this.getInterClientSelect())},getDnsMappingSelect:function(){return this.$(".dns-mapping-toggle .selector").hasClass("selected")},setDnsMappingSelect:function(state){state?(this.$(".dns-mapping-toggle .selector").addClass("selected"),this.$(".dns-mapping-toggle .selector-inner").show()):(this.$(".dns-mapping-toggle .selector").removeClass("selected"),this.$(".dns-mapping-toggle .selector-inner").hide())},onDnsMappingSelect:function(){this.setDnsMappingSelect(!this.getDnsMappingSelect())},getDebugSelect:function(){return this.$(".debug-toggle .selector").hasClass("selected")},setDebugSelect:function(state){state?(this.$(".debug-toggle .selector").addClass("selected"),this.$(".debug-toggle .selector-inner").show()):(this.$(".debug-toggle .selector").removeClass("selected"),this.$(".debug-toggle .selector-inner").hide())},onDebugSelect:function(){this.setDebugSelect(!this.getDebugSelect())},getBlockOutsideDnsSelect:function(){return this.$(".block-outside-dns-toggle .selector").hasClass("selected")},setBlockOutsideDnsSelect:function(state){state?(this.$(".block-outside-dns-toggle .selector").addClass("selected"),this.$(".block-outside-dns-toggle .selector-inner").show()):(this.$(".block-outside-dns-toggle .selector").removeClass("selected"),this.$(".block-outside-dns-toggle .selector-inner").hide())},onBlockOutsideDnsSelect:function(){this.setBlockOutsideDnsSelect(!this.getBlockOutsideDnsSelect())},getRestrictRoutesSelect:function(){return this.$(".restrict-routes-toggle .selector").hasClass("selected")},setRestrictRoutesSelect:function(state){state?(this.$(".restrict-routes-toggle .selector").addClass("selected"),this.$(".restrict-routes-toggle .selector-inner").show()):(this.$(".restrict-routes-toggle .selector").removeClass("selected"),this.$(".restrict-routes-toggle .selector-inner").hide())},onRestrictRoutesSelect:function(){this.setRestrictRoutesSelect(!this.getRestrictRoutesSelect())},getIpv6Select:function(){return this.$(".ipv6-toggle .selector").hasClass("selected")},setIpv6Select:function(state){var dnsServers=this.getDnsServers();if(state)this.$(".ipv6-toggle .selector").addClass("selected"),this.$(".ipv6-toggle .selector-inner").show(),-1!==dnsServers.indexOf("8.8.4.4")&&-1===dnsServers.indexOf("2001:4860:4860::8844")&&dnsServers.unshift("2001:4860:4860::8844"),-1!==dnsServers.indexOf("8.8.8.8")&&-1===dnsServers.indexOf("2001:4860:4860::8888")&&dnsServers.unshift("2001:4860:4860::8888"),this.$(".ipv6-firewall-toggle").show();else{this.$(".ipv6-toggle .selector").removeClass("selected"),this.$(".ipv6-toggle .selector-inner").hide();
var i=dnsServers.indexOf("2001:4860:4860::8888");-1!==i&&dnsServers.splice(i,1),i=dnsServers.indexOf("2001:4860:4860::8844"),-1!==i&&dnsServers.splice(i,1),this.$(".ipv6-firewall-toggle").hide()}this.$(".dns-servers input").val(dnsServers.join(", "))},onIpv6Select:function(){this.setIpv6Select(!this.getIpv6Select())},getMultiDeviceSelect:function(){return this.$(".multi-device-toggle .selector").hasClass("selected")},setMultiDeviceSelect:function(state){state?(this.$(".multi-device-toggle .selector").addClass("selected"),this.$(".multi-device-toggle .selector-inner").show()):(this.$(".multi-device-toggle .selector").removeClass("selected"),this.$(".multi-device-toggle .selector-inner").hide())},onMultiDeviceSelect:function(){this.setMultiDeviceSelect(!this.getMultiDeviceSelect())},getVxlanSelect:function(){return this.$(".vxlan-toggle .selector").hasClass("selected")},setVxlanSelect:function(state){state?(this.$(".vxlan-toggle .selector").addClass("selected"),this.$(".vxlan-toggle .selector-inner").show()):(this.$(".vxlan-toggle .selector").removeClass("selected"),this.$(".vxlan-toggle .selector-inner").hide())},onVxlanSelect:function(){this.setVxlanSelect(!this.getVxlanSelect())},getIpv6FirewallSelect:function(){return this.$(".ipv6-firewall-toggle .selector").hasClass("selected")},setIpv6FirewallSelect:function(state){state?(this.$(".ipv6-firewall-toggle .selector").addClass("selected"),this.$(".ipv6-firewall-toggle .selector-inner").show()):(this.$(".ipv6-firewall-toggle .selector").removeClass("selected"),this.$(".ipv6-firewall-toggle .selector-inner").hide())},onIpv6FirewallSelect:function(){this.setIpv6FirewallSelect(!this.getIpv6FirewallSelect())},onInputChange:function(evt){if($(evt.target).parent().hasClass("network")&&this.updateMaxHosts(),!this.newServer){var port=parseInt(this.$("input.port").val(),10),protocol=this.$("select.protocol").val(),cipher=this.$(".cipher select").val(),hash=this.$(".hash select").val(),networkMode=this.$(".network-mode select").val(),otpAuth=this.getOtpAuthSelect();port!==this.model.get("port")||protocol!==this.model.get("protocol")||cipher!==this.model.get("cipher")||hash!==this.model.get("hash")||networkMode!==this.model.get("network_mode")||otpAuth!==this.model.get("otp_auth")?this.setAlert("warning","These changes will require users that are not using an offical Pritunl client to download their updated profile again before being able to connect. Users using an offical Pritunl client will be able sync the changes."):this.clearAlert()}},getDnsServers:function(){for(var dnsServer,dnsServers=[],dnsServersTemp=this.$(".dns-servers input").val().split(","),i=0;i<dnsServersTemp.length;i++)dnsServer=$.trim(dnsServersTemp[i]),dnsServer&&dnsServers.push(dnsServer);return dnsServers},updateMaxHosts:function(){var value=this.$(".network input").val().split("/"),maxHosts={8:"16m",9:"8m",10:"4m",11:"2m",12:"1m",13:"524k",14:"262k",15:"131k",16:"65k",17:"32k",18:"16k",19:"8k",20:"4k",21:"2k",22:"1k",23:"509",24:"253",25:"125",26:"61",27:"29",28:"13",29:"5",30:"1"};if(2===value.length){var max=maxHosts[value[1]];if(max)return this.$(".network .label").text(max+" Users"),void this.$(".network .label").show()}this.$(".network .label").hide()},getGroups:function(){var groups=[],groupsData=this.$(".groups input").select2("data");if(groupsData.length)for(var i=0;i<groupsData.length;i++)groups.push(groupsData[i].text);else{var groupsVal=this.$(".groups input").val();groupsVal&&"Enter groups"!==groupsVal&&(groups=[groupsVal])}return groups},onOk:function(){var name=this.$(".name input").val(),network=this.$(".network input").val(),port=parseInt(this.$("input.port").val(),10),protocol=this.$("select.protocol").val(),dhParamBits=parseInt(this.$(".dh-param-bits select").val(),10),ipv6=this.getIpv6Select(),ipv6Firewall=this.getIpv6FirewallSelect(),multiDevice=this.getMultiDeviceSelect(),dnsServers=this.getDnsServers(),searchDomain=this.$(".search-domain input").val(),oncHostname=this.$(".onc-hostname input").val(),interClient=this.getInterClientSelect(),pingInterval=parseInt(this.$(".ping-interval input").val(),10),pingTimeout=parseInt(this.$(".ping-timeout input").val(),10),linkPingInterval=parseFloat(this.$(".link-ping-interval input").val(),10),linkPingTimeout=parseFloat(this.$(".link-ping-timeout input").val(),10),inactiveTimeout=parseFloat(this.$(".inactive-timeout input").val(),10),allowedDevices=this.$(".allowed-devices select").val(),maxClients=parseInt(this.$(".max-clients input").val(),10),replicaCount=parseInt(this.$(".replica-count input").val(),10),dnsMapping=this.getDnsMappingSelect(),debug=this.getDebugSelect(),otpAuth=this.getOtpAuthSelect(),restrictRoutes=this.getRestrictRoutesSelect(),vxlan=this.getVxlanSelect(),cipher=this.$(".cipher select").val(),hash=this.$(".hash select").val(),blockOutsideDns=this.getBlockOutsideDnsSelect(),bindAddress=this.$(".bind-address input").val();bindAddress||(bindAddress=null);var networkMode=this.$(".network-mode select").val(),networkStart=this.$(".network-start input").val(),networkEnd=this.$(".network-end input").val(),groups=this.getGroups(),policy=this.$(".policy textarea").val().trim()||null;if(!name)return void this.setAlert("danger","Name can not be empty.",".name");if(!network)return void this.setAlert("danger","Network can not be empty.",".network");if(!port)return void this.setAlert("danger","Port can not be empty.","input.port");searchDomain||(searchDomain=null),oncHostname||(oncHostname=null),(isNaN(replicaCount)||0===replicaCount)&&(replicaCount=1),"bridge"!==networkMode&&(networkStart="",networkEnd=""),"any"===allowedDevices&&(allowedDevices=null);var data={name:name,type:this.model.get("type"),network:network,groups:groups,bind_address:bindAddress,port:port,protocol:protocol,dh_param_bits:dhParamBits,network_mode:networkMode,network_start:networkStart,network_end:networkEnd,restrict_routes:restrictRoutes,ipv6:ipv6,ipv6_firewall:ipv6Firewall,multi_device:multiDevice,dns_servers:dnsServers,search_domain:searchDomain,otp_auth:otpAuth,cipher:cipher,hash:hash,block_outside_dns:blockOutsideDns,inter_client:interClient,ping_interval:pingInterval,ping_timeout:pingTimeout,link_ping_interval:linkPingInterval,link_ping_timeout:linkPingTimeout,inactive_timeout:inactiveTimeout,onc_hostname:oncHostname,allowed_devices:allowedDevices,max_clients:maxClients,replica_count:replicaCount,vxlan:vxlan,dns_mapping:dnsMapping,debug:debug,policy:policy};this.setLoading(this.loadingMsg),this.model.save(data,{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalServerSettingsView}),define("text!templates/modalDeleteServer.html",[],function(){return'<div class="form-group">\n  <label>Enter the name of the server to confirm</label>\n  <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of server" autofocus>\n</div>\n'}),define("views/modalDeleteServer",["jquery","underscore","backbone","views/modal","text!templates/modalDeleteServer.html"],function($,_,Backbone,ModalView,modalDeleteServerTemplate){"use strict";var ModalDeleteServerView=ModalView.extend({className:"delete-server-modal",template:_.template(modalDeleteServerTemplate),title:"Delete Server",okText:"Delete",inputMatch:!0,initialize:function(){ModalDeleteServerView.__super__.initialize.call(this),this.inputMatchText=this.model.get("name")},body:function(){return this.template()},onOk:function(){this.setLoading("Deleting server..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDeleteServerView}),define("text!templates/serversListItem.html",[],function(){return'<div class="server-header">\n  <div class="server-label label label-primary toggle-hidden no-select">Server</div><h2 class="server-title title"><a class="no-select" data-toggle="tooltip" title="Click to open server settings"></a><span class="server-id title">(<%- id %>)</span></h2>\n  <button type="button" class="server-del btn btn-danger btn-sm no-select">Delete Server</button>\n  <button type="button" class="server-stop btn btn-warning btn-sm no-select">Stop Server</button>\n  <button type="button" class="server-start btn btn-success btn-sm no-select">Start Server</button>\n  <button type="button" class="server-restart btn btn-primary btn-sm no-select">Restart Server</button>\n  <span class="no-dh-warning label label-default">\n    Generating DH parameters, please wait...\n  </span>\n  <span class="no-org-warning label label-default">\n    Server must have an organization attached\n  </span>\n  <span class="no-host-warning label label-default">\n    Server must have a host attached\n  </span>\n  <span class="no-org-host-warning label label-default">\n    Server must have a host and an organization attached\n  </span>\n</div>\n<div class="server-info">\n  <div class="status-items">\n    <div class="status-item server-status">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-dashboard"></span>\n        <span>Status</span>\n      </h3>\n      <div class="status-text title"></div>\n    </div>\n    <div class="status-item server-uptime">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-time"></span>\n        <span>Uptime</span>\n      </h3>\n      <div class="status-text title"></div>\n    </div>\n    <div class="status-item server-users">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-user"></span>\n        <span>Users</span>\n      </h3>\n      <div class="status-text title">\n        <span class="status-num"></span> users online\n      </div>\n    </div>\n    <div class="status-item server-devices">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-transfer"></span>\n        <span>Devices</span>\n      </h3>\n      <div class="status-text title">\n        <span class="status-num"></span> devices online\n      </div>\n    </div>\n    <div class="status-item server-network">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-signal"></span>\n        <span>Network</span>\n      </h3>\n      <div class="status-text title"></div>\n    </div>\n    <div class="status-item server-port">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-cloud-upload"></span>\n        <span>Port</span>\n      </h3>\n      <div class="status-text title"></div>\n    </div>\n    <div class="status-item server-mode last">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-cog"></span>\n        <span>Multiple Devices</span>\n      </h3>\n      <div class="status-text title"></div>\n    </div>\n  </div>\n  <div class="server-output">\n    <h3 class="server-output-title title">\n      <button type="button" class="server-output-btn btn btn-primary btn-xs">Server Output</button>\n      <button type="button" class="server-output-link-btn btn btn-default btn-xs">Link Output</button>\n      <button type="button" class="server-graph-btn btn btn-default btn-xs">Bandwidth Graphs</button>\n      <span class="server-output-clear glyphicon glyphicon-trash" data-toggle="tooltip" title="Click to clear server output"></span>\n      <span class="server-output-link-clear glyphicon glyphicon-trash" data-toggle="tooltip" title="Click to clear server link output"></span>\n      <button type="button" class="server-graph-period graph-1d btn btn-default btn-xs">365 Days</button>\n      <button type="button" class="server-graph-period graph-2h btn btn-default btn-xs">30 Days</button>\n      <button type="button" class="server-graph-period graph-30m btn btn-default btn-xs">7 Days</button>\n      <button type="button" class="server-graph-period graph-5m btn btn-default btn-xs">24 Hours</button>\n      <button type="button" class="server-graph-period graph-1m btn btn-primary btn-xs">6 Hours</button>\n    </h3>\n    <div class="server-output-viewer"></div>\n    <div class="server-output-link-viewer"></div>\n    <div class="server-graph-viewer"></div>\n  </div>\n</div>\n'}),define("views/serversListItem",["jquery","underscore","backbone","models/status","views/alert","views/serverRoutesList","views/serverOrgsList","views/serverHostsList","views/serverLinksList","views/serverOutput","views/serverOutputLink","views/serverBandwidth","views/modalServerSettings","views/modalDeleteServer","text!templates/serversListItem.html"],function($,_,Backbone,StatusModel,AlertView,ServerRoutesListView,ServerOrgsListView,ServerHostsListView,ServerLinksListView,ServerOutputView,ServerOutputLinkView,ServerBandwidthView,ModalServerSettingsView,ModalDeleteServerView,serversListItemTemplate){"use strict";var ServersListItemView=Backbone.View.extend({className:"server",template:_.template(serversListItemTemplate),events:{"click .server-title a":"onSettings","click .server-del":"onDelete","click .server-restart, .server-start, .server-stop":"onOperation","click .server-output-btn":"onServerOutput","click .server-output-link-btn":"onServerOutputLink","click .server-graph-btn":"onServerGraph","click .server-output-clear":"onClearOutput","click .server-output-link-clear":"onClearOutputLink","click .server-graph-period":"onServerGraphPeriod","click .toggle-hidden":"onToggleHidden"},initialize:function(){this.orgsCount=null,this.hostsCount=null,this.statusModel=new StatusModel,this.serverRoutesListView=new ServerRoutesListView({server:this.model,serverView:this}),this.addView(this.serverRoutesListView),this.serverOrgsListView=new ServerOrgsListView({server:this.model,serverView:this}),this.addView(this.serverOrgsListView),this.serverHostsListView=new ServerHostsListView({server:this.model,serverView:this}),this.addView(this.serverHostsListView),this.serverLinksListView=new ServerLinksListView({server:this.model,serverView:this}),this.addView(this.serverLinksListView),this.serverOutputView=new ServerOutputView({server:this.model.get("id")}),this.addView(this.serverOutputView),this.serverOutputLinkView=new ServerOutputLinkView({server:this.model.get("id")}),this.addView(this.serverOutputLinkView),this.serverBandwidthView=new ServerBandwidthView({server:this.model.get("id")}),this.addView(this.serverBandwidthView),setTimeout(function(){window.disableInterval||(this.uptimer=setInterval(this._updateTime.bind(this),1e3))}.bind(this),1e3)},deinitialize:function(){clearInterval(this.uptimer)},formatDate:function(epochTime){var dateString=new Date(1e3*epochTime).toUTCString(),dateArray=dateString.split(" ");return dateArray[0]=dateArray[0].replace(",",""),dateArray[2]+", "+dateArray[1]+" "+dateArray[3]},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.update(),this.$(".server-title a, .server-output-clear").tooltip({container:this.el}),this.$(".server-title a, .server-output-link-clear").tooltip({container:this.el}),this.$(".server-output-viewer").append(this.serverOutputView.render().el),this.$(".server-output-link-viewer").append(this.serverOutputLinkView.render().el),this.$(".server-graph-viewer").append(this.serverBandwidthView.render().el),this.$el.append(this.serverRoutesListView.render().el),this.$el.append(this.serverOrgsListView.render().el),this.$el.append(this.serverHostsListView.render().el),this.$el.append(this.serverLinksListView.render().el),this},update:function(){var status=this.model.get("status");this.$(".server-title a").text(this.model.get("name")),this.$(".server-status .status-text").text(status.charAt(0).toUpperCase()+status.slice(1)),this.model.get("uptime")?this.$(".server-uptime .status-text").text(window.formatUptime(this.model.get("uptime"))):this.$(".server-uptime .status-text").text("-"),this.model.get("user_count")?this.$(".server-users .status-num").text(this.model.get("users_online")+"/"+this.model.get("user_count")):this.$(".server-users .status-num").text("-/-"),this.model.get("devices_online")?this.$(".server-devices .status-num").text(this.model.get("devices_online")):this.$(".server-devices .status-num").text("0"),this.$(".server-network .status-text").text(this.model.get("network")),this.$(".server-interface .status-text").text(this.model.get("interface")),this.$(".server-port .status-text").text(this.model.get("port")+"/"+this.model.get("protocol")),this.$(".server-public-address .status-text").text(this.model.get("public_address")),this.model.get("multi_device")?this.$(".server-mode .status-text").text("Enabled"):this.$(".server-mode .status-text").text("Disabled"),this.updateButtons()},updateOrgsCount:function(){this.orgsCount=this.serverOrgsListView.views.length},updateHostsCount:function(){this.hostsCount=this.serverHostsListView.views.length},updateButtons:function(){var buttonLock=!0,status=this.model.get("status");"pending"===status?(this.$(".no-dh-warning").show(),this.$(".no-host-warning").hide(),this.$(".no-org-host-warning").hide(),this.$(".no-org-warning").hide()):null===this.orgsCount||null===this.hostsCount?(this.$(".no-dh-warning").hide(),this.$(".no-host-warning").hide(),this.$(".no-org-host-warning").hide(),this.$(".no-org-warning").hide()):!this.orgsCount&&this.hostsCount?(this.$(".no-dh-warning").hide(),this.$(".no-host-warning").hide(),this.$(".no-org-host-warning").hide(),this.$(".no-org-warning").show()):this.orgsCount&&!this.hostsCount?(this.$(".no-dh-warning").hide(),this.$(".no-org-warning").hide(),this.$(".no-org-host-warning").hide(),this.$(".no-host-warning").show()):this.orgsCount||this.hostsCount?(this.$(".no-dh-warning").hide(),this.$(".no-org-warning").hide(),this.$(".no-host-warning").hide(),this.$(".no-org-host-warning").hide(),buttonLock=!1):(this.$(".no-dh-warning").hide(),this.$(".no-org-warning").hide(),this.$(".no-host-warning").hide(),this.$(".no-org-host-warning").show()),buttonLock?(this.$(".server-stop").hide(),this.$(".server-restart").hide(),this.$(".server-start").show(),this.startDisabled=!0,this.$(".server-start").attr("disabled","disabled")):"online"===status?(this.$(".server-start").hide(),this.$(".server-restart").show(),this.$(".server-stop").show(),this.startDisabled&&(this.startDisabled=!1,this.$(".server-start").removeAttr("disabled"))):(this.$(".server-stop").hide(),this.$(".server-restart").hide(),this.$(".server-start").show(),this.startDisabled&&(this.startDisabled=!1,this.$(".server-start").removeAttr("disabled")))},onSettings:function(){this.$(".server-title a").addClass("disabled"),this.statusModel.fetch({success:function(){var modal=new ModalServerSettingsView({localNetworks:this.statusModel.get("local_networks"),model:this.model.clone()});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully saved server settings.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal),this.$(".server-title a").removeClass("disabled")}.bind(this),error:function(){var alertView=new AlertView({type:"danger",message:"Failed to load server information, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.$(".server-title a").removeClass("disabled")}.bind(this)})},onDelete:function(evt){var model=this.model.clone();if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDeleteServerView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully deleted server.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onOperation:function(evt){var operation;$(evt.target).hasClass("server-restart")?operation="restart":$(evt.target).hasClass("server-start")?operation="start":$(evt.target).hasClass("server-stop")&&(operation="stop"),operation&&($(evt.target).attr("disabled","disabled"),this.model.clone().save({operation:operation},{success:function(){$(evt.target).removeAttr("disabled")}.bind(this),error:function(model,response){var alertView;$(evt.target).removeAttr("disabled"),alertView=new AlertView(response.responseJSON?{type:"danger",message:response.responseJSON.error_msg,dismissable:!0}:{type:"danger",message:"Failed to "+operation+" the server, server error occurred.",dismissable:!0}),$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)}))},onClearOutput:function(){this.serverOutputView.model.destroy({error:function(model,response){var message;message=response.responseJSON?response.responseJSON.error_msg:"Failed to clear server link output, server error occurred.";var alertView=new AlertView({type:"danger",message:message,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)})},onClearOutputLink:function(){this.serverOutputLinkView.model.destroy({error:function(model,response){var message;message=response.responseJSON?response.responseJSON.error_msg:"Failed to clear server link output, server error occurred.";var alertView=new AlertView({type:"danger",message:message,dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)})},onServerGraphPeriod:function(evt){this.$(".server-graph-period").removeClass("btn-primary"),this.$(".server-graph-period").addClass("btn-default"),$(evt.target).removeClass("btn-default"),$(evt.target).addClass("btn-primary"),$(evt.target).hasClass("graph-1m")?this.serverBandwidthView.setPeriod("1m"):$(evt.target).hasClass("graph-5m")?this.serverBandwidthView.setPeriod("5m"):$(evt.target).hasClass("graph-30m")?this.serverBandwidthView.setPeriod("30m"):$(evt.target).hasClass("graph-2h")?this.serverBandwidthView.setPeriod("2h"):$(evt.target).hasClass("graph-1d")&&this.serverBandwidthView.setPeriod("1d")},onServerOutput:function(){this.$(".server-output-btn").removeClass("btn-default"),this.$(".server-output-btn").addClass("btn-primary"),this.$(".server-output-link-btn").removeClass("btn-primary"),this.$(".server-output-link-btn").addClass("btn-default"),this.$(".server-graph-btn").removeClass("btn-primary"),this.$(".server-graph-btn").addClass("btn-default"),this.$(".server-graph-period").hide(),this.$(".server-output-link-clear").hide(),this.$(".server-output-clear").show(),this.serverBandwidthView.setState(!1),this.serverOutputLinkView.setState(!1),this.serverOutputView.setState(!0)},onServerOutputLink:function(){this.$(".server-output-btn").removeClass("btn-primary"),this.$(".server-output-btn").addClass("btn-default"),this.$(".server-output-link-btn").removeClass("btn-default"),this.$(".server-output-link-btn").addClass("btn-primary"),this.$(".server-graph-btn").removeClass("btn-primary"),this.$(".server-graph-btn").addClass("btn-default"),this.$(".server-graph-period").hide(),this.$(".server-output-clear").hide(),this.$(".server-output-link-clear").show(),this.serverBandwidthView.setState(!1),this.serverOutputView.setState(!1),this.serverOutputLinkView.setState(!0)},onServerGraph:function(){this.$(".server-output-btn").removeClass("btn-primary"),this.$(".server-output-btn").addClass("btn-default"),this.$(".server-output-link-btn").removeClass("btn-primary"),this.$(".server-output-link-btn").addClass("btn-default"),this.$(".server-graph-btn").removeClass("btn-default"),this.$(".server-graph-btn").addClass("btn-primary"),this.$(".server-output-clear").hide(),this.$(".server-output-link-clear").hide(),this.$(".server-graph-period").show(),this.serverOutputView.setState(!1),this.serverOutputLinkView.setState(!1),this.serverBandwidthView.setState(!0)},_updateTime:function(){this.model.get("uptime")&&(this.model.set({uptime:this.model.get("uptime")+1}),this.$(".server-uptime .status-text").text(window.formatUptime(this.model.get("uptime"))))},onToggleHidden:function(evt){(evt.ctrlKey||evt.shiftKey)&&(this.$el.hasClass("show-hidden")?(this.$(".toggle-hidden").removeClass("label-success"),this.$(".toggle-hidden").addClass("label-primary"),this.$el.removeClass("show-hidden")):(this.$(".toggle-hidden").addClass("label-success"),this.$(".toggle-hidden").removeClass("label-primary"),this.$el.addClass("show-hidden")))}});return ServersListItemView}),define("views/modalAddServer",["jquery","underscore","backbone","models/server","views/modalServerSettings"],function($,_,Backbone,ServerModel,ModalServerSettingsView){"use strict";var ModalAddServerView=ModalServerSettingsView.extend({title:"Add Server",okText:"Add",loadingMsg:"Adding server...",errorMsg:"Failed to add server, server error occurred.",safeClose:!0,initialize:function(options){this.usedNetworks=options.usedNetworks,this.usedPorts=options.usedPorts,this.usedInterfaces=options.usedInterfaces,this.newServer=!0,this.model=new ServerModel({name:"",network:this._get_free_network(),port:this._get_free_port(),protocol:"udp",dh_param_bits:1536,ipv6_firewall:!0,dns_servers:["8.8.8.8"],cipher:"aes128",hash:"sha1",inter_client:!0,restrict_routes:!0,vxlan:!0}),ModalAddServerView.__super__.initialize.call(this,options)},_rand:function(min,max){return Math.floor(Math.random()*(max-min+1))+min},_get_free_network:function(){var i,network;for(i=0;64>i&&(network="192.168."+this._rand(215,250)+".0/24",-1!==this.usedNetworks.indexOf(network));i++);if(-1!==this.usedNetworks.indexOf(network))for(i=0;512>i&&(network="192.168."+this._rand(15,215)+".0/24",-1!==this.usedNetworks.indexOf(network));i++);return network},_get_free_port:function(){var i,port;for(i=0;4096>i&&(port=this._rand(1e4,19999),-1!==this.usedPorts.indexOf(port));i++);return port}});return ModalAddServerView}),define("text!templates/modalAddRoute.html",[],function(){return'<div class="route-network form-group">\n  <label>Network</label>\n  <input type="text" class="form-control" placeholder="Enter network address" data-toggle="tooltip" title="Network address with subnet to route" autofocus>\n</div>\n<div class="route-comment form-group">\n  <label>Comment</label>\n  <input type="text" class="form-control" placeholder="Enter route comment" data-toggle="tooltip" title="Comment for route">\n</div>\n<div class="nat-route-toggle toggle-form form-group">\n  <label>NAT Route</label>\n  <div class="selector selected no-select" data-toggle="tooltip" title="NAT vpn traffic destined to this network">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="nat-interface form-group">\n  <label>NAT Interface Name</label>\n  <input type="text" class="form-control" placeholder="Auto select" data-toggle="tooltip" title="Optional outbound interface for NAT. Leave blank to automatically detect interface">\n</div>\n<div class="net-gateway-toggle toggle-form form-group">\n  <label>Net Gateway</label>\n  <div class="selector no-select" data-toggle="tooltip" title="Route the network through the pre-existing default gateway. Useful for excluding an address or network from routing that is inside an already routed network">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="route-advertisement-toggle toggle-form form-group">\n  <label>Route Advertisement</label>\n  <div class="selector no-select" data-toggle="tooltip" title="Enable VPC route advertisement">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n<div class="route-advertisement" style="display: none">\n  <div class="vpc-region form-group">\n    <label>VPC Route Advertisement Region</label>\n    <select class="form-control" data-toggle="tooltip" title="VPC region for route advertisement">\n      <option value="us-east-1" selected>US East (N. Virginia)</option>\n      <option value="us-east-2" selected>US East (Ohio)</option>\n      <option value="us-west-1">US West (N. California)</option>\n      <option value="us-west-2">US West (Oregon)</option>\n      <option value="us-gov-west-1">US GovCloud (West)</option>\n      <option value="eu-west-1">EU (Ireland)</option>\n      <option value="eu-west-2">EU (London)</option>\n      <option value="eu-central-1">EU (Frankfurt)</option>\n      <option value="ca-central-1">Canada (Central)</option>\n      <option value="ap-northeast-1">Asia Pacific (Tokyo)</option>\n      <option value="ap-northeast-2">Asia Pacific (Seoul)</option>\n      <option value="ap-southeast-1">Asia Pacific (Singapore)</option>\n      <option value="ap-southeast-2">Asia Pacific (Sydney)</option>\n      <option value="ap-south-1">Asia Pacific (Mumbai)</option>\n      <option value="sa-east-1">South America (Sao Paulo)</option>\n    </select>\n  </div>\n  <div class="vpc-id form-group">\n    <label>VPC Route Advertisement ID</label>\n    <select class="form-control" data-toggle="tooltip" title="VPC ID for route advertisement. EC2 server must be connected to the VPC">\n      <option selected value="">No VPCs available</option>\n    </select>\n  </div>\n</div>\n<div class="server form-group">\n  <label>Select a server</label>\n  <select class="form-control">\n    <% _.each(servers, function(server) { %>\n      <option value="<%- server.id %>" <%= (lastServer === server.id) ? \'selected\' : \'\' %>><%- server.name %></option>\n    <% }); %>\n  </select>\n</div>\n'}),define("views/modalAddRoute",["jquery","underscore","backbone","models/serverRoute","models/vpcs","views/modal","text!templates/modalAddRoute.html"],function($,_,Backbone,ServerRouteModel,VpcsModel,ModalView,modalAddRouteTemplate){"use strict";var lastServer,ModalAddRouteView=ModalView.extend({className:"add-route-modal",template:_.template(modalAddRouteTemplate),title:"Add Route",okText:"Attach",events:function(){return _.extend({"change .vpc-region select":"updateVpcIds","click .route-advertisement-toggle":"onRotueAdSelect","click .nat-route-toggle":"onNatRouteSelect","click .net-gateway-toggle":"onNetGatewaySelect"},ModalAddRouteView.__super__.events)},initialize:function(){this.vpcs=new VpcsModel,ModalAddRouteView.__super__.initialize.call(this)},body:function(){return this.template({servers:this.collection.toJSON(),lastServer:lastServer})},postRender:function(){this.$(".label").tooltip(),this.setLoading("Loading AWS VPC information...",!0),this.vpcs.fetch({success:function(){this.clearLoading(),this.updateVpcIds()}.bind(this),error:function(model,response){this.clearLoading(),this.updateVpcIds(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})},updateVpcIds:function(){var vpcId,vpcNet,vpcLabel,vpcRegion=this.$(".vpc-region select").val(),vpcs=this.vpcs.get(vpcRegion)||[];if(!vpcs.length)return void this.$(".vpc-id select").html('<option selected value="">No VPCs available</option>');this.$(".vpc-id select").empty();for(var i=0;i<vpcs.length;i++)vpcId=vpcs[i].id,vpcNet=vpcs[i].network,vpcLabel=vpcId+" ("+vpcNet+")",this.$(".vpc-id select").append("<option "+(i?"":"selected")+' value="'+vpcId+'">'+vpcLabel+"</option>")},getNatRouteSelect:function(){return this.$(".nat-route-toggle .selector").hasClass("selected")},setNatRouteSelect:function(state){state?(this.$(".nat-route-toggle .selector").addClass("selected"),this.$(".nat-route-toggle .selector-inner").show()):(this.$(".nat-route-toggle .selector").removeClass("selected"),this.$(".nat-route-toggle .selector-inner").hide())},onNatRouteSelect:function(){this.setNatRouteSelect(!this.getNatRouteSelect())},getRotueAdSelect:function(){return this.$(".route-advertisement-toggle .selector").hasClass("selected")},getNetGatewaySelect:function(){return this.$(".net-gateway-toggle .selector").hasClass("selected")},setNetGatewaySelect:function(state){state?(this.$(".net-gateway-toggle .selector").addClass("selected"),
this.$(".net-gateway-toggle .selector-inner").show()):(this.$(".net-gateway-toggle .selector").removeClass("selected"),this.$(".net-gateway-toggle .selector-inner").hide())},onNetGatewaySelect:function(){this.setNetGatewaySelect(!this.getNetGatewaySelect())},setRotueAdSelect:function(state){state?(this.$(".route-advertisement-toggle .selector").addClass("selected"),this.$(".route-advertisement-toggle .selector-inner").show(),this.$(".route-advertisement").slideDown(window.slideTime)):(this.$(".route-advertisement-toggle .selector").removeClass("selected"),this.$(".route-advertisement-toggle .selector-inner").hide(),this.$(".route-advertisement").slideUp(window.slideTime))},onRotueAdSelect:function(){this.setRotueAdSelect(!this.getRotueAdSelect())},onOk:function(){this.setLoading("Adding route...");var model=new ServerRouteModel,network=this.$(".route-network input").val(),comment=this.$(".route-comment input").val(),server=this.$(".server select").val(),nat=this.getNatRouteSelect(),natInterface=this.$(".nat-interface input").val(),netGateway=this.getNetGatewaySelect(),routeAd=this.getRotueAdSelect(),vpcRegion=null,vpcId=null;routeAd&&(vpcRegion=this.$(".vpc-region select").val(),vpcId=this.$(".vpc-id select").val()),lastServer=server,model.save({network:network,comment:comment,nat:nat,nat_interface:natInterface,net_gateway:netGateway,vpc_region:vpcRegion,vpc_id:vpcId,server:server},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddRouteView}),define("text!templates/modalAttachOrg.html",[],function(){return'<div class="org form-group">\n  <label>Select an organization</label>\n  <select class="form-control">\n    <% _.each(orgs, function(org) { %>\n      <option value="<%- org.id %>"><%- org.name %></option>\n    <% }); %>\n  </select>\n</div>\n<div class="server form-group">\n  <label>Select a server</label>\n  <select class="form-control">\n    <% _.each(servers, function(server) { %>\n      <option value="<%- server.id %>" <%= (lastServer === server.id) ? \'selected\' : \'\' %>><%- server.name %></option>\n    <% }); %>\n  </select>\n</div>\n'}),define("views/modalAttachOrg",["jquery","underscore","backbone","models/serverOrg","views/modal","text!templates/modalAttachOrg.html"],function($,_,Backbone,ServerOrgModel,ModalView,modalAttachOrgTemplate){"use strict";var lastServer,ModalAttachOrgView=ModalView.extend({className:"attach-org-modal",template:_.template(modalAttachOrgTemplate),title:"Attach Organization",okText:"Attach",initialize:function(options){this.orgs=options.orgs,ModalAttachOrgView.__super__.initialize.call(this)},body:function(){return this.template({orgs:this.orgs.toJSON(),servers:this.collection.toJSON(),lastServer:lastServer})},onOk:function(){this.setLoading("Attaching organization...");var model=new ServerOrgModel,server=this.$(".server select").val();lastServer=server,model.save({id:this.$(".org select").val(),server:server},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAttachOrgView}),define("text!templates/modalAttachHost.html",[],function(){return'<div class="host form-group">\n  <label>Select a host</label>\n  <select class="form-control">\n    <% _.each(hosts, function(host) { %>\n      <option value="<%- host.id %>"><%- host.name %></option>\n    <% }); %>\n  </select>\n</div>\n<div class="server form-group">\n  <label>Select a server</label>\n  <select class="form-control">\n    <% _.each(servers, function(server) { %>\n      <option value="<%- server.id %>" <%= (lastServer === server.id) ? \'selected\' : \'\' %>><%- server.name %></option>\n    <% }); %>\n  </select>\n</div>\n'}),define("views/modalAttachHost",["jquery","underscore","backbone","models/serverHost","views/modal","text!templates/modalAttachHost.html"],function($,_,Backbone,ServerHostModel,ModalView,modalAttachHostTemplate){"use strict";var lastServer,ModalAttachHostView=ModalView.extend({className:"attach-host-modal",template:_.template(modalAttachHostTemplate),title:"Attach Host",okText:"Attach",initialize:function(options){this.hosts=options.hosts,ModalAttachHostView.__super__.initialize.call(this),this.setAlert("warning","Adding a new host will require users that are not using an offical Pritunl client to download their updated profile again before being able to connect. Users using an offical Pritunl client will be able sync the changes.")},body:function(){return this.template({hosts:this.hosts.toJSON(),servers:this.collection.toJSON(),lastServer:lastServer})},onOk:function(){this.setLoading("Attaching host...");var model=new ServerHostModel,server=this.$(".server select").val();lastServer=server,model.save({id:this.$(".host select").val(),server:server},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAttachHostView}),define("text!templates/modalAttachLink.html",[],function(){return'<div class="server form-group">\n  <label>Select first server</label>\n  <select class="form-control">\n    <% _.each(servers, function(server) { %>\n      <option value="<%- server.id %>" <%= server.id === servers[1].id ? \'style="display: none;"\' : \'\' %> <%= (lastServer === server.id) ? \'selected\' : \'\' %>><%- server.name %></option>\n    <% }); %>\n  </select>\n</div>\n<div class="link form-group">\n  <label>Select second server</label>\n  <select class="form-control">\n    <% _.each(servers, function(server) { %>\n      <option value="<%- server.id %>" <%= server.id === servers[0].id ? \'style="display: none;"\' : \'\' %> <%= (server.id === servers[1].id) ? \'selected\' : \'\' %>><%- server.name %></option>\n    <% }); %>\n  </select>\n</div>\n<div class="use-local-toggle toggle-form form-group">\n  <label>Use local address</label>\n  <div class="selector no-select" data-toggle="tooltip" title="Use the hosts local address when linking servers">\n    <span class="selector-inner glyphicon glyphicon-ok"></span>\n  </div>\n</div>\n'}),define("views/modalAttachLink",["jquery","underscore","backbone","models/serverLink","views/modal","text!templates/modalAttachLink.html"],function($,_,Backbone,ServerLinkModel,ModalView,modalAttachLinkTemplate){"use strict";var lastServer,ModalAttachLinkView=ModalView.extend({className:"attach-link-modal",template:_.template(modalAttachLinkTemplate),title:"Link Servers",okText:"Link",events:function(){return _.extend({"change .server select, .link select":"onSelectChange","click .use-local-toggle":"onUseLocalSelect"},ModalAttachLinkView.__super__.events)},body:function(){return this.template({servers:this.collection.toJSON(),lastServer:lastServer})},onSelectChange:function(){var server=this.$(".server select").val(),link=this.$(".link select").val();this.$(".server select option, .link select option").show(),this.$('.server select option[value="'+link+'"]').hide(),this.$('.link select option[value="'+server+'"]').hide()},getUseLocalSelect:function(){return this.$(".use-local-toggle .selector").hasClass("selected")},setUseLocalSelect:function(state){state?(this.$(".use-local-toggle .selector").addClass("selected"),this.$(".use-local-toggle .selector-inner").show()):(this.$(".use-local-toggle .selector").removeClass("selected"),this.$(".use-local-toggle .selector-inner").hide())},onUseLocalSelect:function(){this.setUseLocalSelect(!this.getUseLocalSelect())},onOk:function(){var useLocal=this.getUseLocalSelect();this.setLoading("Attaching link...");var model=new ServerLinkModel,server=this.$(".server select").val();lastServer=server,model.save({id:this.$(".link select").val(),server:server,use_local_address:useLocal},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAttachLinkView}),define("text!templates/serversList.html",[],function(){return'<div class="servers-list-header">\n  <h1 class="servers-list-title title">Servers</h1>\n  <div class="servers-list-buttons">\n    <button type="button" class="header-button servers-add-server btn btn-primary">Add Server</button>\n    <button type="button" class="header-button servers-add-route btn btn-primary">Add Route</button>\n    <button type="button" class="header-button servers-attach-org btn btn-primary">Attach Organization</button>\n    <button type="button" class="header-button servers-attach-host btn btn-primary">Attach Host</button>\n    <button type="button" class="header-button servers-link-server btn btn-primary">Link Server</button>\n  </div>\n</div>\n<div class="alerts-container"></div>\n<div class="servers-list-container">\n  <div class="no-servers">\n    There are no servers on this host.\n  </div>\n</div>\n<button type="button" class="prev-page btn btn-primary btn-sm">Previous Page</button>\n<button type="button" class="next-page btn btn-primary btn-sm">Next Page</button>\n<div class="pages no-select">\n  <div class="links">\n    <a class="link first">First</a>\n    <a class="link last">Last</a>\n  </div>\n</div>\n'}),define("views/serversList",["jquery","underscore","backbone","models/status","collections/server","collections/org","collections/host","views/list","views/alert","views/serversListItem","views/modalAddServer","views/modalAddRoute","views/modalAttachOrg","views/modalAttachHost","views/modalAttachLink","text!templates/serversList.html"],function($,_,Backbone,StatusModel,ServerCollection,OrgCollection,HostCollection,ListView,AlertView,ServersListItemView,ModalAddServerView,ModalAddRouteView,ModalAttachOrgView,ModalAttachHostView,ModalAttachLinkView,serversListTemplate){"use strict";var ServersListView=ListView.extend({className:"servers-list",listContainer:".servers-list-container",template:_.template(serversListTemplate),listErrorMsg:"Failed to load servers, server error occurred.",events:{"click .prev-page":"prevPage","click .next-page":"nextPage","click .link.first":"firstPage","click .link.last":"lastPage","click .servers-add-server":"onAddServer","click .servers-add-route":"onAddRoute","click .servers-attach-org":"onAttachOrg","click .servers-attach-host":"onAttachHost","click .servers-link-server":"onLinkServer"},initialize:function(){this.collection=new ServerCollection,this.servers=new ServerCollection,this.orgs=new OrgCollection,this.hosts=new HostCollection,this.statusModel=new StatusModel,this.listenTo(window.events,"servers_updated",this.update),this.listenTo(window.events,"servers_updated",this.updateServers),this.listenTo(window.events,"organizations_updated",this.updateOrgs),this.listenTo(window.events,"hosts_updated",this.updateHosts),ServersListView.__super__.initialize.call(this)},prevPage:function(){this.collection.prevPage(),this.update()},nextPage:function(){this.collection.nextPage(),this.update()},firstPage:function(){this.collection.setPage(0),this.update()},lastPage:function(){this.collection.setPage(this.collection.getPageTotal()),this.update()},updateServers:function(callback){this.servers.fetch({success:function(){callback&&callback()}.bind(this),error:function(){this.servers.reset();var alertView=new AlertView({type:"danger",message:"Failed to load servers, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),callback&&callback()}.bind(this)})},updateOrgs:function(callback){this.orgs.fetch({success:function(){callback&&callback()}.bind(this),error:function(){this.orgs.reset();var alertView=new AlertView({type:"danger",message:"Failed to load organizations, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),callback&&callback()}.bind(this)})},updateHosts:function(callback){this.hosts.fetch({success:function(){callback&&callback()}.bind(this),error:function(){this.links.reset();var alertView=new AlertView({type:"danger",message:"Failed to load hosts, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),callback&&callback()}.bind(this)})},onAddServer:function(){this.servers.models.length?this._addServer():this.updateServers(this._addServer.bind(this))},_addServer:function(){this.$(".servers-add-server").attr("disabled","disabled"),this.statusModel.fetch({success:function(){var i,usedNetworks=[],usedPorts=[],usedInterfaces=[];for(i=0;i<this.servers.models.length;i++)usedNetworks.push(this.servers.models[i].get("network")),usedPorts.push(this.servers.models[i].get("port")),usedInterfaces.push(this.servers.models[i].get("interface"));var modal=new ModalAddServerView({publicIp:this.statusModel.get("public_ip"),localNetworks:this.statusModel.get("local_networks"),usedNetworks:usedNetworks,usedPorts:usedPorts,usedInterfaces:usedInterfaces});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added server.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal),this.$(".servers-add-server").removeAttr("disabled")}.bind(this),error:function(){var alertView=new AlertView({type:"danger",message:"Failed to load server information, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView),this.$(".servers-add-server").removeAttr("disabled")}.bind(this)})},onAddRoute:function(){this.servers.models.length?this._addRoute():this.updateServers(this._addRoute.bind(this))},_addRoute:function(){var modal=new ModalAddRouteView({collection:this.servers});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added route.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onAttachOrg:function(){var callback=function(){this.orgs.models.length?this._attachOrg():this.updateOrgs(this._attachOrg.bind(this))}.bind(this);this.servers.models.length?callback():this.updateServers(callback)},_attachOrg:function(){if(!this.orgs.length){var alertView=new AlertView({type:"danger",message:"No organizations exists, an organization must be created before attaching.",dismissable:!0});return $(".alerts-container").append(alertView.render().el),void this.addView(alertView)}var modal=new ModalAttachOrgView({orgs:this.orgs,collection:this.servers});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully attached organization.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onAttachHost:function(){var callback=function(){this.hosts.models.length?this._attachHost():this.updateHosts(this._attachHost.bind(this))}.bind(this);this.servers.models.length?callback():this.updateServers(callback)},_attachHost:function(){if(!this.hosts.length){var alertView=new AlertView({type:"danger",message:"No hosts exists, a host must be created before attaching.",dismissable:!0});return $(".alerts-container").append(alertView.render().el),void this.addView(alertView)}var modal=new ModalAttachHostView({hosts:this.hosts,collection:this.servers});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully attached host.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onLinkServer:function(){this.servers.models.length?this._linkServer():this.updateServers(this._linkServer.bind(this))},_linkServer:function(){if(this.servers.length<2){var alertView=new AlertView({type:"danger",message:"Two servers must be created before creating a link.",dismissable:!0});return $(".alerts-container").append(alertView.render().el),void this.addView(alertView)}var modal=new ModalAttachLinkView({collection:this.servers});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully linked server.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},buildItem:function(model){var modelView=new ServersListItemView({model:model});return this.listenTo(modelView,"select",this.onSelect),modelView},getOptions:function(){return{page:this.collection.getPage()}},addPageElem:function(page,curPage){var pageElem=$('<a class="link page">'+(page+1)+"</a>");this.$(".pages .link.last").before(pageElem),page===curPage&&pageElem.addClass("current"),pageElem.one("click",function(){this.collection.setPage(page),this.update()}.bind(this))},resetItems:function(views){var curPage=this.collection.getPage(),pageTotal=this.collection.getPageTotal();if(views.length?(this.$(".servers-add-route").removeAttr("disabled"),this.$(".servers-attach-org").removeAttr("disabled"),this.$(".servers-attach-host").removeAttr("disabled"),this.$(".servers-link-server").removeAttr("disabled"),this.$(".no-servers").slideUp(window.slideTime)):(this.$(".servers-add-route").attr("disabled","disabled"),this.$(".servers-attach-org").attr("disabled","disabled"),this.$(".servers-attach-host").attr("disabled","disabled"),this.$(".servers-link-server").attr("disabled","disabled"),this.$(".no-servers").slideDown(window.slideTime)),this.collection.getPage()?(this.$(".pages").removeClass("padded-left"),this.$(".prev-page").show()):(this.$(".pages").addClass("padded-left"),this.$(".prev-page").hide()),this.collection.isLastPage()?(this.$(".pages").addClass("padded-right"),this.$(".next-page").hide()):(this.$(".pages").removeClass("padded-right"),this.$(".next-page").show()),2>pageTotal)this.$(".pages").hide();else{this.$(".pages").show();var i,page=Math.max(0,curPage-7);for(this.$(".pages .link.page").remove(),this.$(".pages .link.first").removeClass("current"),this.$(".pages .link.last").removeClass("current"),i=0;15>i&&(page>0&&this.addPageElem(page,curPage),page+=1,!(page>pageTotal-1));i++);0===curPage?this.$(".pages .link.first").addClass("current"):curPage===pageTotal&&this.$(".pages .link.last").addClass("current")}}});return ServersListView}),define("views/servers",["jquery","underscore","backbone","views/serversList"],function($,_,Backbone,ServersListView){"use strict";var ServersView=Backbone.View.extend({className:"servers container",initialize:function(){this.serversList=new ServersListView,this.addView(this.serversList)},render:function(){return this.$el.append(this.serversList.render().el),this}});return ServersView}),define("models/hostUsage",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var HostUsageModel=Backbone.Model.extend({defaults:{cpu:null,mem:null},url:function(){return"/host/"+this.get("id")+"/usage/"+this.getPeriod()},getPeriod:function(){return this.period},setPeriod:function(period){this.period=period},getGraphData:function(type){var i,points=[],data=this.get(type);if(!data)return null;for(i=0;i<data.length;i++)points.push({x:data[i][0],y:data[i][1]});return points}});return HostUsageModel}),define("text!templates/hostUsage.html",[],function(){return'<div class="host-graph-cpu"></div>\n<div class="host-graph-mem"></div>\n'}),define("views/hostUsage",["jquery","underscore","backbone","rickshaw","models/hostUsage","views/alert","text!templates/hostUsage.html"],function($,_,Backbone,Rickshaw,HostUsageModel,AlertView,hostUsageTemplate){"use strict";var UsageHover=Rickshaw.Class.create(Rickshaw.Graph.HoverDetail,{initialize:function(args){_.extend(args,{xFormatter:function(x){return window.formatTime(x)+"#####"},yFormatter:function(y){return(100*y).toFixed(1)+"%"},onRender:function(args){$(this.graph.element).find(".detail .x_label").html($("<span>").text(args.formattedXValue.replace("#####","")+" ("+args.detail[0].series.period+")").html()+"<br>"+$("<span>").text(args.detail[0].name+": "+args.detail[0].formattedYValue).html())}}),Rickshaw.Graph.HoverDetail.prototype.initialize.call(this,args)}}),HostUsageView=Backbone.View.extend({template:_.template(hostUsageTemplate),initialize:function(options){this.model=new HostUsageModel({id:options.host}),this.model.setPeriod("1m"),this.state=!1,this.interval=setInterval(this.update.bind(this),15e3),this.update(),this.bindId=window.uuid(),this.width=this.$el.width(),$(window).bind("resize."+this.bindId,this.onResize.bind(this))},deinitialize:function(){clearInterval(this.interval),$(window).unbind("resize."+this.bindId)},onResize:function(){var width=this.$el.width();width!==this.width&&(this.width=width,this.$el.empty(),this.render())},render:function(){return this.$el.html(this.template()),this.updateGraph(),this},update:function(){this.model.fetch({error:function(){var alertView=new AlertView({type:"danger",message:"Failed to load server bandwidth, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this),success:function(){this.$el.empty(),this.render()}.bind(this)})},setType:function(graphType){this.getType()!==graphType&&(this.graphType=graphType,"cpu"===graphType?(this.$(".host-graph-mem").hide(),this.$(".host-graph-cpu").show()):(this.$(".host-graph-cpu").hide(),this.$(".host-graph-mem").show()))},getType:function(){return this.graphType||"cpu"},setPeriod:function(period){this.getPeriod()!==period&&(this.model.setPeriod(period),this.update())},getPeriod:function(){return this.model.getPeriod()},updateGraph:function(){var cpuUsage=this.model.getGraphData("cpu"),memUsage=this.model.getGraphData("mem");if(cpuUsage&&memUsage){"1m"===this.getPeriod()&&(cpuUsage.pop(),memUsage.pop());var width=this.$el.width(),height=this.$el.height()-2,graphCpu=new Rickshaw.Graph({element:this.$(".host-graph-cpu")[0],width:width,height:height,renderer:"area",stroke:!0,max:1,series:[{period:this.getPeriod(),name:"CPU Usage",color:"rgba(44, 127, 184, 0.05)",stroke:"#2c7fb8",data:cpuUsage}]});graphCpu.render(),"cpu"===this.getType()?this.$(".host-graph-cpu").show():this.$(".host-graph-cpu").hide();var xAxisRecv=new Rickshaw.Graph.Axis.Time({graph:graphCpu});xAxisRecv.render(),new UsageHover({graph:graphCpu});var graphMem=new Rickshaw.Graph({element:this.$(".host-graph-mem")[0],width:width,height:height,renderer:"area",stroke:!0,max:1,series:[{period:this.getPeriod(),name:"Memory Usage",color:"rgba(44, 127, 184, 0.05)",stroke:"#2c7fb8",data:memUsage}]});graphMem.render(),"mem"===this.getType()?this.$(".host-graph-mem").show():this.$(".host-graph-mem").hide();var xAxisSent=new Rickshaw.Graph.Axis.Time({graph:graphMem});xAxisSent.render(),new UsageHover({graph:graphMem})}}});return HostUsageView}),define("text!templates/modalDeleteHost.html",[],function(){return'<div class="form-group">\n  <label>Enter the name of the host to confirm</label>\n  <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of host" autofocus>\n</div>\n'}),define("views/modalDeleteHost",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDeleteHost.html"],function($,_,Backbone,ModalView,AlertView,modalDeleteOrgTemplate){"use strict";var ModalDeleteHostView=ModalView.extend({className:"delete-host-modal",template:_.template(modalDeleteOrgTemplate),title:"Delete Host",okText:"Delete",inputMatch:!0,initialize:function(){ModalDeleteHostView.__super__.initialize.call(this),this.inputMatchText=this.model.get("name")},body:function(){return this.template()},onOk:function(){this.setLoading("Deleting host..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDeleteHostView}),define("text!templates/modalHostSettings.html",[],function(){return'<div class="form-group name">\n  <label>Name</label>\n  <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of host" value="<%- name %>" autofocus>\n</div>\n<div class="form-group public-address">\n  <label>Public Address</label>\n  <input type="text" class="form-control" placeholder="Enter public address" data-toggle="tooltip" title="Public IP address or domain name of the host" value="<%- public_address %>">\n</div>\n<div class="form-group public-address6">\n  <label>Public IPv6 Address</label>\n  <input type="text" class="form-control" placeholder="Enter public IPv6 address" data-toggle="tooltip" title="Public IPv6 address or domain name of the host" value="<%- public_address6 %>">\n</div>\n<div class="form-group routed-subnet6">\n  <label>Routed IPv6 Subnet</label>\n  <input type="text" class="form-control" placeholder="Enter routed subnet" data-toggle="tooltip" title="IPv6 subnet that is routed to the host, must be at least /64" value="<%- routed_subnet6 %>">\n</div>\n<div class="form-group local-address">\n  <label>Local Address</label>\n  <input type="text" class="form-control" placeholder="Enter local address" data-toggle="tooltip" title="Local network address for server" value="<%- local_address %>">\n</div>\n<div class="form-group local-address6">\n  <label>Local IPv6 Address</label>\n  <input type="text" class="form-control" placeholder="Enter local IPv6 address" data-toggle="tooltip" title="Local IPv6 network address for server" value="<%- local_address6 %>">\n</div>\n<div class="advanced">\n  <div class="form-group availability-group">\n    <label>Availability Group</label>\n    <input type="text" class="form-control" placeholder="Enter availability group" data-toggle="tooltip" title="Availability group for host. Replicated servers will only be replicated to a group of hosts in the same availability group" value="<%- availability_group %>">\n  </div>\n  <div class="form-group link-address">\n    <label>Link Address</label>\n    <input type="text" class="form-control" placeholder="Enter link address" data-toggle="tooltip" title="IP address or domain used when linked servers connect to a linked server on this host" value="<%- link_address %>">\n  </div>\n  <div class="form-group sync-address">\n    <label>Sync Address</label>\n    <input type="text" class="form-control" placeholder="Enter sync address" data-toggle="tooltip" title="IP address or domain used by users when syncing configuration. This is needed when using a load balancer" value="<%- sync_address %>">\n  </div>\n  <div class="form-group instance-id">\n    <label>AWS Instance ID</label>\n    <input type="text" class="form-control" placeholder="Enter AWS instance ID" data-toggle="tooltip" title="ID of AWS instance. Only available on AWS." value="<%- instance_id %>">\n  </div>\n</div>\n'}),define("views/modalHostSettings",["jquery","underscore","backbone","views/modal","text!templates/modalHostSettings.html"],function($,_,Backbone,ModalView,modalHostSettingsTemplate){"use strict";var ModalHostSettingsView=ModalView.extend({className:"host-settings-modal",template:_.template(modalHostSettingsTemplate),title:"Host Settings",okText:"Save",hasAdvanced:!0,body:function(){return this.template(this.model.toJSON())},onOk:function(){var name=this.$(".name input").val()||null,publicAddress=this.$(".public-address input").val()||null,publicAddress6=this.$(".public-address6 input").val()||null,routedSubnet6=this.$(".routed-subnet6 input").val()||null,localAddress=this.$(".local-address input").val()||null,localAddress6=this.$(".local-address6 input").val()||null,linkAddress=this.$(".link-address input").val()||null,syncAddress=this.$(".sync-address input").val()||null,availabilityGroup=this.$(".availability-group input").val()||null,instanceId=this.$(".instance-id input").val()||null;this.setLoading("Saving host..."),this.model.save({name:name,public_address:publicAddress,public_address6:publicAddress6,routed_subnet6:routedSubnet6,local_address:localAddress,local_address6:localAddress6,link_address:linkAddress,sync_address:syncAddress,availability_group:availabilityGroup,instance_id:instanceId},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalHostSettingsView}),define("text!templates/hostsListItem.html",[],function(){return'<div class="host-header">\n  <div class="host-label label label-danger toggle-hidden no-select">Host</div><h2 class="host-title title"><a class="no-select" data-toggle="tooltip" title="Click to open host settings"></a><span class="host-id title">(<%- id %>)</span></h2>\n  <button type="button" class="host-del btn btn-danger btn-sm" data-toggle="tooltip" title="Host must be offline to delete">Delete Host</button>\n</div>\n<div class="host-info">\n  <div class="status-items">\n    <div class="status-item host-status">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-dashboard"></span>\n        <span>Status</span>\n      </h3>\n      <div class="status-text title"></div>\n    </div>\n    <div class="status-item host-uptime">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-time"></span>\n        <span>Uptime</span>\n      </h3>\n      <div class="status-text title"></div>\n    </div>\n    <div class="status-item host-users">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-user"></span>\n        <span>Users</span>\n      </h3>\n      <div class="status-text title">\n        <span class="status-num"></span> users online\n      </div>\n    </div>\n    <div class="status-item host-public-address">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-globe"></span>\n        <span>Public IP</span>\n      </h3>\n      <div class="status-text title"></div>\n    </div>\n    <div class="status-item host-local-address last">\n      <h3 class="status-title title">\n        <span class="status-icon glyphicon glyphicon-transfer"></span>\n        <span>Local IP</span>\n      </h3>\n      <div class="status-text title"></div>\n    </div>\n  </div>\n  <div class="host-graph">\n    <h3 class="host-usage-title title">\n      <button type="button" class="host-cpu-usage-btn btn btn-primary btn-xs">CPU Usage</button>\n      <button type="button" class="host-mem-usage-btn btn btn-default btn-xs">Memory Usage</button>\n      <button type="button" class="graph-period graph-1d btn btn-default btn-xs">365 Days</button>\n      <button type="button" class="graph-period graph-2h btn btn-default btn-xs">30 Days</button>\n      <button type="button" class="graph-period graph-30m btn btn-default btn-xs">7 Days</button>\n      <button type="button" class="graph-period graph-5m btn btn-default btn-xs">24 Hours</button>\n      <button type="button" class="graph-period graph-1m btn btn-primary btn-xs">6 Hours</button>\n    </h3>\n    <div class="host-graph-viewer"></div>\n  </div>\n</div>\n'}),define("views/hostsListItem",["jquery","underscore","backbone","views/alert","views/hostUsage","views/modalDeleteHost","views/modalHostSettings","text!templates/hostsListItem.html"],function($,_,Backbone,AlertView,HostUsageView,ModalDeleteHostView,ModalHostSettingsView,hostsListItemTemplate){"use strict";var HostListItemView=Backbone.View.extend({className:"host",template:_.template(hostsListItemTemplate),events:{"click .host-title a":"onSettings","click .host-del":"onDelete","click .host-cpu-usage-btn":"onCpuUsageGraph",
"click .host-mem-usage-btn":"onMemUsageGraph","click .graph-period":"onGraphPeriod","click .toggle-hidden":"onToggleHidden"},initialize:function(){this.hostUsageView=new HostUsageView({host:this.model.get("id")}),this.addView(this.hostUsageView),setTimeout(function(){window.disableInterval||(this.uptimer=setInterval(this._updateTime.bind(this),1e3))}.bind(this),1e3)},deinitialize:function(){clearInterval(this.uptimer)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.update(),this.$(".host-graph-viewer").append(this.hostUsageView.render().el),this},update:function(){var name=this.model.get("name"),hostname=this.model.get("hostname");hostname&&(name+=" ("+hostname+")"),this.$(".host-title a").text(name),this.$(".host-status .status-text").text(this.model.get("status").charAt(0).toUpperCase()+this.model.get("status").slice(1)),this.model.get("uptime")?this.$(".host-uptime .status-text").text(window.formatUptime(this.model.get("uptime"))):this.$(".host-uptime .status-text").text("-"),this.$(".host-users .status-num").text(this.model.get("users_online")+"/"+this.model.get("user_count")),"offline"===this.model.get("status")?this.$(".host-del").removeAttr("disabled"):this.$(".host-del").attr("disabled","disabled"),this.$(".host-public-address .status-text").text(this.model.get("public_address")),this.$(".host-local-address .status-text").text(this.model.get("local_address"))},onCpuUsageGraph:function(){this.$(".host-mem-usage-btn").removeClass("btn-primary"),this.$(".host-mem-usage-btn").addClass("btn-default"),this.$(".host-cpu-usage-btn").removeClass("btn-default"),this.$(".host-cpu-usage-btn").addClass("btn-primary"),this.hostUsageView.setType("cpu")},onMemUsageGraph:function(){this.$(".host-cpu-usage-btn").removeClass("btn-primary"),this.$(".host-cpu-usage-btn").addClass("btn-default"),this.$(".host-mem-usage-btn").removeClass("btn-default"),this.$(".host-mem-usage-btn").addClass("btn-primary"),this.hostUsageView.setType("mem")},onSettings:function(){this.$(".host-title a").addClass("disabled");var modal=new ModalHostSettingsView({model:this.model.clone()});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully saved host settings.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal),this.$(".host-title a").removeClass("disabled")},onGraphPeriod:function(evt){this.$(".graph-period").removeClass("btn-primary"),this.$(".graph-period").addClass("btn-default"),$(evt.target).removeClass("btn-default"),$(evt.target).addClass("btn-primary"),$(evt.target).hasClass("graph-1m")?this.hostUsageView.setPeriod("1m"):$(evt.target).hasClass("graph-5m")?this.hostUsageView.setPeriod("5m"):$(evt.target).hasClass("graph-30m")?this.hostUsageView.setPeriod("30m"):$(evt.target).hasClass("graph-2h")?this.hostUsageView.setPeriod("2h"):$(evt.target).hasClass("graph-1d")&&this.hostUsageView.setPeriod("1d")},onDelete:function(evt){var model=this.model.clone();if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDeleteHostView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully deleted host.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},_updateTime:function(){this.model.get("uptime")&&(this.model.set({uptime:this.model.get("uptime")+1}),this.$(".host-uptime .status-text").text(window.formatUptime(this.model.get("uptime"))))},onToggleHidden:function(evt){(evt.ctrlKey||evt.shiftKey)&&(this.$el.hasClass("show-hidden")?(this.$(".toggle-hidden").removeClass("label-warning"),this.$(".toggle-hidden").addClass("label-danger"),this.$el.removeClass("show-hidden")):(this.$(".toggle-hidden").addClass("label-warning"),this.$(".toggle-hidden").removeClass("label-danger"),this.$el.addClass("show-hidden")))}});return HostListItemView}),define("text!templates/hostsList.html",[],function(){return'<div class="hosts-list-header">\n  <h1 class="hosts-list-title title">Hosts</h1>\n  <div class="hosts-list-buttons">\n  </div>\n</div>\n<div class="alerts-container"></div>\n<div class="hosts-list-container">\n</div>\n<button type="button" class="prev-page btn btn-primary btn-sm">Previous Page</button>\n<button type="button" class="next-page btn btn-primary btn-sm">Next Page</button>\n<div class="pages no-select">\n  <div class="links">\n    <a class="link first">First</a>\n    <a class="link last">Last</a>\n  </div>\n</div>\n'}),define("views/hostsList",["jquery","underscore","backbone","collections/host","views/list","views/alert","views/hostsListItem","text!templates/hostsList.html"],function($,_,Backbone,HostCollection,ListView,AlertView,HostsListItemView,hostsListTemplate){"use strict";var HostsListView=ListView.extend({className:"hosts-list",listContainer:".hosts-list-container",template:_.template(hostsListTemplate),listErrorMsg:"Failed to load hosts, server error occurred.",events:{"click .prev-page":"prevPage","click .next-page":"nextPage","click .link.first":"firstPage","click .link.last":"lastPage"},initialize:function(){this.collection=new HostCollection,this.listenTo(window.events,"hosts_updated",this.update),HostsListView.__super__.initialize.call(this)},prevPage:function(){this.collection.prevPage(),this.update()},nextPage:function(){this.collection.nextPage(),this.update()},firstPage:function(){this.collection.setPage(0),this.update()},lastPage:function(){this.collection.setPage(this.collection.getPageTotal()),this.update()},buildItem:function(model){var modelView=new HostsListItemView({model:model});return this.listenTo(modelView,"select",this.onSelect),modelView},getOptions:function(){return{page:this.collection.getPage()}},addPageElem:function(page,curPage){var pageElem=$('<a class="link page">'+(page+1)+"</a>");this.$(".pages .link.last").before(pageElem),page===curPage&&pageElem.addClass("current"),pageElem.one("click",function(){this.collection.setPage(page),this.update()}.bind(this))},resetItems:function(views){var curPage=this.collection.getPage(),pageTotal=this.collection.getPageTotal();if(views.length?(this.$(".servers-attach-org").removeAttr("disabled"),this.$(".no-servers").slideUp(window.slideTime)):(this.$(".servers-attach-org").attr("disabled","disabled"),this.$(".no-servers").slideDown(window.slideTime)),this.collection.getPage()?(this.$(".pages").removeClass("padded-left"),this.$(".prev-page").show()):(this.$(".pages").addClass("padded-left"),this.$(".prev-page").hide()),this.collection.isLastPage()?(this.$(".pages").addClass("padded-right"),this.$(".next-page").hide()):(this.$(".pages").removeClass("padded-right"),this.$(".next-page").show()),2>pageTotal)this.$(".pages").hide();else{this.$(".pages").show();var i,page=Math.max(0,curPage-7);for(this.$(".pages .link.page").remove(),this.$(".pages .link.first").removeClass("current"),this.$(".pages .link.last").removeClass("current"),i=0;15>i&&(page>0&&this.addPageElem(page,curPage),page+=1,!(page>pageTotal-1));i++);0===curPage?this.$(".pages .link.first").addClass("current"):curPage===pageTotal&&this.$(".pages .link.last").addClass("current")}}});return HostsListView}),define("views/hosts",["jquery","underscore","backbone","views/hostsList"],function($,_,Backbone,HostsListView){"use strict";var HostsView=Backbone.View.extend({className:"hosts container",initialize:function(){this.hostsList=new HostsListView,this.addView(this.hostsList)},render:function(){return this.$el.append(this.hostsList.render().el),this}});return HostsView}),define("models/link",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LinkModel=Backbone.Model.extend({defaults:{id:null,name:null,status:null,locations:null,timeout:null},url:function(){var url="/link";return this.get("id")&&(url+="/"+this.get("id")),url}});return LinkModel}),define("collections/link",["jquery","underscore","backbone","models/link"],function($,_,Backbone,LinkModel){"use strict";var LinkCollection=Backbone.Collection.extend({model:LinkModel,initialize:function(){this.page=window.link_page||0},url:function(){return"/link"},parse:function(response){return void 0!==response.page?(this.setPage(response.page),this.setPageTotal(response.page_total),response.links):response},setPage:function(page){this.page=page,window.link_page=page},getPage:function(){return this.page},nextPage:function(){this.page+=1},prevPage:function(){this.page-=1},setPageTotal:function(total){this.pageTotal=total},getPageTotal:function(){return this.pageTotal},isLastPage:function(){return this.page===this.pageTotal}});return LinkCollection}),define("models/linkLocation",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LinkLocationModel=Backbone.Model.extend({defaults:{id:null,link_id:null,name:null,status:null,location:null,hosts:null,routes:null,excludes:null},url:function(){var url="/link/"+this.get("link_id")+"/location";return this.get("id")&&(url+="/"+this.get("id")),url}});return LinkLocationModel}),define("collections/linkLocation",["jquery","underscore","backbone","models/linkLocation"],function($,_,Backbone,LinkLocationModel){"use strict";var LinkLocationCollection=Backbone.Collection.extend({model:LinkLocationModel,initialize:function(options){this.link=options.link},url:function(){return"/link/"+this.link+"/location"}});return LinkLocationCollection}),define("models/linkRoute",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LinkRouteModel=Backbone.Model.extend({defaults:{id:null,link_id:null,location_id:null,exclude_id:null},url:function(){var url="/link/"+this.get("link_id")+"/location/"+this.get("location_id")+"/route";return this.get("id")&&(url+="/"+this.get("id")),url}});return LinkRouteModel}),define("models/linkHost",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LinkHostModel=Backbone.Model.extend({defaults:{id:null,link_id:null,location_id:null,name:null,timeout:null,priority:null,"static":null,public_address:null,address6:null,version:null},url:function(){var url="/link/"+this.get("link_id")+"/location/"+this.get("location_id")+"/host";return this.get("id")&&(url+="/"+this.get("id")),url}});return LinkHostModel}),define("models/linkHostUri",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LinkHostUriModel=Backbone.Model.extend({defaults:{id:null,name:null,hostname:null,uri:null},url:function(){return"/link/"+this.get("link_id")+"/location/"+this.get("location_id")+"/host/"+this.get("id")+"/uri"}});return LinkHostUriModel}),define("models/linkHostConf",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LinkHostConfModel=Backbone.Model.extend({defaults:{id:null,name:null,hostname:null,conf:null},url:function(){return"/link/"+this.get("link_id")+"/location/"+this.get("location_id")+"/host/"+this.get("id")+"/conf"}});return LinkHostConfModel}),define("models/linkExclude",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var LinkExcludeModel=Backbone.Model.extend({defaults:{id:null,link_id:null,location_id:null,network:null},url:function(){var url="/link/"+this.get("link_id")+"/location/"+this.get("location_id")+"/exclude";return this.get("id")&&(url+="/"+this.get("id")),url}});return LinkExcludeModel}),define("text!templates/modalAddLocRoute.html",[],function(){return'<div class="form-group">\n  <div class="form-group network">\n    <label>Network</label>\n    <input type="text" class="form-control" placeholder="Enter network address" data-toggle="tooltip" title="Network address with subnet to route" autofocus>\n  </div>\n</div>\n'}),define("views/modalAddLocRoute",["jquery","underscore","backbone","models/linkRoute","views/modal","text!templates/modalAddLocRoute.html"],function($,_,Backbone,LinkRouteModel,ModalView,modalAddLocRouteTemplate){"use strict";var ModalAddLocRouteView=ModalView.extend({className:"add-location-route-modal",template:_.template(modalAddLocRouteTemplate),title:"Add Location Route",okText:"Add",initialize:function(options){this.link=options.link,this.location=options.location,ModalAddLocRouteView.__super__.initialize.call(this)},body:function(){return this.template()},onOk:function(){var network=this.$(".network input").val();if(!network)return void this.setAlert("danger","Network can not be empty.",".name");this.setLoading("Adding location route...");var model=new LinkRouteModel;model.save({link_id:this.link,location_id:this.location,network:network},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddLocRouteView}),define("text!templates/modalAddLocHost.html",[],function(){return'<div class="form-group">\n  <div class="form-group name">\n    <label>Name</label>\n    <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of location host" autofocus>\n  </div>\n  <div class="timeout form-group">\n    <label>Timeout</label>\n    <input type="number" class="form-control" placeholder="Enter timeout" data-toggle="tooltip" title="Optional, timeout for host" min="0" step="1" autocapitalize="off">\n  </div>\n  <div class="priority form-group">\n    <label>Priority</label>\n    <input type="number" class="form-control" placeholder="Enter priority" data-toggle="tooltip" title="Priority of host, available host with highest priority will selected" min="1" step="1" autocapitalize="off">\n  </div>\n</div>\n<div class="advanced form-group">\n  <div class="static-toggle toggle-form form-group">\n    <label>Static Host</label>\n    <div class="selector no-select" data-toggle="tooltip" title="Static host to run IPsec without the pritunl-link service">\n      <span class="selector-inner glyphicon glyphicon-ok"></span>\n    </div>\n  </div>\n  <div class="public-address form-group">\n    <label>Public Address</label>\n    <input type="text" class="form-control" placeholder="Enter public address" data-toggle="tooltip" title="Public address for static host. Hosts running pritunl-link will set the public address automatically" autofocus>\n  </div>\n</div>\n'}),define("views/modalAddLocHost",["jquery","underscore","backbone","models/linkHost","views/modal","text!templates/modalAddLocHost.html"],function($,_,Backbone,LinkHostModel,ModalView,modalAddLocHostTemplate){"use strict";var ModalAddLocHostView=ModalView.extend({className:"add-location-host-modal",template:_.template(modalAddLocHostTemplate),title:"Add Location Host",okText:"Add",hasAdvanced:!0,events:function(){return _.extend({"click .static-toggle":"onStaticSelect"},ModalAddLocHostView.__super__.events)},initialize:function(options){this.link=options.link,this.location=options.location,ModalAddLocHostView.__super__.initialize.call(this)},body:function(){return this.template()},getStaticSelect:function(){return this.$(".static-toggle .selector").hasClass("selected")},setStaticSelect:function(state){state?(this.$(".static-toggle .selector").addClass("selected"),this.$(".static-toggle .selector-inner").show()):(this.$(".static-toggle .selector").removeClass("selected"),this.$(".static-toggle .selector-inner").hide())},onStaticSelect:function(){this.setStaticSelect(!this.getStaticSelect())},onOk:function(){var name=this.$(".name input").val(),timeout=parseInt(this.$(".timeout input").val(),10)||null,priority=parseInt(this.$(".priority input").val(),10)||1,staticHost=this.getStaticSelect(),publicAddress=this.$(".public-address input").val();if(!name)return void this.setAlert("danger","Name can not be empty.",".name");this.setLoading("Adding location host...");var model=new LinkHostModel;model.save({link_id:this.link,location_id:this.location,name:name,timeout:timeout,priority:priority,"static":staticHost,public_address:publicAddress},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddLocHostView}),define("text!templates/modalAddLocExclude.html",[],function(){return'<div class="form-group">\n  <div class="form-group exclude-id">\n    <label>Exclude Location</label>\n    <select class="form-control" data-toggle="tooltip" title="Select location to exclude">\n      <% _.each(locations, function(location) { %>\n      <% if (location.id !== location_id) { %>\n      <option value="<%- location.id %>"><%- location.name %></option>\n      <% } %>\n      <% }); %>\n    </select>\n  </div>\n</div>\n'}),define("views/modalAddLocExclude",["jquery","underscore","backbone","models/linkExclude","views/modal","text!templates/modalAddLocExclude.html"],function($,_,Backbone,LinkExcludeModel,ModalView,modalAddLocExcludeTemplate){"use strict";var ModalAddLocExcludeView=ModalView.extend({className:"add-location-exclude-modal",template:_.template(modalAddLocExcludeTemplate),title:"Add Location Exclude",okText:"Add",initialize:function(options){this.link=options.link,this.location=options.location,this.locations=options.locations,ModalAddLocExcludeView.__super__.initialize.call(this)},body:function(){return this.template({location_id:this.location,locations:this.locations.toJSON()})},onOk:function(){var excludeId=this.$(".exclude-id select").val();if(!excludeId)return void this.setAlert("danger","Missing exclude.",".exclude-id");this.setLoading("Adding location exclude...");var model=new LinkExcludeModel;model.save({link_id:this.link,location_id:this.location,exclude_id:excludeId},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddLocExcludeView}),define("text!templates/modalDeleteLocRoute.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to remove the <b><%- network %></b> route?</label>\n</div>\n'}),define("views/modalDeleteLocRoute",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDeleteLocRoute.html"],function($,_,Backbone,ModalView,AlertView,modalDeleteLocRouteTemplate){"use strict";var ModalDeleteLocRouteView=ModalView.extend({className:"delete-location-route-modal",template:_.template(modalDeleteLocRouteTemplate),title:"Remove Location Route",okText:"Remove",body:function(){return this.template(this.model.toJSON())},onOk:function(){this.setLoading("Removing location route..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDeleteLocRouteView}),define("text!templates/modalModifyLocHost.html",[],function(){return'<div class="form-group">\n  <div class="form-group name">\n    <label>Name</label>\n    <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of location host" value="<%- name %>" autofocus>\n  </div>\n  <div class="timeout form-group">\n    <label>Timeout</label>\n    <input type="number" class="form-control" placeholder="Enter timeout" data-toggle="tooltip" title="Optional, timeout for host" min="0" step="1" value="<%- timeout || \'\' %>" autocapitalize="off">\n  </div>\n  <div class="priority form-group">\n    <label>Priority</label>\n    <input type="number" class="form-control" placeholder="Enter priority" data-toggle="tooltip" title="Priority of host, available host with highest priority will selected" min="1" step="1" value="<%- priority || 1 %>" autocapitalize="off">\n  </div>\n</div>\n<div class="advanced form-group">\n  <div class="static-toggle toggle-form form-group">\n    <label>Static Host</label>\n    <div class="selector <%= static ? \'selected\' : \'\' %> no-select" data-toggle="tooltip" title="Static host to run IPsec without the pritunl-link service">\n      <span class="selector-inner glyphicon glyphicon-ok"></span>\n    </div>\n  </div>\n  <div class="public-address form-group">\n    <label>Public Address</label>\n    <input type="text" class="form-control" placeholder="Enter public address" data-toggle="tooltip" title="Public address for static host. Hosts running pritunl-link will set the public address automatically" value="<%- public_address %>" autofocus>\n  </div>\n</div>\n'}),define("views/modalModifyLocHost",["jquery","underscore","backbone","views/modal","text!templates/modalModifyLocHost.html"],function($,_,Backbone,ModalView,modalModifyLocHostTemplate){"use strict";var ModalModifyLocationView=ModalView.extend({className:"modify-location-host-modal",template:_.template(modalModifyLocHostTemplate),title:"Modify Location Host",okText:"Save",hasAdvanced:!0,events:function(){return _.extend({"click .static-toggle":"onStaticSelect"},ModalModifyLocationView.__super__.events)},body:function(){return this.template(this.model.toJSON())},getStaticSelect:function(){return this.$(".static-toggle .selector").hasClass("selected")},setStaticSelect:function(state){state?(this.$(".static-toggle .selector").addClass("selected"),this.$(".static-toggle .selector-inner").show()):(this.$(".static-toggle .selector").removeClass("selected"),this.$(".static-toggle .selector-inner").hide())},onStaticSelect:function(){this.setStaticSelect(!this.getStaticSelect())},onOk:function(){var name=this.$(".name input").val(),timeout=parseInt(this.$(".timeout input").val(),10)||null,priority=parseInt(this.$(".priority input").val(),10)||1,staticHost=this.getStaticSelect(),publicAddress=this.$(".public-address input").val();return name?(this.setLoading("Saving location host..."),void this.model.save({name:name,timeout:timeout,priority:priority,"static":staticHost,public_address:publicAddress},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})):void this.setAlert("danger","Name can not be empty.",".name")}});return ModalModifyLocationView}),define("text!templates/modalLocHostUri.html",[],function(){return'<div class="uri-link form-group">\n  <label>Host URI Link</label>\n  <input type="text" class="form-control" readonly>\n</div>\n'}),define("views/modalLocHostUri",["jquery","underscore","backbone","views/modal","text!templates/modalLocHostUri.html"],function($,_,Backbone,ModalView,modalLocHostUriTemplate){"use strict";var ModalLocHostUriView=ModalView.extend({className:"location-host-uri-modal",template:_.template(modalLocHostUriTemplate),title:"Location Host URI",cancelText:null,okText:"Close",events:function(){return _.extend({"click input":"onClickInput"},ModalLocHostUriView.__super__.events)},initialize:function(){ModalLocHostUriView.__super__.initialize.call(this),this.setAlert("info","The hostname in the URI below may need to be adjusted to the hostname that the link host should use to access a Pritunl host. For high availability the hostname should be directed to a load balancer in front of several Pritunl hosts.")},body:function(){return this.template()},postRender:function(){this.setLoading("Getting location host URI...",!0),this.model.set({hostname:window.location.host}),this.model.fetch({success:function(){this.clearLoading();var uriLink=this.model.get("uri")+window.location.host;this.$(".uri-link input").val(uriLink)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})},onClickInput:function(evt){this.$(evt.target).select()}});return ModalLocHostUriView}),define("text!templates/modalLocHostConf.html",[],function(){return'<div class="conf-link form-group">\n  <label>Host Static Configuration</label>\n  <textarea class="form-control" rows="16" spellcheck="false" readonly></textarea>\n</div>\n'}),define("views/modalLocHostConf",["jquery","underscore","backbone","views/modal","text!templates/modalLocHostConf.html"],function($,_,Backbone,ModalView,modalLocHostConfTemplate){"use strict";var ModalLocHostConfView=ModalView.extend({className:"location-host-conf-modal",template:_.template(modalLocHostConfTemplate),title:"Location Host Static Configuration",cancelText:null,okText:"Close",initialize:function(){ModalLocHostConfView.__super__.initialize.call(this),this.setAlert("danger","Static host configuration is not valid when locations contain more then one host or all locations do not yet have an active host.")},body:function(){return this.template()},postRender:function(){this.setLoading("Getting location host static configuration...",!0),this.model.set({hostname:window.location.host}),this.model.fetch({success:function(){this.clearLoading(),this.$(".conf-link textarea").val(this.model.get("conf"))}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalLocHostConfView}),define("text!templates/modalDeleteLocHost.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to remove the <b><%- name %></b> host?</label>\n</div>\n'}),define("views/modalDeleteLocHost",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDeleteLocHost.html"],function($,_,Backbone,ModalView,AlertView,modalDeleteLocHostTemplate){"use strict";var ModalDeleteLocHostView=ModalView.extend({className:"delete-location-host-modal",template:_.template(modalDeleteLocHostTemplate),title:"Remove Location Host",okText:"Remove",body:function(){return this.template(this.model.toJSON())},onOk:function(){this.setLoading("Removing location host..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDeleteLocHostView}),define("text!templates/modalDeleteLocExclude.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to remove the <b><%- network %></b> exlude?</label>\n</div>\n'}),define("views/modalDeleteLocExclude",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDeleteLocExclude.html"],function($,_,Backbone,ModalView,AlertView,modalDeleteLocExcludeTemplate){"use strict";var ModalDeleteLocExcludeView=ModalView.extend({className:"delete-location-exclude-modal",template:_.template(modalDeleteLocExcludeTemplate),title:"Remove Location Exclude",okText:"Remove",body:function(){return this.template(this.model.toJSON())},onOk:function(){this.setLoading("Removing location exclude..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDeleteLocExcludeView}),define("text!templates/modalModifyLocation.html",[],function(){return'<div class="form-group">\n  <div class="form-group name">\n    <label>Name</label>\n    <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of location" autofocus value="<%- name %>">\n  </div>\n</div>\n'}),define("views/modalModifyLocation",["jquery","underscore","backbone","views/modal","text!templates/modalModifyLocation.html"],function($,_,Backbone,ModalView,modalModifyLocationTemplate){"use strict";var ModalModifyLocationView=ModalView.extend({className:"modify-location-modal",template:_.template(modalModifyLocationTemplate),title:"Modify Location",okText:"Save",body:function(){return this.template(this.model.toJSON())},onOk:function(){var name=this.$(".name input").val();return name?(this.setLoading("Saving location..."),void this.model.save({name:name},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})):void this.setAlert("danger","Name can not be empty.",".name")}});return ModalModifyLocationView}),define("text!templates/modalDeleteLocation.html",[],function(){return'<div class="form-group">\n  <label>Enter the name of the location to confirm</label>\n  <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of location" autofocus>\n</div>\n'}),define("views/modalDeleteLocation",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDeleteLocation.html"],function($,_,Backbone,ModalView,AlertView,modalDeleteLocationTemplate){"use strict";var ModalDeleteLocationView=ModalView.extend({className:"delete-location-modal",template:_.template(modalDeleteLocationTemplate),title:"Delete Location",okText:"Delete",inputMatch:!0,initialize:function(){ModalDeleteLocationView.__super__.initialize.call(this),this.inputMatchText=this.model.get("name")},body:function(){return this.template()},onOk:function(){this.setLoading("Deleting location..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDeleteLocationView}),define("text!templates/linkLocationsListItem.html",[],function(){return'<div class="link-location-header">\n  <h2 class="link-location-title title"><a class="location-settings no-select" data-toggle="tooltip" title="Click to open link settings"><%- name %></a><span class="location-id title">(<%- id %>)</span></h2>\n  <button type="button" class="location-del btn btn-danger btn-xs no-select">Delete Location</button>\n  <button type="button" class="location-add-exclude btn btn-primary btn-xs no-select">Add Exclude</button>\n  <button type="button" class="location-add-host btn btn-primary btn-xs no-select">Add Host</button>\n  <button type="button" class="location-add-route btn btn-primary btn-xs no-select">Add Route</button>\n</div>\n<div class="link-routes">\n  <% if (routes.length === 0) { %>\n    <div class="no-routes">\n      There are no routes on this location.\n    </div>\n  <% } %>\n  <% _.each(routes, function(route) { %>\n  <div class="link-route">\n    <div class="name-container">\n      <span class="name-icon glyphicon glyphicon-globe"></span>\n      <span class="route-network title"><%- route.network %></span>\n    </div>\n    <div class="button-container">\n      <button data-id="<%- route.id %>" data-network="<%- route.network %>" type="button" class="link-remove-route btn btn-danger btn-xs">Remove Route</button>\n    </div>\n  </div>\n  <% }); %>\n</div>\n<div class="link-hosts">\n  <% if (hosts.length === 0) { %>\n  <div class="no-routes">\n    There are no hosts on this location.\n  </div>\n  <% } %>\n  <% _.each(hosts, function(host) { %>\n  <div class="link-host">\n    <div class="name-container">\n      <span class="name-icon glyphicon glyphicon-dashboard"></span>\n      <a data-id="<%- host.id %>" class="host-name title" data-toggle="tooltip" title="Click to modify this host"><%- host.name %><%- host.public_address ? \' (\' + host.public_address + \')\' : \'\' %><%- !host.static && host.version ? \' v\' + host.version : \'\' %></a>\n    </div>\n    <div class="button-container">\n      <div class="link-host-static label label-success no-select" <%= host.static ? \'\' : \'style="display: none"\' %>>Static</div>\n      <div class="link-host-active label label-success no-select" <%= !host.static && host.status === \'active\' ? \'\' : \'style="display: none"\' %>>Active</div>\n      <div class="link-host-available label label-primary no-select" <%= !host.static && host.status === \'available\' ? \'\' : \'style="display: none"\' %>>Available</div>\n      <div class="link-host-unavailable label label-danger no-select" <%= !host.static && host.status === \'unavailable\' ? \'\' : \'style="display: none"\' %>>Unavailable</div>\n      <button data-id="<%- host.id %>" type="button" class="link-conf-host btn btn-primary btn-xs" <%= host.static ? \'\' : \'style="display: none"\' %>>Get Conf</button>\n      <button data-id="<%- host.id %>" type="button" class="link-uri-host btn btn-primary btn-xs" <%= !host.static ? \'\' : \'style="display: none"\' %>>Get URI</button>\n      <button data-id="<%- host.id %>" type="button" class="link-remove-host btn btn-danger btn-xs">Remove Host</button>\n    </div>\n  </div>\n  <% }); %>\n</div>\n<div class="link-excludes">\n  <% _.each(excludes, function(exclude) { %>\n  <div class="link-exclude">\n    <div class="name-container">\n      <span class="name-icon glyphicon glyphicon-ban-circle"></span>\n      <span class="exclude-name title"><%- exclude.name %></span>\n    </div>\n    <div class="button-container">\n      <button data-id="<%- exclude.id %>" type="button" class="link-remove-exclude btn btn-danger btn-xs">Remove Exclude</button>\n    </div>\n  </div>\n  <% }); %>\n</div>\n';
}),define("views/linkLocationsListItem",["jquery","underscore","backbone","models/linkRoute","models/linkHost","models/linkHostUri","models/linkHostConf","models/linkExclude","views/alert","views/modalAddLocRoute","views/modalAddLocHost","views/modalAddLocExclude","views/modalDeleteLocRoute","views/modalModifyLocHost","views/modalLocHostUri","views/modalLocHostConf","views/modalDeleteLocHost","views/modalDeleteLocExclude","views/modalModifyLocation","views/modalDeleteLocation","text!templates/linkLocationsListItem.html"],function($,_,Backbone,LinkRouteModel,LinkHostModel,LinkHostUriModel,LinkHostConfModel,LinkExcludeModel,AlertView,ModalAddLocRouteView,ModalAddLocHostView,ModalAddLocExcludeView,ModalDeleteLocRouteView,ModalModifyLocHostView,ModalLocHostUriView,ModalLocHostConfView,ModalDeleteLocHostView,ModalDeleteLocExcludeView,ModalModifyLocationView,ModalDeleteLocationView,linkLocationsListItemTemplate){"use strict";var LinkLocationsListItemView=Backbone.View.extend({className:"link-location",template:_.template(linkLocationsListItemTemplate),events:{"mousedown .location-add-route":"onAddRoute","mousedown .location-add-host":"onAddHost","mousedown .location-add-exclude":"onAddExclude","mousedown .link-remove-route":"onRemoveRoute","mousedown .link-remove-host":"onRemoveHost","mousedown .link-remove-exclude":"onRemoveExclude","mousedown .link-uri-host":"onHostUri","mousedown .link-conf-host":"onHostConf","mousedown .host-name":"onModifyHost","mousedown .location-settings":"onSettings","mousedown .location-del":"onDelete"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},update:function(){this.render()},getHost:function(hostId){for(var hosts=this.model.get("hosts"),i=0;i<hosts.length;i++)if(hosts[i].id===hostId)return hosts[i]},onAddRoute:function(){var modal=new ModalAddLocRouteView({location:this.model.get("id"),link:this.model.get("link_id")});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added location route.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onAddHost:function(){var modal=new ModalAddLocHostView({location:this.model.get("id"),link:this.model.get("link_id")});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added location host.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onAddExclude:function(){if(this.collection.length<2){var alertView=new AlertView({type:"danger",message:"Two locations must be created before creating an exclude.",dismissable:!0});return $(".alerts-container").append(alertView.render().el),void this.addView(alertView)}var modal=new ModalAddLocExcludeView({location:this.model.get("id"),link:this.model.get("link_id"),locations:this.collection});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added location exclude.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onRemoveRoute:function(evt){var model=new LinkRouteModel({id:$(evt.currentTarget).attr("data-id"),network:$(evt.currentTarget).attr("data-network"),link_id:this.model.get("link_id"),location_id:this.model.get("id")});if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDeleteLocRouteView({model:model});this.addView(modal)},onRemoveExclude:function(evt){var model=new LinkExcludeModel({id:$(evt.currentTarget).attr("data-id"),link_id:this.model.get("link_id"),location_id:this.model.get("id")});if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDeleteLocExcludeView({model:model});this.addView(modal)},onHostUri:function(evt){var model=new LinkHostUriModel(this.getHost($(evt.currentTarget).attr("data-id"))),modal=new ModalLocHostUriView({model:model});this.addView(modal)},onHostConf:function(evt){var model=new LinkHostConfModel(this.getHost($(evt.currentTarget).attr("data-id"))),modal=new ModalLocHostConfView({model:model});this.addView(modal)},onModifyHost:function(evt){var model=new LinkHostModel(this.getHost($(evt.currentTarget).attr("data-id"))),modal=new ModalModifyLocHostView({model:model});this.addView(modal)},onRemoveHost:function(evt){var model=new LinkHostModel(this.getHost($(evt.currentTarget).attr("data-id")));if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDeleteLocHostView({model:model});this.addView(modal)},onSettings:function(){var modal=new ModalModifyLocationView({model:this.model.clone()});this.addView(modal)},onDelete:function(evt){var model=this.model.clone();if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return void model.destroy();var modal=new ModalDeleteLocationView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully deleted link.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)}});return LinkLocationsListItemView}),define("text!templates/linkLocationsList.html",[],function(){return'<div class="no-locations">\n  There are no locations on this link.\n</div>\n'}),define("views/linkLocationsList",["jquery","underscore","backbone","collections/linkLocation","views/list","views/linkLocationsListItem","text!templates/linkLocationsList.html"],function($,_,Backbone,LinkLocationCollection,ListView,LinkLocationsListItemView,linkLocationsListTemplate){"use strict";var LinkLocationsListView=ListView.extend({className:"link-locations-list",template:_.template(linkLocationsListTemplate),listErrorMsg:"Failed to load link locations, server error occurred.",initialize:function(options){this.collection=new LinkLocationCollection({link:options.link.get("id")}),this.link=options.link,this.listenTo(window.events,"links_updated",this.update),this.interval=setInterval(this.update.bind(this),1e3),LinkLocationsListView.__super__.initialize.call(this)},deinitialize:function(){clearInterval(this.interval)},buildItem:function(model){return new LinkLocationsListItemView({model:model,collection:this.collection,link:this.link})},resetItems:function(views){views.length?this.$(".no-locations").slideUp(window.slideTime):this.$(".no-locations").slideDown(window.slideTime)}});return LinkLocationsListView}),define("text!templates/modalModifyLink.html",[],function(){return'<div class="form-group">\n  <div class="form-group name">\n    <label>Name</label>\n    <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of link" autofocus value="<%- name %>">\n  </div>\n</div>\n'}),define("views/modalModifyLink",["jquery","underscore","backbone","models/link","views/modal","text!templates/modalModifyLink.html"],function($,_,Backbone,LinkModel,ModalView,modalModifyLinkTemplate){"use strict";var ModalModifyLinkView=ModalView.extend({className:"modify-link-modal",template:_.template(modalModifyLinkTemplate),title:"Modify Link",okText:"Save",body:function(){return this.template(this.model.toJSON())},onOk:function(){var name=this.$(".name input").val();return name?(this.setLoading("Saving link..."),void this.model.save({name:name},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})):void this.setAlert("danger","Name can not be empty.",".name")}});return ModalModifyLinkView}),define("text!templates/modalDeleteLink.html",[],function(){return'<div class="form-group">\n  <label>Enter the name of the link to confirm</label>\n  <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of link" autofocus>\n</div>\n'}),define("views/modalDeleteLink",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalDeleteLink.html"],function($,_,Backbone,ModalView,AlertView,modalDeleteLinkTemplate){"use strict";var ModalDeleteLinkView=ModalView.extend({className:"delete-link-modal",template:_.template(modalDeleteLinkTemplate),title:"Delete Link",okText:"Delete",inputMatch:!0,initialize:function(){ModalDeleteLinkView.__super__.initialize.call(this),this.inputMatchText=this.model.get("name")},body:function(){return this.template()},onOk:function(){this.setLoading("Deleting link..."),this.model.destroy({success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalDeleteLinkView}),define("text!templates/modalRekeyLink.html",[],function(){return'<div class="form-group">\n  <label>Are you sure you want to regenerate the secret key for <b><%- name %></b> link?</label>\n</div>\n'}),define("views/modalRekeyLink",["jquery","underscore","backbone","views/modal","views/alert","text!templates/modalRekeyLink.html"],function($,_,Backbone,ModalView,AlertView,modalRekeyLinkTemplate){"use strict";var ModalRekeyLinkView=ModalView.extend({className:"rekey-link-modal",template:_.template(modalRekeyLinkTemplate),title:"Rekey Link",okText:"Rekey",body:function(){return this.template()},onOk:function(){this.setLoading("Rekeying link..."),this.model.save({key:!0},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalRekeyLinkView}),define("text!templates/linksListItem.html",[],function(){return'<div class="link-header">\n  <div class="link-label label label-purple toggle-hidden no-select">Link</div><h2 class="link-title title"><a class="no-select" data-toggle="tooltip" title="Click to open link settings"></a><span class="link-id title">(<%- id %>)</span></h2>\n  <button type="button" class="link-del btn btn-danger btn-sm no-select">Delete Link</button>\n  <button type="button" class="link-stop btn btn-warning btn-sm no-select">Stop Link</button>\n  <button type="button" class="link-start btn btn-success btn-sm no-select">Start Link</button>\n  <button type="button" class="link-rekey btn btn-primary btn-sm no-select">Rekey Link</button>\n</div>\n'}),define("views/linksListItem",["jquery","underscore","backbone","views/alert","views/linkLocationsList","views/modalModifyLink","views/modalDeleteLink","views/modalRekeyLink","text!templates/linksListItem.html"],function($,_,Backbone,AlertView,LinkLocationsListView,ModalModifyLinkView,ModalDeleteLinkView,ModalRekeyLinkView,linksListItemTemplate){"use strict";var LinksListItemView=Backbone.View.extend({className:"link",template:_.template(linksListItemTemplate),events:{"click .link-title a":"onSettings","click .link-del":"onDelete","click .link-rekey":"onRekey","click .link-start, .link-stop":"onOperation","click .toggle-hidden":"onToggleHidden"},initialize:function(){this.locationsView=new LinkLocationsListView({link:this.model}),this.addView(this.locationsView)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.update(),this.$el.append(this.locationsView.render().el),this},update:function(){this.$(".link-title a").text(this.model.get("name")),"online"===this.model.get("status")?(this.$(".link-start").hide(),this.$(".link-stop").show()):(this.$(".link-stop").hide(),this.$(".link-start").show())},updateOrgsCount:function(){this.orgsCount=this.serverOrgsListView.views.length},updateHostsCount:function(){this.hostsCount=this.serverHostsListView.views.length},onSettings:function(){var modal=new ModalModifyLinkView({model:this.model.clone()});this.addView(modal)},onDelete:function(evt){var model=this.model.clone();if(evt.shiftKey&&evt.ctrlKey&&evt.altKey)return model.destroy(),void this.locationsView.destroy();var modal=new ModalDeleteLinkView({model:model});this.listenToOnce(modal,"applied",function(){this.locationsView.destroy();var alertView=new AlertView({type:"success",message:"Successfully deleted link.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onRekey:function(){var model=this.model.clone(),modal=new ModalRekeyLinkView({model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully rekeyed link.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onOperation:function(evt){var status,operation;$(evt.target).hasClass("link-start")?(status="online",operation="start"):$(evt.target).hasClass("link-stop")&&(status="offline",operation="stop"),operation&&($(evt.target).attr("disabled","disabled"),this.model.clone().save({status:status},{success:function(){$(evt.target).removeAttr("disabled")}.bind(this),error:function(model,response){var alertView;$(evt.target).removeAttr("disabled"),alertView=new AlertView(response.responseJSON?{type:"danger",message:response.responseJSON.error_msg,dismissable:!0}:{type:"danger",message:"Failed to "+operation+" the link, server error occurred.",dismissable:!0}),$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)}))},onToggleHidden:function(evt){(evt.ctrlKey||evt.shiftKey)&&(this.$el.hasClass("show-hidden")?(this.$(".toggle-hidden").removeClass("label-success"),this.$(".toggle-hidden").addClass("label-primary"),this.$el.removeClass("show-hidden")):(this.$(".toggle-hidden").addClass("label-success"),this.$(".toggle-hidden").removeClass("label-primary"),this.$el.addClass("show-hidden")))}});return LinksListItemView}),define("text!templates/modalAddLink.html",[],function(){return'<div class="form-group">\n  <div class="form-group name">\n    <label>Name</label>\n    <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of link" autofocus>\n  </div>\n</div>\n'}),define("views/modalAddLink",["jquery","underscore","backbone","models/link","views/modal","text!templates/modalAddLink.html"],function($,_,Backbone,LinkModel,ModalView,modalAddLinkTemplate){"use strict";var ModalAddLinkView=ModalView.extend({className:"add-link-modal",template:_.template(modalAddLinkTemplate),title:"Add Link",okText:"Add",body:function(){return this.template()},onOk:function(){var name=this.$(".name input").val();if(!name)return void this.setAlert("danger","Name can not be empty.",".name");this.setLoading("Adding link...");var model=new LinkModel;model.save({name:name},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddLinkView}),define("text!templates/modalAddLocation.html",[],function(){return'<div class="form-group">\n  <div class="form-group name">\n    <label>Name</label>\n    <input type="text" class="form-control" placeholder="Enter name" data-toggle="tooltip" title="Name of location" autofocus>\n  </div>\n  <div class="form-group link">\n    <label>Link</label>\n    <select class="form-control">\n      <% _.each(links, function(link) { %>\n      <option value="<%- link.id %>" <%= (lastLink === link.id) ? \'selected\' : \'\' %>><%- link.name %></option>\n      <% }); %>\n    </select>\n  </div>\n</div>\n'}),define("views/modalAddLocation",["jquery","underscore","backbone","models/linkLocation","views/modal","text!templates/modalAddLocation.html"],function($,_,Backbone,LinkLocationModel,ModalView,modalAddLocationTemplate){"use strict";var lastLink,ModalAddLocationView=ModalView.extend({className:"add-location-modal",template:_.template(modalAddLocationTemplate),title:"Add Link Location",okText:"Add",initialize:function(options){this.links=options.links,ModalAddLocationView.__super__.initialize.call(this)},body:function(){return this.template({links:this.links.toJSON(),lastLink:lastLink})},onOk:function(){var name=this.$(".name input").val(),link=this.$(".link select").val();if(!name)return void this.setAlert("danger","Name can not be empty.",".name");this.setLoading("Adding location...");var model=new LinkLocationModel;model.save({name:name,link_id:link},{success:function(){this.close(!0)}.bind(this),error:function(model,response){this.clearLoading(),response.responseJSON?this.setAlert("danger",response.responseJSON.error_msg):this.setAlert("danger",this.errorMsg)}.bind(this)})}});return ModalAddLocationView}),define("text!templates/linksList.html",[],function(){return'<div class="links-upgrade">\n  Upgrade to Enterprise+ for site-to-site links with IPsec\n</div>\n<div class="links-list">\n  <div class="links-list-header">\n    <h1 class="links-list-title title">Links</h1>\n    <div class="links-list-buttons">\n      <button type="button" class="header-button links-add-link btn btn-primary">Add Link</button>\n      <button type="button" class="header-button links-add-location btn btn-primary">Add Location</button>\n    </div>\n  </div>\n  <div class="alerts-container"></div>\n  <div class="links-list-container">\n    <div class="no-links">\n      There are no links on this system.\n    </div>\n  </div>\n  <button type="button" class="prev-page btn btn-primary btn-sm">Previous Page</button>\n  <button type="button" class="next-page btn btn-primary btn-sm">Next Page</button>\n  <div class="pages no-select">\n    <div class="page-links">\n      <a class="page-link first">First</a>\n      <a class="page-link last">Last</a>\n    </div>\n  </div>\n</div>\n'}),define("views/linksList",["jquery","underscore","backbone","collections/link","views/list","views/alert","views/linksListItem","views/modalAddLink","views/modalAddLocation","text!templates/linksList.html"],function($,_,Backbone,LinkCollection,ListView,AlertView,LinksListItemView,ModalAddLinkView,ModalAddLocationView,linksListTemplate){"use strict";var LinksListView=ListView.extend({listContainer:".links-list-container",template:_.template(linksListTemplate),listErrorMsg:"Failed to load links, server error occurred.",events:{"click .links-add-link":"onAddLink","click .links-add-location":"onAddLocation","click .links-list > .prev-page":"prevPage","click .links-list > .next-page":"nextPage","click .links-list > .pages .page-link.first":"firstPage","click .links-list > .pages .page-link.last":"lastPage"},initialize:function(){this.collection=new LinkCollection,this.listenTo(window.events,"links_updated",this.update),LinksListView.__super__.initialize.call(this)},prevPage:function(){this.collection.prevPage(),this.update()},nextPage:function(){this.collection.nextPage(),this.update()},firstPage:function(){this.collection.setPage(0),this.update()},lastPage:function(){this.collection.setPage(this.collection.getPageTotal()),this.update()},onAddLink:function(){var modal=new ModalAddLinkView;this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added link.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},onAddLocation:function(){var modal=new ModalAddLocationView({links:this.collection});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"success",message:"Successfully added location.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.addView(alertView)}.bind(this)),this.addView(modal)},buildItem:function(model){var modelView=new LinksListItemView({model:model});return modelView},getOptions:function(){return{page:this.collection.getPage()}},addPageElem:function(page,curPage){var pageElem=$('<a class="page-link page">'+(page+1)+"</a>");this.$(".links-list > .pages .page-link.last").before(pageElem),page===curPage&&pageElem.addClass("current"),pageElem.one("click",function(){this.collection.setPage(page),this.update()}.bind(this))},resetItems:function(views){var curPage=this.collection.getPage(),pageTotal=this.collection.getPageTotal();if(views.length?(this.$(".links-add-location").removeAttr("disabled"),this.$(".links-add-route").removeAttr("disabled"),this.$(".no-links").slideUp(window.slideTime)):(this.$(".links-add-location").attr("disabled","disabled"),this.$(".links-add-route").attr("disabled","disabled"),this.$(".no-links").slideDown(window.slideTime)),this.collection.getPage()?(this.$(".links-list > .pages").removeClass("padded-left"),this.$(".links-list > .prev-page").show()):(this.$(".links-list > .pages").addClass("padded-left"),this.$(".prev-page").hide()),this.collection.isLastPage()?(this.$(".links-list > .pages").addClass("padded-right"),this.$(".links-list > .next-page").hide()):(this.$(".links-list > .pages").removeClass("padded-right"),this.$(".links-list > .next-page").show()),2>pageTotal)this.$(".links-list > .pages").hide();else{this.$(".links-list > .pages").show();var i,page=Math.max(0,curPage-7);for(this.$(".links-list > .pages .page-link.page").remove(),this.$(".links-list > .pages .page-link.first").removeClass("current"),this.$(".links-list > .pages .page-link.last").removeClass("current"),i=0;15>i&&(page>0&&this.addPageElem(page,curPage),page+=1,!(page>pageTotal-1));i++);0===curPage?this.$(".links-list > .pages .page-link.first").addClass("current"):curPage===pageTotal&&this.$(".links-list > .pages .page-link.last").addClass("current")}}});return LinksListView}),define("views/links",["jquery","underscore","backbone","views/linksList"],function($,_,Backbone,LinksListView){"use strict";var LinksView=Backbone.View.extend({className:"links container",initialize:function(){this.linksList=new LinksListView,this.addView(this.linksList)},render:function(){return this.$el.append(this.linksList.render().el),this}});return LinksView}),define("routers/main",["jquery","underscore","backbone","models/authSession","models/settings","views/alert","views/login","views/dashboard","views/admins","views/users","views/servers","views/hosts","views/links","views/modalSettings"],function($,_,Backbone,AuthSessionModel,SettingsModel,AlertView,LoginView,DashboardView,AdminsView,UsersView,ServersView,HostsView,LinksView,ModalSettingsView){"use strict";var Router=Backbone.Router.extend({routes:{"":"dashboard",init:"init",dashboard:"dashboard",admins:"admins",users:"users",servers:"servers",hosts:"hosts",links:"links",logout:"logout","logout/:alert":"logout"},initialize:function(data){this.data=data,this.loadedStyles={},this.listenTo(window.events,"subscription_premium_active",this.onSubscriptionPremiumActive),this.listenTo(window.events,"subscription_enterprise_active",this.onSubscriptionEnterpriseActive),this.listenTo(window.events,"subscription_enterprise_plus_active",this.onSubscriptionEnterprisePlusActive),this.listenTo(window.events,"subscription_none_inactive",this.onSubscriptionNoneInactive),this.listenTo(window.events,"subscription_premium_inactive",this.onSubscriptionPremiumInactive),this.listenTo(window.events,"subscription_enterprise_inactive",this.onSubscriptionEnterpriseInactive),this.listenTo(window.events,"subscription_enterprise_plus_inactive",this.onSubscriptionEnterprisePlusInactive),this.listenTo(window.events,"theme_light",this.onThemeLight),this.listenTo(window.events,"theme_dark",this.onThemeDark)},updateTheme:function(){window.subActive&&"dark"===window.theme?$("body").addClass("dark"):$("body").removeClass("dark")},onSubscriptionPremiumActive:function(){window.subActive=!0,window.subPlan="premium",$("body").addClass("premium"),$("body").removeClass("enterprise"),$("body").removeClass("enterprise-plus"),$("body").removeClass("premium-license"),$("body").removeClass("enterprise-license"),$("body").removeClass("enterprise-plus-license"),this.loadStyles(),this.updateTheme(),$("header .hosts").hasClass("active")&&this.dashboard()},onSubscriptionEnterpriseActive:function(){window.subActive=!0,window.subPlan="enterprise",$("body").removeClass("premium"),$("body").addClass("enterprise"),$("body").removeClass("enterprise-plus"),$("body").removeClass("premium-license"),$("body").removeClass("enterprise-license"),$("body").removeClass("enterprise-plus-license"),this.loadStyles(),this.updateTheme()},onSubscriptionEnterprisePlusActive:function(){window.subActive=!0,window.subPlan="enterprise_plus",$("body").removeClass("premium"),$("body").removeClass("enterprise"),$("body").addClass("enterprise-plus"),$("body").removeClass("premium-license"),$("body").removeClass("enterprise-license"),$("body").removeClass("enterprise-plus-license"),this.loadStyles(),this.updateTheme()},onSubscriptionPremiumInactive:function(){window.subActive=!1,window.subPlan="premium",$("body").removeClass("premium"),$("body").removeClass("enterprise"),$("body").removeClass("enterprise-plus"),$("body").addClass("premium-license"),$("body").removeClass("enterprise-license"),$("body").removeClass("enterprise-plus-license"),this.updateTheme(),$("header .hosts").hasClass("active")&&this.dashboard()},onSubscriptionEnterpriseInactive:function(){window.subActive=!1,window.subPlan="enterprise",$("body").removeClass("premium"),$("body").removeClass("enterprise"),$("body").removeClass("enterprise-plus"),$("body").removeClass("premium-license"),$("body").addClass("enterprise-license"),$("body").removeClass("enterprise-plus-license"),this.updateTheme(),$("header .hosts").hasClass("active")&&this.dashboard()},onSubscriptionEnterprisePlusInactive:function(){window.subActive=!1,window.subPlan="enterprise",$("body").removeClass("premium"),$("body").removeClass("enterprise"),$("body").removeClass("enterprise-plus"),$("body").removeClass("premium-license"),$("body").removeClass("enterprise-license"),$("body").addClass("enterprise-plus-license"),this.updateTheme(),$("header .hosts").hasClass("active")&&this.dashboard()},onSubscriptionNoneInactive:function(){window.subActive=!1,window.subPlan=null,$("body").removeClass("premium"),$("body").removeClass("enterprise"),$("body").removeClass("enterprise-plus"),$("body").removeClass("premium-license"),$("body").removeClass("enterprise-license"),$("body").removeClass("enterprise-plus-license"),this.updateTheme(),$("header .hosts").hasClass("active")&&this.dashboard()},onThemeLight:function(){window.theme="light",this.updateTheme()},onThemeDark:function(){window.theme="dark",this.updateTheme()},openSettings:function(){var model=new SettingsModel;model.fetch({success:function(){var modal=new ModalSettingsView({initial:!0,model:model});this.listenToOnce(modal,"applied",function(){var alertView=new AlertView({type:"warning",message:"Successfully saved settings.",dismissable:!0});$(".alerts-container").append(alertView.render().el)}.bind(this))}.bind(this),error:function(){var alertView=new AlertView({type:"danger",message:"Failed to load authentication data, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el)}.bind(this)})},auth:function(callback){return window.authenticated?void callback():(this.loginCallback=callback,void(this.loginView||($(".modal").modal("hide"),this.loginView=new LoginView({alert:this.logoutAlert,callback:function(){this.loginView=null,window.authenticated=!0,this.loginCallback(),this.loginCallback=null}.bind(this)}),this.logoutAlert=null,this.loginView.active?$("body").append(this.loginView.render().el):this.loginView=null)))},loadStyles:function(){window.devStyles||!window.subActive||this.loadedStyles[window.subPlan]||(this.loadedStyles[window.subPlan]=!0,$("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet"}).attr("href","/subscription/styles/"+window.subPlan+"/"+window.subVer+".css"))},loadPage:function(view){this.loadStyles();var curView=this.data.view;this.data.view=view,$(this.data.element).fadeOut(100,function(){curView&&(curView=curView.destroy()),$(this.data.element).html(this.data.view.render().el),$(this.data.element).fadeIn(300)}.bind(this))},init:function(){this.dashboard(!0)},dashboard:function(init){this.auth(function(){$("header .navbar .nav li").removeClass("active"),$("header .dashboard").addClass("active"),this.loadPage(new DashboardView),init&&(this.openSettings(),Backbone.history.navigate("dashboard"))}.bind(this))},admins:function(){return!window.superUser||"enterprise"!==window.subPlan&&"enterprise_plus"!==window.subPlan?void this.dashboard():void this.auth(function(){$("header .navbar .nav li").removeClass("active"),$("header .admins").addClass("active"),this.loadPage(new AdminsView)}.bind(this))},users:function(){this.auth(function(){$("header .navbar .nav li").removeClass("active"),$("header .users").addClass("active"),this.loadPage(new UsersView)}.bind(this))},servers:function(){this.auth(function(){$("header .navbar .nav li").removeClass("active"),$("header .servers").addClass("active"),this.loadPage(new ServersView)}.bind(this))},hosts:function(){return!window.subActive||"enterprise"!==window.subPlan&&"enterprise_plus"!==window.subPlan?void this.dashboard():void this.auth(function(){$("header .navbar .nav li").removeClass("active"),$("header .hosts").addClass("active"),this.loadPage(new HostsView)}.bind(this))},links:function(){return"enterprise"!==window.subPlan&&"enterprise_plus"!==window.subPlan?void this.dashboard():void this.auth(function(){$("header .navbar .nav li").removeClass("active"),$("header .links").addClass("active"),this.loadPage(new LinksView)}.bind(this))},logout:function(alert){"expired"===alert&&(this.logoutAlert="Session has expired, please log in again");var authSessionModel=new AuthSessionModel({id:!0});authSessionModel.destroy({success:function(){window.authenticated=!1,window.location=""}.bind(this),error:function(){var alertView=new AlertView({type:"danger",message:"Failed to logout, server error occurred.",dismissable:!0});$(".alerts-container").append(alertView.render().el),this.data.view&&this.data.view.addView(alertView)}.bind(this)})}}),initialize=function(){var _ajax=Backbone.ajax;Backbone.ajax=function(options){return options.complete=function(response){401===response.status&&(window.authenticated=!1,Backbone.history.navigate("logout/expired",{trigger:!0}))},_ajax.call(Backbone.$,options)};var data={element:"#app",view:null},router=new Router(data);return Backbone.history.start(),router};return{initialize:initialize}}),define("initialize",["jquery","underscore","backbone"],function($,_,Backbone){"use strict";var initialize=function(){var _ajax=Backbone.ajax;Backbone.ajax=function(options){var _headers=options.headers,headers={"Csrf-Token":window.csrfToken};_headers?options.headers=_.extend(headers,_headers):options.headers=headers;var _complete=options.complete;return options.complete=function(response){if("/event"!==this.url.substring(0,6)){var execTime=response.getResponseHeader("Execution-Time");if(!execTime)return;var queryTime=response.getResponseHeader("Query-Time");if(!queryTime)return;var queryCount=response.getResponseHeader("Query-Count");if(!queryCount)return;var writeCount=response.getResponseHeader("Write-Count");if(!queryCount)return;var color;color=execTime>200?"#ff0000":execTime>100?"#ff6b0d":"#0066ff",console.log("%c"+execTime+"ms "+queryTime+"ms "+queryCount+"dbq "+writeCount+"dbw "+this.url,"color: "+color)}_complete&&_complete(response)},_ajax.call(Backbone.$,options)}};return initialize}),function(){"use strict";window.slideTime=100,Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!==n&&n!=1/0&&n!=-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);len>k;k++)if(k in t&&t[k]===searchElement)return k;return-1}),Function.prototype.bind||(Function.prototype.bind=function(oThis){
if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,NOP=function(){},Bound=function(){return fToBind.apply(this instanceof NOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return NOP.prototype=this.prototype,Bound.prototype=new NOP,Bound})}(),require.config({waitSeconds:10,paths:{ace:"vendor/ace/ace",aceModeLog:"vendor/ace/mode-log",aceModeSh:"vendor/ace/mode-sh",aceModeText:"vendor/ace/mode-text",aceThemePritunl:"vendor/ace/theme-pritunl",backbone:"vendor/backbone/backbone",bootstrap:"vendor/bootstrap/bootstrap",d3:"vendor/d3/d3",jquery:"vendor/jquery/jquery",less:"vendor/less/less",qrcode:"vendor/qrcode/qrcode",rickshaw:"vendor/rickshaw/rickshaw",select:"vendor/select/select",text:"vendor/requireText/text",underscore:"vendor/underscore/underscore",initialize:"init/testing"},shim:{ace:{exports:"ace"},aceModeLog:["ace"],aceModeSh:["ace"],aceModeText:["ace"],aceThemePritunl:["ace"],backbone:["less"],bootstrap:["jquery"],d3:{exports:"d3"},rickshaw:{deps:["d3"],exports:"Rickshaw"},qrcode:{exports:"QRCode"}}}),require(["backbone"],function(Backbone){"use strict";Backbone.View=Backbone.View.extend({deinitialize:function(){},addView:function(view){this.children=this.children||{};var id=view.cid;this.children[id]=view,this.listenToOnce(view,"destroy",function(){this.children[id]=null}.bind(this))},destroy:function(){if(this.deinitialize(),this.children)for(var id in this.children)this.children[id]&&this.children[id].destroy();this.remove(),this.trigger("destroy")}})}),require(["jquery","underscore","backbone","models/state","models/subscription","collections/event","views/header","routers/main","initialize"],function($,_,Backbone,StateModel,SubscriptionModel,EventCollection,HeaderView,mainRouter,initialize){"use strict";initialize(),window.formatUptime=function(time){var days=Math.floor(time/86400);time-=86400*days;var hours=Math.floor(time/3600);time-=3600*hours;var minutes=Math.floor(time/60);return time-=60*minutes,days+"d "+hours+"h "+minutes+"m "+time+"s"},window.formatTime=function(time,type){var abbrev=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],date=new Date(0),curDate=new Date;time=1e3*time,date.setUTCMilliseconds(parseInt(time,10));var meridiem,month=abbrev[date.getMonth()],day=date.getDate().toString(),year=date.getFullYear().toString(),hours=date.getHours();hours>12?(hours=(hours-12).toString(),meridiem="pm"):(hours=hours.toString(),meridiem="am"),"0"===hours&&(hours="12");var minutes=date.getMinutes().toString();return minutes.length<2&&(minutes="0"+minutes),"short"===type?curDate.getDate()===date.getDate()&&curDate.getMonth()===date.getMonth()&&curDate.getFullYear()===date.getFullYear()?time=hours+":"+minutes+" "+meridiem:(time=month+" "+day,curDate.getFullYear()!==date.getFullYear()&&(time+=" "+year)):"date"===type?(time=month+" "+day,curDate.getFullYear()!==date.getFullYear()&&(time+=" "+year)):time=hours+":"+minutes+" "+meridiem+" - "+month+" "+day+" "+year,time},window.formatSize=function(bytes,decimals){return void 0===decimals&&(decimals=1),bytes?1024>bytes?bytes+=" bytes":bytes=1048576>bytes?Math.round(bytes/1024).toFixed(decimals)+" kB":1073741824>bytes?(bytes/1048576).toFixed(decimals)+" MB":1099511627776>bytes?(bytes/1073741824).toFixed(decimals)+" GB":(bytes/1099511627776).toFixed(decimals)+" TB":bytes="0 bytes",bytes},window.uuid=function(){for(var uuid="",i=0;8>i;i++)uuid+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return uuid},window.md5=function(string){function RotateLeft(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits}function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;return lX8=2147483648&lX,lY8=2147483648&lY,lX4=1073741824&lX,lY4=1073741824&lY,lResult=(1073741823&lX)+(1073741823&lY),lX4&lY4?2147483648^lResult^lX8^lY8:lX4|lY4?1073741824&lResult?3221225472^lResult^lX8^lY8:1073741824^lResult^lX8^lY8:lResult^lX8^lY8}function F(x,y,z){return x&y|~x&z}function G(x,y,z){return x&z|y&~z}function H(x,y,z){return x^y^z}function I(x,y,z){return y^(x|~z)}function FF(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function GG(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function HH(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function II(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function ConvertToWordArray(string){for(var lWordCount,lMessageLength=string.length,lNumberOfWords_temp1=lMessageLength+8,lNumberOfWords_temp2=(lNumberOfWords_temp1-lNumberOfWords_temp1%64)/64,lNumberOfWords=16*(lNumberOfWords_temp2+1),lWordArray=Array(lNumberOfWords-1),lBytePosition=0,lByteCount=0;lMessageLength>lByteCount;)lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|string.charCodeAt(lByteCount)<<lBytePosition,lByteCount++;return lWordCount=(lByteCount-lByteCount%4)/4,lBytePosition=lByteCount%4*8,lWordArray[lWordCount]=lWordArray[lWordCount]|128<<lBytePosition,lWordArray[lNumberOfWords-2]=lMessageLength<<3,lWordArray[lNumberOfWords-1]=lMessageLength>>>29,lWordArray}function WordToHex(lValue){var lByte,lCount,WordToHexValue="",WordToHexValue_temp="";for(lCount=0;3>=lCount;lCount++)lByte=lValue>>>8*lCount&255,WordToHexValue_temp="0"+lByte.toString(16),WordToHexValue+=WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);return WordToHexValue}function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);128>c?utftext+=String.fromCharCode(c):c>127&&2048>c?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}var k,AA,BB,CC,DD,a,b,c,d,x=Array(),S11=7,S12=12,S13=17,S14=22,S21=5,S22=9,S23=14,S24=20,S31=4,S32=11,S33=16,S34=23,S41=6,S42=10,S43=15,S44=21;for(string=Utf8Encode(string),x=ConvertToWordArray(string),a=1732584193,b=4023233417,c=2562383102,d=271733878,k=0;k<x.length;k+=16)AA=a,BB=b,CC=c,DD=d,a=FF(a,b,c,d,x[k+0],S11,3614090360),d=FF(d,a,b,c,x[k+1],S12,3905402710),c=FF(c,d,a,b,x[k+2],S13,606105819),b=FF(b,c,d,a,x[k+3],S14,3250441966),a=FF(a,b,c,d,x[k+4],S11,4118548399),d=FF(d,a,b,c,x[k+5],S12,1200080426),c=FF(c,d,a,b,x[k+6],S13,2821735955),b=FF(b,c,d,a,x[k+7],S14,4249261313),a=FF(a,b,c,d,x[k+8],S11,1770035416),d=FF(d,a,b,c,x[k+9],S12,2336552879),c=FF(c,d,a,b,x[k+10],S13,4294925233),b=FF(b,c,d,a,x[k+11],S14,2304563134),a=FF(a,b,c,d,x[k+12],S11,1804603682),d=FF(d,a,b,c,x[k+13],S12,4254626195),c=FF(c,d,a,b,x[k+14],S13,2792965006),b=FF(b,c,d,a,x[k+15],S14,1236535329),a=GG(a,b,c,d,x[k+1],S21,4129170786),d=GG(d,a,b,c,x[k+6],S22,3225465664),c=GG(c,d,a,b,x[k+11],S23,643717713),b=GG(b,c,d,a,x[k+0],S24,3921069994),a=GG(a,b,c,d,x[k+5],S21,3593408605),d=GG(d,a,b,c,x[k+10],S22,38016083),c=GG(c,d,a,b,x[k+15],S23,3634488961),b=GG(b,c,d,a,x[k+4],S24,3889429448),a=GG(a,b,c,d,x[k+9],S21,568446438),d=GG(d,a,b,c,x[k+14],S22,3275163606),c=GG(c,d,a,b,x[k+3],S23,4107603335),b=GG(b,c,d,a,x[k+8],S24,1163531501),a=GG(a,b,c,d,x[k+13],S21,2850285829),d=GG(d,a,b,c,x[k+2],S22,4243563512),c=GG(c,d,a,b,x[k+7],S23,1735328473),b=GG(b,c,d,a,x[k+12],S24,2368359562),a=HH(a,b,c,d,x[k+5],S31,4294588738),d=HH(d,a,b,c,x[k+8],S32,2272392833),c=HH(c,d,a,b,x[k+11],S33,1839030562),b=HH(b,c,d,a,x[k+14],S34,4259657740),a=HH(a,b,c,d,x[k+1],S31,2763975236),d=HH(d,a,b,c,x[k+4],S32,1272893353),c=HH(c,d,a,b,x[k+7],S33,4139469664),b=HH(b,c,d,a,x[k+10],S34,3200236656),a=HH(a,b,c,d,x[k+13],S31,681279174),d=HH(d,a,b,c,x[k+0],S32,3936430074),c=HH(c,d,a,b,x[k+3],S33,3572445317),b=HH(b,c,d,a,x[k+6],S34,76029189),a=HH(a,b,c,d,x[k+9],S31,3654602809),d=HH(d,a,b,c,x[k+12],S32,3873151461),c=HH(c,d,a,b,x[k+15],S33,530742520),b=HH(b,c,d,a,x[k+2],S34,3299628645),a=II(a,b,c,d,x[k+0],S41,4096336452),d=II(d,a,b,c,x[k+7],S42,1126891415),c=II(c,d,a,b,x[k+14],S43,2878612391),b=II(b,c,d,a,x[k+5],S44,4237533241),a=II(a,b,c,d,x[k+12],S41,1700485571),d=II(d,a,b,c,x[k+3],S42,2399980690),c=II(c,d,a,b,x[k+10],S43,4293915773),b=II(b,c,d,a,x[k+1],S44,2240044497),a=II(a,b,c,d,x[k+8],S41,1873313359),d=II(d,a,b,c,x[k+15],S42,4264355552),c=II(c,d,a,b,x[k+6],S43,2734768916),b=II(b,c,d,a,x[k+13],S44,1309151649),a=II(a,b,c,d,x[k+4],S41,4149444226),d=II(d,a,b,c,x[k+11],S42,3174756917),c=II(c,d,a,b,x[k+2],S43,718787259),b=II(b,c,d,a,x[k+9],S44,3951481745),a=AddUnsigned(a,AA),b=AddUnsigned(b,BB),c=AddUnsigned(c,CC),d=AddUnsigned(d,DD);var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase()},$.getCachedScript=function(url,options){return options=$.extend(options||{},{dataType:"script",cache:!0,url:url}),$.ajax(options)};var append=$.fn.append;$.fn.append=function(){if("alerts-container"===this[0].className){var len=$(this).children().length;if(len>2)for(var children=$(this).children(),i=0;len-2>i;i++)$(children[i]).find(".close").click()}return append.apply(this,arguments)},$.fn.roll=function(timeout,complete){var timer,rotate=function(degree){$(this).css("-webkit-transform","rotate("+degree+"deg)"),$(this).css("-moz-transform","rotate("+degree+"deg)"),$(this).css("-ms-transform","rotate("+degree+"deg)"),$(this).css("-o-transform","rotate("+degree+"deg)"),$(this).css("transform","rotate("+degree+"deg)"),timer=setTimeout(function(){degree+=1,rotate(degree)},4)}.bind(this);rotate(0),setTimeout(function(){clearTimeout(timer),$(this).css("-webkit-transform","rotate(0deg)"),$(this).css("-moz-transform","rotate(0deg)"),$(this).css("-ms-transform","rotate(0deg)"),$(this).css("-o-transform","rotate(0deg)"),$(this).css("transform","rotate(0deg)"),complete&&complete()}.bind(this),timeout)},$(document).on("dblclick mousedown",".no-select",!1),window.authenticated=!0;var init=function(){window.events=new EventCollection,window.events.start();var headerView=new HeaderView;$("body").prepend(headerView.render().el),mainRouter.initialize()},model=new StateModel;model.fetch({success:function(model){window.subActive=model.get("active"),window.subPlan=model.get("plan"),window.subVer=model.get("version"),window.theme=model.get("theme"),window.superUser=model.get("super_user"),window.sso=model.get("sso"),window.csrfToken=model.get("csrf_token"),window.subActive&&"dark"===window.theme?$("body").addClass("dark"):$("body").removeClass("dark"),window.subActive?"premium"===window.subPlan?$("body").addClass("premium"):"enterprise"===window.subPlan?$("body").addClass("enterprise"):"enterprise_plus"===window.subPlan&&$("body").addClass("enterprise-plus"):"premium"===window.subPlan?$("body").addClass("premium-license"):"enterprise"===window.subPlan?$("body").addClass("enterprise-license"):"enterprise-plus"===window.subPlan&&$("body").addClass("enterprise-plus-license"),window.superUser?$("body").addClass("super-user"):$("body").removeClass("super-user"),init()},error:function(){init()}})}),define("main",function(){});